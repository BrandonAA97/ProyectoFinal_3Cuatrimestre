(self.webpackChunkSF_Replay_Sport_Frontend=self.webpackChunkSF_Replay_Sport_Frontend||[]).push([[179],{166:(ze,Oe,ve)=>{"use strict";function q(t){return"function"==typeof t}function me(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const W=me(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function ke(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class K{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(q(r))try{r()}catch(s){e=s instanceof W?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Se(s)}catch(o){e=e??[],o instanceof W?e=[...e,...o.errors]:e.push(o)}}if(e)throw new W(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Se(e);else{if(e instanceof K){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ke(n,e)}remove(e){const{_finalizers:n}=this;n&&ke(n,e),e instanceof K&&e._removeParent(this)}}K.EMPTY=(()=>{const t=new K;return t.closed=!0,t})();const J=K.EMPTY;function Ee(t){return t instanceof K||t&&"closed"in t&&q(t.remove)&&q(t.add)&&q(t.unsubscribe)}function Se(t){q(t)?t():t.unsubscribe()}const _e={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},pe={setTimeout(t,e,...n){const{delegate:r}=pe;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=pe;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ct(t){pe.setTimeout(()=>{const{onUnhandledError:e}=_e;if(!e)throw t;e(t)})}function re(){}const $e=cn("C",void 0,void 0);function cn(t,e,n){return{kind:t,value:e,error:n}}let Et=null;function se(t){if(_e.useDeprecatedSynchronousErrorHandling){const e=!Et;if(e&&(Et={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Et;if(Et=null,n)throw r}}else t()}class Pe extends K{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ee(e)&&e.add(this)):this.destination=U}static create(e,n,r){return new ut(e,n,r)}next(e){this.isStopped?I(function Nt(t){return cn("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?I(function qe(t){return cn("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?I($e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ze=Function.prototype.bind;function ge(t,e){return Ze.call(t,e)}class mt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ue(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ue(r)}else Ue(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ue(n)}}}class ut extends Pe{constructor(e,n,r){let i;if(super(),q(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&_e.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ge(e.next,s),error:e.error&&ge(e.error,s),complete:e.complete&&ge(e.complete,s)}):i=e}this.destination=new mt(i)}}function Ue(t){_e.useDeprecatedSynchronousErrorHandling?function ye(t){_e.useDeprecatedSynchronousErrorHandling&&Et&&(Et.errorThrown=!0,Et.error=t)}(t):ct(t)}function I(t,e){const{onStoppedNotification:n}=_e;n&&pe.setTimeout(()=>n(t,e))}const U={closed:!0,next:re,error:function w(t){throw t},complete:re},ee="function"==typeof Symbol&&Symbol.observable||"@@observable";function Y(t){return t}function le(t){return 0===t.length?Y:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let oe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function te(t){return t&&t instanceof Pe||function ce(t){return t&&q(t.next)&&q(t.error)&&q(t.complete)}(t)&&Ee(t)}(n)?n:new ut(n,r,i);return se(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=ne(r))((i,s)=>{const o=new ut({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[ee](){return this}pipe(...n){return le(n)(this)}toPromise(n){return new(n=ne(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function ne(t){var e;return null!==(e=t??_e.Promise)&&void 0!==e?e:Promise}const ae=me(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let xe=(()=>{class t extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new dt(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ae}next(n){se(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){se(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){se(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?J:(this.currentObservers=null,s.push(n),new K(()=>{this.currentObservers=null,ke(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new oe;return n.source=this,n}}return t.create=(e,n)=>new dt(e,n),t})();class dt extends xe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:J}}function vt(t){return q(t?.lift)}function be(t){return e=>{if(vt(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ce(t,e,n,r,i){return new Dn(t,e,n,r,i)}class Dn extends Pe{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Je(t,e){return be((n,r)=>{let i=0;n.subscribe(Ce(r,s=>{r.next(t.call(e,s,i++))}))})}function ki(t){return this instanceof ki?(this.v=t,this):new ki(t)}function Eo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function rr(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}(a,u,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const So=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Ta(t){return q(t?.then)}function vl(t){return q(t[ee])}function _l(t){return Symbol.asyncIterator&&q(t?.[Symbol.asyncIterator])}function bl(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const fs=function Tl(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Cl(t){return q(t?.[fs])}function Ca(t){return function $d(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(v){r[v]&&(i[v]=function(b){return new Promise(function(_,E){s.push([v,b,_,E])>1||a(v,b)})})}function a(v,b){try{!function u(v){v.value instanceof ki?Promise.resolve(v.value.v).then(l,d):g(s[0][2],v)}(r[v](b))}catch(_){g(s[0][3],_)}}function l(v){a("next",v)}function d(v){a("throw",v)}function g(v,b){v(b),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield ki(n.read());if(i)return yield ki(void 0);yield yield ki(r)}}finally{n.releaseLock()}})}function El(t){return q(t?.getReader)}function Tr(t){if(t instanceof oe)return t;if(null!=t){if(vl(t))return function T(t){return new oe(e=>{const n=t[ee]();if(q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(So(t))return function C(t){return new oe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Ta(t))return function N(t){return new oe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ct)})}(t);if(_l(t))return de(t);if(Cl(t))return function j(t){return new oe(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(El(t))return function Ge(t){return de(Ca(t))}(t)}throw bl(t)}function de(t){return new oe(e=>{(function Ft(t,e){var n,r,i,s;return function Oi(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(g){o(g)}}function u(d){try{l(r.throw(d))}catch(g){o(g)}}function l(d){d.done?s(d.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(d.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Eo(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Jt(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function At(t,e,n=1/0){return q(e)?At((r,i)=>Je((s,o)=>e(r,s,i,o))(Tr(t(r,i))),n):("number"==typeof e&&(n=e),be((r,i)=>function di(t,e,n,r,i,s,o,a){const u=[];let l=0,d=0,g=!1;const v=()=>{g&&!u.length&&!l&&e.complete()},b=E=>l<r?_(E):u.push(E),_=E=>{s&&e.next(E),l++;let A=!1;Tr(n(E,d++)).subscribe(Ce(e,P=>{i?.(P),s?b(P):e.next(P)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){const P=u.shift();o?Jt(e,o,()=>_(P)):_(P)}v()}catch(P){e.error(P)}}))};return t.subscribe(Ce(e,b,()=>{g=!0,v()})),()=>{a?.()}}(r,i,t,n)))}function Wn(t=1/0){return At(Y,t)}const Pn=new oe(t=>t.complete());function hi(t){return t[t.length-1]}function qs(t){return q(hi(t))?t.pop():void 0}function hn(t){return function Xr(t){return t&&q(t.schedule)}(hi(t))?t.pop():void 0}function gs(t,e=0){return be((n,r)=>{n.subscribe(Ce(r,i=>Jt(r,t,()=>r.next(i),e),()=>Jt(r,t,()=>r.complete(),e),i=>Jt(r,t,()=>r.error(i),e)))})}function Dl(t,e=0){return be((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function dT(t,e){if(!t)throw new Error("Iterable cannot be null");return new oe(n=>{Jt(n,e,()=>{const r=t[Symbol.asyncIterator]();Jt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function xn(t,e){return e?function sN(t,e){if(null!=t){if(vl(t))return function eN(t,e){return Tr(t).pipe(Dl(e),gs(e))}(t,e);if(So(t))return function nN(t,e){return new oe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Ta(t))return function tN(t,e){return Tr(t).pipe(Dl(e),gs(e))}(t,e);if(_l(t))return dT(t,e);if(Cl(t))return function rN(t,e){return new oe(n=>{let r;return Jt(n,e,()=>{r=t[fs](),Jt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}(t,e);if(El(t))return function iN(t,e){return dT(Ca(t),e)}(t,e)}throw bl(t)}(t,e):Tr(t)}class Kr extends xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function We(...t){return xn(t,hn(t))}function hT(t={}){const{connector:e=(()=>new xe),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,l=0,d=!1,g=!1;const v=()=>{a?.unsubscribe(),a=void 0},b=()=>{v(),o=u=void 0,d=g=!1},_=()=>{const E=o;b(),E?.unsubscribe()};return be((E,A)=>{l++,!g&&!d&&v();const P=u=u??e();A.add(()=>{l--,0===l&&!g&&!d&&(a=qg(_,i))}),P.subscribe(A),!o&&l>0&&(o=new ut({next:x=>P.next(x),error:x=>{g=!0,v(),a=qg(b,n,x),P.error(x)},complete:()=>{d=!0,v(),a=qg(b,r),P.complete()}}),Tr(E).subscribe(o))})(s)}}function qg(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new ut({next:()=>{r.unsubscribe(),t()}});return Tr(e(...n)).subscribe(r)}function fi(t,e){return be((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(Ce(r,u=>{i?.unsubscribe();let l=0;const d=s++;Tr(t(u,d)).subscribe(i=Ce(r,g=>r.next(e?e(u,g,d,l++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function uN(t,e){return t===e}function It(t){for(let e in t)if(t[e]===It)return e;throw Error("Could not find renamed property on target object.")}function Xd(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function An(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(An).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function zg(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const lN=It({__forward_ref__:It});function jt(t){return t.__forward_ref__=jt,t.toString=function(){return An(this())},t}function Ye(t){return Gg(t)?t():t}function Gg(t){return"function"==typeof t&&t.hasOwnProperty(lN)&&t.__forward_ref__===jt}function Wg(t){return t&&!!t.\u0275providers}const fT="https://g.co/ng/security#xss";class Q extends Error{constructor(e,n){super(function Kd(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function tt(t){return"string"==typeof t?t:null==t?"":String(t)}function Xg(t,e){throw new Q(-201,!1)}function Yr(t,e){null==t&&function Xe(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Re(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Qr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Yd(t){return pT(t,Zd)||pT(t,gT)}function pT(t,e){return t.hasOwnProperty(e)?t[e]:null}function Qd(t){return t&&(t.hasOwnProperty(Kg)||t.hasOwnProperty(yN))?t[Kg]:null}const Zd=It({\u0275prov:It}),Kg=It({\u0275inj:It}),gT=It({ngInjectableDef:It}),yN=It({ngInjectorDef:It});var pt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(pt||{});let Yg;function Cr(t){const e=Yg;return Yg=t,e}function yT(t,e,n){const r=Yd(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&pt.Optional?null:void 0!==e?e:void Xg(An(t))}const $t=globalThis;class Me{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Re({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Sl={},tm="__NG_DI_FLAG__",Jd="ngTempTokenPath",bN=/\n/gm,_T="__source";let Ea;function zs(t){const e=Ea;return Ea=t,e}function EN(t,e=pt.Default){if(void 0===Ea)throw new Q(-203,!1);return null===Ea?yT(t,void 0,e):Ea.get(t,e&pt.Optional?null:void 0,e)}function Ne(t,e=pt.Default){return(function mT(){return Yg}()||EN)(Ye(t),e)}function Ae(t,e=pt.Default){return Ne(t,eh(e))}function eh(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function nm(t){const e=[];for(let n=0;n<t.length;n++){const r=Ye(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Q(900,!1);let i,s=pt.Default;for(let o=0;o<r.length;o++){const a=r[o],u=DN(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(Ne(i,s))}else e.push(Ne(r))}return e}function wl(t,e){return t[tm]=e,t.prototype[tm]=e,t}function DN(t){return t[tm]}function ms(t){return{toString:t}.toString()}var th=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(th||{}),pi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(pi||{});const Pi={},Dt=[],nh=It({\u0275cmp:It}),rm=It({\u0275dir:It}),im=It({\u0275pipe:It}),TT=It({\u0275mod:It}),ys=It({\u0275fac:It}),xl=It({__NG_ELEMENT_ID__:It}),CT=It({__NG_ENV_ID__:It});function ET(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function sm(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];ST(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function DT(t){return 3===t||4===t||6===t}function ST(t){return 64===t.charCodeAt(0)}function Al(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||wT(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function wT(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const xT="ng-template";function xN(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==ET(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function AT(t){return 4===t.type&&t.value!==xT}function AN(t,e,n){return e===(4!==t.type||n?t.value:xT)}function IN(t,e,n){let r=4;const i=t.attrs||[],s=function kN(t){for(let e=0;e<t.length;e++)if(DT(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!AN(t,u,n)||""===u&&1===e.length){if(gi(r))return!1;o=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!xN(t.attrs,l,n)){if(gi(r))return!1;o=!0}continue}const g=MN(8&r?"class":u,i,AT(t),n);if(-1===g){if(gi(r))return!1;o=!0;continue}if(""!==l){let v;v=g>s?"":i[g+1].toLowerCase();const b=8&r?v:null;if(b&&-1!==ET(b,l,0)||2&r&&l!==v){if(gi(r))return!1;o=!0}}}}else{if(!o&&!gi(r)&&!gi(u))return!1;if(o&&gi(u))continue;o=!1,r=u|1&r}}return gi(r)||o}function gi(t){return 0==(1&t)}function MN(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function PN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function IT(t,e,n=!1){for(let r=0;r<e.length;r++)if(IN(t,e[r],n))return!0;return!1}function MT(t,e){return t?":not("+e.trim()+")":e}function RN(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!gi(o)&&(e+=MT(s,i),i=""),r=o,s=s||!gi(r);n++}return""!==i&&(e+=MT(s,i)),e}function ir(t){return ms(()=>{const e=kT(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===th.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||pi.Emulated,styles:t.styles||Dt,_:null,schemas:t.schemas||null,tView:null,id:""};PT(n);const r=t.dependencies;return n.directiveDefs=rh(r,!1),n.pipeDefs=rh(r,!0),n.id=function HN(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function UN(t){return Tt(t)||Un(t)}function VN(t){return null!==t}function mi(t){return ms(()=>({type:t.type,bootstrap:t.bootstrap||Dt,declarations:t.declarations||Dt,imports:t.imports||Dt,exports:t.exports||Dt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function OT(t,e){if(null==t)return Pi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function Qe(t){return ms(()=>{const e=kT(t);return PT(e),e})}function sr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Tt(t){return t[nh]||null}function Un(t){return t[rm]||null}function or(t){return t[im]||null}function Nr(t,e){const n=t[TT]||null;if(!n&&!0===e)throw new Error(`Type ${An(t)} does not have '\u0275mod' property.`);return n}function kT(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Pi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Dt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:OT(t.inputs,e),outputs:OT(t.outputs)}}function PT(t){t.features?.forEach(e=>e(t))}function rh(t,e){if(!t)return null;const n=e?or:UN;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(VN)}const fn=0,De=1,ot=2,en=3,yi=4,Il=5,Xn=6,Sa=7,vn=8,Gs=9,wa=10,nt=11,Ml=12,NT=13,xa=14,_n=15,Ol=16,Aa=17,Ni=18,kl=19,RT=20,Ws=21,vs=22,Pl=23,Nl=24,gt=25,om=1,LT=2,Ri=7,Ia=9,Vn=11;function Er(t){return Array.isArray(t)&&"object"==typeof t[om]}function ar(t){return Array.isArray(t)&&!0===t[om]}function am(t){return 0!=(4&t.flags)}function xo(t){return t.componentOffset>-1}function sh(t){return 1==(1&t.flags)}function vi(t){return!!t.template}function um(t){return 0!=(512&t[ot])}function Ao(t,e){return t.hasOwnProperty(ys)?t[ys]:null}let jn=null,oh=!1;function Zr(t){const e=jn;return jn=t,e}const UT={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function jT(t){if(!Ll(t)||t.dirty){if(!t.producerMustRecompute(t)&&!qT(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function HT(t){t.dirty=!0,function $T(t){if(void 0===t.liveConsumerNode)return;const e=oh;oh=!0;try{for(const n of t.liveConsumerNode)n.dirty||HT(n)}finally{oh=e}}(t),t.consumerMarkedDirty?.(t)}function cm(t){return t&&(t.nextProducerIndex=0),Zr(t)}function dm(t,e){if(Zr(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Ll(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)ah(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function qT(t){Ma(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(jT(n),r!==n.version))return!0}return!1}function zT(t){if(Ma(t),Ll(t))for(let e=0;e<t.producerNode.length;e++)ah(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ah(t,e){if(function WT(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Ma(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)ah(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Ma(i),i.producerIndexOfThis[r]=e}}function Ll(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ma(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let XT=null;const ZT=()=>{},nR=(()=>({...UT,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:ZT}))();class rR{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Jr(){return JT}function JT(t){return t.type.prototype.ngOnChanges&&(t.setInput=sR),iR}function iR(){const t=tC(this),e=t?.current;if(e){const n=t.previous;if(n===Pi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function sR(t,e,n,r){const i=this.declaredInputs[n],s=tC(t)||function oR(t,e){return t[eC]=e}(t,{previous:Pi,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new rR(u&&u.currentValue,e,a===Pi),t[r]=e}Jr.ngInherit=!0;const eC="__ngSimpleChanges__";function tC(t){return t[eC]||null}const Li=function(t,e,n){};function Ht(t){for(;Array.isArray(t);)t=t[fn];return t}function uh(t,e){return Ht(e[t])}function Dr(t,e){return Ht(e[t.index])}function iC(t,e){return t.data[e]}function Oa(t,e){return t[e]}function Rr(t,e){const n=e[t];return Er(n)?n:n[fn]}function Ks(t,e){return null==e?null:t[e]}function sC(t){t[Aa]=0}function hR(t){1024&t[ot]||(t[ot]|=1024,aC(t,1))}function oC(t){1024&t[ot]&&(t[ot]&=-1025,aC(t,-1))}function aC(t,e){let n=t[en];if(null===n)return;n[Il]+=e;let r=n;for(n=n[en];null!==n&&(1===e&&1===r[Il]||-1===e&&0===r[Il]);)n[Il]+=e,r=n,n=n[en]}const Ke={lFrame:vC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function cC(){return Ke.bindingsEnabled}function X(){return Ke.lFrame.lView}function Ct(){return Ke.lFrame.tView}function Fi(t){return Ke.lFrame.contextLView=t,t[vn]}function Bi(t){return Ke.lFrame.contextLView=null,t}function $n(){let t=dC();for(;null!==t&&64===t.type;)t=t.parent;return t}function dC(){return Ke.lFrame.currentTNode}function Ui(t,e){const n=Ke.lFrame;n.currentTNode=t,n.isParent=e}function mm(){return Ke.lFrame.isParent}function ur(){const t=Ke.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Pa(){return Ke.lFrame.bindingIndex++}function DR(t,e){const n=Ke.lFrame;n.bindingIndex=n.bindingRootIndex=t,vm(e)}function vm(t){Ke.lFrame.currentDirectiveIndex=t}function bm(t){Ke.lFrame.currentQueryIndex=t}function wR(t){const e=t[De];return 2===e.type?e.declTNode:1===e.type?t[Xn]:null}function mC(t,e,n){if(n&pt.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&pt.Host||(i=wR(s),null===i||(s=s[xa],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Ke.lFrame=yC();return r.currentTNode=e,r.lView=t,!0}function Tm(t){const e=yC(),n=t[De];Ke.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function yC(){const t=Ke.lFrame,e=null===t?null:t.child;return null===e?vC(t):e}function vC(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function _C(){const t=Ke.lFrame;return Ke.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const bC=_C;function Cm(){const t=_C();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function lr(){return Ke.lFrame.selectedIndex}function Io(t){Ke.lFrame.selectedIndex=t}function an(){const t=Ke.lFrame;return iC(t.tView,t.selectedIndex)}let CC=!0;function lh(){return CC}function Ys(t){CC=t}function ch(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=d&&(t.destroyHooks??=[]).push(n,d)}}function dh(t,e,n){EC(t,e,3,n)}function hh(t,e,n,r){(3&t[ot])===n&&EC(t,e,n,r)}function Em(t,e){let n=t[ot];(3&n)===e&&(n&=8191,n+=1,t[ot]=n)}function EC(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Aa]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Aa]+=65536),(a<s||-1==s)&&(NR(t,n,e,u),t[Aa]=(4294901760&t[Aa])+u+2),u++}function DC(t,e){Li(4,t,e);const n=Zr(null);try{e.call(t)}finally{Zr(n),Li(5,t,e)}}function NR(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[ot]>>13<t[Aa]>>16&&(3&t[ot])===e&&(t[ot]+=8192,DC(a,s)):DC(a,s)}const Na=-1;class Bl{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Sm(t){return t!==Na}function Ul(t){return 32767&t}function Vl(t,e){let n=function BR(t){return t>>16}(t),r=e;for(;n>0;)r=r[xa],n--;return r}let wm=!0;function fh(t){const e=wm;return wm=t,e}const SC=255,wC=5;let UR=0;const Vi={};function ph(t,e){const n=xC(t,e);if(-1!==n)return n;const r=e[De];r.firstCreatePass&&(t.injectorIndex=e.length,xm(r.data,t),xm(e,null),xm(r.blueprint,null));const i=gh(t,e),s=t.injectorIndex;if(Sm(i)){const o=Ul(i),a=Vl(i,e),u=a[De].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function xm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function xC(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function gh(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=NC(i),null===r)return Na;if(n++,i=i[xa],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Na}function Am(t,e,n){!function VR(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(xl)&&(r=n[xl]),null==r&&(r=n[xl]=UR++);const i=r&SC;e.data[t+(i>>wC)]|=1<<i}(t,e,n)}function AC(t,e,n){if(n&pt.Optional||void 0!==t)return t;Xg()}function IC(t,e,n,r){if(n&pt.Optional&&void 0===r&&(r=null),!(n&(pt.Self|pt.Host))){const i=t[Gs],s=Cr(void 0);try{return i?i.get(e,r,n&pt.Optional):yT(e,r,n&pt.Optional)}finally{Cr(s)}}return AC(r,0,n)}function MC(t,e,n,r=pt.Default,i){if(null!==t){if(2048&e[ot]&&!(r&pt.Self)){const o=function GR(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[ot]&&!(512&o[ot]);){const a=OC(s,o,n,r|pt.Self,Vi);if(a!==Vi)return a;let u=s.parent;if(!u){const l=o[RT];if(l){const d=l.get(n,Vi,r);if(d!==Vi)return d}u=NC(o),o=o[xa]}s=u}return i}(t,e,n,r,Vi);if(o!==Vi)return o}const s=OC(t,e,n,r,Vi);if(s!==Vi)return s}return IC(e,n,r,i)}function OC(t,e,n,r,i){const s=function HR(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(xl)?t[xl]:void 0;return"number"==typeof e?e>=0?e&SC:zR:e}(n);if("function"==typeof s){if(!mC(e,t,r))return r&pt.Host?AC(i,0,r):IC(e,n,r,i);try{let o;if(o=s(r),null!=o||r&pt.Optional)return o;Xg()}finally{bC()}}else if("number"==typeof s){let o=null,a=xC(t,e),u=Na,l=r&pt.Host?e[_n][Xn]:null;for((-1===a||r&pt.SkipSelf)&&(u=-1===a?gh(t,e):e[a+8],u!==Na&&PC(r,!1)?(o=e[De],a=Ul(u),e=Vl(u,e)):a=-1);-1!==a;){const d=e[De];if(kC(s,a,d.data)){const g=$R(a,e,n,o,r,l);if(g!==Vi)return g}u=e[a+8],u!==Na&&PC(r,e[De].data[a+8]===l)&&kC(s,a,e)?(o=d,a=Ul(u),e=Vl(u,e)):a=-1}}return i}function $R(t,e,n,r,i,s){const o=e[De],a=o.data[t+8],d=function mh(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,d=s>>20,v=i?a+d:t.directiveEnd;for(let b=r?a:a+d;b<v;b++){const _=o[b];if(b<u&&n===_||b>=u&&_.type===n)return b}if(i){const b=o[u];if(b&&vi(b)&&b.type===n)return u}return null}(a,o,n,null==r?xo(a)&&wm:r!=o&&0!=(3&a.type),i&pt.Host&&s===a);return null!==d?Mo(e,o,d,a):Vi}function Mo(t,e,n,r){let i=t[n];const s=e.data;if(function RR(t){return t instanceof Bl}(i)){const o=i;o.resolving&&function cN(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Q(-200,`Circular dependency in DI detected for ${t}${n}`)}(function xt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():tt(t)}(s[n]));const a=fh(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Cr(o.injectImpl):null;mC(t,r,pt.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function PR(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=JT(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==l&&Cr(l),fh(a),o.resolving=!1,bC()}}return i}function kC(t,e,n){return!!(n[e+(t>>wC)]&1<<t)}function PC(t,e){return!(t&pt.Self||t&pt.Host&&e)}class cr{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return MC(this._tNode,this._lView,e,eh(r),n)}}function zR(){return new cr($n(),X())}function Hn(t){return ms(()=>{const e=t.prototype.constructor,n=e[ys]||Im(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[ys]||Im(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Im(t){return Gg(t)?()=>{const e=Im(Ye(t));return e&&e()}:Ao(t)}function NC(t){const e=t[De],n=e.type;return 2===n?e.declTNode:1===n?t[Xn]:null}const La="__parameters__";function Ba(t,e,n){return ms(()=>{const r=function Mm(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,d){const g=u.hasOwnProperty(La)?u[La]:Object.defineProperty(u,La,{value:[]})[La];for(;g.length<=d;)g.push(null);return(g[d]=g[d]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Va(t,e){t.forEach(n=>Array.isArray(n)?Va(n,e):e(n))}function LC(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function vh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Lr(t,e,n){let r=ja(t,e);return r>=0?t[1|r]=n:(r=~r,function JR(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Om(t,e){const n=ja(t,e);if(n>=0)return t[1|n]}function ja(t,e){return function FC(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const bh=wl(Ba("Optional"),8),Th=wl(Ba("SkipSelf"),4);function wh(t){return 128==(128&t.flags)}var Qs=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Qs||{});const Lm=new Map;let EL=0;const Bm="__ngContext__";function Kn(t,e){Er(e)?(t[Bm]=e[kl],function SL(t){Lm.set(t[kl],t)}(e)):t[Bm]=e}let Um;function Vm(t,e){return Um(t,e)}function Gl(t){const e=t[en];return ar(e)?e[en]:e}function rE(t){return sE(t[Ml])}function iE(t){return sE(t[yi])}function sE(t){for(;null!==t&&!ar(t);)t=t[yi];return t}function qa(t,e,n,r,i){if(null!=r){let s,o=!1;ar(r)?s=r:Er(r)&&(o=!0,r=r[fn]);const a=Ht(r);0===t&&null!==n?null==i?lE(e,n,a):Oo(e,n,a,i||null,!0):1===t&&null!==n?Oo(e,n,a,i||null,!0):2===t?function Ph(t,e,n){const r=Oh(t,e);r&&function qL(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function WL(t,e,n,r,i){const s=n[Ri];s!==Ht(n)&&qa(e,t,r,s,i);for(let a=Vn;a<n.length;a++){const u=n[a];Xl(u[De],u,t,e,r,s)}}(e,t,s,n,i)}}function Ih(t,e,n){return t.createElement(e,n)}function aE(t,e){const n=t[Ia],r=n.indexOf(e);oC(e),n.splice(r,1)}function Mh(t,e){if(t.length<=Vn)return;const n=Vn+e,r=t[n];if(r){const i=r[Ol];null!==i&&i!==t&&aE(i,r),e>0&&(t[n-1][yi]=r[yi]);const s=vh(t,Vn+e);!function LL(t,e){Xl(t,e,e[nt],2,null,null),e[fn]=null,e[Xn]=null}(r[De],r);const o=s[Ni];null!==o&&o.detachView(s[De]),r[en]=null,r[yi]=null,r[ot]&=-129}return r}function $m(t,e){if(!(256&e[ot])){const n=e[nt];e[Pl]&&zT(e[Pl]),e[Nl]&&zT(e[Nl]),n.destroyNode&&Xl(t,e,n,3,null,null),function UL(t){let e=t[Ml];if(!e)return Hm(t[De],t);for(;e;){let n=null;if(Er(e))n=e[Ml];else{const r=e[Vn];r&&(n=r)}if(!n){for(;e&&!e[yi]&&e!==t;)Er(e)&&Hm(e[De],e),e=e[en];null===e&&(e=t),Er(e)&&Hm(e[De],e),n=e&&e[yi]}e=n}}(e)}}function Hm(t,e){if(!(256&e[ot])){e[ot]&=-129,e[ot]|=256,function HL(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Bl)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Li(4,a,u);try{u.call(a)}finally{Li(5,a,u)}}else{Li(4,i,s);try{s.call(i)}finally{Li(5,i,s)}}}}}(t,e),function $L(t,e){const n=t.cleanup,r=e[Sa];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[Sa]=null);const i=e[Ws];if(null!==i){e[Ws]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[De].type&&e[nt].destroy();const n=e[Ol];if(null!==n&&ar(e[en])){n!==e[en]&&aE(n,e);const r=e[Ni];null!==r&&r.detachView(t)}!function wL(t){Lm.delete(t[kl])}(e)}}function qm(t,e,n){return function uE(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[fn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===pi.None||s===pi.Emulated)return null}return Dr(r,n)}}(t,e.parent,n)}function Oo(t,e,n,r,i){t.insertBefore(e,n,r,i)}function lE(t,e,n){t.appendChild(e,n)}function cE(t,e,n,r,i){null!==r?Oo(t,e,n,r,i):lE(t,e,n)}function Oh(t,e){return t.parentNode(e)}let zm,Km,Rh,fE=function hE(t,e,n){return 40&t.type?Dr(t,n):null};function kh(t,e,n,r){const i=qm(t,r,e),s=e[nt],a=function dE(t,e,n){return fE(t,e,n)}(r.parent||e[Xn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)cE(s,i,n[u],a,!1);else cE(s,i,n,a,!1);void 0!==zm&&zm(s,r,e,n,i)}function Wl(t,e){if(null!==e){const n=e.type;if(3&n)return Dr(e,t);if(4&n)return Gm(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Wl(t,r);{const i=t[e.index];return ar(i)?Gm(-1,i):Ht(i)}}if(32&n)return Vm(e,t)()||Ht(t[e.index]);{const r=gE(t,e);return null!==r?Array.isArray(r)?r[0]:Wl(Gl(t[_n]),r):Wl(t,e.next)}}return null}function gE(t,e){return null!==e?t[_n][Xn].projection[e.projection]:null}function Gm(t,e){const n=Vn+t+1;if(n<e.length){const r=e[n],i=r[De].firstChild;if(null!==i)return Wl(r,i)}return e[Ri]}function Wm(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Kn(Ht(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)Wm(t,e,n.child,r,i,s,!1),qa(e,t,i,a,s);else if(32&u){const l=Vm(n,r);let d;for(;d=l();)qa(e,t,i,d,s);qa(e,t,i,a,s)}else 16&u?yE(t,e,r,n,i,s):qa(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Xl(t,e,n,r,i,s){Wm(n,r,t.firstChild,e,i,s,!1)}function yE(t,e,n,r,i,s){const o=n[_n],u=o[Xn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)qa(e,t,i,u[l],s);else{let l=u;const d=o[en];wh(r)&&(l.flags|=128),Wm(t,e,l,d,i,s,!0)}}function vE(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function _E(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&sm(t,e,r),null!==i&&vE(t,e,i),null!==s&&function KL(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function CE(t){return function Ym(){if(void 0===Rh&&(Rh=null,$t.trustedTypes))try{Rh=$t.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Rh}()?.createScriptURL(t)||t}class EE{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${fT})`}}function Zs(t){return t instanceof EE?t.changingThisBreaksApplicationSecurity:t}function Kl(t,e){const n=function sF(t){return t instanceof EE&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${fT})`)}return n===e}const lF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Wa=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Wa||{});function ko(t){const e=Ql();return e?e.sanitize(Wa.URL,t)||"":Kl(t,"URL")?Zs(t):function Qm(t){return(t=String(t)).match(lF)?t:"unsafe:"+t}(tt(t))}function ME(t){const e=Ql();if(e)return CE(e.sanitize(Wa.RESOURCE_URL,t)||"");if(Kl(t,"ResourceURL"))return CE(Zs(t));throw new Q(904,!1)}function Ql(){const t=X();return t&&t[wa].sanitizer}const Zl=new Me("ENVIRONMENT_INITIALIZER"),kE=new Me("INJECTOR",-1),PE=new Me("INJECTOR_DEF_TYPES");class t0{get(e,n=Sl){if(n===Sl){const r=new Error(`NullInjectorError: No provider for ${An(e)}!`);throw r.name="NullInjectorError",r}return n}}function CF(...t){return{\u0275providers:NE(0,t),\u0275fromNgModule:!0}}function NE(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return Va(e,o=>{const a=o;Fh(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&RE(i,s),n}function RE(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];r0(i,s=>{e(s,r)})}}function Fh(t,e,n,r){if(!(t=Ye(t)))return!1;let i=null,s=Qd(t);const o=!s&&Tt(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=Qd(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)Fh(l,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{Va(s.imports,d=>{Fh(d,e,n,r)&&(l||=[],l.push(d))})}finally{}void 0!==l&&RE(l,e)}if(!a){const l=Ao(i)||(()=>new i);e({provide:i,useFactory:l,deps:Dt},i),e({provide:PE,useValue:i,multi:!0},i),e({provide:Zl,useValue:()=>Ne(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const l=t;r0(u,d=>{e(d,l)})}}}return i!==t&&void 0!==t.providers}function r0(t,e){for(let n of t)Wg(n)&&(n=n.\u0275providers),Array.isArray(n)?r0(n,e):e(n)}const EF=It({provide:String,useValue:It});function s0(t){return null!==t&&"object"==typeof t&&EF in t}function Po(t){return"function"==typeof t}const o0=new Me("Set Injector scope."),Bh={},SF={};let a0;function Uh(){return void 0===a0&&(a0=new t0),a0}class Fr{}class Xa extends Fr{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,l0(e,o=>this.processProvider(o)),this.records.set(kE,Ka(void 0,this)),i.has("environment")&&this.records.set(Fr,Ka(void 0,this));const s=this.records.get(o0);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(PE.multi,Dt,pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=zs(this),r=Cr(void 0);try{return e()}finally{zs(n),Cr(r)}}get(e,n=Sl,r=pt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(CT))return e[CT](this);r=eh(r);const s=zs(this),o=Cr(void 0);try{if(!(r&pt.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function MF(t){return"function"==typeof t||"object"==typeof t&&t instanceof Me}(e)&&Yd(e);u=l&&this.injectableDefInScope(l)?Ka(u0(e),Bh):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&pt.Self?Uh():this.parent).get(e,n=r&pt.Optional&&n===Sl?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Jd]=a[Jd]||[]).unshift(An(e)),s)throw a;return function SN(t,e,n,r){const i=t[Jd];throw e[_T]&&i.unshift(e[_T]),t.message=function wN(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=An(e);if(Array.isArray(e))i=e.map(An).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):An(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(bN,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Jd]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Cr(o),zs(s)}}resolveInjectorInitializers(){const e=zs(this),n=Cr(void 0);try{const i=this.get(Zl.multi,Dt,pt.Self);for(const s of i)s()}finally{zs(e),Cr(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(An(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){let n=Po(e=Ye(e))?e:Ye(e&&e.provide);const r=function xF(t){return s0(t)?Ka(void 0,t.useValue):Ka(BE(t),Bh)}(e);if(Po(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Ka(void 0,Bh,!0),i.factory=()=>nm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Bh&&(n.value=SF,n.value=n.factory()),"object"==typeof n.value&&n.value&&function IF(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Ye(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function u0(t){const e=Yd(t),n=null!==e?e.factory:Ao(t);if(null!==n)return n;if(t instanceof Me)throw new Q(204,!1);if(t instanceof Function)return function wF(t){const e=t.length;if(e>0)throw function Hl(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new Q(204,!1);const n=function mN(t){return t&&(t[Zd]||t[gT])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Q(204,!1)}function BE(t,e,n){let r;if(Po(t)){const i=Ye(t);return Ao(i)||u0(i)}if(s0(t))r=()=>Ye(t.useValue);else if(function FE(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...nm(t.deps||[]));else if(function LE(t){return!(!t||!t.useExisting)}(t))r=()=>Ne(Ye(t.useExisting));else{const i=Ye(t&&(t.useClass||t.provide));if(!function AF(t){return!!t.deps}(t))return Ao(i)||u0(i);r=()=>new i(...nm(t.deps))}return r}function Ka(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function l0(t,e){for(const n of t)Array.isArray(n)?l0(n,e):n&&Wg(n)?l0(n.\u0275providers,e):e(n)}const Vh=new Me("AppId",{providedIn:"root",factory:()=>OF}),OF="ng",UE=new Me("Platform Initializer"),No=new Me("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),VE=new Me("CSP nonce",{providedIn:"root",factory:()=>function Ga(){if(void 0!==Km)return Km;if(typeof document<"u")return document;throw new Q(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let jE=(t,e,n)=>null;function y0(t,e,n=!1){return jE(t,e,n)}class jF{}class qE{}class HF{resolveComponentFactory(e){throw function $F(t){const e=Error(`No component factory found for ${An(t)}.`);return e.ngComponent=t,e}(e)}}let Gh=(()=>{class t{static#e=this.NULL=new HF}return t})();function qF(){return Za($n(),X())}function Za(t,e){return new Br(Dr(t,e))}let Br=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=qF}return t})();class GE{}let Cs=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function GF(){const t=X(),n=Rr($n().index,t);return(Er(n)?n:t)[nt]}()}return t})(),WF=(()=>{class t{static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:()=>null})}return t})();class tc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const XF=new tc("16.2.12"),b0={};function YE(t,e=null,n=null,r){const i=QE(t,e,n,r);return i.resolveInjectorInitializers(),i}function QE(t,e=null,n=null,r,i=new Set){const s=[n||Dt,CF(t)];return r=r||("object"==typeof t?void 0:An(t)),new Xa(s,e||Uh(),r||null,i)}let Ur=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Sl;static#t=this.NULL=new t0;static create(n,r){if(Array.isArray(n))return YE({name:""},r,n,"");{const i=n.name??"";return YE({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Re({token:t,providedIn:"any",factory:()=>Ne(kE)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function C0(t){return t.ngOriginalError}class Es{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&C0(e);for(;n&&C0(n);)n=C0(n);return n||null}}function D0(t){return e=>{setTimeout(t,void 0,e)}}const pn=class t3 extends xe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=D0(s),i&&(i=D0(i)),o&&(o=D0(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof K&&e.add(a),a}};function JE(...t){}class qt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pn(!1),this.onMicrotaskEmpty=new pn(!1),this.onStable=new pn(!1),this.onError=new pn(!1),typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function n3(){const t="function"==typeof $t.requestAnimationFrame;let e=$t[t?"requestAnimationFrame":"setTimeout"],n=$t[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function s3(t){const e=()=>{!function i3(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call($t,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,w0(t),t.isCheckStableRunning=!0,S0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),w0(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function a3(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return eD(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),tD(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return eD(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),tD(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,w0(t),S0(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qt.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(qt.isInAngularZone())throw new Q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,r3,JE,JE);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const r3={};function S0(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function w0(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function eD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function tD(t){t._nesting--,S0(t)}class o3{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pn,this.onMicrotaskEmpty=new pn,this.onStable=new pn,this.onError=new pn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const nD=new Me("",{providedIn:"root",factory:rD});function rD(){const t=Ae(qt);let e=!0;return function oN(...t){const e=hn(t),n=function Wd(t,e){return"number"==typeof hi(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Tr(r[0]):Wn(n)(xn(r,e)):Pn}(new oe(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new oe(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{qt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{qt.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(hT()))}function Ds(t){return t instanceof Function?t():t}let x0=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:()=>new t})}return t})();function nc(t){for(;t;){t[ot]|=64;const e=Gl(t);if(um(t)&&!e)return t;t=e}return null}const uD=new Me("",{providedIn:"root",factory:()=>!1});let Xh=null;function hD(t,e){return t[e]??gD()}function fD(t,e){const n=gD();n.producerNode?.length&&(t[e]=Xh,n.lView=t,Xh=pD())}const y3={...UT,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{nc(t.lView)},lView:null};function pD(){return Object.create(y3)}function gD(){return Xh??=pD(),Xh}const rt={};function Le(t){mD(Ct(),X(),lr()+t,!1)}function mD(t,e,n,r){if(!r)if(3==(3&e[ot])){const s=t.preOrderCheckHooks;null!==s&&dh(e,s,n)}else{const s=t.preOrderHooks;null!==s&&hh(e,s,0,n)}Io(n)}function z(t,e=pt.Default){const n=X();return null===n?Ne(t,e):MC($n(),n,Ye(t),e)}function Kh(t,e,n,r,i,s,o,a,u,l,d){const g=e.blueprint.slice();return g[fn]=i,g[ot]=140|r,(null!==l||t&&2048&t[ot])&&(g[ot]|=2048),sC(g),g[en]=g[xa]=t,g[vn]=n,g[wa]=o||t&&t[wa],g[nt]=a||t&&t[nt],g[Gs]=u||t&&t[Gs]||null,g[Xn]=s,g[kl]=function DL(){return EL++}(),g[vs]=d,g[RT]=l,g[_n]=2==e.type?t[_n]:g,g}function tu(t,e,n,r,i){let s=t.data[e];if(null===s)s=function A0(t,e,n,r,i){const s=dC(),o=mm(),u=t.data[e]=function S3(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function ka(){return null!==Ke.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function ER(){return Ke.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Fl(){const t=Ke.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ui(s,!0),s}function rc(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function vD(t,e,n,r,i){const s=hD(e,Pl),o=lr(),a=2&r;try{Io(-1),a&&e.length>gt&&mD(t,e,gt,!1),Li(a?2:0,i);const l=a?s:null,d=cm(l);try{null!==l&&(l.dirty=!1),n(r,i)}finally{dm(l,d)}}finally{a&&null===e[Pl]&&fD(e,Pl),Io(o),Li(a?3:1,i)}}function I0(t,e,n){if(am(e)){const r=Zr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Zr(r)}}}function M0(t,e,n){cC()&&(function k3(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;xo(n)&&function U3(t,e,n){const r=Dr(e,t),i=_D(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Yh(t,Kh(t,i,null,o,r,e,null,t[wa].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ph(n,e),Kn(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],l=Mo(e,t,a,n);Kn(l,e),null!==o&&V3(0,a-i,l,u,0,o),vi(u)&&(Rr(n.index,e)[vn]=Mo(e,t,a,n))}}(t,e,n,Dr(n,e)),64==(64&n.flags)&&DD(t,e,n))}function O0(t,e,n=Dr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function _D(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=k0(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function k0(t,e,n,r,i,s,o,a,u,l,d){const g=gt+r,v=g+i,b=function _3(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:rt);return n}(g,v),_="function"==typeof l?l():l;return b[De]={type:t,blueprint:b,template:n,queries:null,viewQuery:a,declTNode:e,data:b.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:_,incompleteFirstPass:!1,ssrId:d}}let bD=t=>null;function TD(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?CD(n,e,i,s):r.hasOwnProperty(i)&&CD(n,e,r[i],s)}return n}function CD(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function P0(t,e,n,r){if(cC()){const i=null===r?null:{"":-1},s=function N3(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(IT(e,o.selectors,!1))if(r||(r=[]),vi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),N0(t,e,a.length)}else r.unshift(o),N0(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&ED(t,e,n,o,i,a),i&&function R3(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new Q(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Al(n.mergedAttrs,n.attrs)}function ED(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Am(ph(n,e),t,r[l].type);!function F3(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let l=0;l<r.length;l++){const d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,u=rc(t,e,r.length,null);for(let l=0;l<r.length;l++){const d=r[l];n.mergedAttrs=Al(n.mergedAttrs,d.hostAttrs),B3(t,n,e,u,d),L3(u,d,i),null!==d.contentQueries&&(n.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=64);const g=d.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function w3(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,l=null;for(let d=e.directiveStart;d<i;d++){const g=s[d],v=n?n.get(g):null,_=v?v.outputs:null;u=TD(g.inputs,d,u,v?v.inputs:null),l=TD(g.outputs,d,l,_);const E=null===u||null===o||AT(e)?null:j3(u,d,o);a.push(E)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(t,n,s)}function DD(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function SR(){return Ke.lFrame.currentDirectiveIndex}();try{Io(s);for(let a=r;a<i;a++){const u=t.data[a],l=e[a];vm(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&P3(u,l)}}finally{Io(-1),vm(o)}}function P3(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function N0(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function L3(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vi(e)&&(n[""]=t)}}function B3(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Ao(i.type)),o=new Bl(s,vi(i),z);t.blueprint[r]=o,n[r]=o,function M3(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function O3(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,rc(t,n,i.hostVars,rt),i)}function ji(t,e,n,r,i,s){const o=Dr(t,e);!function R0(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?tt(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[nt],o,s,t.value,n,r,i)}function V3(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)SD(r,n,o[a++],o[a++],o[a++])}function SD(t,e,n,r,i){const s=Zr(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{Zr(s)}}function j3(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function wD(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function xD(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];bm(n[r]),o.contentQueries(2,e[s],s)}}}function Yh(t,e){return t[Ml]?t[NT][yi]=e:t[Ml]=e,t[NT]=e,e}function L0(t,e,n){bm(0);const r=Zr(null);try{e(t,n)}finally{Zr(r)}}function OD(t,e){const n=t[Gs],r=n?n.get(Es,null):null;r&&r.handleError(e)}function F0(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];SD(t.data[o],e[o],r,a,i)}}function $3(t,e){const n=Rr(e,t),r=n[De];!function H3(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[fn];null!==i&&null===n[vs]&&(n[vs]=y0(i,n[Gs])),B0(r,n,n[vn])}function B0(t,e,n){Tm(e);try{const r=t.viewQuery;null!==r&&L0(1,r,n);const i=t.template;null!==i&&vD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&xD(t,e),t.staticViewQueries&&L0(2,t.viewQuery,n);const s=t.components;null!==s&&function q3(t,e){for(let n=0;n<e.length;n++)$3(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ot]&=-5,Cm()}}let kD=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function tR(t,e,n){const r=Object.create(nR);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>HT(r),run:()=>{if(r.dirty=!1,r.hasRun&&!qT(r))return;r.hasRun=!0;const o=cm(r);try{r.cleanupFn(),r.cleanupFn=ZT,r.fn(i)}finally{dm(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,l=>{this.all.has(l)&&this.queue.set(l,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:()=>new t})}return t})();function Qh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=zg(i,a):2==s&&(r=zg(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ic(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(Ht(s)),ar(s)&&PD(s,r);const o=n.type;if(8&o)ic(t,e,n.child,r);else if(32&o){const a=Vm(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=gE(e,n);if(Array.isArray(a))r.push(...a);else{const u=Gl(e[_n]);ic(u[De],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function PD(t,e){for(let n=Vn;n<t.length;n++){const r=t[n],i=r[De].firstChild;null!==i&&ic(r[De],r,i,e)}t[Ri]!==t[fn]&&e.push(t[Ri])}function Zh(t,e,n,r=!0){const i=e[wa],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{ND(t,e,t.template,n)}catch(u){throw r&&OD(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function ND(t,e,n,r){const i=e[ot];if(256!=(256&i)){e[wa].effectManager?.flush(),Tm(e);try{sC(e),function fC(t){return Ke.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&vD(t,e,n,2,r);const o=3==(3&i);if(o){const l=t.preOrderCheckHooks;null!==l&&dh(e,l,null)}else{const l=t.preOrderHooks;null!==l&&hh(e,l,0,null),Em(e,0)}if(function W3(t){for(let e=rE(t);null!==e;e=iE(e)){if(!e[LT])continue;const n=e[Ia];for(let r=0;r<n.length;r++){hR(n[r])}}}(e),RD(e,2),null!==t.contentQueries&&xD(t,e),o){const l=t.contentCheckHooks;null!==l&&dh(e,l)}else{const l=t.contentHooks;null!==l&&hh(e,l,1),Em(e,1)}!function v3(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=hD(e,Nl);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)Io(~s);else{const o=s,a=n[++i],u=n[++i];DR(a,o),r.dirty=!1;const l=cm(r);try{u(2,e[o])}finally{dm(r,l)}}}}finally{null===e[Nl]&&fD(e,Nl),Io(-1)}}(t,e);const a=t.components;null!==a&&FD(e,a,0);const u=t.viewQuery;if(null!==u&&L0(2,u,r),o){const l=t.viewCheckHooks;null!==l&&dh(e,l)}else{const l=t.viewHooks;null!==l&&hh(e,l,2),Em(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[ot]&=-73,oC(e)}finally{Cm()}}}function RD(t,e){for(let n=rE(t);null!==n;n=iE(n))for(let r=Vn;r<n.length;r++)LD(n[r],e)}function X3(t,e,n){LD(Rr(e,t),n)}function LD(t,e){if(!function cR(t){return 128==(128&t[ot])}(t))return;const n=t[De],r=t[ot];if(80&r&&0===e||1024&r||2===e)ND(n,t,n.template,t[vn]);else if(t[Il]>0){RD(t,1);const i=n.components;null!==i&&FD(t,i,1)}}function FD(t,e,n){for(let r=0;r<e.length;r++)X3(t,e[r],n)}class sc{get rootNodes(){const e=this._lView,n=e[De];return ic(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[vn]}set context(e){this._lView[vn]=e}get destroyed(){return 256==(256&this._lView[ot])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[en];if(ar(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Mh(e,r),vh(n,r))}this._attachedToViewContainer=!1}$m(this._lView[De],this._lView)}onDestroy(e){!function uC(t,e){if(256==(256&t[ot]))throw new Q(911,!1);null===t[Ws]&&(t[Ws]=[]),t[Ws].push(e)}(this._lView,e)}markForCheck(){nc(this._cdRefInjectingView||this._lView)}detach(){this._lView[ot]&=-129}reattach(){this._lView[ot]|=128}detectChanges(){Zh(this._lView[De],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function BL(t,e){Xl(t,e,e[nt],2,null,null)}(this._lView[De],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e}}class K3 extends sc{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Zh(e[De],e,e[vn],!1)}checkNoChanges(){}get context(){return null}}class BD extends Gh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Tt(e);return new oc(n,this.ngModule)}}function UD(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class Q3{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=eh(r);const i=this.injector.get(e,b0,r);return i!==b0||n===b0?i:this.parentInjector.get(e,n,r)}}class oc extends qE{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=UD(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return UD(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function LN(t){return t.map(RN).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Fr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Q3(e,s):e,a=o.get(GE,null);if(null===a)throw new Q(407,!1);const g={rendererFactory:a,sanitizer:o.get(WF,null),effectManager:o.get(kD,null),afterRenderEventManager:o.get(x0,null)},v=a.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",_=r?function b3(t,e,n,r){const s=r.get(uD,!1)||n===pi.ShadowDom,o=t.selectRootElement(e,s);return function T3(t){bD(t)}(o),o}(v,r,this.componentDef.encapsulation,o):Ih(v,b,function Y3(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(b)),P=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let x=null;null!==_&&(x=y0(_,o,!0));const B=k0(0,null,null,1,0,null,null,null,null,null,null),F=Kh(null,B,null,P,null,null,g,v,o,null,x);let R,Z;Tm(F);try{const we=this.componentDef;let st,ft=null;we.findHostDirectiveDefs?(st=[],ft=new Map,we.findHostDirectiveDefs(we,st,ft),st.push(we)):st=[we];const sn=function J3(t,e){const n=t[De],r=gt;return t[r]=e,tu(n,r,2,"#host",null)}(F,_),Ln=function e4(t,e,n,r,i,s,o){const a=i[De];!function t4(t,e,n,r){for(const i of t)e.mergedAttrs=Al(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Qh(e,e.mergedAttrs,!0),null!==n&&_E(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=y0(e,i[Gs]));const l=s.rendererFactory.createRenderer(e,n);let d=16;n.signals?d=4096:n.onPush&&(d=64);const g=Kh(i,_D(n),null,d,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&N0(a,t,r.length-1),Yh(i,g),i[t.index]=g}(sn,_,we,st,F,g,v);Z=iC(B,gt),_&&function r4(t,e,n,r){if(r)sm(t,n,["ng-version",XF.full]);else{const{attrs:i,classes:s}=function FN(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!gi(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&sm(t,n,i),s&&s.length>0&&vE(t,n,s.join(" "))}}(v,we,_,r),void 0!==n&&function i4(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(Z,this.ngContentSelectors,n),R=function n4(t,e,n,r,i,s){const o=$n(),a=i[De],u=Dr(o,i);ED(a,i,o,n,null,r);for(let d=0;d<n.length;d++)Kn(Mo(i,a,o.directiveStart+d,o),i);DD(a,i,o),u&&Kn(u,i);const l=Mo(i,a,o.directiveStart+o.componentOffset,o);if(t[vn]=i[vn]=l,null!==s)for(const d of s)d(l,e);return I0(a,o,t),l}(Ln,we,st,ft,F,[s4]),B0(B,F,null)}finally{Cm()}return new Z3(this.componentType,R,Za(Z,F),F,Z)}}class Z3 extends jF{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new K3(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;F0(s[De],s,i,e,n),this.previousInputValues.set(e,n),nc(Rr(this._tNode.index,s))}}get injector(){return new cr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function s4(){const t=$n();ch(X()[De],t)}function Mt(t){let e=function VD(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(vi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=Jh(t.inputs),o.inputTransforms=Jh(t.inputTransforms),o.declaredInputs=Jh(t.declaredInputs),o.outputs=Jh(t.outputs);const a=i.hostBindings;a&&l4(t,a);const u=i.viewQuery,l=i.contentQueries;if(u&&a4(t,u),l&&u4(t,l),Xd(t.inputs,i.inputs),Xd(t.declaredInputs,i.declaredInputs),Xd(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Xd(o.inputTransforms,i.inputTransforms)),vi(i)&&i.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Mt&&(n=!1)}}e=Object.getPrototypeOf(e)}!function o4(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Al(i.hostAttrs,n=Al(n,i.hostAttrs))}}(r)}function Jh(t){return t===Pi?{}:t===Dt?[]:t}function a4(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function u4(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function l4(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function qD(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function ef(t){return!!function U0(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function $i(t,e,n){return t[e]=n}function Yn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Hi(t,e,n,r){const i=X();return Yn(i,Pa(),e)&&(Ct(),ji(an(),i,t,e,n,r)),Hi}function qi(t,e,n,r,i,s,o,a){const u=X(),l=Ct(),d=t+gt,g=l.firstCreatePass?function N4(t,e,n,r,i,s,o,a,u){const l=e.consts,d=tu(e,t,4,o||null,Ks(l,a));P0(e,n,d,Ks(l,u)),ch(e,d);const g=d.tView=k0(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,d),g.queries=e.queries.embeddedTView(d)),d}(d,l,u,e,n,r,i,s,o):l.data[d];Ui(g,!1);const v=r1(l,u,g,t);lh()&&kh(l,u,v,g),Kn(v,u),Yh(u,u[d]=wD(v,u,v,g)),sh(g)&&M0(l,u,g),null!=o&&O0(u,g,a)}let r1=function i1(t,e,n,r){return Ys(!0),e[nt].createComment("")};function dc(t){return Oa(function CR(){return Ke.lFrame.contextLView}(),gt+t)}function Ve(t,e,n){const r=X();return Yn(r,Pa(),e)&&function Vr(t,e,n,r,i,s,o,a){const u=Dr(e,n);let d,l=e.inputs;!a&&null!=l&&(d=l[r])?(F0(t,n,d,r,i),xo(e)&&function A3(t,e){const n=Rr(e,t);16&n[ot]||(n[ot]|=64)}(n,e.index)):3&e.type&&(r=function x3(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(Ct(),an(),r,t,e,r[nt],n,!1),Ve}function z0(t,e,n,r,i){const o=i?"class":"style";F0(t,n,e.inputs[o],o,r)}function ie(t,e,n,r){const i=X(),s=Ct(),o=gt+t,a=i[nt],u=s.firstCreatePass?function B4(t,e,n,r,i,s){const o=e.consts,u=tu(e,t,2,r,Ks(o,i));return P0(e,n,u,Ks(o,s)),null!==u.attrs&&Qh(u,u.attrs,!1),null!==u.mergedAttrs&&Qh(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],l=s1(s,i,u,a,e,t);i[o]=l;const d=sh(u);return Ui(u,!0),_E(a,l,u),32!=(32&u.flags)&&lh()&&kh(s,i,l,u),0===function pR(){return Ke.lFrame.elementDepthCount}()&&Kn(l,i),function gR(){Ke.lFrame.elementDepthCount++}(),d&&(M0(s,i,u),I0(s,u,i)),null!==r&&O0(i,u),ie}function fe(){let t=$n();mm()?function ym(){Ke.lFrame.isParent=!1}():(t=t.parent,Ui(t,!1));const e=t;(function yR(t){return Ke.skipHydrationRootTNode===t})(e)&&function TR(){Ke.skipHydrationRootTNode=null}(),function mR(){Ke.lFrame.elementDepthCount--}();const n=Ct();return n.firstCreatePass&&(ch(n,t),am(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function LR(t){return 0!=(8&t.flags)}(e)&&z0(n,e,X(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function FR(t){return 0!=(16&t.flags)}(e)&&z0(n,e,X(),e.stylesWithoutHost,!1),fe}function bn(t,e,n,r){return ie(t,e,n,r),fe(),bn}let s1=(t,e,n,r,i,s)=>(Ys(!0),Ih(r,i,function TC(){return Ke.lFrame.currentNamespace}()));function af(){return X()}function hc(t){return!!t&&"function"==typeof t.then}function u1(t){return!!t&&"function"==typeof t.subscribe}function _t(t,e,n,r){const i=X(),s=Ct(),o=$n();return function c1(t,e,n,r,i,s,o){const a=sh(r),l=t.firstCreatePass&&function ID(t){return t.cleanup||(t.cleanup=[])}(t),d=e[vn],g=function AD(t){return t[Sa]||(t[Sa]=[])}(e);let v=!0;if(3&r.type||o){const E=Dr(r,e),A=o?o(E):E,P=g.length,x=o?F=>o(Ht(F[r.index])):r.index;let B=null;if(!o&&a&&(B=function q4(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[Sa],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==B)(B.__ngLastListenerFn__||B).__ngNextListenerFn__=s,B.__ngLastListenerFn__=s,v=!1;else{s=h1(r,e,d,s,!1);const F=n.listen(A,i,s);g.push(s,F),l&&l.push(i,x,P,P+1)}}else s=h1(r,e,d,s,!1);const b=r.outputs;let _;if(v&&null!==b&&(_=b[i])){const E=_.length;if(E)for(let A=0;A<E;A+=2){const R=e[_[A]][_[A+1]].subscribe(s),Z=g.length;g.push(s,R),l&&l.push(i,r.index,Z,-(Z+1))}}}(s,i,i[nt],o,t,e,r),_t}function d1(t,e,n,r){try{return Li(6,e,n),!1!==n(r)}catch(i){return OD(t,i),!1}finally{Li(7,e,n)}}function h1(t,e,n,r,i){return function s(o){if(o===Function)return r;nc(t.componentOffset>-1?Rr(t.index,e):e);let u=d1(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=d1(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function qn(t=1){return function xR(t){return(Ke.lFrame.contextLView=function AR(t,e){for(;t>0;)e=e[xa],t--;return e}(t,Ke.lFrame.contextLView))[vn]}(t)}function uf(t,e){return t<<17|e<<2}function Js(t){return t>>17&32767}function K0(t){return 2|t}function Lo(t){return(131068&t)>>2}function Y0(t,e){return-131069&t|e<<2}function Q0(t){return 1|t}function C1(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?Js(s):Lo(s),u=!1;for(;0!==a&&(!1===u||o);){const d=t[a+1];J4(t[a],e)&&(u=!0,t[a+1]=r?Q0(d):K0(d)),a=r?Js(d):Lo(d)}u&&(t[n+1]=r?K0(s):Q0(s))}function J4(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ja(t,e)>=0}function lf(t,e){return function _i(t,e,n,r){const i=X(),s=Ct(),o=function bs(t){const e=Ke.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function O1(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[lr()],o=function M1(t,e){return e>=t.expandoStartIndex}(t,n);(function R1(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function u8(t,e,n,r){const i=function _m(t){const e=Ke.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=fc(n=Z0(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=Z0(i,t,e,n,r),null===s){let u=function l8(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Lo(r))return t[Js(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=Z0(null,t,e,u[1],r),u=fc(u,e.attrs,r),function c8(t,e,n,r){t[Js(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function d8(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=fc(r,t[s].hostAttrs,n);return fc(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function Q4(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Js(o),u=Lo(o);t[r]=n;let d,l=!1;if(Array.isArray(n)?(d=n[1],(null===d||ja(n,d)>0)&&(l=!0)):d=n,i)if(0!==u){const v=Js(t[a+1]);t[r+1]=uf(v,a),0!==v&&(t[v+1]=Y0(t[v+1],r)),t[a+1]=function K4(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=uf(a,0),0!==a&&(t[a+1]=Y0(t[a+1],r)),a=r;else t[r+1]=uf(u,0),0===a?a=r:t[u+1]=Y0(t[u+1],r),u=r;l&&(t[r+1]=K0(t[r+1])),C1(t,d,r,!0),C1(t,d,r,!1),function Z4(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&ja(s,e)>=0&&(n[r+1]=Q0(n[r+1]))}(e,d,t,r,s),o=uf(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==rt&&Yn(i,o,e)&&function P1(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,l=u[a+1],d=function Y4(t){return 1==(1&t)}(l)?N1(u,e,n,i,Lo(l),o):void 0;cf(d)||(cf(s)||function X4(t){return 2==(2&t)}(l)&&(s=N1(u,null,n,i,a,o)),function XL(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Qs.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Qs.Important),t.setStyle(n,r,i,s))}}(r,o,uh(lr(),n),i,s))}(s,s.data[lr()],i,i[nt],t,i[o+1]=function g8(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=An(Zs(t)))),t}(e,n),r,o)}(t,e,null,!0),lf}function Z0(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=fc(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function fc(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Lr(t,o,!!n||e[++s]))}return void 0===t?null:t}function N1(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],l=Array.isArray(u),d=l?u[1]:u,g=null===d;let v=n[i+1];v===rt&&(v=g?Dt:void 0);let b=g?Om(v,r):d===r?v:void 0;if(l&&!cf(b)&&(b=Om(u,r)),cf(b)&&(a=b,o))return a;const _=t[i+1];i=o?Js(_):Lo(_)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Om(u,r))}return a}function cf(t){return void 0!==t}function je(t,e=""){const n=X(),r=Ct(),i=t+gt,s=r.firstCreatePass?tu(r,i,1,e,null):r.data[i],o=L1(r,n,s,e,t);n[i]=o,lh()&&kh(r,n,o,s),Ui(s,!1)}let L1=(t,e,n,r,i)=>(Ys(!0),function Ah(t,e){return t.createText(e)}(e[nt],r));function Fo(t){return df("",t,""),Fo}function df(t,e,n){const r=X(),i=function ru(t,e,n,r){return Yn(t,Pa(),n)?e+tt(n)+r:rt}(r,t,e,n);return i!==rt&&function Ss(t,e,n){const r=uh(e,t);!function oE(t,e,n){t.setValue(e,n)}(t[nt],r,n)}(r,lr(),i),df}const fu="en-US";let iS=fu;function ty(t,e,n,r,i){if(t=Ye(t),Array.isArray(t))for(let s=0;s<t.length;s++)ty(t[s],e,n,r,i);else{const s=Ct(),o=X(),a=$n();let u=Po(t)?t:Ye(t.provide);const l=BE(t),d=1048575&a.providerIndexes,g=a.directiveStart,v=a.providerIndexes>>20;if(Po(t)||!t.multi){const b=new Bl(l,i,z),_=ry(u,e,i?d:d+v,g);-1===_?(Am(ph(a,o),s,u),ny(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(b),o.push(b)):(n[_]=b,o[_]=b)}else{const b=ry(u,e,d+v,g),_=ry(u,e,d,d+v),A=_>=0&&n[_];if(i&&!A||!i&&!(b>=0&&n[b])){Am(ph(a,o),s,u);const P=function LB(t,e,n,r,i){const s=new Bl(t,n,z);return s.multi=[],s.index=e,s.componentProviders=0,IS(s,i,r&&!n),s}(i?RB:NB,n.length,i,r,l);!i&&A&&(n[_].providerFactory=P),ny(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),o.push(P)}else ny(s,t,b>-1?b:_,IS(n[i?_:b],l,!i&&r));!i&&r&&A&&n[_].componentProviders++}}}function ny(t,e,n,r){const i=Po(e),s=function DF(t){return!!t.useClass}(e);if(i||s){const u=(s?Ye(e.useClass):e).prototype.ngOnDestroy;if(u){const l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const d=l.indexOf(n);-1===d?l.push(n,[r,u]):l[d+1].push(r,u)}else l.push(n,u)}}}function IS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ry(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function NB(t,e,n,r){return iy(this.multi,[])}function RB(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Mo(n,n[De],this.providerFactory.index,r);s=a.slice(0,o),iy(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],iy(i,s);return s}function iy(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function tn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function PB(t,e,n){const r=Ct();if(r.firstCreatePass){const i=vi(t);ty(n,r.data,r.blueprint,i,!0),ty(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class Uo{}class MS{}class sy extends Uo{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new BD(this);const i=Nr(e);this._bootstrapComponents=Ds(i.bootstrap),this._r3Injector=QE(e,n,[{provide:Uo,useValue:this},{provide:Gh,useValue:this.componentFactoryResolver},...r],An(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class oy extends MS{constructor(e){super(),this.moduleType=e}create(e){return new sy(this.moduleType,e,[])}}class OS extends Uo{constructor(e){super(),this.componentFactoryResolver=new BD(this),this.instance=null;const n=new Xa([...e.providers,{provide:Uo,useValue:this},{provide:Gh,useValue:this.componentFactoryResolver}],e.parent||Uh(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ay(t,e,n=null){return new OS({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let UB=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=NE(0,n.type),i=r.length>0?ay([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Re({token:t,providedIn:"environment",factory:()=>new t(Ne(Fr))})}return t})();function kS(t){t.getStandaloneInjector=e=>e.get(UB).getOrCreateStandaloneInjector(t)}function On(t,e,n){const r=ur()+t,i=X();return i[r]===rt?$i(i,r,n?e.call(n):e()):function ac(t,e){return t[e]}(i,r)}function _c(t,e,n,r){return function US(t,e,n,r,i,s){const o=e+n;return Yn(t,o,i)?$i(t,o+1,s?r.call(s,i):r(i)):bc(t,o+1)}(X(),ur(),t,e,n,r)}function bc(t,e){const n=t[e];return n===rt?void 0:n}function VS(t,e,n,r,i,s,o){const a=e+n;return function Ro(t,e,n,r){const i=Yn(t,e,n);return Yn(t,e+1,r)||i}(t,a,i,s)?$i(t,a+2,o?r.call(o,i,s):r(i,s)):bc(t,a+2)}function Tc(t,e){const n=Ct();let r;const i=t+gt;n.firstCreatePass?(r=function n5(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=Ao(r.type)),a=Cr(z);try{const u=fh(!1),l=s();return fh(u),function F4(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,X(),i,l),l}finally{Cr(a)}}function Cc(t,e,n,r){const i=t+gt,s=X(),o=Oa(s,i);return function Ec(t,e){return t[De].data[e].pure}(s,i)?VS(s,ur(),e,o.transform,n,r,o):o.transform(n,r)}function l5(t,e,n,r=!0){const i=e[De];if(function VL(t,e,n,r){const i=Vn+r,s=n.length;r>0&&(n[i-1][yi]=e),r<s-Vn?(e[yi]=n[i],LC(n,Vn+r,e)):(n.push(e),e[yi]=null),e[en]=n;const o=e[Ol];null!==o&&n!==o&&function jL(t,e){const n=t[Ia];e[_n]!==e[en][en][_n]&&(t[LT]=!0),null===n?t[Ia]=[e]:n.push(e)}(o,e);const a=e[Ni];null!==a&&a.insertView(t),e[ot]|=128}(i,e,t,n),r){const s=Gm(n,t),o=e[nt],a=Oh(o,t[Ri]);null!==a&&function FL(t,e,n,r,i,s){r[fn]=i,r[Xn]=e,Xl(t,r,n,1,i,s)}(i,t[Xn],o,e,a,s)}}Symbol;let ws=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=h5}return t})();const c5=ws,d5=class extends c5{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function u5(t,e,n,r){const i=e.tView,a=Kh(t,i,n,4096&t[ot]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Ol]=t[e.index];const l=t[Ni];return null!==l&&(a[Ni]=l.createEmbeddedView(i)),B0(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new sc(i)}};function h5(){return mf($n(),X())}function mf(t,e){return 4&t.type?new d5(e,t,Za(t,e)):null}let Ti=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=v5}return t})();function v5(){return function YS(t,e){let n;const r=e[t.index];return ar(r)?n=r:(n=wD(r,e,null,t),e[t.index]=n,Yh(e,n)),QS(n,e,t,r),new XS(n,t,e)}($n(),X())}const _5=Ti,XS=class extends _5{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Za(this._hostTNode,this._hostLView)}get injector(){return new cr(this._hostTNode,this._hostLView)}get parentInjector(){const e=gh(this._hostTNode,this._hostLView);if(Sm(e)){const n=Vl(e,this._hostLView),r=Ul(e);return new cr(n[De].data[r+8],n)}return new cr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=KS(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Vn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function $l(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const E=n||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}const u=o?e:new oc(Tt(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const A=(o?l:this.parentInjector).get(Fr,null);A&&(s=A)}Tt(u.componentType??{});const b=u.create(l,i,null,s);return this.insertImpl(b.hostView,a,false),b}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function dR(t){return ar(t[en])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[en],d=new XS(l,l[Xn],l[en]);d.detach(d.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return l5(a,i,o,!r),e.attachToViewContainerRef(),LC(cy(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=KS(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Mh(this._lContainer,n);r&&(vh(cy(this._lContainer),n),$m(r[De],r))}detach(e){const n=this._adjustIndex(e,-1),r=Mh(this._lContainer,n);return r&&null!=vh(cy(this._lContainer),n)?new sc(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function KS(t){return t[8]}function cy(t){return t[8]||(t[8]=[])}let QS=function ZS(t,e,n,r){if(t[Ri])return;let i;i=8&n.type?Ht(r):function b5(t,e){const n=t[nt],r=n.createComment(""),i=Dr(e,t);return Oo(n,Oh(n,i),r,function zL(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Ri]=i};function my(t,e){return mf(t,e)}const Cy=new Me("Application Initializer");let Ey=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=Ae(Cy,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(hc(s))n.push(s);else if(u1(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ew=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const xs=new Me("LocaleId",{providedIn:"root",factory:()=>Ae(xs,pt.Optional|pt.SkipSelf)||function Y5(){return typeof $localize<"u"&&$localize.locale||fu}()});let _f=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Kr(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class J5{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let Dw=(()=>{class t{compileModuleSync(n){return new oy(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Ds(Nr(n).declarations).reduce((o,a)=>{const u=Tt(a);return u&&o.push(new oc(u)),o},[]);return new J5(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Aw=new Me(""),Tf=new Me("");let Ay,wy=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ay||(function TU(t){Ay=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(qt),Ne(xy),Ne(Tf))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})(),xy=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Ay?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),eo=null;const Iw=new Me("AllowMultipleToken"),Iy=new Me("PlatformDestroyListeners"),My=new Me("appBootstrapListener");class Ow{constructor(e,n){this.name=e,this.token=n}}function Pw(t,e,n=[]){const r=`Platform: ${e}`,i=new Me(r);return(s=[])=>{let o=Oy();if(!o||o.injector.get(Iw,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function DU(t){if(eo&&!eo.get(Iw,!1))throw new Q(400,!1);(function Mw(){!function YN(t){XT=t}(()=>{throw new Q(600,!1)})})(),eo=t;const e=t.get(Rw);(function kw(t){t.get(UE,null)?.forEach(n=>n())})(t)}(function Nw(t=[],e){return Ur.create({name:e,providers:[{provide:o0,useValue:"platform"},{provide:Iy,useValue:new Set([()=>eo=null])},...t]})}(a,r))}return function wU(t){const e=Oy();if(!e)throw new Q(401,!1);return e}()}}function Oy(){return eo?.get(Rw)??null}let Rw=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function xU(t="zone.js",e){return"noop"===t?new o3:"zone.js"===t?new qt(e):t}(r?.ngZone,function Lw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function BB(t,e,n){return new sy(t,e,n)}(n.moduleType,this.injector,function jw(t){return[{provide:qt,useFactory:t},{provide:Zl,multi:!0,useFactory:()=>{const e=Ae(IU,{optional:!0});return()=>e.initialize()}},{provide:Vw,useFactory:AU},{provide:nD,useFactory:rD}]}(()=>i)),o=s.injector.get(Es,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{Cf(this._modules,s),a.unsubscribe()})}),function Fw(t,e,n){try{const r=n();return hc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(Ey);return a.runInitializers(),a.donePromise.then(()=>(function sS(t){Yr(t,"Expected localeId to be defined"),"string"==typeof t&&(iS=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(xs,fu)||fu),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=Bw({},r);return function CU(t,e,n){const r=new oy(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(mu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Q(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Q(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Iy,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(Ur))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Bw(t,e){return Array.isArray(e)?e.reduce(Bw,t):{...t,...e}}let mu=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ae(Vw),this.zoneIsStable=Ae(nD),this.componentTypes=[],this.components=[],this.isStable=Ae(_f).hasPendingTasks.pipe(fi(n=>n?We(!1):this.zoneIsStable),function aN(t,e=Y){return t=t??uN,be((n,r)=>{let i,s=!0;n.subscribe(Ce(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}(),hT()),this._injector=Ae(Fr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof qE;if(!this._injector.get(Ey).done)throw!i&&function Da(t){const e=Tt(t)||Un(t)||or(t);return null!==e&&e.standalone}(n),new Q(405,!1);let o;o=i?n:this._injector.get(Gh).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function EU(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Uo),l=o.create(Ur.NULL,[],r||o.selector,a),d=l.location.nativeElement,g=l.injector.get(Aw,null);return g?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Cf(this.components,l),g?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Q(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Cf(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(My,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Cf(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Q(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Cf(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Vw=new Me("",{providedIn:"root",factory:()=>Ae(Es).handleError.bind(void 0)});function AU(){const t=Ae(qt),e=Ae(Es);return n=>t.runOutsideAngular(()=>e.handleError(n))}let IU=(()=>{class t{constructor(){this.zone=Ae(qt),this.applicationRef=Ae(mu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let Ef=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=OU}return t})();function OU(t){return function kU(t,e,n){if(xo(t)&&!n){const r=Rr(t.index,e);return new sc(r,r)}return 47&t.type?new sc(e[_n],e):null}($n(),X(),16==(16&t))}class zw{constructor(){}supports(e){return ef(e)}create(e){return new BU(e)}}const FU=(t,e)=>e;class BU{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||FU}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<Ww(r,i,s)?n:r,a=Ww(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,d=u-i;if(l!=d){for(let v=0;v<l;v++){const b=v<s.length?s[v]:s[v]=0,_=b+v;d<=_&&_<l&&(s[v]=b+1)}s[o.previousIndex]=d-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!ef(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function m4(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new UU(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new Gw),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gw),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class UU{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VU{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class Gw{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new VU,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ww(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Kw(){return new wf([new zw])}let wf=(()=>{class t{static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:Kw});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Kw()),deps:[[t,new Th,new bh]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new Q(901,!1)}}return t})();const zU=Pw(null,"core",[]);let GU=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(mu))};static#t=this.\u0275mod=mi({type:t});static#n=this.\u0275inj=Qr({})}return t})();function yu(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let Fy=null;function to(){return Fy}class oV{}const jr=new Me("DocumentToken");let By=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return Ae(uV)},providedIn:"platform"})}return t})();const aV=new Me("Location Initialized");let uV=(()=>{class t extends By{constructor(){super(),this._doc=Ae(jr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return to().getBaseHref(this._doc)}onPopState(n){const r=to().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=to().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function Uy(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function s2(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function As(t){return t&&"?"!==t[0]?"?"+t:t}let jo=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return Ae(a2)},providedIn:"root"})}return t})();const o2=new Me("appBaseHref");let a2=(()=>{class t extends jo{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ae(jr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Uy(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+As(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+As(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+As(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(By),Ne(o2,8))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lV=(()=>{class t extends jo{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Uy(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+As(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+As(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(By),Ne(o2,8))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})(),Vy=(()=>{class t{constructor(n){this._subject=new pn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function hV(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(s2(u2(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+As(r))}normalize(n){return t.stripTrailingSlash(function dV(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,u2(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+As(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+As(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=As;static#t=this.joinWithSlash=Uy;static#n=this.stripTrailingSlash=s2;static#r=this.\u0275fac=function(r){return new(r||t)(Ne(jo))};static#i=this.\u0275prov=Re({token:t,factory:function(){return function cV(){return new Vy(Ne(jo))}()},providedIn:"root"})}return t})();function u2(t){return t.replace(/\/index.html$/,"")}function y2(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class ZV{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ic=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ZV(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),b2(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{b2(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(z(Ti),z(ws),z(wf))};static#t=this.\u0275dir=Qe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function b2(t,e){t.context.$implicit=e.item}let Qy=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new JV,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){T2("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){T2("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(z(Ti),z(ws))};static#t=this.\u0275dir=Qe({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class JV{constructor(){this.$implicit=null,this.ngIf=null}}function T2(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${An(e)}'.`)}let D6=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=mi({type:t});static#n=this.\u0275inj=Qr({})}return t})();function S2(t){return"server"===t}let A6=(()=>{class t{static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:()=>new I6(Ne(jr),window)})}return t})();class I6{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function M6(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class w2{}class J6 extends oV{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class iv extends J6{static makeCurrent(){!function sV(t){Fy||(Fy=t)}(new iv)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function ej(){return Oc=Oc||document.querySelector("base"),Oc?Oc.getAttribute("href"):null}();return null==n?null:function tj(t){Vf=Vf||document.createElement("a"),Vf.setAttribute("href",t);const e=Vf.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Oc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return y2(document.cookie,e)}}let Vf,Oc=null,rj=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const sv=new Me("EventManagerPlugins");let O2=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new Q(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(sv),Ne(qt))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();class k2{constructor(e){this._doc=e}}const ov="ng-app-id";let P2=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=S2(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${ov}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(ov),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(ov,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(jr),Ne(Vh),Ne(VE,8),Ne(No))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const av={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},uv=/%COMP%/g,aj=new Me("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function R2(t,e){return e.map(n=>n.replace(uv,t))}let L2=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=S2(a),this.defaultRenderer=new lv(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===pi.ShadowDom&&(r={...r,encapsulation:pi.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof B2?i.applyToHost(n):i instanceof cv&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case pi.Emulated:s=new B2(u,l,r,this.appId,d,o,a,g);break;case pi.ShadowDom:return new dj(u,l,n,r,o,a,this.nonce,g);default:s=new cv(u,l,r,d,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(O2),Ne(P2),Ne(Vh),Ne(aj),Ne(jr),Ne(No),Ne(qt),Ne(VE))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();class lv{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(av[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(F2(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(F2(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=av[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=av[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Qs.DashCase|Qs.Important)?e.style.setProperty(n,r,i&Qs.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Qs.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=to().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function F2(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class dj extends lv{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=R2(i.id,i.styles);for(const d of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=d,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class cv extends lv{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?R2(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class B2 extends cv{constructor(e,n,r,i,s,o,a,u){const l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=function uj(t){return"_ngcontent-%COMP%".replace(uv,t)}(l),this.hostAttr=function lj(t){return"_nghost-%COMP%".replace(uv,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let hj=(()=>{class t extends k2{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(jr))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const U2=["alt","control","meta","shift"],fj={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let gj=(()=>{class t extends k2{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>to().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),U2.forEach(l=>{const d=r.indexOf(l);d>-1&&(r.splice(d,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=fj[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),U2.forEach(o=>{o!==i&&(0,pj[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(jr))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const j2=[{provide:No,useValue:"browser"},{provide:UE,useValue:function mj(){iv.makeCurrent()},multi:!0},{provide:jr,useFactory:function vj(){return function JL(t){Km=t}(document),document},deps:[]}],_j=Pw(zU,"browser",j2),bj=new Me(""),$2=[{provide:Tf,useClass:class nj{addToWindow(e){$t.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Q(5103,!1);return s},$t.getAllAngularTestabilities=()=>e.getAllTestabilities(),$t.getAllAngularRootElements=()=>e.getAllRootElements(),$t.frameworkStabilizers||($t.frameworkStabilizers=[]),$t.frameworkStabilizers.push(r=>{const i=$t.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?to().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:Aw,useClass:wy,deps:[qt,xy,Tf]},{provide:wy,useClass:wy,deps:[qt,xy,Tf]}],H2=[{provide:o0,useValue:"root"},{provide:Es,useFactory:function yj(){return new Es},deps:[]},{provide:sv,useClass:hj,multi:!0,deps:[jr,qt,No]},{provide:sv,useClass:gj,multi:!0,deps:[jr]},L2,P2,O2,{provide:GE,useExisting:L2},{provide:w2,useClass:rj,deps:[]},[]];let Tj=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Vh,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(bj,12))};static#t=this.\u0275mod=mi({type:t});static#n=this.\u0275inj=Qr({providers:[...H2,...$2],imports:[D6,GU]})}return t})(),q2=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(jr))};static#t=this.\u0275prov=Re({token:t,factory:function(r){let i=null;return i=r?new r:function Ej(){return new q2(Ne(jr))}(),i},providedIn:"root"})}return t})();function _u(t,e){return q(e)?At(t,e,1):At(t,1)}function Os(t,e){return be((n,r)=>{let i=0;n.subscribe(Ce(r,s=>t.call(e,s,i++)&&r.next(s)))})}function kc(t){return be((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}typeof window<"u"&&window;class jf{}class $f{}class Wi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Wi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Wi;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Wi?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const i=("a"===e.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class Aj{encodeKey(e){return X2(e)}encodeValue(e){return X2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Mj=/%(\d[a-f0-9])/gi,Oj={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function X2(t){return encodeURIComponent(t).replace(Mj,(e,n)=>Oj[n]??e)}function Hf(t){return`${t}`}class ro{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Aj,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ij(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(a),n.set(o,u)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],i=Array.isArray(r)?r.map(Hf):[Hf(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new ro({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(Hf(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Hf(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class kj{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function K2(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Y2(t){return typeof Blob<"u"&&t instanceof Blob}function Q2(t){return typeof FormData<"u"&&t instanceof FormData}class Pc{constructor(e,n,r,i){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Pj(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Wi),this.context||(this.context=new kj),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new ro,this.urlWithParams=n}serializeBody(){return null===this.body?null:K2(this.body)||Y2(this.body)||Q2(this.body)||function Nj(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ro?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Q2(this.body)?null:Y2(this.body)?this.body.type||null:K2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ro?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,l=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((g,v)=>g.set(v,e.setHeaders[v]),u)),e.setParams&&(l=Object.keys(e.setParams).reduce((g,v)=>g.set(v,e.setParams[v]),l)),new Pc(n,r,s,{params:l,headers:u,context:d,reportProgress:a,responseType:i,withCredentials:o})}}var bu=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(bu||{});class hv{constructor(e,n=200,r="OK"){this.headers=e.headers||new Wi,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class fv extends hv{constructor(e={}){super(e),this.type=bu.ResponseHeader}clone(e={}){return new fv({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Tu extends hv{constructor(e={}){super(e),this.type=bu.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Tu({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Z2 extends hv{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function pv(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let qf=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let s;if(n instanceof Pc)s=n;else{let u,l;u=i.headers instanceof Wi?i.headers:new Wi(i.headers),i.params&&(l=i.params instanceof ro?i.params:new ro({fromObject:i.params})),s=new Pc(n,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=We(s).pipe(_u(u=>this.handler.handle(u)));if(n instanceof Pc||"events"===i.observe)return o;const a=o.pipe(Os(u=>u instanceof Tu));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Je(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(Je(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(Je(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(Je(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new ro).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,pv(i,r))}post(n,r,i={}){return this.request("POST",n,pv(i,r))}put(n,r,i={}){return this.request("PUT",n,pv(i,r))}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(jf))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();function tx(t,e){return e(t)}function Lj(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}const Bj=new Me(""),Nc=new Me(""),nx=new Me("");function Uj(){let t=null;return(e,n)=>{null===t&&(t=(Ae(Bj,{optional:!0})??[]).reduceRight(Lj,tx));const r=Ae(_f),i=r.add();return t(e,n).pipe(kc(()=>r.remove(i)))}}let rx=(()=>{class t extends jf{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=Ae(_f)}handle(n){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Nc),...this.injector.get(nx,[])]));this.chain=i.reduceRight((s,o)=>function Fj(t,e,n){return(r,i)=>n.runInContext(()=>e(r,s=>t(s,i)))}(s,o,this.injector),tx)}const r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(kc(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||t)(Ne($f),Ne(Fr))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const Hj=/^\)\]\}',?\n/;let sx=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Q(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?xn(r.\u0275loadImpl()):We(null)).pipe(fi(()=>new oe(s=>{const o=r.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((E,A)=>o.setRequestHeader(E,A.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const E=n.detectContentTypeHeader();null!==E&&o.setRequestHeader("Content-Type",E)}if(n.responseType){const E=n.responseType.toLowerCase();o.responseType="json"!==E?E:"text"}const a=n.serializeBody();let u=null;const l=()=>{if(null!==u)return u;const E=o.statusText||"OK",A=new Wi(o.getAllResponseHeaders()),P=function qj(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||n.url;return u=new fv({headers:A,status:o.status,statusText:E,url:P}),u},d=()=>{let{headers:E,status:A,statusText:P,url:x}=l(),B=null;204!==A&&(B=typeof o.response>"u"?o.responseText:o.response),0===A&&(A=B?200:0);let F=A>=200&&A<300;if("json"===n.responseType&&"string"==typeof B){const R=B;B=B.replace(Hj,"");try{B=""!==B?JSON.parse(B):null}catch(Z){B=R,F&&(F=!1,B={error:Z,text:B})}}F?(s.next(new Tu({body:B,headers:E,status:A,statusText:P,url:x||void 0})),s.complete()):s.error(new Z2({error:B,headers:E,status:A,statusText:P,url:x||void 0}))},g=E=>{const{url:A}=l(),P=new Z2({error:E,status:o.status||0,statusText:o.statusText||"Unknown Error",url:A||void 0});s.error(P)};let v=!1;const b=E=>{v||(s.next(l()),v=!0);let A={type:bu.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(A.total=E.total),"text"===n.responseType&&o.responseText&&(A.partialText=o.responseText),s.next(A)},_=E=>{let A={type:bu.UploadProgress,loaded:E.loaded};E.lengthComputable&&(A.total=E.total),s.next(A)};return o.addEventListener("load",d),o.addEventListener("error",g),o.addEventListener("timeout",g),o.addEventListener("abort",g),n.reportProgress&&(o.addEventListener("progress",b),null!==a&&o.upload&&o.upload.addEventListener("progress",_)),o.send(a),s.next({type:bu.Sent}),()=>{o.removeEventListener("error",g),o.removeEventListener("abort",g),o.removeEventListener("load",d),o.removeEventListener("timeout",g),n.reportProgress&&(o.removeEventListener("progress",b),null!==a&&o.upload&&o.upload.removeEventListener("progress",_)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(w2))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const gv=new Me("XSRF_ENABLED"),ox=new Me("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),ax=new Me("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class ux{}let Wj=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=y2(n,this.cookieName),this.lastCookieString=n),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(jr),Ne(No),Ne(ox))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();function Xj(t,e){const n=t.url.toLowerCase();if(!Ae(gv)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const r=Ae(ux).getToken(),i=Ae(ax);return null!=r&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var io=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(io||{});function Kj(...t){const e=[qf,sx,rx,{provide:jf,useExisting:rx},{provide:$f,useExisting:sx},{provide:Nc,useValue:Xj,multi:!0},{provide:gv,useValue:!0},{provide:ux,useClass:Wj}];for(const n of t)e.push(...n.\u0275providers);return function n0(t){return{\u0275providers:t}}(e)}const lx=new Me("LEGACY_INTERCEPTOR_FN");function Yj(){return function $o(t,e){return{\u0275kind:t,\u0275providers:e}}(io.LegacyInterceptors,[{provide:lx,useFactory:Uj},{provide:Nc,useExisting:lx,multi:!0}])}let Qj=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=mi({type:t});static#n=this.\u0275inj=Qr({providers:[Kj(Yj())]})}return t})();const{isArray:i$}=Array,{getPrototypeOf:s$,prototype:o$,keys:a$}=Object;function cx(t){if(1===t.length){const e=t[0];if(i$(e))return{args:e,keys:null};if(function u$(t){return t&&"object"==typeof t&&s$(t)===o$}(e)){const n=a$(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:l$}=Array;function dx(t){return Je(e=>function c$(t,e){return l$(e)?t(...e):t(e)}(t,e))}function hx(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function mv(...t){const e=hn(t),n=qs(t),{args:r,keys:i}=cx(t);if(0===r.length)return xn([],e);const s=new oe(function d$(t,e,n=Y){return r=>{fx(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)fx(e,()=>{const l=xn(t[u],e);let d=!1;l.subscribe(Ce(r,g=>{s[u]=g,d||(d=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>hx(i,o):Y));return n?s.pipe(dx(n)):s}function fx(t,e,n){t?Jt(n,t,e):e()}const Gf=me(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function yv(...t){return function h$(){return Wn(1)}()(xn(t,hn(t)))}function px(t){return new oe(e=>{Tr(t()).subscribe(e)})}function Rc(t,e){const n=q(t)?t:()=>t,r=i=>i.error(n());return new oe(e?i=>e.schedule(r,0,i):r)}function vv(){return be((t,e)=>{let n=null;t._refCount++;const r=Ce(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class gx extends oe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,vt(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new K;const n=this.getSubject();e.add(this.source.subscribe(Ce(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=K.EMPTY)}return e}refCount(){return vv()(this)}}function Cu(t){return t<=0?()=>Pn:be((e,n)=>{let r=0;e.subscribe(Ce(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Wf(t){return be((e,n)=>{let r=!1;e.subscribe(Ce(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function mx(t=p$){return be((e,n)=>{let r=!1;e.subscribe(Ce(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function p$(){return new Gf}function Ho(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Os((i,s)=>t(i,s,r)):Y,Cu(1),n?Wf(e):mx(()=>new Gf))}function Qn(t,e,n){const r=q(t)||e||n?{next:t,error:e,complete:n}:t;return r?be((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Ce(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Y}function qo(t){return be((e,n)=>{let s,r=null,i=!1;r=e.subscribe(Ce(n,void 0,void 0,o=>{s=Tr(t(o,qo(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function _v(t){return t<=0?()=>Pn:be((e,n)=>{let r=[];e.subscribe(Ce(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}const lt="primary",Lc=Symbol("RouteTitle");class b${constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Eu(t){return new b$(t)}function T$(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Xi(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!yx(t[i],e[i]))return!1;return!0}function yx(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function vx(t){return t.length>0?t[t.length-1]:null}function so(t){return function r$(t){return!!t&&(t instanceof oe||q(t.lift)&&q(t.subscribe))}(t)?t:hc(t)?xn(Promise.resolve(t)):We(t)}const E$={exact:function Tx(t,e,n){if(!zo(t.segments,e.segments)||!Xf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!Tx(t.children[r],e.children[r],n))return!1;return!0},subset:Cx},_x={exact:function D$(t,e){return Xi(t,e)},subset:function S$(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>yx(t[n],e[n]))},ignored:()=>!0};function bx(t,e,n){return E$[n.paths](t.root,e.root,n.matrixParams)&&_x[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Cx(t,e,n){return Ex(t,e,e.segments,n)}function Ex(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!zo(i,n)||e.hasChildren()||!Xf(i,n,r))}if(t.segments.length===n.length){if(!zo(t.segments,n)||!Xf(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!Cx(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(zo(t.segments,i)&&Xf(t.segments,i,r)&&t.children[lt])&&Ex(t.children[lt],e,s,r)}}function Xf(t,e,n){return e.every((r,i)=>_x[n](t[i].parameters,r.parameters))}class Du{constructor(e=new Ot([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Eu(this.queryParams)),this._queryParamMap}toString(){return A$.serialize(this)}}class Ot{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kf(this)}}class Fc{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Eu(this.parameters)),this._parameterMap}toString(){return wx(this)}}function zo(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Bc=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return new bv},providedIn:"root"})}return t})();class bv{parse(e){const n=new U$(e);return new Du(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Uc(e.root,!0)}`,r=function O$(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${Yf(n)}=${Yf(i)}`).join("&"):`${Yf(n)}=${Yf(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function I$(t){return encodeURI(t)}(e.fragment)}`:""}`}}const A$=new bv;function Kf(t){return t.segments.map(e=>wx(e)).join("/")}function Uc(t,e){if(!t.hasChildren())return Kf(t);if(e){const n=t.children[lt]?Uc(t.children[lt],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==lt&&r.push(`${i}:${Uc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function x$(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===lt&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==lt&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===lt?[Uc(t.children[lt],!1)]:[`${i}:${Uc(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[lt]?`${Kf(t)}/${n[0]}`:`${Kf(t)}/(${n.join("//")})`}}function Dx(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yf(t){return Dx(t).replace(/%3B/gi,";")}function Tv(t){return Dx(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qf(t){return decodeURIComponent(t)}function Sx(t){return Qf(t.replace(/\+/g,"%20"))}function wx(t){return`${Tv(t.path)}${function M$(t){return Object.keys(t).map(e=>`;${Tv(e)}=${Tv(t[e])}`).join("")}(t.parameters)}`}const k$=/^[^\/()?;#]+/;function Cv(t){const e=t.match(k$);return e?e[0]:""}const P$=/^[^\/()?;=#]+/,R$=/^[^=?&#]+/,F$=/^[^&#]+/;class U${constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ot([],{}):new Ot([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[lt]=new Ot(e,n)),r}parseSegment(){const e=Cv(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new Fc(Qf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function N$(t){const e=t.match(P$);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Cv(this.remaining);i&&(r=i,this.capture(r))}e[Qf(n)]=Qf(r)}parseQueryParam(e){const n=function L$(t){const e=t.match(R$);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function B$(t){const e=t.match(F$);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=Sx(n),s=Sx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Cv(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=lt);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[lt]:new Ot([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}}function xx(t){return t.segments.length>0?new Ot([],{[lt]:t}):t}function Ax(t){const e={};for(const r of Object.keys(t.children)){const s=Ax(t.children[r]);if(r===lt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function V$(t){if(1===t.numberOfChildren&&t.children[lt]){const e=t.children[lt];return new Ot(t.segments.concat(e.segments),e.children)}return t}(new Ot(t.segments,e))}function Go(t){return t instanceof Du}function Ix(t){let e;const i=xx(function n(s){const o={};for(const u of s.children){const l=n(u);o[u.outlet]=l}const a=new Ot(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function Mx(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return Ev(i,i,i,n,r);const s=function $$(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new kx(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new kx(n,e,r)}(e);if(s.toRoot())return Ev(i,i,new Ot([],{}),n,r);const o=function H$(t,e,n){if(t.isAbsolute)return new Jf(e,!0,0);if(!n)return new Jf(e,!1,NaN);if(null===n.parent)return new Jf(n,!0,0);const r=Zf(t.commands[0])?0:1;return function q$(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new Jf(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?jc(o.segmentGroup,o.index,s.commands):Px(o.segmentGroup,o.index,s.commands);return Ev(i,o.segmentGroup,a,n,r)}function Zf(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Vc(t){return"object"==typeof t&&null!=t&&t.outlets}function Ev(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`}),o=t===e?n:Ox(t,e,n);const a=xx(Ax(o));return new Du(a,s,i)}function Ox(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:Ox(s,e,n)}),new Ot(t.segments,r)}class kx{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Zf(r[0]))throw new Q(4003,!1);const i=r.find(Vc);if(i&&i!==vx(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jf{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function Px(t,e,n){if(t||(t=new Ot([],{})),0===t.segments.length&&t.hasChildren())return jc(t,e,n);const r=function G$(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(Vc(a))break;const u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!Rx(u,l,o))return s;r+=2}else{if(!Rx(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Ot(t.segments.slice(0,r.pathIndex),{});return s.children[lt]=new Ot(t.segments.slice(r.pathIndex),t.children),jc(s,0,i)}return r.match&&0===i.length?new Ot(t.segments,{}):r.match&&!t.hasChildren()?Dv(t,e,n):r.match?jc(t,0,i):Dv(t,e,n)}function jc(t,e,n){if(0===n.length)return new Ot(t.segments,{});{const r=function z$(t){return Vc(t[0])?t[0].outlets:{[lt]:t}}(n),i={};if(Object.keys(r).some(s=>s!==lt)&&t.children[lt]&&1===t.numberOfChildren&&0===t.children[lt].segments.length){const s=jc(t.children[lt],e,n);return new Ot(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=Px(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Ot(t.segments,i)}}function Dv(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Vc(s)){const u=W$(s.outlets);return new Ot(r,u)}if(0===i&&Zf(n[0])){r.push(new Fc(t.segments[e].path,Nx(n[0]))),i++;continue}const o=Vc(s)?s.outlets[lt]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Zf(a)?(r.push(new Fc(o,Nx(a))),i+=2):(r.push(new Fc(o,{})),i++)}return new Ot(r,{})}function W$(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=Dv(new Ot([],{}),0,r))}),e}function Nx(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Rx(t,e,n){return t==n.path&&Xi(e,n.parameters)}const $c="imperative";class Ki{constructor(e,n){this.id=e,this.url=n}}class ep extends Ki{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oo extends Ki{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Hc extends Ki{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Su extends Ki{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class tp extends Ki{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lx extends Ki{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X$ extends Ki{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K$ extends Ki{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Y$ extends Ki{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q$ extends Ki{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Z${constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class J${constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class e7{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t7{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class n7{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r7{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fx{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Sv{}class wv{constructor(e){this.url=e}}class i7{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new qc,this.attachRef=null}}let qc=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new i7,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Bx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=xv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=xv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Av(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Av(e,this._root).map(n=>n.value)}}function xv(t,e){if(t===e.value)return e;for(const n of e.children){const r=xv(t,n);if(r)return r}return null}function Av(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Av(t,n);if(r.length)return r.unshift(e),r}return[]}class ks{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function wu(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class Ux extends Bx{constructor(e,n){super(e),this.snapshot=n,Iv(this,e)}toString(){return this.snapshot.toString()}}function Vx(t,e){const n=function s7(t,e){const o=new np([],{},{},"",{},lt,e,null,{});return new $x("",new ks(o,[]))}(0,e),r=new Kr([new Fc("",{})]),i=new Kr({}),s=new Kr({}),o=new Kr({}),a=new Kr(""),u=new Wo(r,i,o,a,s,lt,e,n.root);return u.snapshot=n.root,new Ux(new ks(u,[]),n)}class Wo{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Je(l=>l[Lc]))??We(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Je(e=>Eu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Je(e=>Eu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function jx(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function o7(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class np{get title(){return this.data?.[Lc]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Eu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Eu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $x extends Bx{constructor(e,n){super(n),this.url=e,Iv(this,n)}toString(){return Hx(this._root)}}function Iv(t,e){e.value._routerState=t,e.children.forEach(n=>Iv(t,n))}function Hx(t){const e=t.children.length>0?` { ${t.children.map(Hx).join(", ")} } `:"";return`${t.value}${e}`}function Mv(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Xi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Xi(e.params,n.params)||t.paramsSubject.next(n.params),function C$(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Xi(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Xi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ov(t,e){const n=Xi(t.params,e.params)&&function w$(t,e){return zo(t,e)&&t.every((n,r)=>Xi(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Ov(t.parent,e.parent))}let kv=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=lt,this.activateEvents=new pn,this.deactivateEvents=new pn,this.attachEvents=new pn,this.detachEvents=new pn,this.parentContexts=Ae(qc),this.location=Ae(Ti),this.changeDetector=Ae(Ef),this.environmentInjector=Ae(Fr),this.inputBinder=Ae(rp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new a7(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Qe({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Jr]})}return t})();class a7{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Wo?this.route:e===qc?this.childContexts:this.parent.get(e,n)}}const rp=new Me("");let qx=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=mv([r.queryParams,r.params,r.data]).pipe(fi(([s,o,a],u)=>(a={...s,...o,...a},0===u?We(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function iV(t){const e=Tt(t);if(!e)return null;const n=new oc(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();function zc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function l7(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return zc(t,r,i);return zc(t,r)})}(t,e,n);return new ks(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>zc(t,a)),o}}const r=function c7(t){return new Wo(new Kr(t.url),new Kr(t.params),new Kr(t.queryParams),new Kr(t.fragment),new Kr(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>zc(t,s));return new ks(r,i)}}const Pv="ngNavigationCancelingError";function zx(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Go(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Gx(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function Gx(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[Pv]=!0,r.cancellationCode=e,n&&(r.url=n),r}function Wx(t){return t&&t[Pv]}let Xx=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=ir({type:t,selectors:[["ng-component"]],standalone:!0,features:[kS],decls:1,vars:0,template:function(r,i){1&r&&bn(0,"router-outlet")},dependencies:[kv],encapsulation:2})}return t})();function Nv(t){const e=t.children&&t.children.map(Nv),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==lt&&(n.component=Xx),n}function Di(t){return t.outlet||lt}function Gc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class v7{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Mv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=wu(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=wu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=wu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=wu(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new r7(s.value.snapshot))}),e.children.length&&this.forwardEvent(new t7(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(Mv(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Mv(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Gc(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class Kx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ip{constructor(e,n){this.component=e,this.route=n}}function _7(t,e,n){const r=t._root;return Wc(r,e?e._root:null,n,[r.value])}function xu(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function gN(t){return null!==Yd(t)}(t)?e.get(t):t:r}function Wc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=wu(e);return t.children.forEach(o=>{(function T7(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function C7(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!zo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!zo(t.url,e.url)||!Xi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ov(t,e)||!Xi(t.queryParams,e.queryParams);default:return!Ov(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Kx(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Wc(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ip(a.outlet.component,o))}else o&&Xc(e,a,i),i.canActivateChecks.push(new Kx(r)),Wc(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Xc(a,n.getContext(o),i)),i}function Xc(t,e,n){const r=wu(t),i=t.value;Object.entries(r).forEach(([s,o])=>{Xc(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new ip(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Kc(t){return"function"==typeof t}function Yx(t){return t instanceof Gf||"EmptyError"===t?.name}const sp=Symbol("INITIAL_VALUE");function Au(){return fi(t=>mv(t.map(e=>e.pipe(Cu(1),function f$(...t){const e=hn(t);return be((n,r)=>{(e?yv(t,n,e):yv(t,n)).subscribe(r)})}(sp)))).pipe(Je(e=>{for(const n of e)if(!0!==n){if(n===sp)return sp;if(!1===n||n instanceof Du)return n}return!0}),Os(e=>e!==sp),Cu(1)))}function Qx(t){return function he(...t){return le(t)}(Qn(e=>{if(Go(e))throw zx(0,e)}),Je(e=>!0===e))}class op{constructor(e){this.segmentGroup=e||null}}class Zx{constructor(e){this.urlTree=e}}function Iu(t){return Rc(new op(t))}function Jx(t){return Rc(new Zx(t))}class $7{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new Q(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return We(r);if(i.numberOfChildren>1||!i.children[lt])return Rc(new Q(4e3,!1));i=i.children[lt]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new Du(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Ot(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const Rv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function H7(t,e,n,r,i){const s=Lv(t,e,n);return s.matched?(r=function h7(t,e){return t.providers&&!t._injector&&(t._injector=ay(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function U7(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?We(i.map(o=>{const a=xu(o,t);return so(function A7(t){return t&&Kc(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Au(),Qx()):We(!0)}(r,e,n).pipe(Je(o=>!0===o?s:{...Rv}))):We(s)}function Lv(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...Rv}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||T$)(n,t,e);if(!i)return{...Rv};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function eA(t,e,n,r){return n.length>0&&function G7(t,e,n){return n.some(r=>ap(t,e,r)&&Di(r)!==lt)}(t,n,r)?{segmentGroup:new Ot(e,z7(r,new Ot(n,t.children))),slicedSegments:[]}:0===n.length&&function W7(t,e,n){return n.some(r=>ap(t,e,r))}(t,n,r)?{segmentGroup:new Ot(t.segments,q7(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ot(t.segments,t.children),slicedSegments:n}}function q7(t,e,n,r,i){const s={};for(const o of r)if(ap(t,n,o)&&!i[Di(o)]){const a=new Ot([],{});s[Di(o)]=a}return{...i,...s}}function z7(t,e){const n={};n[lt]=e;for(const r of t)if(""===r.path&&Di(r)!==lt){const i=new Ot([],{});n[Di(r)]=i}return n}function ap(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class Q7{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new $7(this.urlSerializer,this.urlTree)}noMatchError(e){return new Q(4002,!1)}recognize(){const e=eA(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,lt).pipe(qo(n=>{if(n instanceof Zx)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof op?this.noMatchError(n):n}),Je(n=>{const r=new np([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},lt,this.rootComponentType,null,{}),i=new ks(r,n),s=new $x("",i),o=function j$(t,e,n=null,r=null){return Mx(Ix(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,lt).pipe(qo(r=>{throw r instanceof op?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=jx(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return xn(i).pipe(_u(s=>{const o=r.children[s],a=function m7(t,e){const n=t.filter(r=>Di(r)===e);return n.push(...t.filter(r=>Di(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),function m$(t,e){return be(function g$(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(Ce(o,d=>{const g=l++;u=a?t(u,d,g):(a=!0,d),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),Wf(null),function y$(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Os((i,s)=>t(i,s,r)):Y,_v(1),n?Wf(e):mx(()=>new Gf))}(),At(s=>{if(null===s)return Iu(r);const o=tA(s);return function Z7(t){t.sort((e,n)=>e.value.outlet===lt?-1:n.value.outlet===lt?1:e.value.outlet.localeCompare(n.value.outlet))}(o),We(o)}))}processSegment(e,n,r,i,s,o){return xn(n).pipe(_u(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(qo(u=>{if(u instanceof op)return We(null);throw u}))),Ho(a=>!!a),qo(a=>{if(Yx(a))return function K7(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?We([]):Iu(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function X7(t,e,n,r){return!!(Di(t)===r||r!==lt&&ap(e,n,t))&&("**"===t.path||Lv(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Iu(i):Iu(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Jx(s):this.applyRedirects.lineralizeSegments(r,s).pipe(At(o=>{const a=new Ot(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:d}=Lv(n,i,s);if(!a)return Iu(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d);return i.redirectTo.startsWith("/")?Jx(g):this.applyRedirects.lineralizeSegments(i,g).pipe(At(v=>this.processSegment(e,r,n,v.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?vx(i).parameters:{};a=We({snapshot:new np(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nA(r),Di(r),r.component??r._loadedComponent??null,r,rA(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=H7(n,r,i,e).pipe(Je(({matched:u,consumedSegments:l,remainingSegments:d,parameters:g})=>u?{snapshot:new np(l,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nA(r),Di(r),r.component??r._loadedComponent??null,r,rA(r)),consumedSegments:l,remainingSegments:d}:null));return a.pipe(fi(u=>null===u?Iu(n):this.getChildConfig(e=r._injector??e,r,i).pipe(fi(({routes:l})=>{const d=r._loadedInjector??e,{snapshot:g,consumedSegments:v,remainingSegments:b}=u,{segmentGroup:_,slicedSegments:E}=eA(n,v,b,l);if(0===E.length&&_.hasChildren())return this.processChildren(d,l,_).pipe(Je(P=>null===P?null:[new ks(g,P)]));if(0===l.length&&0===E.length)return We([new ks(g,[])]);const A=Di(r)===s;return this.processSegment(d,l,_,E,A?lt:s,!0).pipe(Je(P=>[new ks(g,P)]))}))))}getChildConfig(e,n,r){return n.children?We({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?We({routes:n._loadedRoutes,injector:n._loadedInjector}):function B7(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?We(!0):We(i.map(o=>{const a=xu(o,t);return so(function D7(t){return t&&Kc(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Au(),Qx())}(e,n,r).pipe(At(i=>i?this.configLoader.loadChildren(e,n).pipe(Qn(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function j7(t){return Rc(Gx(!1,3))}())):We({routes:[],injector:e})}}function J7(t){const e=t.value.routeConfig;return e&&""===e.path}function tA(t){const e=[],n=new Set;for(const r of t){if(!J7(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=tA(r.children);e.push(new ks(r.value,i))}return e.filter(r=>!n.has(r))}function nA(t){return t.data||{}}function rA(t){return t.resolve||{}}function iA(t){return"string"==typeof t.title||null===t.title}function Fv(t){return fi(e=>{const n=t(e);return n?xn(n).pipe(Je(()=>e)):We(e)})}const Mu=new Me("ROUTES");let Bv=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ae(Dw)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return We(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=so(n.loadComponent()).pipe(Je(sA),Qn(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),kc(()=>{this.componentLoaders.delete(n)})),i=new gx(r,()=>new xe).pipe(vv());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return We({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function o9(t,e,n,r){return so(t.loadChildren()).pipe(Je(sA),At(i=>i instanceof MS||Array.isArray(i)?We(i):xn(e.compileModuleAsync(i))),Je(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Mu,[],{optional:!0,self:!0}).flat()),{routes:o.map(Nv),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(kc(()=>{this.childrenLoaders.delete(r)})),o=new gx(s,()=>new xe).pipe(vv());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sA(t){return function a9(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let up=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new xe,this.transitionAbortSubject=new xe,this.configLoader=Ae(Bv),this.environmentInjector=Ae(Fr),this.urlSerializer=Ae(Bc),this.rootContexts=Ae(qc),this.inputBindingEnabled=null!==Ae(rp,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>We(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new J$(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Z$(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new Kr({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:$c,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Os(s=>0!==s.id),Je(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),fi(s=>{this.currentTransition=s;let o=!1,a=!1;return We(s).pipe(Qn(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),fi(u=>{const l=u.currentBrowserUrl.toString(),d=!n.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!d&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const v="";return this.events.next(new Su(u.id,this.urlSerializer.serialize(u.rawUrl),v,0)),u.resolve(null),Pn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return We(u).pipe(fi(v=>{const b=this.transitions?.getValue();return this.events.next(new ep(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),b!==this.transitions?.getValue()?Pn:Promise.resolve(v)}),function e9(t,e,n,r,i,s){return At(o=>function Y7(t,e,n,r,i,s,o="emptyOnly"){return new Q7(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(Je(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),Qn(v=>{s.targetSnapshot=v.targetSnapshot,s.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:v.urlAfterRedirects};const b=new Lx(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(b)}));if(d&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:v,extractedUrl:b,source:_,restoredState:E,extras:A}=u,P=new ep(v,this.urlSerializer.serialize(b),_,E);this.events.next(P);const x=Vx(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:x,urlAfterRedirects:b,extras:{...A,skipLocationChange:!1,replaceUrl:!1}},We(s)}{const v="";return this.events.next(new Su(u.id,this.urlSerializer.serialize(u.extractedUrl),v,1)),u.resolve(null),Pn}}),Qn(u=>{const l=new X$(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Je(u=>(this.currentTransition=s={...u,guards:_7(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function M7(t,e){return At(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?We({...n,guardsResult:!0}):function O7(t,e,n,r){return xn(t).pipe(At(i=>function F7(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?We(s.map(a=>{const u=Gc(e)??i,l=xu(a,u);return so(function x7(t){return t&&Kc(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):u.runInContext(()=>l(t,e,n,r))).pipe(Ho())})).pipe(Au()):We(!0)}(i.component,i.route,n,e,r)),Ho(i=>!0!==i,!0))}(o,r,i,t).pipe(At(a=>a&&function E7(t){return"boolean"==typeof t}(a)?function k7(t,e,n,r){return xn(e).pipe(_u(i=>yv(function N7(t,e){return null!==t&&e&&e(new e7(t)),We(!0)}(i.route.parent,r),function P7(t,e){return null!==t&&e&&e(new n7(t)),We(!0)}(i.route,r),function L7(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function b7(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>px(()=>We(o.guards.map(u=>{const l=Gc(o.node)??n,d=xu(u,l);return so(function w7(t){return t&&Kc(t.canActivateChild)}(d)?d.canActivateChild(r,t):l.runInContext(()=>d(r,t))).pipe(Ho())})).pipe(Au())));return We(s).pipe(Au())}(t,i.path,n),function R7(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return We(!0);const i=r.map(s=>px(()=>{const o=Gc(e)??n,a=xu(s,o);return so(function S7(t){return t&&Kc(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(Ho())}));return We(i).pipe(Au())}(t,i.route,n))),Ho(i=>!0!==i,!0))}(r,s,t,e):We(a)),Je(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Qn(u=>{if(s.guardsResult=u.guardsResult,Go(u.guardsResult))throw zx(0,u.guardsResult);const l=new K$(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Os(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),Fv(u=>{if(u.guards.canActivateChecks.length)return We(u).pipe(Qn(l=>{const d=new Y$(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),fi(l=>{let d=!1;return We(l).pipe(function t9(t,e){return At(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return We(n);let s=0;return xn(i).pipe(_u(o=>function n9(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!iA(i)&&(s[Lc]=i.title),function r9(t,e,n,r){const i=function i9(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return We({});const s={};return xn(i).pipe(At(o=>function s9(t,e,n,r){const i=Gc(e)??r,s=xu(t,i);return so(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(Ho(),Qn(a=>{s[o]=a}))),_v(1),function v$(t){return Je(()=>t)}(s),qo(o=>Yx(o)?Pn:Rc(o)))}(s,t,e,r).pipe(Je(o=>(t._resolvedData=o,t.data=jx(t,n).resolve,i&&iA(i)&&(t.data[Lc]=i.title),null)))}(o.route,r,t,e)),Qn(()=>s++),_v(1),At(o=>s===i.length?We(n):Pn))})}(n.paramsInheritanceStrategy,this.environmentInjector),Qn({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",2)}}))}),Qn(l=>{const d=new Q$(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Fv(u=>{const l=d=>{const g=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(d.routeConfig).pipe(Qn(v=>{d.component=v}),Je(()=>{})));for(const v of d.children)g.push(...l(v));return g};return mv(l(u.targetSnapshot.root)).pipe(Wf(),Cu(1))}),Fv(()=>this.afterPreactivation()),Je(u=>{const l=function u7(t,e,n){const r=zc(t,e._root,n?n._root:void 0);return new Ux(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:l},s}),Qn(()=>{this.events.next(new Sv)}),((t,e,n,r)=>Je(i=>(new v7(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Cu(1),Qn({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new oo(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function _$(t){return be((e,n)=>{Tr(t).subscribe(Ce(n,()=>n.complete(),re)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(Qn(u=>{throw u}))),kc(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),qo(u=>{if(a=!0,Wx(u))this.events.next(new Hc(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function d7(t){return Wx(t)&&Go(t.url)}(u)?this.events.next(new wv(u.url)):s.resolve(!1);else{this.events.next(new tp(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(l){s.reject(l)}}return Pn}))}))}cancelNavigationTransition(n,r,i){const s=new Hc(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oA(t){return t!==$c}let aA=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===lt);return r}getResolvedTitleForRoute(n){return n.data[Lc]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return Ae(u9)},providedIn:"root"})}return t})(),u9=(()=>{class t extends aA{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(q2))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),l9=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return Ae(d9)},providedIn:"root"})}return t})();class c9{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let d9=(()=>{class t extends c9{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Hn(t)))(i||t)}}();static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const lp=new Me("",{providedIn:"root",factory:()=>({})});let h9=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return Ae(f9)},providedIn:"root"})}return t})(),f9=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Yc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Yc||{});function uA(t,e){t.events.pipe(Os(n=>n instanceof oo||n instanceof Hc||n instanceof tp||n instanceof Su),Je(n=>n instanceof oo||n instanceof Su?Yc.COMPLETE:n instanceof Hc&&(0===n.code||1===n.code)?Yc.REDIRECTING:Yc.FAILED),Os(n=>n!==Yc.REDIRECTING),Cu(1)).subscribe(()=>{e()})}function p9(t){throw t}function g9(t,e,n){return e.parse("/")}const m9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},y9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Zn=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ae(Ew),this.isNgZoneEnabled=!1,this._events=new xe,this.options=Ae(lp,{optional:!0})||{},this.pendingTasks=Ae(_f),this.errorHandler=this.options.errorHandler||p9,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||g9,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ae(h9),this.routeReuseStrategy=Ae(l9),this.titleStrategy=Ae(aA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ae(Mu,{optional:!0})?.flat()??[],this.navigationTransitions=Ae(up),this.urlSerializer=Ae(Bc),this.location=Ae(Vy),this.componentInputBindingEnabled=!!Ae(rp,{optional:!0}),this.eventsSubscription=new K,this.isNgZoneEnabled=Ae(qt)instanceof qt&&qt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Du,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Vx(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(lA(r)&&this._events.next(r));if(r instanceof ep)oA(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Su)this.rawUrlTree=i.rawUrl;else if(r instanceof Lx){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof Sv)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Hc)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof wv){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||oA(i.source)};this.scheduleNavigation(s,$c,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof tp&&this.restoreHistory(i,!0),r instanceof oo&&(this.navigated=!0),lA(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),$c,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Nv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let g,d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}null!==d&&(d=this.removeEmptyProps(d));try{g=Ix(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return Mx(g,n,d,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Go(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,$c,null,r)}navigate(n,r={skipLocationChange:!1}){return function v9(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new Q(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...m9}:!1===r?{...y9}:r,Go(n))return bx(this.currentUrlTree,n,i);const s=this.parseUrl(n);return bx(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((g,v)=>{a=g,u=v});const d=this.pendingTasks.add();return uA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lA(t){return!(t instanceof Sv||t instanceof wv)}let Yi=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new xe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof oo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function OE(t,e,n){return function TF(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?ME:ko}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(z(Zn),z(Wo),function yh(t){return function jR(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(DT(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}($n(),t)}("tabindex"),z(Cs),z(Br),z(jo))};static#t=this.\u0275dir=Qe({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&_t("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Hi("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",yu],skipLocationChange:["skipLocationChange","skipLocationChange",yu],replaceUrl:["replaceUrl","replaceUrl",yu],routerLink:"routerLink"},standalone:!0,features:[qD,Jr]})}return t})();class cA{}let T9=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Os(n=>n instanceof oo),_u(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=ay(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return xn(i).pipe(Wn())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):We(null);const s=i.pipe(At(o=>null===o?We(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?xn([s,this.loader.loadComponent(r)]).pipe(Wn()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(Zn),Ne(Dw),Ne(Fr),Ne(cA),Ne(Bv))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Uv=new Me("");let dA=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ep?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof oo?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Su&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Fx&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Fx(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function yD(){throw new Error("invalid")}()};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();function Ps(t,e){return{\u0275kind:t,\u0275providers:e}}function fA(){const t=Ae(Ur);return e=>{const n=t.get(mu);if(e!==n.components[0])return;const r=t.get(Zn),i=t.get(pA);1===t.get(Vv)&&r.initialNavigation(),t.get(gA,null,pt.Optional)?.setUpPreloading(),t.get(Uv,null,pt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const pA=new Me("",{factory:()=>new xe}),Vv=new Me("",{providedIn:"root",factory:()=>1}),gA=new Me("");function S9(t){return Ps(0,[{provide:gA,useExisting:T9},{provide:cA,useExisting:t}])}const mA=new Me("ROUTER_FORROOT_GUARD"),x9=[Vy,{provide:Bc,useClass:bv},Zn,qc,{provide:Wo,useFactory:function hA(t){return t.routerState.root},deps:[Zn]},Bv,[]];function A9(){return new Ow("Router",Zn)}let yA=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[x9,[],{provide:Mu,multi:!0,useValue:n},{provide:mA,useFactory:k9,deps:[[Zn,new bh,new Th]]},{provide:lp,useValue:r||{}},r?.useHash?{provide:jo,useClass:lV}:{provide:jo,useClass:a2},{provide:Uv,useFactory:()=>{const t=Ae(A6),e=Ae(qt),n=Ae(lp),r=Ae(up),i=Ae(Bc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new dA(i,r,t,e,n)}},r?.preloadingStrategy?S9(r.preloadingStrategy).\u0275providers:[],{provide:Ow,multi:!0,useFactory:A9},r?.initialNavigation?P9(r):[],r?.bindToComponentInputs?Ps(8,[qx,{provide:rp,useExisting:qx}]).\u0275providers:[],[{provide:vA,useFactory:fA},{provide:My,multi:!0,useExisting:vA}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Mu,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(mA,8))};static#t=this.\u0275mod=mi({type:t});static#n=this.\u0275inj=Qr({})}return t})();function k9(t){return"guarded"}function P9(t){return["disabled"===t.initialNavigation?Ps(3,[{provide:Cy,multi:!0,useFactory:()=>{const e=Ae(Zn);return()=>{e.setUpLocationChangeListener()}}},{provide:Vv,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Ps(2,[{provide:Vv,useValue:0},{provide:Cy,multi:!0,deps:[Ur],useFactory:e=>{const n=e.get(aV,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(Zn),s=e.get(pA);uA(i,()=>{r(!0)}),e.get(up).afterPreactivation=()=>(r(!0),s.closed?We(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const vA=new Me("");let jv=(()=>{class t{constructor(){this.imagenes=[{src:"../assets/img/remate.gif",alt:"remate"},{src:"../assets/img/clavada.gif",alt:""},{src:"../assets/img/golArg.gif",alt:""}],this.currentImageIndex=0,this.currentImage=this.imagenes[this.currentImageIndex]}ngOnInit(){setInterval(()=>{this.changeImage()},5e3)}changeImage(){this.currentImageIndex=(this.currentImageIndex+1)%this.imagenes.length,this.currentImage=this.imagenes[this.currentImageIndex]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=ir({type:t,selectors:[["app-home"]],decls:6,vars:2,consts:[[1,"body"],[1,"background-container"],[1,"background-image"],[1,"image-container"],[1,"image-wrapper"],[3,"src","alt"]],template:function(r,i){1&r&&(ie(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),bn(5,"img",5),fe()()()()()),2&r&&(Le(5),Ve("src",i.currentImage.src,ko)("alt",i.currentImage.alt))},styles:[".image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;box-sizing:border-box}.image-wrapper[_ngcontent-%COMP%]{position:relative;margin-right:10px;margin-bottom:10px}.image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;height:35rem;border:1px solid #000000;border-radius:4px;object-fit:cover;margin-top:10%}.background-container[_ngcontent-%COMP%]{width:100%;height:110vh;overflow:hidden}.background-image[_ngcontent-%COMP%]{top:50%;left:50%;width:100%;height:100%;background-position:center;background-size:cover;animation:_ngcontent-%COMP%_changeBackground 15s infinite;background-image:no-repeat}@keyframes _ngcontent-%COMP%_changeBackground{0%{background-image:url(/assets/img/fondo-futbol.jpg)}25%{background-image:url(/assets/img/fondo-basquet.jpg)}75%{background-image:url(/assets/img/fondo--voley.jpg)}to{background-image:url(/assets/img/fondo-futbol.jpg)}}"]})}return t})(),Ou=(()=>{class t{constructor(n){this.http=n,this.baseURL="http://localhost:8080/api/v1"}obtenerLosVideos(){return this.http.get(`${this.baseURL}/all`)}agregarVideo(n){return this.http.post(`${this.baseURL}/add`,n)}modificarDatosVideo(n,r){return this.http.put(`${this.baseURL}/${n}`,r)}eliminarVideo(n){return this.http.delete(`${this.baseURL}/${n}`)}urlVideo(n){return this.http.get(`${this.baseURL}/${n}`)}obtenerUrlVideo(n){return this.http.get(`${this.baseURL}/find/videos/${n}`)}cargarVideo(n){return this.http.post(`${this.baseURL}/subir`,n)}obtenerImagenVideo(n){return this.http.get(`${this.baseURL}/find/imagenes/${n}`)}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(qf))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_A=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(z(Cs),z(Br))};static#t=this.\u0275dir=Qe({type:t})}return t})(),Xo=(()=>{class t extends _A{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Hn(t)))(i||t)}}();static#t=this.\u0275dir=Qe({type:t,features:[Mt]})}return t})();const Qi=new Me("NgValueAccessor"),F9={provide:Qi,useExisting:jt(()=>Si),multi:!0},U9=new Me("CompositionEventMode");let Si=(()=>{class t extends _A{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function B9(){const t=to()?to().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(z(Cs),z(Br),z(U9,8))};static#t=this.\u0275dir=Qe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&_t("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[tn([F9]),Mt]})}return t})();const Jn=new Me("NgValidators"),uo=new Me("NgAsyncValidators");function DA(t){return function ao(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}(t.value)?{required:!0}:null}function cp(t){return null}function MA(t){return null!=t}function OA(t){return hc(t)?xn(t):t}function kA(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function PA(t,e){return e.map(n=>n(t))}function NA(t){return t.map(e=>function j9(t){return!t.validate}(e)?e:n=>e.validate(n))}function $v(t){return null!=t?function RA(t){if(!t)return null;const e=t.filter(MA);return 0==e.length?null:function(n){return kA(PA(n,e))}}(NA(t)):null}function Hv(t){return null!=t?function LA(t){if(!t)return null;const e=t.filter(MA);return 0==e.length?null:function(n){return function R9(...t){const e=qs(t),{args:n,keys:r}=cx(t),i=new oe(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let d=0;d<o;d++){let g=!1;Tr(n[d]).subscribe(Ce(s,v=>{g||(g=!0,l--),a[d]=v},()=>u--,void 0,()=>{(!u||!g)&&(l||s.next(r?hx(r,a):a),s.complete())}))}});return e?i.pipe(dx(e)):i}(PA(n,e).map(OA)).pipe(Je(kA))}}(NA(t)):null}function FA(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function qv(t){return t?Array.isArray(t)?t:[t]:[]}function dp(t,e){return Array.isArray(t)?t.includes(e):t===e}function VA(t,e){const n=qv(e);return qv(t).forEach(i=>{dp(n,i)||n.push(i)}),n}function jA(t,e){return qv(e).filter(n=>!dp(t,n))}class $A{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$v(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Hv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class pr extends $A{get formDirective(){return null}get path(){return null}}class lo extends $A{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class HA{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ns=(()=>{class t extends HA{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(z(lo,2))};static#t=this.\u0275dir=Qe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&lf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Mt]})}return t})(),Qc=(()=>{class t extends HA{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(z(pr,10))};static#t=this.\u0275dir=Qe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&lf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Mt]})}return t})();const Zc="VALID",fp="INVALID",ku="PENDING",Jc="DISABLED";function Wv(t){return(pp(t)?t.validators:t)||null}function Xv(t,e){return(pp(e)?e.asyncValidators:t)||null}function pp(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class WA{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Zc}get invalid(){return this.status===fp}get pending(){return this.status==ku}get disabled(){return this.status===Jc}get enabled(){return this.status!==Jc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(VA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(VA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jA(e,this._rawAsyncValidators))}hasValidator(e){return dp(this._rawValidators,e)}hasAsyncValidator(e){return dp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ku,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Jc,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Zc,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zc||this.status===ku)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jc:Zc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ku,this._hasOwnPendingAsyncValidator=!0;const n=OA(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new pn,this.statusChanges=new pn}_calculateStatus(){return this._allControlsDisabled()?Jc:this.errors?fp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ku)?ku:this._anyControlsHaveStatus(fp)?fp:Zc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pp(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function z9(t){return Array.isArray(t)?$v(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function G9(t){return Array.isArray(t)?Hv(t):t||null}(this._rawAsyncValidators)}}class Kv extends WA{constructor(e,n,r){super(Wv(n),Xv(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function GA(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new Q(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function zA(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new Q(1e3,"");if(!r[n])throw new Q(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Pu=new Me("CallSetDisabledState",{providedIn:"root",factory:()=>gp}),gp="always";function ed(t,e,n=gp){Yv(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function K9(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&XA(t,e)})}(t,e),function Q9(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Y9(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&XA(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function X9(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function vp(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Yv(t,e){const n=function BA(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(FA(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function UA(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(FA(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();vp(e._rawValidators,i),vp(e._rawAsyncValidators,i)}function XA(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const nH={provide:pr,useExisting:jt(()=>Ko)},td=(()=>Promise.resolve())();let Ko=(()=>{class t extends pr{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new pn,this.form=new Kv({},$v(n),Hv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){td.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),ed(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){td.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){td.then(()=>{const r=this._findContainer(n.path),i=new Kv({});(function KA(t,e){Yv(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){td.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){td.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function YA(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(z(Jn,10),z(uo,10),z(Pu,8))};static#t=this.\u0275dir=Qe({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&_t("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[tn([nH]),Mt]})}return t})();function QA(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function ZA(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const JA=class extends WA{constructor(e=null,n,r){super(Wv(n),Xv(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=ZA(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){QA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){QA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ZA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},sH={provide:lo,useExisting:jt(()=>Zi)},nI=(()=>Promise.resolve())();let Zi=(()=>{class t extends lo{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new JA,this._registered=!1,this.name="",this.update=new pn,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Jv(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Si?n=s:function eH(t){return Object.getPrototypeOf(t.constructor)===Xo}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function Zv(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ed(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){nI.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&yu(r);nI.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function mp(t,e){return[...e.path,t]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(z(pr,9),z(Jn,10),z(uo,10),z(Qi,10),z(Ef,8),z(Pu,8))};static#t=this.\u0275dir=Qe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[tn([sH]),Mt,Jr]})}return t})(),nd=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Qe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})(),iI=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=mi({type:t});static#n=this.\u0275inj=Qr({})}return t})();const gH={provide:Qi,useExisting:jt(()=>bp),multi:!0};function dI(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let bp=(()=>{class t extends Xo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const i=dI(this._getOptionId(n),n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){const r=function mH(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Hn(t)))(i||t)}}();static#t=this.\u0275dir=Qe({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&_t("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[tn([gH]),Mt]})}return t})(),hI=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(dI(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||t)(z(Br),z(Cs),z(bp,9))};static#t=this.\u0275dir=Qe({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return t})();const yH={provide:Qi,useExisting:jt(()=>r_),multi:!0};function fI(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let r_=(()=>{class t extends Xo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let r;if(this.value=n,Array.isArray(n)){const i=n.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const l=this._getOptionValue(o[a].value);i.push(l)}}else{const o=r.options;for(let a=0;a<o.length;a++){const u=o[a];if(u.selected){const l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){const r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){const r=function vH(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Hn(t)))(i||t)}}();static#t=this.\u0275dir=Qe({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&_t("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[tn([yH]),Mt]})}return t})(),pI=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(fI(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(fI(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||t)(z(Br),z(Cs),z(r_,9))};static#t=this.\u0275dir=Qe({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return t})(),Yo=(()=>{class t{constructor(){this._validator=cp}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):cp,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Qe({type:t,features:[Jr]})}return t})();const TH={provide:Jn,useExisting:jt(()=>Qo),multi:!0};let Qo=(()=>{class t extends Yo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=yu,this.createValidator=n=>DA}enabled(n){return n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Hn(t)))(i||t)}}();static#t=this.\u0275dir=Qe({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Hi("required",i._enabled?"":null)},inputs:{required:"required"},features:[tn([TH]),Mt]})}return t})(),xH=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=mi({type:t});static#n=this.\u0275inj=Qr({imports:[iI]})}return t})(),IH=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Pu,useValue:n.callSetDisabledState??gp}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=mi({type:t});static#n=this.\u0275inj=Qr({imports:[xH]})}return t})(),Tp=(()=>{class t{transform(n,r){return console.log(n),console.log(r),n&&r?n.filter(i=>i.titulo.toLowerCase().includes(r.toLowerCase())):n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275pipe=sr({name:"filtro",type:t,pure:!0})}return t})();const MH=function(t){return["/Reproductor",t]};function OH(t,e){if(1&t&&(ie(0,"li",8)(1,"h3",9),je(2),fe(),ie(3,"a",10),bn(4,"img",11),fe()()),2&t){const n=e.$implicit,r=qn();Le(2),Fo(n.titulo),Le(1),Ve("routerLink",_c(3,MH,n.id)),Le(1),Ve("src",r.getImageUrl(n),ko)}}let kH=(()=>{class t{constructor(n){this.service=n,this.video=[],this.datoBuscado=""}ngOnInit(){this.obtenerLosVideos()}obtenerLosVideos(){this.service.obtenerLosVideos().subscribe(n=>{this.video=n,console.log(n),this.videosVoley()})}videosVoley(){this.video=this.video.filter(n=>"Voley"===n.categoria)}getImageUrl(n){return`http://localhost:8080/imagenes/${n.image}`}static#e=this.\u0275fac=function(r){return new(r||t)(z(Ou))};static#t=this.\u0275cmp=ir({type:t,selectors:[["app-voley"]],decls:11,vars:5,consts:[[1,"body"],[1,"background-container"],[1,"background-image"],[1,"busq-contenido"],[1,"categoria"],["type","text","name","datoBuscado","placeholder","Buscar",1,"busq-input",3,"ngModel","ngModelChange"],[1,"container"],["class","grid",4,"ngFor","ngForOf"],[1,"grid"],[1,"busq-title"],[3,"routerLink"],["alt","link",3,"src"]],template:function(r,i){1&r&&(ie(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),je(5,"Filtrando en Voley"),fe(),ie(6,"input",5),_t("ngModelChange",function(o){return i.datoBuscado=o}),fe()(),ie(7,"div",6)(8,"ul"),qi(9,OH,5,5,"li",7),Tc(10,"filtro"),fe()()()()()),2&r&&(Le(6),Ve("ngModel",i.datoBuscado),Le(3),Ve("ngForOf",Cc(10,2,i.video,i.datoBuscado)))},dependencies:[Ic,Yi,Si,Ns,Zi,Tp],styles:["*[_ngcontent-%COMP%]{text-decoration:none;list-style:none}.categoria[_ngcontent-%COMP%]{font-size:20px}.image[_ngcontent-%COMP%]{max-width:auto;max-height:200px;margin:auto auto 10px;border-radius:10px;box-shadow:0 0 30px #00000080}.busq-contenido[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:25px;font-weight:750}.container[_ngcontent-%COMP%]{margin-left:5%;align-content:flex-start;display:grid}.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:25% 25% 25% 25%}.grid[_ngcontent-%COMP%]{background-color:#f0f8ff;margin:10px;border-radius:5px;box-shadow:0 0 10px #00000080;text-align:center}.grid[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}li[_ngcontent-%COMP%]{min-height:160px;min-width:300px}img[_ngcontent-%COMP%]{padding-bottom:10px;max-height:150px}.busq-title[_ngcontent-%COMP%]{text-align:start;padding:5px 10px 0}.busq-contenido[_ngcontent-%COMP%]{margin-left:50px;border:hsla(0,8%,81%,.514) 2px solid;max-width:30%;min-width:370px;padding:10px;box-shadow:0 0 10px #00000080;margin-right:200px;margin-bottom:20px;background-color:#f0f8ff}.busq-input[_ngcontent-%COMP%]{border:none;padding:8px;margin-right:5px;background-color:transparent;border-bottom:2px solid rgba(44,44,44,.7);width:70%;transition:all 1s}.busq-input[_ngcontent-%COMP%]:focus{outline:none;border-bottom:2px solid rgba(253,110,33,.7);transition:.5s;width:100%}.background-container[_ngcontent-%COMP%]{width:100%;height:100vh;overflow:hidden}.background-image[_ngcontent-%COMP%]{top:50%;left:50%;width:100%;height:100%;background-position:center;background-size:cover;background-image:url(/assets/img/fondo--voley.jpg);background-image:no-repeat}@media screen and (max-width: 1400px){.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:33% 33% 33%}}@media screen and (max-width: 1000px){.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:50% 50%}}@media screen and (max-width: 670px){.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:75%}}"]})}return t})();const PH=function(t){return["/Reproductor",t]};function NH(t,e){if(1&t&&(ie(0,"li",8)(1,"h3",9),je(2),fe(),ie(3,"a",10),bn(4,"img",11),fe()()),2&t){const n=e.$implicit,r=qn();Le(2),Fo(n.titulo),Le(1),Ve("routerLink",_c(3,PH,n.id)),Le(1),Ve("src",r.getImageUrl(n),ko)}}let RH=(()=>{class t{constructor(n){this.service=n,this.video=[],this.datoBuscado="",this.imageUrl=""}ngOnInit(){this.obtenerLosVideos()}obtenerLosVideos(){this.service.obtenerLosVideos().subscribe(n=>{this.video=n,console.log(n),this.videosFutbol()})}videosFutbol(){this.video=this.video.filter(n=>"Futbol"===n.categoria)}getImageUrl(n){return`http://localhost:8080/imagenes/${n.image}`}static#e=this.\u0275fac=function(r){return new(r||t)(z(Ou))};static#t=this.\u0275cmp=ir({type:t,selectors:[["app-futbol"]],decls:11,vars:5,consts:[[1,"body"],[1,"background-container"],[1,"background-image"],[1,"busq-contenido"],[1,"categoria"],["type","text","name","datoBuscado","placeholder","Buscar",1,"busq-input",3,"ngModel","ngModelChange"],[1,"container"],["class","grid",4,"ngFor","ngForOf"],[1,"grid"],[1,"busq-title"],[3,"routerLink"],["alt","link",3,"src"]],template:function(r,i){1&r&&(ie(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),je(5,"Filtrando en Futbol"),fe(),ie(6,"input",5),_t("ngModelChange",function(o){return i.datoBuscado=o}),fe()(),ie(7,"div",6)(8,"ul"),qi(9,NH,5,5,"li",7),Tc(10,"filtro"),fe()()()()()),2&r&&(Le(6),Ve("ngModel",i.datoBuscado),Le(3),Ve("ngForOf",Cc(10,2,i.video,i.datoBuscado)))},dependencies:[Ic,Yi,Si,Ns,Zi,Tp],styles:[".body[_ngcontent-%COMP%]{top:50%;left:50%;width:100%;height:100%;background-position:center;background-size:cover}*[_ngcontent-%COMP%]{text-decoration:none;list-style:none}.categoria[_ngcontent-%COMP%]{font-size:20px}.image[_ngcontent-%COMP%]{max-width:auto;max-height:200px;margin:auto auto 10px;border-radius:20px;box-shadow:0 0 30px #00000080}.busq-contenido[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:25px;font-weight:750}.container[_ngcontent-%COMP%]{margin-left:5%;align-content:flex-start;display:grid}.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:25% 25% 25% 25%}.grid[_ngcontent-%COMP%]{background-color:#f0f8ff;margin:10px;border-radius:5px;box-shadow:0 0 10px #00000080;text-align:center}.grid[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}li[_ngcontent-%COMP%]{min-height:160px;min-width:300px}img[_ngcontent-%COMP%]{padding-bottom:10px;max-height:150px}.busq-title[_ngcontent-%COMP%]{text-align:start;padding:5px 10px 0}.busq-sub-title[_ngcontent-%COMP%]{padding:0 0 5px;margin:0}.busq-contenido[_ngcontent-%COMP%]{margin-left:50px;border:hsla(0,8%,81%,.514) 2px solid;max-width:30%;min-width:370px;padding:10px;box-shadow:0 0 10px #00000080;margin-right:200px;margin-bottom:20px;background-color:#f0f8ff}.busq-input[_ngcontent-%COMP%]{border:none;padding:8px;margin-right:5px;background-color:transparent;border-bottom:2px solid rgba(44,44,44,.7);width:70%;transition:all 1s}.busq-input[_ngcontent-%COMP%]:focus{outline:none;border-bottom:2px solid rgba(253,110,33,.7);transition:.5s;width:100%}.background-container[_ngcontent-%COMP%]{width:100%;height:100vh;overflow:hidden}.background-image[_ngcontent-%COMP%]{top:50%;left:50%;width:100%;height:100%;background-position:center;background-size:cover;background-image:url(/assets/img/fondo-futbol.jpg);background-image:no-repeat}@media screen and (max-width: 1400px){.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:33% 33% 33%}}@media screen and (max-width: 1000px){.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:50% 50%}}@media screen and (max-width: 670px){.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:75%}}"]})}return t})();const LH=function(t){return["/Reproductor",t]};function FH(t,e){if(1&t&&(ie(0,"li",8)(1,"h3",9),je(2),fe(),ie(3,"a",10),bn(4,"img",11),fe()()),2&t){const n=e.$implicit,r=qn();Le(2),Fo(n.titulo),Le(1),Ve("routerLink",_c(3,LH,n.id)),Le(1),Ve("src",r.getImageUrl(n),ko)}}let BH=(()=>{class t{constructor(n){this.service=n,this.video=[],this.datoBuscado=""}ngOnInit(){this.obtenerLosVideos()}obtenerLosVideos(){this.service.obtenerLosVideos().subscribe(n=>{this.video=n,console.log(n),this.videosBasquet()})}videosBasquet(){this.video=this.video.filter(n=>"Basquet"===n.categoria)}getImageUrl(n){return`http://localhost:8080/imagenes/${n.image}`}static#e=this.\u0275fac=function(r){return new(r||t)(z(Ou))};static#t=this.\u0275cmp=ir({type:t,selectors:[["app-basquet"]],decls:11,vars:5,consts:[[1,"body"],[1,"background-container"],[1,"background-image"],[1,"busq-contenido"],[1,"categoria"],["type","text","name","datoBuscado","placeholder","Buscar",1,"busq-input",3,"ngModel","ngModelChange"],[1,"container"],["class","grid",4,"ngFor","ngForOf"],[1,"grid"],[1,"busq-title"],[3,"routerLink"],["alt","link",3,"src"]],template:function(r,i){1&r&&(ie(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),je(5,"Filtrando en Basquet"),fe(),ie(6,"input",5),_t("ngModelChange",function(o){return i.datoBuscado=o}),fe()(),ie(7,"div",6)(8,"ul"),qi(9,FH,5,5,"li",7),Tc(10,"filtro"),fe()()()()()),2&r&&(Le(6),Ve("ngModel",i.datoBuscado),Le(3),Ve("ngForOf",Cc(10,2,i.video,i.datoBuscado)))},dependencies:[Ic,Yi,Si,Ns,Zi,Tp],styles:[".body[_ngcontent-%COMP%]{background-image:url(/assets/img/fondo-basquet.jpg);background-position:absolute;background-size:cover}*[_ngcontent-%COMP%]{text-decoration:none;list-style:none}.categoria[_ngcontent-%COMP%]{font-size:20px}.image[_ngcontent-%COMP%]{max-width:auto;max-height:200px;margin:auto auto 10px;border-radius:20px;box-shadow:0 0 30px #00000080}.busq-contenido[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:25px;font-weight:750}.container[_ngcontent-%COMP%]{margin-left:5%;display:grid}.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:25% 25% 25% 25%}.grid[_ngcontent-%COMP%]{background-color:#f0f8ff;margin:10px;border-radius:5px;box-shadow:0 0 10px #00000080;text-align:center}.grid[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}li[_ngcontent-%COMP%]{min-height:160px;min-width:300px}img[_ngcontent-%COMP%]{padding-bottom:10px;max-height:150px}.busq-contenido[_ngcontent-%COMP%]{margin-left:50px;border:hsla(0,8%,81%,.514) 2px solid;max-width:30%;min-width:370px;padding:10px;box-shadow:0 0 10px #00000080;margin-right:200px;margin-bottom:20px;background-color:#f0f8ff}.busq-input[_ngcontent-%COMP%]{border:none;padding:8px;margin-right:5px;background-color:transparent;border-bottom:2px solid rgba(44,44,44,.7);width:70%;transition:all 1s}.busq-input[_ngcontent-%COMP%]:focus{outline:none;border-bottom:2px solid rgba(253,110,33,.7);transition:.5s;width:100%}.background-container[_ngcontent-%COMP%]{width:100%;height:100vh;overflow:hidden}.background-image[_ngcontent-%COMP%]{top:50%;left:50%;width:100%;height:100%;background-position:center;background-size:cover;background-image:url(/assets/img/fondo-basquet.jpg);background-image:no-repeat}@media screen and (max-width: 1400px){.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:33% 33% 33%}}@media screen and (max-width: 1000px){.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:50% 50%}}@media screen and (max-width: 670px){.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:75%}}"]})}return t})();const UH=function(t){return["/Reproductor",t]};function VH(t,e){if(1&t&&(ie(0,"li",7)(1,"h3",8),je(2),fe(),ie(3,"a",9),bn(4,"img",10),fe()()),2&t){const n=e.$implicit,r=qn();Le(2),Fo(n.titulo),Le(1),Ve("routerLink",_c(3,UH,n.id)),Le(1),Ve("src",r.getImageUrl(n),ko)}}let jH=(()=>{class t{constructor(n,r){this.service=n,this.router=r,this.video=[],this.datoBuscado=""}ngOnInit(){this.obtenerLosVideos()}obtenerLosVideos(){this.service.obtenerLosVideos().subscribe(n=>{this.video=n,console.log(n)})}getImageUrl(n){return`http://localhost:8080/imagenes/${n.image}`}static#e=this.\u0275fac=function(r){return new(r||t)(z(Ou),z(Zn))};static#t=this.\u0275cmp=ir({type:t,selectors:[["app-deportes"]],decls:9,vars:5,consts:[[1,"body"],[1,"background-container"],[1,"background-image"],[1,"busq-contenido"],["type","text","name","datoBuscado","placeholder","Buscar",1,"busq-input",3,"ngModel","ngModelChange"],[1,"container"],["class","grid",4,"ngFor","ngForOf"],[1,"grid"],[1,"busq-title"],[3,"routerLink"],["alt","link",3,"src"]],template:function(r,i){1&r&&(ie(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),_t("ngModelChange",function(o){return i.datoBuscado=o}),fe()(),ie(5,"div",5)(6,"ul"),qi(7,VH,5,5,"li",6),Tc(8,"filtro"),fe()()()()()),2&r&&(Le(4),Ve("ngModel",i.datoBuscado),Le(3),Ve("ngForOf",Cc(8,2,i.video,i.datoBuscado)))},dependencies:[Ic,Yi,Si,Ns,Zi,Tp],styles:["*[_ngcontent-%COMP%]{text-decoration:none;list-style:none}.background-container[_ngcontent-%COMP%]{width:100%;height:100vh;overflow:hidden}.background-image[_ngcontent-%COMP%]{top:50%;left:50%;width:100%;height:100%;background-position:center;background-size:cover;animation:_ngcontent-%COMP%_changeBackground 15s infinite;background-image:no-repeat}@keyframes _ngcontent-%COMP%_changeBackground{0%{background-image:url(/assets/img/fondo-futbol.jpg)}25%{background-image:url(/assets/img/fondo-basquet.jpg)}75%{background-image:url(/assets/img/fondo--voley.jpg)}to{background-image:url(/assets/img/fondo-futbol.jpg)}}.container[_ngcontent-%COMP%]{margin-left:5%;display:grid}.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:25% 25% 25% 25%}.grid[_ngcontent-%COMP%]{background-color:#f0f8ff;margin:10px;border-radius:5px;box-shadow:0 0 10px #00000080;text-align:center}.grid[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}li[_ngcontent-%COMP%]{min-height:160px;min-width:300px}.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:0 15px}img[_ngcontent-%COMP%]{padding-bottom:10px;max-height:150px}.busq-title[_ngcontent-%COMP%]{text-align:start;padding:5px 10px 0}.busq-sub-title[_ngcontent-%COMP%]{padding:0 0 5px;margin:0}.busq-contenido[_ngcontent-%COMP%]{margin-left:50px;border:hsla(0,8%,81%,.514) 2px solid;max-width:30%;min-width:370px;padding:10px;box-shadow:0 0 10px #00000080;margin-right:200px;margin-bottom:20px;background-color:#f0f8ff}.busq-input[_ngcontent-%COMP%]{border:none;padding:8px;margin-right:5px;background-color:transparent;border-bottom:2px solid rgba(44,44,44,.7);width:70%;transition:all 1s}.busq-input[_ngcontent-%COMP%]:focus{outline:none;border-bottom:2px solid rgba(253,110,33,.7);transition:.5s;width:100%}@media screen and (max-width: 1400px){.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:33% 33% 33%}}@media screen and (max-width: 1000px){.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:50% 50%}}@media screen and (max-width: 670px){.container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;padding:0;width:100%;grid-template-columns:75%}}"]})}return t})(),$H=(()=>{class t{constructor(){this.nombre="",this.correo="",this.mensaje=""}enviarMensaje(){console.log("Mensaje enviado:",this.nombre,this.correo,this.mensaje)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=ir({type:t,selectors:[["app-contacto"]],decls:22,vars:3,consts:[[1,"body"],[1,"background-container"],[1,"background-image"],[1,"contenedor"],[1,"contact-form"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","",3,"ngModel","ngModelChange"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModel","ngModelChange"],["for","message"],["id","message","name","message","required","",3,"ngModel","ngModelChange"],["type","submit"]],template:function(r,i){1&r&&(ie(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),je(5,"Contacto"),fe(),ie(6,"div",4)(7,"form",5),_t("ngSubmit",function(){return i.enviarMensaje()}),ie(8,"div",6)(9,"label",7),je(10,"Nombre:"),fe(),ie(11,"input",8),_t("ngModelChange",function(o){return i.nombre=o}),fe()(),ie(12,"div",6)(13,"label",9),je(14,"Correo electr\xf3nico:"),fe(),ie(15,"input",10),_t("ngModelChange",function(o){return i.correo=o}),fe()(),ie(16,"div",6)(17,"label",11),je(18,"Mensaje:"),fe(),ie(19,"textarea",12),_t("ngModelChange",function(o){return i.mensaje=o}),fe()(),ie(20,"button",13),je(21,"Enviar mensaje"),fe()()()()()()()),2&r&&(Le(11),Ve("ngModel",i.nombre),Le(4),Ve("ngModel",i.correo),Le(4),Ve("ngModel",i.mensaje))},dependencies:[nd,Si,Ns,Qc,Qo,Zi,Ko],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#d2d2d2cc;max-width:50%;margin:0 auto}h1[_ngcontent-%COMP%]{text-align:center;color:#000}.contact-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#000}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px}textarea[_ngcontent-%COMP%]{height:150px}button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#333;color:#fff;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#000}.background-container[_ngcontent-%COMP%]{width:100%;height:100vh;overflow:hidden}.background-image[_ngcontent-%COMP%]{top:50%;left:50%;width:100%;height:100%;background-position:center;background-size:cover;animation:_ngcontent-%COMP%_changeBackground 15s infinite;background-image:no-repeat}@keyframes _ngcontent-%COMP%_changeBackground{0%{background-image:url(/assets/img/fondo-futbol.jpg)}25%{background-image:url(/assets/img/fondo-basquet.jpg)}75%{background-image:url(/assets/img/fondo-voley.jpg)}to{background-image:url(/assets/img/fondo-futbol.jpg)}}"]})}return t})();class HH{constructor(e,n,r,i,s,o){this.id=e,this.titulo=n,this.subtitulo=r,this.image=i,this.url=s,this.categoria=o}}class qH{constructor(e,n,r,i){this.username=n,this.password=r,this.email=i,this.nombre=e}}class zH{constructor(e,n){this.username=e,this.password=n}}const i_="AuthToken",s_="AuthUsername",o_="AuthAutorities";let a_=(()=>{class t{constructor(){this.roles=[],this.rol=""}setToken(n){window.sessionStorage.removeItem(i_),window.sessionStorage.setItem(i_,n)}getToken(){return sessionStorage.getItem(i_)}setUserName(n){window.sessionStorage.removeItem(s_),window.sessionStorage.setItem(s_,n)}getUserName(){return sessionStorage.getItem(s_)}setAuthorities(n){window.sessionStorage.removeItem(o_),window.sessionStorage.setItem(o_,JSON.stringify(n))}getAuthorities(){this.roles=[];const n=sessionStorage.getItem(o_);if(n){const r=JSON.parse(n);if(!Array.isArray(r))return console.error("El objeto parseado no es un array:",r),r;console.error("lo devuelve bien",r)}return this.roles}logOut(){window.sessionStorage.clear()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),u_=(()=>{class t{constructor(n){this.httpClient=n,this.baseURL="http://localhost:8080/auth/"}newUs(n){return this.httpClient.post(this.baseURL+"registerUser",n)}login(n){return this.httpClient.post(this.baseURL+"login",n)}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(qf))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function GH(t,e){1&t&&bn(0,"div")}const WH=function(){return["/Subir"]};function XH(t,e){if(1&t){const n=af();ie(0,"div",2)(1,"div")(2,"h1"),je(3),fe()(),ie(4,"button")(5,"a",3),je(6,"Subir nuevo contenido"),fe()(),ie(7,"button",4),_t("click",function(){return Fi(n),Bi(qn().logOut())}),je(8,"cerrar session"),fe(),qi(9,GH,1,0,"div",5),fe()}if(2&t){const n=qn();Le(3),df("welcome ",n.usuariologueado,""),Le(2),Ve("routerLink",On(3,WH)),Le(4),Ve("ngIf",n.usuariologueado)}}function KH(t,e){if(1&t){const n=af();ie(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"ul",11)(6,"li",12)(7,"a",13),je(8,"Iniciar Sesi\xf3n"),fe()(),ie(9,"li",12)(10,"a",14),je(11,"Crear Cuenta"),fe()()()(),ie(12,"div",15)(13,"form",16,17),_t("ngSubmit",function(){return Fi(n),Bi(qn().onLogin())}),ie(15,"div",18)(16,"label",19),je(17,"Nombre de Usuario"),fe(),ie(18,"input",20),_t("ngModelChange",function(i){return Fi(n),Bi(qn().username=i)}),fe()(),ie(19,"div",18)(20,"label",21),je(21,"Contrase\xf1a"),fe(),ie(22,"input",22),_t("ngModelChange",function(i){return Fi(n),Bi(qn().password=i)}),fe()(),ie(23,"div",18)(24,"button",23),bn(25,"i",24),je(26,"Iniciar Sesi\xf3n"),fe()()()()()()()()}if(2&t){const n=dc(14),r=qn();Le(18),Ve("ngModel",r.username),Le(4),Ve("ngModel",r.password),Le(2),Ve("disabled",!n.valid)}}let YH=(()=>{class t{constructor(n,r,i){this.tokenService=n,this.authService=r,this.router=i,this.isLogged=!1,this.isLoginFail=!1,this.email="",this.username="",this.password="",this.roles=[],this.errMsj="no funca",this.usuariologueado=this.tokenService.getUserName()}ngOnInit(){this.tokenService.getToken()&&(this.isLogged=!0,this.isLoginFail=!1)}onLogin(){this.login=new zH(this.username,this.password),this.authService.login(this.login).subscribe({next:n=>{this.isLogged=!0,this.isLoginFail=!1,this.tokenService.setToken(n.token),this.tokenService.setUserName(n.username),this.tokenService.setAuthorities(n.authorities),this.roles=n.authorities,this.router.navigate(["/"]),this.usuariologueado=this.username,console.log(this.usuariologueado)},error:n=>{this.isLogged=!1,this.isLoginFail=!0,console.log(this.errMsj="no funca")}})}logOut(){this.router.navigate(["/login"]),this.isLogged=!1,sessionStorage.clear(),console.log("usuario borrado")}static#e=this.\u0275fac=function(r){return new(r||t)(z(a_),z(u_),z(Zn))};static#t=this.\u0275cmp=ir({type:t,selectors:[["app-login"]],decls:3,vars:2,consts:[["class","text-center",4,"ngIf","ngIfElse"],["loggedOut",""],[1,"text-center"],[3,"routerLink"],[3,"click"],[4,"ngIf"],[1,"fondo"],[1,"formulario"],[1,"container","d-flex","justify-content-center"],[1,"card"],[1,"card-header"],[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/login",1,"nav-link","active"],["routerLink","/registro",1,"nav-link"],[1,"card-body"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","username"],["type","text","name","username","id","username","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","id","password","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-outline-success","btn-block",3,"disabled"],[1,"fas","fa-sign-in-alt"]],template:function(r,i){if(1&r&&(qi(0,XH,10,4,"div",0),qi(1,KH,27,3,"ng-template",null,1,my)),2&r){const s=dc(2);Ve("ngIf",i.isLogged)("ngIfElse",s)}},dependencies:[Qy,Yi,nd,Si,Ns,Qc,Qo,Zi,Ko],styles:[".fondo[_ngcontent-%COMP%]{background-image:url(/assets/img/fondoLogin.jpg);background-position:absolute;background-size:cover;top:50%;left:50%;width:100%;height:59vh}"]})}return t})();function QH(t,e){1&t&&(ie(0,"div",2)(1,"h2"),je(2,"Ya has iniciado sesi\xf3n"),fe()())}function ZH(t,e){if(1&t){const n=af();ie(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"ul",7)(5,"li",8)(6,"a",9),je(7,"Iniciar Sesi\xf3n"),fe()(),ie(8,"li",8)(9,"a",10),je(10,"Crear Cuenta"),fe()()()(),ie(11,"div",11)(12,"form",12,13),_t("ngSubmit",function(){return Fi(n),Bi(qn().onRegister())}),ie(14,"div",14)(15,"label",15),je(16,"Nombre"),fe(),ie(17,"input",16),_t("ngModelChange",function(i){return Fi(n),Bi(qn().nombre=i)}),fe()(),ie(18,"div",14)(19,"label",17),je(20,"Nombre de Usuario"),fe(),ie(21,"input",18),_t("ngModelChange",function(i){return Fi(n),Bi(qn().username=i)}),fe()(),ie(22,"div",14)(23,"label",19),je(24,"Contrase\xf1a"),fe(),ie(25,"input",20),_t("ngModelChange",function(i){return Fi(n),Bi(qn().password=i)}),fe()(),ie(26,"div",14)(27,"label",21),je(28,"Correo Electr\xf3nico"),fe(),ie(29,"input",22),_t("ngModelChange",function(i){return Fi(n),Bi(qn().email=i)}),fe()(),ie(30,"div",14)(31,"button",23),bn(32,"i",24),je(33," Crear Cuenta"),fe()()()()()()()}if(2&t){const n=dc(13),r=qn();Le(17),Ve("ngModel",r.nombre),Le(4),Ve("ngModel",r.username),Le(4),Ve("ngModel",r.password),Le(4),Ve("ngModel",r.email),Le(2),Ve("disabled",!n.valid)}}let JH=(()=>{class t{constructor(n,r,i){this.tokenService=n,this.authService=r,this.router=i,this.nombre="",this.username="",this.email="",this.password="",this.errMsj="",this.isLogged=!1,this.isRegister=!1,this.isRegisterFail=!1}ngOnInit(){this.tokenService.getToken()&&(this.isLogged=!0)}onRegister(){this.nuevoUsuario=new qH(this.nombre,this.username,this.password,this.email),this.authService.newUs(this.nuevoUsuario).subscribe({next:n=>{this.isRegister=!0,this.isRegisterFail=!1,this.router.navigate(["/login"])},error:n=>{this.isRegister=!1,this.isRegisterFail=!0,this.errMsj="no capo, corregi y volve"}})}static#e=this.\u0275fac=function(r){return new(r||t)(z(a_),z(u_),z(Zn))};static#t=this.\u0275cmp=ir({type:t,selectors:[["app-registro"]],decls:3,vars:2,consts:[["class","text-center",4,"ngIf","ngIfElse"],["loggedOut",""],[1,"text-center"],[1,"fondo"],[1,"container","d-flex","justify-content-center"],[1,"card"],[1,"card-header"],[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/login",1,"nav-link"],["routerLink","/registro",1,"nav-link","active"],[1,"card-body"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","nombre"],["type","text","name","nombre","id","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","username"],["type","text","name","username","id","username","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","id","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["type","text","name","email","id","email","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-outline-success","btn-block",3,"disabled"],[1,"fas","fa-sign-in-alt"]],template:function(r,i){if(1&r&&(qi(0,QH,3,0,"div",0),qi(1,ZH,34,5,"ng-template",null,1,my)),2&r){const s=dc(2);Ve("ngIf",i.isLogged)("ngIfElse",s)}},dependencies:[Qy,Yi,nd,Si,Ns,Qc,Qo,Zi,Ko],styles:[".fondo[_ngcontent-%COMP%]{background-image:url(/assets/img/fondoLogin.jpg);background-position:absolute;background-size:cover;top:50%;left:50%;width:100%;height:59vh}"]})}return t})();var eq=ve(382),O=ve.n(eq),tq=ve(598),ue=ve.n(tq),nq=ve(317),it=ve.n(nq),rq=ve(135),iq=ve.n(rq),sq=ve(817),DI=ve.n(sq),oq=ve(506),SI=ve.n(oq),aq=ve(367),Cp=ve.n(aq);function co(){return co=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},co.apply(this,arguments)}var l_=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(r,i){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(i)},e.off=function(r,i){if(!this.listeners[r])return!1;var s=this.listeners[r].indexOf(i);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(s,1),s>-1},e.trigger=function(r){var i=this.listeners[r];if(i)if(2===arguments.length)for(var s=i.length,o=0;o<s;++o)i[o].call(this,arguments[1]);else for(var a=Array.prototype.slice.call(arguments,1),u=i.length,l=0;l<u;++l)i[l].apply(this,a)},e.dispose=function(){this.listeners={}},e.pipe=function(r){this.on("data",function(i){r.push(i)})},t}();function dq(t){for(var e=function(e){return O().atob?O().atob(e):Buffer.from(e,"base64").toString("binary")}(t),n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}class hq extends l_{constructor(){super(),this.buffer=""}push(e){let n;for(this.buffer+=e,n=this.buffer.indexOf("\n");n>-1;n=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,n)),this.buffer=this.buffer.substring(n+1)}}const fq=String.fromCharCode(9),c_=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),n={};return e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),n},ii=function(t){const e={};if(!t)return e;const n=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let i,r=n.length;for(;r--;)""!==n[r]&&(i=/([^=]*)=(.*)/.exec(n[r]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),e[i[0]]=i[1]);return e};class gq extends l_{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let n,r;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((s,o)=>{const a=o(e);return a===e?s:s.concat([a])},[e]).forEach(s=>{for(let o=0;o<this.customParsers.length;o++)if(this.customParsers[o].call(this,s))return;if(0===s.indexOf("#EXT"))if(s=s.replace("\r",""),n=/^#EXTM3U/.exec(s),n)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(n=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(s),n)return r={type:"tag",tagType:"inf"},n[1]&&(r.duration=parseFloat(n[1])),n[2]&&(r.title=n[2]),void this.trigger("data",r);if(n=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(s),n)return r={type:"tag",tagType:"targetduration"},n[1]&&(r.duration=parseInt(n[1],10)),void this.trigger("data",r);if(n=/^#EXT-X-VERSION:([0-9.]*)?/.exec(s),n)return r={type:"tag",tagType:"version"},n[1]&&(r.version=parseInt(n[1],10)),void this.trigger("data",r);if(n=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(s),n)return r={type:"tag",tagType:"media-sequence"},n[1]&&(r.number=parseInt(n[1],10)),void this.trigger("data",r);if(n=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(s),n)return r={type:"tag",tagType:"discontinuity-sequence"},n[1]&&(r.number=parseInt(n[1],10)),void this.trigger("data",r);if(n=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(s),n)return r={type:"tag",tagType:"playlist-type"},n[1]&&(r.playlistType=n[1]),void this.trigger("data",r);if(n=/^#EXT-X-BYTERANGE:(.*)?$/.exec(s),n)return r=co(c_(n[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",r);if(n=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(s),n)return r={type:"tag",tagType:"allow-cache"},n[1]&&(r.allowed=!/NO/.test(n[1])),void this.trigger("data",r);if(n=/^#EXT-X-MAP:(.*)$/.exec(s),n){if(r={type:"tag",tagType:"map"},n[1]){const o=ii(n[1]);o.URI&&(r.uri=o.URI),o.BYTERANGE&&(r.byterange=c_(o.BYTERANGE))}this.trigger("data",r)}else if(n=/^#EXT-X-STREAM-INF:(.*)$/.exec(s),n){if(r={type:"tag",tagType:"stream-inf"},n[1]){if(r.attributes=ii(n[1]),r.attributes.RESOLUTION){const o=r.attributes.RESOLUTION.split("x"),a={};o[0]&&(a.width=parseInt(o[0],10)),o[1]&&(a.height=parseInt(o[1],10)),r.attributes.RESOLUTION=a}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}this.trigger("data",r)}else{if(n=/^#EXT-X-MEDIA:(.*)$/.exec(s),n)return r={type:"tag",tagType:"media"},n[1]&&(r.attributes=ii(n[1])),void this.trigger("data",r);if(n=/^#EXT-X-ENDLIST/.exec(s),n)this.trigger("data",{type:"tag",tagType:"endlist"});else if(n=/^#EXT-X-DISCONTINUITY/.exec(s),n)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(n=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(s),n)return r={type:"tag",tagType:"program-date-time"},n[1]&&(r.dateTimeString=n[1],r.dateTimeObject=new Date(n[1])),void this.trigger("data",r);if(n=/^#EXT-X-KEY:(.*)$/.exec(s),n)return r={type:"tag",tagType:"key"},n[1]&&(r.attributes=ii(n[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void this.trigger("data",r);if(n=/^#EXT-X-START:(.*)$/.exec(s),n)return r={type:"tag",tagType:"start"},n[1]&&(r.attributes=ii(n[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void this.trigger("data",r);if(n=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(s),n)return r={type:"tag",tagType:"cue-out-cont"},r.data=n[1]?n[1]:"",void this.trigger("data",r);if(n=/^#EXT-X-CUE-OUT:(.*)?$/.exec(s),n)return r={type:"tag",tagType:"cue-out"},r.data=n[1]?n[1]:"",void this.trigger("data",r);if(n=/^#EXT-X-CUE-IN:(.*)?$/.exec(s),n)return r={type:"tag",tagType:"cue-in"},r.data=n[1]?n[1]:"",void this.trigger("data",r);if(n=/^#EXT-X-SKIP:(.*)$/.exec(s),n&&n[1])return r={type:"tag",tagType:"skip"},r.attributes=ii(n[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(fq)),void this.trigger("data",r);if(n=/^#EXT-X-PART:(.*)$/.exec(s),n&&n[1])return r={type:"tag",tagType:"part"},r.attributes=ii(n[1]),["DURATION"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=parseFloat(r.attributes[o]))}),["INDEPENDENT","GAP"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=/YES/.test(r.attributes[o]))}),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=c_(r.attributes.BYTERANGE)),void this.trigger("data",r);if(n=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(s),n&&n[1])return r={type:"tag",tagType:"server-control"},r.attributes=ii(n[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=parseFloat(r.attributes[o]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=/YES/.test(r.attributes[o]))}),void this.trigger("data",r);if(n=/^#EXT-X-PART-INF:(.*)$/.exec(s),n&&n[1])return r={type:"tag",tagType:"part-inf"},r.attributes=ii(n[1]),["PART-TARGET"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=parseFloat(r.attributes[o]))}),void this.trigger("data",r);if(n=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(s),n&&n[1])return r={type:"tag",tagType:"preload-hint"},r.attributes=ii(n[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(o){if(r.attributes.hasOwnProperty(o)){r.attributes[o]=parseInt(r.attributes[o],10);const a="BYTERANGE-LENGTH"===o?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[a]=r.attributes[o],delete r.attributes[o]}}),void this.trigger("data",r);if(n=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(s),n&&n[1])return r={type:"tag",tagType:"rendition-report"},r.attributes=ii(n[1]),["LAST-MSN","LAST-PART"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=parseInt(r.attributes[o],10))}),void this.trigger("data",r);if(n=/^#EXT-X-DATERANGE:(.*)$/.exec(s),n&&n[1]){r={type:"tag",tagType:"daterange"},r.attributes=ii(n[1]),["ID","CLASS"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=String(r.attributes[a]))}),["START-DATE","END-DATE"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=new Date(r.attributes[a]))}),["DURATION","PLANNED-DURATION"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=parseFloat(r.attributes[a]))}),["END-ON-NEXT"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=/YES/i.test(r.attributes[a]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=r.attributes[a].toString(16))});const o=/^X-([A-Z]+-)+[A-Z]+$/;for(const a in r.attributes){if(!o.test(a))continue;const u=/[0-9A-Fa-f]{6}/g.test(r.attributes[a]),l=/^\d+(\.\d+)?$/.test(r.attributes[a]);r.attributes[a]=u?r.attributes[a].toString(16):l?parseFloat(r.attributes[a]):String(r.attributes[a])}this.trigger("data",r)}else n=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(s),this.trigger("data",n?{type:"tag",tagType:"independent-segments"}:{type:"tag",data:s.slice(4)})}}}else this.trigger("data",{type:"comment",text:s.slice(1)})}):this.trigger("data",{type:"uri",uri:e}))}addParser({expression:e,customType:n,dataParser:r,segment:i}){"function"!=typeof r&&(r=s=>s),this.customParsers.push(s=>{if(e.exec(s))return this.trigger("data",{type:"custom",data:r(s),customType:n,segment:i}),!0})}addTagMapper({expression:e,map:n}){this.tagMappers.push(i=>e.test(i)?n(i):i)}}const Zo=function(t){const e={};return Object.keys(t).forEach(function(n){e[(t=>t.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()))(n)]=t[n]}),e},d_=function(t){const{serverControl:e,targetDuration:n,partTargetDuration:r}=t;if(!e)return;const i="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",a=n&&3*n,u=r&&2*r;n&&!e.hasOwnProperty(s)&&(e[s]=a,this.trigger("info",{message:`${i} defaulting HOLD-BACK to targetDuration * 3 (${a}).`})),a&&e[s]<a&&(this.trigger("warn",{message:`${i} clamping HOLD-BACK (${e[s]}) to targetDuration * 3 (${a})`}),e[s]=a),r&&!e.hasOwnProperty(o)&&(e[o]=3*r,this.trigger("info",{message:`${i} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[o]}).`})),r&&e[o]<u&&(this.trigger("warn",{message:`${i} clamping PART-HOLD-BACK (${e[o]}) to partTargetDuration * 2 (${u}).`}),e[o]=u)};class yq extends l_{constructor(){super(),this.lineStream=new hq,this.parseStream=new gq,this.lineStream.pipe(this.parseStream);const e=this,n=[];let i,s,r={},o=!1;const a=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let d=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let g=0,v=0;const b={};this.on("end",()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&i&&(r.map=i),!r.key&&s&&(r.key=s),!r.timeline&&"number"==typeof d&&(r.timeline=d),this.manifest.preloadSegment=r)}),this.parseStream.on("data",function(_){let E,A;({tag(){({version(){_.version&&(this.manifest.version=_.version)},"allow-cache"(){this.manifest.allowCache=_.allowed,"allowed"in _||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const P={};"length"in _&&(r.byterange=P,P.length=_.length,"offset"in _||(_.offset=g)),"offset"in _&&(r.byterange=P,P.offset=_.offset),g=P.offset+P.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),_.duration>0&&(r.duration=_.duration),0===_.duration&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key(){if(_.attributes)if("NONE"!==_.attributes.METHOD){if(_.attributes.URI)return"com.apple.streamingkeydelivery"===_.attributes.KEYFORMAT?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:_.attributes})):"com.microsoft.playready"===_.attributes.KEYFORMAT?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:_.attributes.URI})):"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===_.attributes.KEYFORMAT?-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(_.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===_.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==_.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):_.attributes.KEYID&&"0x"===_.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:_.attributes.KEYFORMAT,keyId:_.attributes.KEYID.substring(2)},pssh:dq(_.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"})):(_.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),s={method:_.attributes.METHOD||"AES-128",uri:_.attributes.URI},void(typeof _.attributes.IV<"u"&&(s.iv=_.attributes.IV)));this.trigger("warn",{message:"ignoring key declaration without URI"})}else s=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(_.number)?this.manifest.mediaSequence=_.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+_.number})},"discontinuity-sequence"(){isFinite(_.number)?(this.manifest.discontinuitySequence=_.number,d=_.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+_.number})},"playlist-type"(){/VOD|EVENT/.test(_.playlistType)?this.manifest.playlistType=_.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+_.playlist})},map(){i={},_.uri&&(i.uri=_.uri),_.byterange&&(i.byterange=_.byterange),s&&(i.key=s)},"stream-inf"(){this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||u,_.attributes?(r.attributes||(r.attributes={}),co(r.attributes,_.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(_.attributes&&_.attributes.TYPE&&_.attributes["GROUP-ID"]&&_.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const P=this.manifest.mediaGroups[_.attributes.TYPE];P[_.attributes["GROUP-ID"]]=P[_.attributes["GROUP-ID"]]||{},E=P[_.attributes["GROUP-ID"]],A={default:/yes/i.test(_.attributes.DEFAULT)},A.autoselect=!!A.default||/yes/i.test(_.attributes.AUTOSELECT),_.attributes.LANGUAGE&&(A.language=_.attributes.LANGUAGE),_.attributes.URI&&(A.uri=_.attributes.URI),_.attributes["INSTREAM-ID"]&&(A.instreamId=_.attributes["INSTREAM-ID"]),_.attributes.CHARACTERISTICS&&(A.characteristics=_.attributes.CHARACTERISTICS),_.attributes.FORCED&&(A.forced=/yes/i.test(_.attributes.FORCED)),E[_.attributes.NAME]=A},discontinuity(){d+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=_.dateTimeString,this.manifest.dateTimeObject=_.dateTimeObject),r.dateTimeString=_.dateTimeString,r.dateTimeObject=_.dateTimeObject},targetduration(){!isFinite(_.duration)||_.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+_.duration}):(this.manifest.targetDuration=_.duration,d_.call(this,this.manifest))},start(){_.attributes&&!isNaN(_.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:_.attributes["TIME-OFFSET"],precise:_.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){r.cueOut=_.data},"cue-out-cont"(){r.cueOutCont=_.data},"cue-in"(){r.cueIn=_.data},skip(){this.manifest.skip=Zo(_.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",_.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const P=this.manifest.segments.length,x=Zo(_.attributes);r.parts=r.parts||[],r.parts.push(x),x.byterange&&(x.byterange.hasOwnProperty("offset")||(x.byterange.offset=v),v=x.byterange.offset+x.byterange.length),this.warnOnMissingAttributes_(`#EXT-X-PART #${r.parts.length-1} for segment #${P}`,_.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((F,R)=>{F.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${R} lacks required attribute(s): LAST-PART`})})},"server-control"(){const P=this.manifest.serverControl=Zo(_.attributes);P.hasOwnProperty("canBlockReload")||(P.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),d_.call(this,this.manifest),P.canSkipDateranges&&!P.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const P=this.manifest.segments.length,x=Zo(_.attributes),B=x.type&&"PART"===x.type;r.preloadHints=r.preloadHints||[],r.preloadHints.push(x),x.byterange&&(x.byterange.hasOwnProperty("offset")||(x.byterange.offset=B?v:0,B&&(v=x.byterange.offset+x.byterange.length)));const F=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${F} for segment #${P}`,_.attributes,["TYPE","URI"]),x.type)for(let R=0;R<r.preloadHints.length-1;R++){const Z=r.preloadHints[R];Z.type&&Z.type===x.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${F} for segment #${P} has the same TYPE ${x.type} as preload hint #${R}`})}},"rendition-report"(){const P=Zo(_.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(P);const x=this.manifest.renditionReports.length-1,B=["LAST-MSN","URI"];o&&B.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${x}`,_.attributes,B)},"part-inf"(){this.manifest.partInf=Zo(_.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",_.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),d_.call(this,this.manifest)},daterange(){this.manifest.daterange=this.manifest.daterange||[],this.manifest.daterange.push(Zo(_.attributes));const P=this.manifest.daterange.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${P}`,_.attributes,["ID","START-DATE"]);const x=this.manifest.daterange[P];x.endDate&&x.startDate&&new Date(x.endDate)<new Date(x.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),x.duration&&x.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),x.plannedDuration&&x.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const B=!!x.endOnNext;if(B&&!x.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),B&&(x.duration||x.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),x.duration&&x.endDate){const F=x.startDate,R=F.setSeconds(F.getSeconds()+x.duration);this.manifest.daterange[P].endDate=new Date(R)}if(x&&!this.manifest.dateTimeString&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),b[x.id]){for(const F in b[x.id])if(b[x.id][F]!==x[F]){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes and same attribute values"});break}}else b[x.id]=x},"independent-segments"(){this.manifest.independentSegments=!0}}[_.tagType]||a).call(e)},uri(){r.uri=_.uri,n.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),s&&(r.key=s),r.timeline=d,i&&(r.map=i),v=0,r={}},comment(){},custom(){_.segment?(r.custom=r.custom||{},r.custom[_.customType]=_.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[_.customType]=_.data)}})[_.type].call(e)})}warnOnMissingAttributes_(e,n,r){const i=[];r.forEach(function(s){n.hasOwnProperty(s)||i.push(s)}),i.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${i.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push("\n"),this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var t,ho={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},vq=["video","audio","text"],xI=["Video","Audio","Text"],h_=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(n,r,i){return"avc1."+("00"+Number(r).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})},Ji=function(e){void 0===e&&(e="");var n=e.split(","),r=[];return n.forEach(function(i){var s;i=i.trim(),vq.forEach(function(o){var a=ho[o].exec(i.toLowerCase());if(a&&!(a.length<=1)){s=o;var u=i.substring(0,a[1].length),l=i.replace(u,"");r.push({type:u,details:l,mediaType:o})}}),s||r.push({type:i,details:"",mediaType:"unknown"})}),r},AI=function(e){return void 0===e&&(e=""),ho.audio.test(e.trim().toLowerCase())},rd=function(e){if(e&&"string"==typeof e){var n=e.toLowerCase().split(",").map(function(s){return h_(s.trim())}),r="video";1===n.length&&AI(n[0])?r="audio":1===n.length&&function(e){return void 0===e&&(e=""),ho.text.test(e.trim().toLowerCase())}(n[0])&&(r="application");var i="mp4";return n.every(function(s){return ho.mp4.test(s)})?i="mp4":n.every(function(s){return ho.webm.test(s)})?i="webm":n.every(function(s){return ho.ogg.test(s)})&&(i="ogg"),r+"/"+i+';codecs="'+e+'"'}},Ep=function(e){return void 0===e&&(e=""),O().MediaSource&&O().MediaSource.isTypeSupported&&O().MediaSource.isTypeSupported(rd(e))||!1},f_=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every(function(n){n=n.trim();for(var r=0;r<xI.length;r++)if(ho["muxer"+xI[r]].test(n))return!0;return!1})},II="mp4a.40.2",Eq=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Dq=/^application\/dash\+xml/i,MI=function(e){return Eq.test(e)?"hls":Dq.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},kI=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Fe=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!function(e){return kI(e)}(e)&&!(e instanceof ArrayBuffer)&&(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},zn=O().BigInt||Number,p_=[zn("0x1"),zn("0x100"),zn("0x10000"),zn("0x1000000"),zn("0x100000000"),zn("0x10000000000"),zn("0x1000000000000"),zn("0x100000000000000"),zn("0x10000000000000000")],Iq=(t=new Uint16Array([65484]),new Uint8Array(t.buffer,t.byteOffset,t.byteLength),function(e,n){var r=void 0===n?{}:n,i=r.signed,s=void 0!==i&&i,o=r.le,a=void 0!==o&&o;e=Fe(e);var u=a?"reduce":"reduceRight",d=(e[u]?e[u]:Array.prototype[u]).call(e,function(v,b,_){var E=a?_:Math.abs(_+1-e.length);return v+zn(b)*p_[E]},zn(0));if(s){var g=p_[e.length]/zn(2)-zn(1);(d=zn(d))>g&&(d-=g,d-=g,d-=zn(2))}return Number(d)}),NI=function(e,n){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;n||(e=unescape(encodeURIComponent(e)));for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r},nn=function(e,n,r){var i=void 0===r?{}:r,s=i.offset,o=void 0===s?0:s,a=i.mask,u=void 0===a?[]:a;return e=Fe(e),(n=Fe(n)).length&&e.length-o>=n.length&&(n.every?n.every:Array.prototype.every).call(n,function(d,g){return d===(u[g]?u[g]&e[o+g]:e[o+g])})};const g_=function(e,n){if(/^[a-z]+:/i.test(n))return n;/^data:/.test(e)&&(e=O().location&&O().location.href||"");var r="function"==typeof O().URL,i=/^\/\//.test(e),s=!O().location&&!/\/\//i.test(e);if(r?e=new(O().URL)(e,O().location||"http://example.com"):/\/\//i.test(e)||(e=Cp().buildAbsoluteURL(O().location&&O().location.href||"",e)),r){var o=new URL(n,e);return s?o.href.slice(18):i?o.href.slice(o.protocol.length):o.href}return Cp().buildAbsoluteURL(e,n)};var Fq=ve(862);const LI=t=>!!t&&"object"==typeof t,Nn=(...t)=>t.reduce((e,n)=>("object"!=typeof n||Object.keys(n).forEach(r=>{e[r]=Array.isArray(e[r])&&Array.isArray(n[r])?e[r].concat(n[r]):LI(e[r])&&LI(n[r])?Nn(e[r],n[r]):n[r]}),e),{}),FI=t=>Object.keys(t).map(e=>t[e]),Nu=t=>t.reduce((e,n)=>e.concat(n),[]),BI=t=>{if(!t.length)return[];const e=[];for(let n=0;n<t.length;n++)e.push(t[n]);return e};const id=({baseUrl:t="",source:e="",range:n="",indexRange:r=""})=>{const i={uri:e,resolvedUri:g_(t||"",e)};if(n||r){const o=(n||r).split("-");let l,a=O().BigInt?O().BigInt(o[0]):parseInt(o[0],10),u=O().BigInt?O().BigInt(o[1]):parseInt(o[1],10);a<Number.MAX_SAFE_INTEGER&&"bigint"==typeof a&&(a=Number(a)),u<Number.MAX_SAFE_INTEGER&&"bigint"==typeof u&&(u=Number(u)),l="bigint"==typeof u||"bigint"==typeof a?O().BigInt(u)-O().BigInt(a)+O().BigInt(1):u-a+1,"bigint"==typeof l&&l<Number.MAX_SAFE_INTEGER&&(l=Number(l)),i.byterange={length:l,offset:a}}return i},UI=t=>(t&&"number"!=typeof t&&(t=parseInt(t,10)),isNaN(t)?null:t),$q={static(t){const{duration:e,timescale:n=1,sourceDuration:r,periodDuration:i}=t,s=UI(t.endNumber),o=e/n;return"number"==typeof s?{start:0,end:s}:"number"==typeof i?{start:0,end:i/o}:{start:0,end:r/o}},dynamic(t){const{NOW:e,clientOffset:n,availabilityStartTime:r,timescale:i=1,duration:s,periodStart:o=0,minimumUpdatePeriod:a=0,timeShiftBufferDepth:u=1/0}=t,l=UI(t.endNumber),d=(e+n)/1e3,g=r+o,_=Math.ceil((d+a-g)*i/s),E=Math.floor((d-g-u)*i/s),A=Math.floor((d-g)*i/s);return{start:Math.max(0,E),end:"number"==typeof l?l:Math.min(_,A)}}},m_=t=>{const{type:e,duration:n,timescale:r=1,periodDuration:i,sourceDuration:s}=t,{start:o,end:a}=$q[e](t),u=((t,e)=>{const n=[];for(let r=t;r<e;r++)n.push(r);return n})(o,a).map((t=>e=>{const{duration:n,timescale:r=1,periodStart:i,startNumber:s=1}=t;return{number:s+e,duration:n/r,timeline:i,time:e*n}})(t));if("static"===e){const l=u.length-1;u[l].duration=("number"==typeof i?i:s)-n/r*l}return u},VI=t=>{const{baseUrl:e,initialization:n={},sourceDuration:r,indexRange:i="",periodStart:s,presentationTime:o,number:a=0,duration:u}=t;if(!e)throw new Error("NO_BASE_URL");const l=id({baseUrl:e,source:n.sourceURL,range:n.range}),d=id({baseUrl:e,source:e,indexRange:i});if(d.map=l,u){const g=m_(t);g.length&&(d.duration=g[0].duration,d.timeline=g[0].timeline)}else r&&(d.duration=r,d.timeline=s);return d.presentationTime=o||s,d.number=a,[d]},y_=(t,e,n)=>{const r=t.sidx.map?t.sidx.map:null,i=t.sidx.duration,s=t.timeline||0,o=t.sidx.byterange,a=o.offset+o.length,u=e.timescale,l=e.references.filter(A=>1!==A.referenceType),d=[],g=t.endList?"static":"dynamic",v=t.sidx.timeline;let E,b=v,_=t.mediaSequence||0;E="bigint"==typeof e.firstOffset?O().BigInt(a)+e.firstOffset:a+e.firstOffset;for(let A=0;A<l.length;A++){const P=e.references[A],x=P.referencedSize,B=P.subsegmentDuration;let F;F="bigint"==typeof E?E+O().BigInt(x)-O().BigInt(1):E+x-1;const we=VI({baseUrl:n,timescale:u,timeline:s,periodStart:v,presentationTime:b,number:_,duration:B,sourceDuration:i,indexRange:`${E}-${F}`,type:g})[0];r&&(we.map=r),d.push(we),E+="bigint"==typeof E?O().BigInt(x):x,b+=B/u,_++}return t.segments=d,t},qq=["AUDIO","SUBTITLES"],jI=t=>((t,e)=>FI(t.reduce((n,r)=>(r.forEach(i=>{n[(({timeline:e})=>e)(i)]=i}),n),{})))(t).sort((e,n)=>e.timeline>n.timeline?1:-1),$I=t=>{let e=[];return function(e,n,r){n.forEach(function(i){for(var s in e.mediaGroups[i])for(var o in e.mediaGroups[i][s])r(e.mediaGroups[i][s][o])})}(t,qq,(n,r,i,s)=>{e=e.concat(n.playlists||[])}),e},HI=({playlist:t,mediaSequence:e})=>{t.mediaSequence=e,t.segments.forEach((n,r)=>{n.number=t.mediaSequence+r})},Dp=t=>t&&t.uri+"-"+(t=>{let e;return e="bigint"==typeof t.offset||"bigint"==typeof t.length?O().BigInt(t.offset)+O().BigInt(t.length)-O().BigInt(1):t.offset+t.length-1,`${t.offset}-${e}`})(t.byterange),v_=t=>{const e=t.reduce(function(r,i){return r[i.attributes.baseUrl]||(r[i.attributes.baseUrl]=[]),r[i.attributes.baseUrl].push(i),r},{});let n=[];return Object.values(e).forEach(r=>{const i=FI(r.reduce((s,o)=>{const a=o.attributes.id+(o.attributes.lang||"");return s[a]?(o.segments&&(o.segments[0]&&(o.segments[0].discontinuity=!0),s[a].segments.push(...o.segments)),o.attributes.contentProtection&&(s[a].attributes.contentProtection=o.attributes.contentProtection)):(s[a]=o,s[a].attributes.timelineStarts=[]),s[a].attributes.timelineStarts.push({start:o.attributes.periodStart,timeline:o.attributes.periodStart}),s},{}));n=n.concat(i)}),n.map(r=>(r.discontinuityStarts=((t,e)=>t.reduce((n,r,i)=>(r.discontinuity&&n.push(i),n),[]))(r.segments||[]),r))},__=(t,e)=>{const n=Dp(t.sidx),r=n&&e[n]&&e[n].sidx;return r&&y_(t,r,t.sidx.resolvedUri),t},Kq=(t,e={})=>{if(!Object.keys(e).length)return t;for(const n in t)t[n]=__(t[n],e);return t},tz=({attributes:t,segments:e,sidx:n,discontinuityStarts:r})=>{const i={attributes:{NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1},uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuityStarts:r,timelineStarts:t.timelineStarts,segments:e};return t.frameRate&&(i.attributes["FRAME-RATE"]=t.frameRate),t.contentProtection&&(i.contentProtection=t.contentProtection),t.serviceLocation&&(i.attributes.serviceLocation=t.serviceLocation),n&&(i.sidx=n),i},nz=({attributes:t})=>"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType,rz=({attributes:t})=>"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType,iz=({attributes:t})=>"text/vtt"===t.mimeType||"text"===t.contentType,qI=t=>t?Object.keys(t).reduce((e,n)=>e.concat(t[n].playlists),[]):[],oz=({dashPlaylists:t,locations:e,contentSteering:n,sidxMapping:r={},previousManifest:i,eventStream:s})=>{if(!t.length)return{};const{sourceDuration:o,type:a,suggestedPresentationDelay:u,minimumUpdatePeriod:l}=t[0].attributes,d=v_(t.filter(nz)).map(tz),g=v_(t.filter(rz)),v=v_(t.filter(iz)),b=t.map(F=>F.attributes.captionServices).filter(Boolean),_={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:o,playlists:Kq(d,r)};l>=0&&(_.minimumUpdatePeriod=1e3*l),e&&(_.locations=e),n&&(_.contentSteering=n),"dynamic"===a&&(_.suggestedPresentationDelay=u),s&&s.length>0&&(_.eventStream=s);const A=g.length?((t,e={},n=!1)=>{let r;const i=t.reduce((s,o)=>{const a=o.attributes.role&&o.attributes.role.value||"",u=o.attributes.lang||"";let l=o.attributes.label||"main";u&&!o.attributes.label&&(l=`${o.attributes.lang}${a?` (${a})`:""}`),s[l]||(s[l]={language:u,autoselect:!0,default:"main"===a,playlists:[],uri:""});const d=__((({attributes:t,segments:e,sidx:n,mediaSequence:r,discontinuitySequence:i,discontinuityStarts:s},o)=>{const a={attributes:{NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs,"PROGRAM-ID":1},uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuitySequence:i,discontinuityStarts:s,timelineStarts:t.timelineStarts,mediaSequence:r,segments:e};return t.contentProtection&&(a.contentProtection=t.contentProtection),t.serviceLocation&&(a.attributes.serviceLocation=t.serviceLocation),n&&(a.sidx=n),o&&(a.attributes.AUDIO="audio",a.attributes.SUBTITLES="subs"),a})(o,n),e);return s[l].playlists.push(d),typeof r>"u"&&"main"===a&&(r=o,r.default=!0),s},{});return r||(i[Object.keys(i)[0]].default=!0),i})(g,r,0===_.playlists.length):null,P=v.length?((t,e={})=>t.reduce((n,r)=>{const i=r.attributes.label||r.attributes.lang||"text";return n[i]||(n[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),n[i].playlists.push(__((({attributes:t,segments:e,mediaSequence:n,discontinuityStarts:r,discontinuitySequence:i})=>{typeof e>"u"&&(e=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);const s={NAME:t.id,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1};t.codecs&&(s.CODECS=t.codecs);const o={attributes:s,uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:r,discontinuitySequence:i,mediaSequence:n,segments:e};return t.serviceLocation&&(o.attributes.serviceLocation=t.serviceLocation),o})(r),e)),n},{}))(v,r):null,x=d.concat(qI(A),qI(P)),B=x.map(({timelineStarts:F})=>F);return _.timelineStarts=jI(B),((t,e)=>{t.forEach(n=>{n.mediaSequence=0,n.discontinuitySequence=e.findIndex(function({timeline:r}){return r===n.timeline}),n.segments&&n.segments.forEach((r,i)=>{r.number=i})})})(x,_.timelineStarts),A&&(_.mediaGroups.AUDIO.audio=A),P&&(_.mediaGroups.SUBTITLES.subs=P),b.length&&(_.mediaGroups["CLOSED-CAPTIONS"].cc=(t=>t.reduce((e,n)=>(n&&n.forEach(r=>{const{channel:i,language:s}=r;e[s]={autoselect:!1,default:!1,instreamId:i,language:s},r.hasOwnProperty("aspectRatio")&&(e[s].aspectRatio=r.aspectRatio),r.hasOwnProperty("easyReader")&&(e[s].easyReader=r.easyReader),r.hasOwnProperty("3D")&&(e[s]["3D"]=r["3D"])}),e),{}))(b)),i?(({oldManifest:t,newManifest:e})=>{const n=t.playlists.concat($I(t)),r=e.playlists.concat($I(e));return e.timelineStarts=jI([t.timelineStarts,e.timelineStarts]),(({oldPlaylists:t,newPlaylists:e,timelineStarts:n})=>{e.forEach(r=>{r.discontinuitySequence=n.findIndex(function({timeline:u}){return u===r.timeline});const i=((t,e)=>{for(let n=0;n<t.length;n++)if(t[n].attributes.NAME===e)return t[n];return null})(t,r.attributes.NAME);if(!i||r.sidx)return;const s=r.segments[0],o=i.segments.findIndex(function(u){return Math.abs(u.presentationTime-s.presentationTime)<.016666666666666666});if(-1===o)return HI({playlist:r,mediaSequence:i.mediaSequence+i.segments.length}),r.segments[0].discontinuity=!0,r.discontinuityStarts.unshift(0),void((!i.segments.length&&r.timeline>i.timeline||i.segments.length&&r.timeline>i.segments[i.segments.length-1].timeline)&&r.discontinuitySequence--);i.segments[o].discontinuity&&!s.discontinuity&&(s.discontinuity=!0,r.discontinuityStarts.unshift(0),r.discontinuitySequence--),HI({playlist:r,mediaSequence:i.segments[o].number})})})({oldPlaylists:n,newPlaylists:r,timelineStarts:e.timelineStarts}),e})({oldManifest:i,newManifest:_}):_},az=(t,e,n)=>{const{NOW:r,clientOffset:i,availabilityStartTime:s,timescale:o=1,periodStart:a=0,minimumUpdatePeriod:u=0}=t;return Math.ceil((((r+i)/1e3+u-(s+a))*o-e)/n)},zI=(t,e)=>{const{type:n,minimumUpdatePeriod:r=0,media:i="",sourceDuration:s,timescale:o=1,startNumber:a=1,periodStart:u}=t,l=[];let d=-1;for(let g=0;g<e.length;g++){const v=e[g],b=v.d,_=v.r||0,E=v.t||0;let A;if(d<0&&(d=E),E&&E>d&&(d=E),_<0){const B=g+1;A=B===e.length?"dynamic"===n&&r>0&&i.indexOf("$Number$")>0?az(t,d,b):(s*o-d)/b:(e[B].t-d)/b}else A=_+1;const P=a+l.length+A;let x=a+l.length;for(;x<P;)l.push({number:x,duration:b/o,time:d,timeline:u}),d+=b,x++}return l},uz=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,GI=(t,e)=>t.replace(uz,(t=>(e,n,r,i)=>{if("$$"===e)return"$";if(typeof t[n]>"u")return e;const s=""+t[n];return"RepresentationID"===n||(i=r?parseInt(i,10):1,s.length>=i)?s:`${new Array(i-s.length+1).join("0")}${s}`})(e)),dz=(t,e)=>{const n={RepresentationID:t.id,Bandwidth:t.bandwidth||0},{initialization:r={sourceURL:"",range:""}}=t,i=id({baseUrl:t.baseUrl,source:GI(r.sourceURL,n),range:r.range});return((t,e)=>t.duration||e?t.duration?m_(t):zI(t,e):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}])(t,e).map(o=>{n.Number=o.number,n.Time=o.time;const a=GI(t.media||"",n),d=t.periodStart+(o.time-(t.presentationTimeOffset||0))/(t.timescale||1);return{uri:a,timeline:o.timeline,duration:o.duration,resolvedUri:g_(t.baseUrl||"",a),map:i,number:o.number,presentationTime:d}})},fz=(t,e)=>{const{duration:n,segmentUrls:r=[],periodStart:i}=t;if(!n&&!e||n&&e)throw new Error("SEGMENT_TIME_UNSPECIFIED");const s=r.map(u=>((t,e)=>{const{baseUrl:n,initialization:r={}}=t,i=id({baseUrl:n,source:r.sourceURL,range:r.range}),s=id({baseUrl:n,source:e.media,range:e.mediaRange});return s.map=i,s})(t,u));let o;return n&&(o=m_(t)),e&&(o=zI(t,e)),o.map((u,l)=>{if(s[l]){const d=s[l],g=t.timescale||1,v=t.presentationTimeOffset||0;return d.timeline=u.timeline,d.duration=u.duration,d.number=u.number,d.presentationTime=i+(u.time-v)/g,d}}).filter(u=>u)},pz=({attributes:t,segmentInfo:e})=>{let n,r;e.template?(r=dz,n=Nn(t,e.template)):e.base?(r=VI,n=Nn(t,e.base)):e.list&&(r=fz,n=Nn(t,e.list));const i={attributes:t};if(!r)return i;const s=r(n,e.segmentTimeline);if(n.duration){const{duration:o,timescale:a=1}=n;n.duration=o/a}else n.duration=s.length?s.reduce((o,a)=>Math.max(o,Math.ceil(a.duration)),0):0;return i.attributes=n,i.segments=s,e.base&&n.indexRange&&(i.sidx=s[0],i.segments=[]),i},rn=(t,e)=>BI(t.childNodes).filter(({tagName:n})=>n===e),sd=t=>t.textContent.trim(),Lu=t=>{const a=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!a)return 0;const[u,l,d,g,v,b]=a.slice(1);return 31536e3*parseFloat(u||0)+2592e3*parseFloat(l||0)+86400*parseFloat(d||0)+3600*parseFloat(g||0)+60*parseFloat(v||0)+parseFloat(b||0)},WI={mediaPresentationDuration:t=>Lu(t),availabilityStartTime:t=>(t=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)))(t)/1e3,minimumUpdatePeriod:t=>Lu(t),suggestedPresentationDelay:t=>Lu(t),type:t=>t,timeShiftBufferDepth:t=>Lu(t),start:t=>Lu(t),width:t=>parseInt(t,10),height:t=>parseInt(t,10),bandwidth:t=>parseInt(t,10),frameRate:t=>(t=>parseFloat(t.split("/").reduce((e,n)=>e/n)))(t),startNumber:t=>parseInt(t,10),timescale:t=>parseInt(t,10),presentationTimeOffset:t=>parseInt(t,10),duration(t){const e=parseInt(t,10);return isNaN(e)?Lu(t):e},d:t=>parseInt(t,10),t:t=>parseInt(t,10),r:t=>parseInt(t,10),presentationTime:t=>parseInt(t,10),DEFAULT:t=>t},wn=t=>t&&t.attributes?BI(t.attributes).reduce((e,n)=>(e[n.name]=(WI[n.name]||WI.DEFAULT)(n.value),e),{}):{},vz={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Sp=(t,e)=>e.length?Nu(t.map(function(n){return e.map(function(r){const i=sd(r),s=g_(n.baseUrl,i),o=Nn(wn(r),{baseUrl:s});return s!==i&&!o.serviceLocation&&n.serviceLocation&&(o.serviceLocation=n.serviceLocation),o})})):t,b_=t=>{const e=rn(t,"SegmentTemplate")[0],n=rn(t,"SegmentList")[0],r=n&&rn(n,"SegmentURL").map(g=>Nn({tag:"SegmentURL"},wn(g))),i=rn(t,"SegmentBase")[0],s=n||e,o=s&&rn(s,"SegmentTimeline")[0],a=n||i||e,u=a&&rn(a,"Initialization")[0],l=e&&wn(e);l&&u?l.initialization=u&&wn(u):l&&l.initialization&&(l.initialization={sourceURL:l.initialization});const d={template:l,segmentTimeline:o&&rn(o,"S").map(g=>wn(g)),list:n&&Nn(wn(n),{segmentUrls:r,initialization:wn(u)}),base:i&&Nn(wn(i),{initialization:wn(u)})};return Object.keys(d).forEach(g=>{d[g]||delete d[g]}),d},Cz=t=>Nu(rn(t.node,"EventStream").map(e=>{const n=wn(e),r=n.schemeIdUri;return rn(e,"Event").map(i=>{const s=wn(i),a=n.timescale||1,l=(s.presentationTime||0)/a+t.attributes.start;return{schemeIdUri:r,value:n.value,id:s.id,start:l,end:l+(s.duration||0)/a,messageData:sd(i)||s.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}})})),Ez=(t,e,n)=>r=>{const i=wn(r),s=Sp(e,rn(r,"BaseURL")),o=rn(r,"Role")[0],a={role:wn(o)};let u=Nn(t,i,a);const l=rn(r,"Accessibility")[0],d=(t=>"urn:scte:dash:cc:cea-608:2015"===t.schemeIdUri?("string"!=typeof t.value?[]:t.value.split(";")).map(n=>{let r,i;return i=n,/^CC\d=/.test(n)?[r,i]=n.split("="):/^CC\d$/.test(n)&&(r=n),{channel:r,language:i}}):"urn:scte:dash:cc:cea-708:2015"===t.schemeIdUri?("string"!=typeof t.value?[]:t.value.split(";")).map(n=>{const r={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(n)){const[i,s=""]=n.split("=");r.channel=i,r.language=n,s.split(",").forEach(o=>{const[a,u]=o.split(":");"lang"===a?r.language=u:"er"===a?r.easyReader=Number(u):"war"===a?r.aspectRatio=Number(u):"3D"===a&&(r["3D"]=Number(u))})}else r.language=n;return r.channel&&(r.channel="SERVICE"+r.channel),r}):void 0)(wn(l));d&&(u=Nn(u,{captionServices:d}));const g=rn(r,"Label")[0];if(g&&g.childNodes.length){const A=g.childNodes[0].nodeValue.trim();u=Nn(u,{label:A})}const v=(t=>t.reduce((e,n)=>{const r=wn(n);r.schemeIdUri&&(r.schemeIdUri=r.schemeIdUri.toLowerCase());const i=vz[r.schemeIdUri];if(i){e[i]={attributes:r};const s=rn(n,"cenc:pssh")[0];if(s){const o=sd(s);e[i].pssh=o&&function Lq(t){for(var e=function(e){return O().atob?O().atob(e):Buffer.from(e,"base64").toString("binary")}(t),n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(o)}}return e},{}))(rn(r,"ContentProtection"));Object.keys(v).length&&(u=Nn(u,{contentProtection:v}));const b=b_(r),_=rn(r,"Representation"),E=Nn(n,b);return Nu(_.map(((t,e,n)=>r=>{const i=rn(r,"BaseURL"),s=Sp(e,i),o=Nn(t,wn(r)),a=b_(r);return s.map(u=>({segmentInfo:Nn(n,a),attributes:Nn(o,u)}))})(u,s,E)))},Dz=(t,e)=>(n,r)=>{const i=Sp(e,rn(n.node,"BaseURL")),s=Nn(t,{periodStart:n.attributes.start});"number"==typeof n.attributes.duration&&(s.periodDuration=n.attributes.duration);const o=rn(n.node,"AdaptationSet"),a=b_(n.node);return Nu(o.map(Ez(s,i,a)))},Sz=(t,e)=>{if(t.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!t.length)return null;const n=Nn({serverURL:sd(t[0])},wn(t[0]));return n.queryBeforeStart="true"===n.queryBeforeStart,n},XI=t=>{if(""===t)throw new Error("DASH_EMPTY_MANIFEST");const e=new Fq.DOMParser;let n,r;try{n=e.parseFromString(t,"application/xml"),r=n&&"MPD"===n.documentElement.tagName?n.documentElement:null}catch{}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return r};var C_,Oz=ve(35),kz=ve.n(Oz),Pz=Fe([73,68,51]),od=function t(e,n){return void 0===n&&(n=0),(e=Fe(e)).length-n<10||!nn(e,Pz,{offset:n})?n:(n+=function(e,n){void 0===n&&(n=0);var i=(e=Fe(e))[n+6]<<21|e[n+7]<<14|e[n+8]<<7|e[n+9];return(16&e[n+5])>>4?i+20:i+10}(e,n),t(e,n))},T_=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?NI(e):e}),E_=function(e){e=Fe(e);for(var n=[],r=0;e.length>r;){var i=e[r],s=0,o=0,a=e[++o];for(o++;128&a;)s=(127&a)<<7,a=e[o],o++;s+=127&a;for(var u=0;u<C_.length;u++){var l=C_[u];if(i===l.id){n.push((0,l.parser)(e.subarray(o,o+s)));break}}r+=s+o}return n};C_=[{id:3,parser:function(e){var n={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&n.flags&&(n.dependsOnEsId=e[n.size]<<8|e[n.size+1],n.size+=2),64&n.flags){var r=e[n.size];n.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var n=String.fromCharCode.apply(null,Fe(e));try{return decodeURIComponent(escape(n))}catch{}return n}(e.subarray(n.size+1,n.size+1+r)),n.size+=r}return 32&n.flags&&(n.ocrEsId=e[n.size]<<8|e[n.size+1],n.size+=2),n.descriptors=E_(e.subarray(n.size))||[],n}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:E_(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var Ar=function t(e,n,r){void 0===r&&(r=!1),n=function(e){return Array.isArray(e)?e.map(function(n){return T_(n)}):[T_(e)]}(n),e=Fe(e);var i=[];if(!n.length)return i;for(var s=0;s<e.length;){var o=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,a=e.subarray(s+4,s+8);if(0===o)break;var u=s+o;if(u>e.length){if(r)break;u=e.length}var l=e.subarray(s+8,u);nn(a,n[0])&&(1===n.length?i.push(l):i.push.apply(i,t(l,n.slice(1),r))),s=u}return i},Yt={EBML:Fe([26,69,223,163]),DocType:Fe([66,130]),Segment:Fe([24,83,128,103]),SegmentInfo:Fe([21,73,169,102]),Tracks:Fe([22,84,174,107]),Track:Fe([174]),TrackNumber:Fe([215]),DefaultDuration:Fe([35,227,131]),TrackEntry:Fe([174]),TrackType:Fe([131]),FlagDefault:Fe([136]),CodecID:Fe([134]),CodecPrivate:Fe([99,162]),VideoTrack:Fe([224]),AudioTrack:Fe([225]),Cluster:Fe([31,67,182,117]),Timestamp:Fe([231]),TimestampScale:Fe([42,215,177]),BlockGroup:Fe([160]),BlockDuration:Fe([155]),Block:Fe([161]),SimpleBlock:Fe([163])},D_=[128,64,32,16,8,4,2,1],Jo=function(e,n,r,i){void 0===r&&(r=!0),void 0===i&&(i=!1);var s=function(e){for(var n=1,r=0;r<D_.length&&!(e&D_[r]);r++)n++;return n}(e[n]),o=e.subarray(n,n+s);return r&&((o=Array.prototype.slice.call(e,n,n+s))[0]^=D_[s-1]),{length:s,value:Iq(o,{signed:i}),bytes:o}},KI=function t(e){return"string"==typeof e?e.match(/.{1,2}/g).map(function(n){return t(n)}):"number"==typeof e?function(e,n){var i=(void 0===n?{}:n).le,s=void 0!==i&&i;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0);for(var o=function(e){return Math.ceil(function(e){return e.toString(2).length}(e)/8)}(e=zn(e)),a=new Uint8Array(new ArrayBuffer(o)),u=0;u<o;u++){var l=s?u:Math.abs(u+1-a.length);a[l]=Number(e/p_[u]&zn(255)),e<0&&(a[l]=Math.abs(~a[l]),a[l]-=0===u?1:2)}return a}(e):e},Vz=function t(e,n,r){if(r>=n.length)return n.length;var i=Jo(n,r,!1);if(nn(e.bytes,i.bytes))return r;var s=Jo(n,r+i.length);return t(e,n,r+s.length+s.value+i.length)},un=function t(e,n){n=function(e){return Array.isArray(e)?e.map(function(n){return KI(n)}):[KI(e)]}(n),e=Fe(e);var r=[];if(!n.length)return r;for(var i=0;i<e.length;){var s=Jo(e,i,!1),o=Jo(e,i+s.length),a=i+s.length+o.length;127===o.value&&(o.value=Vz(s,e,a),o.value!==e.length&&(o.value-=a));var l=e.subarray(a,a+o.value>e.length?e.length:a+o.value);nn(n[0],s.bytes)&&(1===n.length?r.push(l):r=r.concat(t(l,n.slice(1)))),i+=s.length+o.length+l.length}return r},qz=Fe([0,0,0,1]),zz=Fe([0,0,1]),Gz=Fe([0,0,3]),Wz=function(e){for(var n=[],r=1;r<e.length-2;)nn(e.subarray(r,r+3),Gz)&&(n.push(r+2),r++),r++;if(0===n.length)return e;var i=e.length-n.length,s=new Uint8Array(i),o=0;for(r=0;r<i;o++,r++)o===n[0]&&(o++,n.shift()),s[r]=e[o];return s},YI=function(e,n,r,i){void 0===i&&(i=1/0),e=Fe(e),r=[].concat(r);for(var o,s=0,a=0;s<e.length&&(a<i||o);){var u=void 0;if(nn(e.subarray(s),qz)?u=4:nn(e.subarray(s),zz)&&(u=3),u){if(a++,o)return Wz(e.subarray(o,s));var l=void 0;"h264"===n?l=31&e[s+u]:"h265"===n&&(l=e[s+u]>>1&63),-1!==r.indexOf(l)&&(o=s+u),s+=u+("h264"===n?1:2)}else s++}return e.subarray(0,0)},gr={webm:Fe([119,101,98,109]),matroska:Fe([109,97,116,114,111,115,107,97]),flac:Fe([102,76,97,67]),ogg:Fe([79,103,103,83]),ac3:Fe([11,119]),riff:Fe([82,73,70,70]),avi:Fe([65,86,73]),wav:Fe([87,65,86,69]),"3gp":Fe([102,116,121,112,51,103]),mp4:Fe([102,116,121,112]),fmp4:Fe([115,116,121,112]),mov:Fe([102,116,121,112,113,116]),moov:Fe([109,111,111,118]),moof:Fe([109,111,111,102])},Bu={aac:function(e){var n=od(e);return nn(e,[255,16],{offset:n,mask:[255,22]})},mp3:function(e){var n=od(e);return nn(e,[255,2],{offset:n,mask:[255,6]})},webm:function(e){var n=un(e,[Yt.EBML,Yt.DocType])[0];return nn(n,gr.webm)},mkv:function(e){var n=un(e,[Yt.EBML,Yt.DocType])[0];return nn(n,gr.matroska)},mp4:function(e){return!Bu["3gp"](e)&&!Bu.mov(e)&&(!!(nn(e,gr.mp4,{offset:4})||nn(e,gr.fmp4,{offset:4})||nn(e,gr.moof,{offset:4})||nn(e,gr.moov,{offset:4}))||void 0)},mov:function(e){return nn(e,gr.mov,{offset:4})},"3gp":function(e){return nn(e,gr["3gp"],{offset:4})},ac3:function(e){var n=od(e);return nn(e,gr.ac3,{offset:n})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var n=0;n+188<e.length&&n<188;){if(71===e[n]&&71===e[n+188])return!0;n+=1}return!1},flac:function(e){var n=od(e);return nn(e,gr.flac,{offset:n})},ogg:function(e){return nn(e,gr.ogg)},avi:function(e){return nn(e,gr.riff)&&nn(e,gr.avi,{offset:8})},wav:function(e){return nn(e,gr.riff)&&nn(e,gr.wav,{offset:8})},h264:function(e){return function(e,n,r){return YI(e,"h264",7,3)}(e).length},h265:function(e){return function(e,n,r){return YI(e,"h265",[32,33],3)}(e).length}},S_=Object.keys(Bu).filter(function(t){return"ts"!==t&&"h264"!==t&&"h265"!==t}).concat(["ts","h264","h265"]);S_.forEach(function(t){var e=Bu[t];Bu[t]=function(n){return e(Fe(n))}});var Yz=Bu,w_=function(e){e=Fe(e);for(var n=0;n<S_.length;n++){var r=S_[n];if(Yz[r](e))return r}return""},wp=ve(825);const Rs={},fo=function(t,e){return Rs[t]=Rs[t]||[],e&&(Rs[t]=Rs[t].concat(e)),Rs[t]},ZI=function(t,e){const n=fo(t).indexOf(e);return!(n<=-1||(Rs[t]=Rs[t].slice(),Rs[t].splice(n,1),0))},xp={prefixed:!0},Ap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],JI=Ap[0];let ud;for(let t=0;t<Ap.length;t++)if(Ap[t][1]in ue()){ud=Ap[t];break}if(ud){for(let t=0;t<ud.length;t++)xp[JI[t]]=ud[t];xp.prefixed=ud[0]!==JI[0]}let Ir=[];const yt=function x_(t,e=":",n=""){let i,r="info";const s=function(...o){i("log",r,o)};return i=((t,e,n)=>(r,i,s)=>{const o=e.levels[i],a=new RegExp(`^(${o})$`);let u=t;if("log"!==r&&s.unshift(r.toUpperCase()+":"),n&&(u=`%c${t}`,s.unshift(n)),s.unshift(u+":"),Ir){Ir.push([].concat(s));const d=Ir.length-1e3;Ir.splice(0,d>0?d:0)}if(!O().console)return;let l=O().console[r];!l&&"debug"===r&&(l=O().console.info||O().console.log),l&&o&&a.test(r)&&l[Array.isArray(s)?"apply":"call"](O().console,s)})(t,s,n),s.createLogger=(o,a,u)=>{const l=void 0!==a?a:e;return x_(`${t} ${l} ${o}`,l,void 0!==u?u:n)},s.createNewLogger=(o,a,u)=>x_(o,a,u),s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},s.level=o=>{if("string"==typeof o){if(!s.levels.hasOwnProperty(o))throw new Error(`"${o}" in not a valid log level`);r=o}return r},(s.history=()=>Ir?[].concat(Ir):[]).filter=o=>(Ir||[]).filter(a=>new RegExp(`.*${o}.*`).test(a[0])),s.history.clear=()=>{Ir&&(Ir.length=0)},s.history.disable=()=>{null!==Ir&&(Ir.length=0,Ir=null)},s.history.enable=()=>{null===Ir&&(Ir=[])},s.error=(...o)=>i("error",r,o),s.warn=(...o)=>i("warn",r,o),s.debug=(...o)=>i("debug",r,o),s}("VIDEOJS"),eM=yt.createLogger,tG=Object.prototype.toString,tM=function(t){return es(t)?Object.keys(t):[]};function Uu(t,e){tM(t).forEach(n=>e(t[n],n))}function nM(t,e,n=0){return tM(t).reduce((r,i)=>e(r,t[i],i),n)}function es(t){return!!t&&"object"==typeof t}function Vu(t){return es(t)&&"[object Object]"===tG.call(t)&&t.constructor===Object}function Wt(...t){const e={};return t.forEach(n=>{n&&Uu(n,(r,i)=>{Vu(r)?(Vu(e[i])||(e[i]={}),e[i]=Wt(e[i],r)):e[i]=r})}),e}function rM(t={}){const e=[];for(const n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}function Ip(t,e,n,r=!0){const i=o=>Object.defineProperty(t,e,{value:o,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const o=n();return i(o),o}};return r&&(s.set=i),Object.defineProperty(t,e,s)}var nG=Object.freeze({__proto__:null,each:Uu,reduce:nM,isObject:es,isPlain:Vu,merge:Wt,values:rM,defineLazyProperty:Ip});let sM,A_=!1,iM=null,ts=!1,oM=!1,ju=!1,$u=!1,ns=!1,I_=null,Mp=null,aM=null,Op=!1,kp=!1,Pp=!1,Np=!1;const ld=!(!qu()||!("ontouchstart"in O()||O().navigator.maxTouchPoints||O().DocumentTouch&&O().document instanceof O().DocumentTouch)),Hu=O().navigator&&O().navigator.userAgentData;if(Hu&&(ts="Android"===Hu.platform,ju=!!Hu.brands.find(t=>"Microsoft Edge"===t.brand),$u=!!Hu.brands.find(t=>"Chromium"===t.brand),ns=!ju&&$u,I_=Mp=(Hu.brands.find(t=>"Chromium"===t.brand)||{}).version||null,kp="Windows"===Hu.platform),!$u){const t=O().navigator&&O().navigator.userAgent||"";A_=/iPod/i.test(t),iM=function(){const e=t.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),ts=/Android/i.test(t),sM=function(){const e=t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const n=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);return n&&r?parseFloat(e[1]+"."+e[2]):n||null}(),oM=/Firefox/i.test(t),ju=/Edg/i.test(t),$u=/Chrome/i.test(t)||/CriOS/i.test(t),ns=!ju&&$u,I_=Mp=function(){const e=t.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),aM=function(){const e=/MSIE\s(\d+)\.\d/.exec(t);let n=e&&parseFloat(e[1]);return!n&&/Trident\/7.0/i.test(t)&&/rv:11.0/.test(t)&&(n=11),n}(),Op=/Safari/i.test(t)&&!ns&&!ts&&!ju,kp=/Windows/i.test(t),Pp=/iPad/i.test(t)||Op&&ld&&!/iPhone/i.test(t),Np=/iPhone/i.test(t)&&!Pp}const mr=Np||Pp||A_,Rp=(Op||mr)&&!ns;var rG=Object.freeze({__proto__:null,get IS_IPOD(){return A_},get IOS_VERSION(){return iM},get IS_ANDROID(){return ts},get ANDROID_VERSION(){return sM},get IS_FIREFOX(){return oM},get IS_EDGE(){return ju},get IS_CHROMIUM(){return $u},get IS_CHROME(){return ns},get CHROMIUM_VERSION(){return I_},get CHROME_VERSION(){return Mp},get IE_VERSION(){return aM},get IS_SAFARI(){return Op},get IS_WINDOWS(){return kp},get IS_IPAD(){return Pp},get IS_IPHONE(){return Np},TOUCH_ENABLED:ld,IS_IOS:mr,IS_ANY_SAFARI:Rp});function uM(t){return"string"==typeof t&&!!t.trim()}function qu(){return ue()===O().document}function zu(t){return es(t)&&1===t.nodeType}function lM(){try{return O().parent!==O().self}catch{return!0}}function cM(t){return function(e,n){if(!uM(e))return ue()[t](null);uM(n)&&(n=ue().querySelector(n));const r=zu(n)?n:ue();return r[t]&&r[t](e)}}function ht(t="div",e={},n={},r){const i=ue().createElement(t);return Object.getOwnPropertyNames(e).forEach(function(s){const o=e[s];"textContent"===s?po(i,o):(i[s]!==o||"tabIndex"===s)&&(i[s]=o)}),Object.getOwnPropertyNames(n).forEach(function(s){i.setAttribute(s,n[s])}),r&&O_(i,r),i}function po(t,e){return typeof t.textContent>"u"?t.innerText=e:t.textContent=e,t}function M_(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function cd(t,e){return function iG(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}(e),t.classList.contains(e)}function ea(t,...e){return t.classList.add(...e.reduce((n,r)=>n.concat(r.split(/\s+/)),[])),t}function Lp(t,...e){return t?(t.classList.remove(...e.reduce((n,r)=>n.concat(r.split(/\s+/)),[])),t):(yt.warn("removeClass was called with an element that doesn't exist"),null)}function dM(t,e,n){return"function"==typeof n&&(n=n(t,e)),"boolean"!=typeof n&&(n=void 0),e.split(/\s+/).forEach(r=>t.classList.toggle(r,n)),t}function hM(t,e){Object.getOwnPropertyNames(e).forEach(function(n){const r=e[n];null===r||typeof r>"u"||!1===r?t.removeAttribute(n):t.setAttribute(n,!0===r?"":r)})}function go(t){const e={},n=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(t&&t.attributes&&t.attributes.length>0){const r=t.attributes;for(let i=r.length-1;i>=0;i--){const s=r[i].name;let o=r[i].value;n.includes(s)&&(o=null!==o),e[s]=o}}return e}function fM(t,e){return t.getAttribute(e)}function Gu(t,e,n){t.setAttribute(e,n)}function Fp(t,e){t.removeAttribute(e)}function pM(){ue().body.focus(),ue().onselectstart=function(){return!1}}function gM(){ue().onselectstart=function(){return!0}}function Wu(t){if(t&&t.getBoundingClientRect&&t.parentNode){const e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(r=>{void 0!==e[r]&&(n[r]=e[r])}),n.height||(n.height=parseFloat(Xu(t,"height"))),n.width||(n.width=parseFloat(Xu(t,"width"))),n}}function dd(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};const e=t.offsetWidth,n=t.offsetHeight;let r=0,i=0;for(;t.offsetParent&&t!==ue()[xp.fullscreenElement];)r+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{left:r,top:i,width:e,height:n}}function Bp(t,e){const n={x:0,y:0};if(mr){let d=t;for(;d&&"html"!==d.nodeName.toLowerCase();){const g=Xu(d,"transform");if(/^matrix/.test(g)){const v=g.slice(7,-1).split(/,\s/).map(Number);n.x+=v[4],n.y+=v[5]}else if(/^matrix3d/.test(g)){const v=g.slice(9,-1).split(/,\s/).map(Number);n.x+=v[12],n.y+=v[13]}d=d.parentNode}}const r={},i=dd(e.target),s=dd(t),o=s.width;let u=e.offsetY-(s.top-i.top),l=e.offsetX-(s.left-i.left);return e.changedTouches&&(l=e.changedTouches[0].pageX-s.left,u=e.changedTouches[0].pageY+s.top,mr&&(l-=n.x,u-=n.y)),r.y=1-Math.max(0,Math.min(1,u/s.height)),r.x=Math.max(0,Math.min(1,l/o)),r}function mM(t){return es(t)&&3===t.nodeType}function Up(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function yM(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(e=>("function"==typeof e&&(e=e()),zu(e)||mM(e)?e:"string"==typeof e&&/\S/.test(e)?ue().createTextNode(e):void 0)).filter(e=>e)}function O_(t,e){return yM(e).forEach(n=>t.appendChild(n)),t}function vM(t,e){return O_(Up(t),e)}function hd(t){return void 0===t.button&&void 0===t.buttons||0===t.button&&void 0===t.buttons||"mouseup"===t.type&&0===t.button&&0===t.buttons||!(0!==t.button||1!==t.buttons)}const mo=cM("querySelector"),_M=cM("querySelectorAll");function Xu(t,e){if(!t||!e)return"";if("function"==typeof O().getComputedStyle){let n;try{n=O().getComputedStyle(t)}catch{return""}return n?n.getPropertyValue(e)||n[e]:""}return""}function bM(t){[...ue().styleSheets].forEach(e=>{try{const n=[...e.cssRules].map(i=>i.cssText).join(""),r=ue().createElement("style");r.textContent=n,t.document.head.appendChild(r)}catch{const r=ue().createElement("link");r.rel="stylesheet",r.type=e.type,r.media=e.media.mediaText,r.href=e.href,t.document.head.appendChild(r)}})}var TM=Object.freeze({__proto__:null,isReal:qu,isEl:zu,isInFrame:lM,createEl:ht,textContent:po,prependTo:M_,hasClass:cd,addClass:ea,removeClass:Lp,toggleClass:dM,setAttributes:hM,getAttributes:go,getAttribute:fM,setAttribute:Gu,removeAttribute:Fp,blockTextSelection:pM,unblockTextSelection:gM,getBoundingClientRect:Wu,findPosition:dd,getPointerPosition:Bp,isTextNode:mM,emptyEl:Up,normalizeContent:yM,appendContent:O_,insertContent:vM,isSingleLeftClick:hd,$:mo,$$:_M,computedStyle:Xu,copyStyleSheetsToWindow:bM});let k_,CM=!1;const sG=function(){if(!1===k_.options.autoSetup)return;const t=Array.prototype.slice.call(ue().getElementsByTagName("video")),e=Array.prototype.slice.call(ue().getElementsByTagName("audio")),n=Array.prototype.slice.call(ue().getElementsByTagName("video-js")),r=t.concat(e,n);if(r&&r.length>0)for(let i=0,s=r.length;i<s;i++){const o=r[i];if(!o||!o.getAttribute){P_(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&k_(o)}else CM||P_(1)};function P_(t,e){qu()&&(e&&(k_=e),O().setTimeout(sG,t))}function N_(){CM=!0,O().removeEventListener("load",N_)}qu()&&("complete"===ue().readyState?N_():O().addEventListener("load",N_));const EM=function(t){const e=ue().createElement("style");return e.className=t,e},DM=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e};var yr=new WeakMap;let jp,oG=3;function rs(){return oG++}function SM(t,e){if(!yr.has(t))return;const n=yr.get(t);0===n.handlers[e].length&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&yr.delete(t)}function R_(t,e,n,r){n.forEach(function(i){t(e,i,r)})}function Vp(t){if(t.fixed_)return t;function e(){return!0}function n(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){const r=t||O().event;t={};for(const i in r)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&"path"!==i&&("returnValue"===i&&r.preventDefault||(t[i]=r[i]));if(t.target||(t.target=t.srcElement||ue()),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){r.preventDefault&&r.preventDefault(),t.returnValue=!1,r.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),t.cancelBubble=!0,r.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=n,null!=t.clientX){const i=ue().documentElement,s=ue().body;t.pageX=t.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),t.pageY=t.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)}t.which=t.charCode||t.keyCode,null!=t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t.fixed_=!0,t}const aG=function(){if("boolean"!=typeof jp){jp=!1;try{const t=Object.defineProperty({},"passive",{get(){jp=!0}});O().addEventListener("test",null,t),O().removeEventListener("test",null,t)}catch{}}return jp},uG=["touchstart","touchmove"];function Hr(t,e,n){if(Array.isArray(e))return R_(Hr,t,e,n);yr.has(t)||yr.set(t,{});const r=yr.get(t);if(r.handlers||(r.handlers={}),r.handlers[e]||(r.handlers[e]=[]),n.guid||(n.guid=rs()),r.handlers[e].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(i,s){if(r.disabled)return;i=Vp(i);const o=r.handlers[i.type];if(o){const a=o.slice(0);for(let u=0,l=a.length;u<l&&!i.isImmediatePropagationStopped();u++)try{a[u].call(t,i,s)}catch(d){yt.error(d)}}}),1===r.handlers[e].length)if(t.addEventListener){let i=!1;aG()&&uG.indexOf(e)>-1&&(i={passive:!0}),t.addEventListener(e,r.dispatcher,i)}else t.attachEvent&&t.attachEvent("on"+e,r.dispatcher)}function er(t,e,n){if(!yr.has(t))return;const r=yr.get(t);if(!r.handlers)return;if(Array.isArray(e))return R_(er,t,e,n);const i=function(o,a){r.handlers[a]=[],SM(o,a)};if(void 0===e){for(const o in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},o)&&i(t,o);return}const s=r.handlers[e];if(s){if(!n)return void i(t,e);if(n.guid)for(let o=0;o<s.length;o++)s[o].guid===n.guid&&s.splice(o--,1);SM(t,e)}}function Ku(t,e,n){const r=yr.has(t)?yr.get(t):{},i=t.parentNode||t.ownerDocument;if("string"==typeof e?e={type:e,target:t}:e.target||(e.target=t),e=Vp(e),r.dispatcher&&r.dispatcher.call(t,e,n),i&&!e.isPropagationStopped()&&!0===e.bubbles)Ku.call(null,i,e,n);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){yr.has(e.target)||yr.set(e.target,{});const s=yr.get(e.target);e.target[e.type]&&(s.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function $p(t,e,n){if(Array.isArray(e))return R_($p,t,e,n);const r=function(){er(t,e,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||rs(),Hr(t,e,r)}function L_(t,e,n){const r=function(){er(t,e,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||rs(),Hr(t,e,r)}var lG=Object.freeze({__proto__:null,fixEvent:Vp,on:Hr,off:er,trigger:Ku,one:$p,any:L_});const Xt=function(t,e,n){e.guid||(e.guid=rs());const r=e.bind(t);return r.guid=n?n+"_"+e.guid:e.guid,r},is=function(t,e){let n=O().performance.now();return function(...i){const s=O().performance.now();s-n>=e&&(t(...i),n=s)}},wM=function(t,e,n,r=O()){let i;const o=function(){const a=this,u=arguments;let l=function(){i=null,l=null,n||t.apply(a,u)};!i&&n&&t.apply(a,u),r.clearTimeout(i),i=r.setTimeout(l,e)};return o.cancel=()=>{r.clearTimeout(i),i=null},o};var cG=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:30,bind_:Xt,throttle:is,debounce:wM});let fd;class oi{on(e,n){const r=this.addEventListener;this.addEventListener=()=>{},Hr(this,e,n),this.addEventListener=r}off(e,n){er(this,e,n)}one(e,n){const r=this.addEventListener;this.addEventListener=()=>{},$p(this,e,n),this.addEventListener=r}any(e,n){const r=this.addEventListener;this.addEventListener=()=>{},L_(this,e,n),this.addEventListener=r}trigger(e){const n=e.type||e;"string"==typeof e&&(e={type:n}),e=Vp(e),this.allowedEvents_[n]&&this["on"+n]&&this["on"+n](e),Ku(this,e)}queueTrigger(e){fd||(fd=new Map);const n=e.type||e;let r=fd.get(this);r||(r=new Map,fd.set(this,r));const i=r.get(n);r.delete(n),O().clearTimeout(i);const s=O().setTimeout(()=>{r.delete(n),0===r.size&&(r=null,fd.delete(this)),this.trigger(e)},0);r.set(n,s)}}oi.prototype.allowedEvents_={},oi.prototype.addEventListener=oi.prototype.on,oi.prototype.removeEventListener=oi.prototype.off,oi.prototype.dispatchEvent=oi.prototype.trigger;const Hp=t=>"function"==typeof t.name?t.name():"string"==typeof t.name?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t,Ls=t=>t instanceof oi||!!t.eventBusEl_&&["on","one","off","trigger"].every(e=>"function"==typeof t[e]),F_=t=>"string"==typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length,qp=(t,e,n)=>{if(!t||!t.nodeName&&!Ls(t))throw new Error(`Invalid target for ${Hp(e)}#${n}; must be a DOM node or evented object.`)},xM=(t,e,n)=>{if(!F_(t))throw new Error(`Invalid event type for ${Hp(e)}#${n}; must be a non-empty string or array.`)},AM=(t,e,n)=>{if("function"!=typeof t)throw new Error(`Invalid listener for ${Hp(e)}#${n}; must be a function.`)},B_=(t,e,n)=>{const r=e.length<3||e[0]===t||e[0]===t.eventBusEl_;let i,s,o;return r?(i=t.eventBusEl_,e.length>=3&&e.shift(),[s,o]=e):[i,s,o]=e,qp(i,t,n),xM(s,t,n),AM(o,t,n),o=Xt(t,o),{isTargetingSelf:r,target:i,type:s,listener:o}},ta=(t,e,n,r)=>{qp(t,t,e),t.nodeName?lG[e](t,n,r):t[e](n,r)},hG={on(...t){const{isTargetingSelf:e,target:n,type:r,listener:i}=B_(this,t,"on");if(ta(n,"on",r,i),!e){const s=()=>this.off(n,r,i);s.guid=i.guid;const o=()=>this.off("dispose",s);o.guid=i.guid,ta(this,"on","dispose",s),ta(n,"on","dispose",o)}},one(...t){const{isTargetingSelf:e,target:n,type:r,listener:i}=B_(this,t,"one");if(e)ta(n,"one",r,i);else{const s=(...o)=>{this.off(n,r,s),i.apply(null,o)};s.guid=i.guid,ta(n,"one",r,s)}},any(...t){const{isTargetingSelf:e,target:n,type:r,listener:i}=B_(this,t,"any");if(e)ta(n,"any",r,i);else{const s=(...o)=>{this.off(n,r,s),i.apply(null,o)};s.guid=i.guid,ta(n,"any",r,s)}},off(t,e,n){if(!t||F_(t))er(this.eventBusEl_,t,e);else{const r=t,i=e;qp(r,this,"off"),xM(i,this,"off"),AM(n,this,"off"),n=Xt(this,n),this.off("dispose",n),r.nodeName?(er(r,i,n),er(r,"dispose",n)):Ls(r)&&(r.off(i,n),r.off("dispose",n))}},trigger(t,e){if(qp(this.eventBusEl_,this,"trigger"),!F_(t&&"string"!=typeof t?t.type:t))throw new Error(`Invalid event type for ${Hp(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Ku(this.eventBusEl_,t,e)}};function U_(t,e={}){const{eventBusKey:n}=e;if(n){if(!t[n].nodeName)throw new Error(`The eventBusKey "${n}" does not refer to an element.`);t.eventBusEl_=t[n]}else t.eventBusEl_=ht("span",{className:"vjs-event-bus"});return Object.assign(t,hG),t.eventedCallbacks&&t.eventedCallbacks.forEach(r=>{r()}),t.on("dispose",()=>{t.off(),[t,t.el_,t.eventBusEl_].forEach(function(r){r&&yr.has(r)&&yr.delete(r)}),O().setTimeout(()=>{t.eventBusEl_=null},0)}),t}const fG={state:{},setState(t){let e;return"function"==typeof t&&(t=t()),Uu(t,(n,r)=>{this.state[r]!==n&&(e=e||{},e[r]={from:this.state[r],to:n}),this.state[r]=n}),e&&Ls(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function IM(t,e){return Object.assign(t,fG),t.state=Object.assign({},t.state,e),"function"==typeof t.handleStateChanged&&Ls(t)&&t.on("statechanged",t.handleStateChanged),t}const pd=function(t){return"string"!=typeof t?t:t.replace(/./,e=>e.toLowerCase())},mn=function(t){return"string"!=typeof t?t:t.replace(/./,e=>e.toUpperCase())},MM=function(t,e){return mn(t)===mn(e)};var pG=Object.freeze({__proto__:null,toLowerCase:pd,toTitleCase:mn,titleCaseEquals:MM});class H{constructor(e,n,r){if(this.player_=!e&&this.play?e=this:e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Wt({},this.options_),n=this.options_=Wt(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){const i=e&&e.id&&e.id()||"no_player";this.id_=`${i}_component_${rs()}`}this.name_=n.name||null,n.el?this.el_=n.el:!1!==n.createEl&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(i=>this.addClass(i)),["on","off","one","any","trigger"].forEach(i=>{this[i]=void 0}),!1!==n.evented&&(U_(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),IM(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==n.initChildren&&this.initChildren(),this.ready(r),!1!==n.reportTouchActivity&&this.enableTouchActivity()}on(e,n){}off(e,n){}one(e,n){}any(e,n){}trigger(e,n){}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let n=this.children_.length-1;n>=0;n--)this.children_[n].dispose&&this.children_[n].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=Wt(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,n,r){return ht(e,n,r)}localize(e,n,r=e){const i=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),o=s&&s[i],a=i&&i.split("-")[0],u=s&&s[a];let l=r;return o&&o[e]?l=o[e]:u&&u[e]&&(l=u[e]),n&&(l=l.replace(/\{(\d+)\}/g,function(d,g){const v=n[g-1];let b=v;return typeof v>"u"&&(b=d),b})),l}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((r,i)=>r.concat(i),[]);let n=this;for(let r=0;r<e.length;r++)if(n=n.getChild(e[r]),!n||!n.getChild)return;return n}setIcon(e,n=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const r="http://www.w3.org/2000/svg",i=ht("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),s=ue().createElementNS(r,"svg");s.setAttributeNS(null,"viewBox","0 0 512 512");const o=ue().createElementNS(r,"use");return s.appendChild(o),o.setAttributeNS(null,"href",`#vjs-icon-${e}`),i.appendChild(s),this.iconIsSet_?n.replaceChild(i,n.querySelector(".vjs-icon-placeholder")):n.appendChild(i),this.iconIsSet_=!0,i}addChild(e,n={},r=this.children_.length){let i,s;if("string"==typeof e){s=mn(e);const o=n.componentClass||s;n.name=s;const a=H.getComponent(o);if(!a)throw new Error(`Component ${o} does not exist`);if("function"!=typeof a)return null;i=new a(this.player_||this,n)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(r,0,i),i.parentComponent_=this,"function"==typeof i.id&&(this.childIndex_[i.id()]=i),s=s||i.name&&mn(i.name()),s&&(this.childNameIndex_[s]=i,this.childNameIndex_[pd(s)]=i),"function"==typeof i.el&&i.el()){let o=null;this.children_[r+1]&&(this.children_[r+1].el_?o=this.children_[r+1].el_:zu(this.children_[r+1])&&(o=this.children_[r+1])),this.contentEl().insertBefore(i.el(),o)}return i}removeChild(e){if("string"==typeof e&&(e=this.getChild(e)),!e||!this.children_)return;let n=!1;for(let i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){n=!0,this.children_.splice(i,1);break}if(!n)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[mn(e.name())]=null,this.childNameIndex_[pd(e.name())]=null;const r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const n=this.options_,r=o=>{const a=o.name;let u=o.opts;if(void 0!==n[a]&&(u=n[a]),!1===u)return;!0===u&&(u={}),u.playerOptions=this.options_.playerOptions;const l=this.addChild(a,u);l&&(this[a]=l)};let i;const s=H.getComponent("Tech");i=Array.isArray(e)?e:Object.keys(e),i.concat(Object.keys(this.options_).filter(function(o){return!i.some(function(a){return"string"==typeof a?o===a:o===a.name})})).map(o=>{let a,u;return"string"==typeof o?(a=o,u=e[a]||this.options_[a]||{}):(a=o.name,u=o),{name:a,opts:u}}).filter(o=>{const a=H.getComponent(o.opts.componentClass||mn(o.name));return a&&!s.isTech(a)}).forEach(r)}}buildCSSClass(){return""}ready(e,n=!1){if(e){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e);n?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(n){n.call(this)},this),this.trigger("ready")},1)}$(e,n){return mo(e,n||this.contentEl())}$$(e,n){return _M(e,n||this.contentEl())}hasClass(e){return cd(this.el_,e)}addClass(...e){ea(this.el_,...e)}removeClass(...e){Lp(this.el_,...e)}toggleClass(e,n){dM(this.el_,e,n)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return fM(this.el_,e)}setAttribute(e,n){Gu(this.el_,e,n)}removeAttribute(e){Fp(this.el_,e)}width(e,n){return this.dimension("width",e,n)}height(e,n){return this.dimension("height",e,n)}dimensions(e,n){this.width(e,!0),this.height(n)}dimension(e,n,r){if(void 0!==n)return(null===n||n!=n)&&(n=0),this.el_.style[e]=-1!==(""+n).indexOf("%")||-1!==(""+n).indexOf("px")?n:"auto"===n?"":n+"px",void(r||this.trigger("componentresize"));if(!this.el_)return 0;const i=this.el_.style[e],s=i.indexOf("px");return parseInt(-1!==s?i.slice(0,s):this.el_["offset"+mn(e)],10)}currentDimension(e){let n=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(n=Xu(this.el_,e),n=parseFloat(n),0===n||isNaN(n)){const r=`offset${mn(e)}`;n=this.el_[r]}return n}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(it().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let s,e=0,n=null;this.on("touchstart",function(a){1===a.touches.length&&(n={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY},e=O().performance.now(),s=!0)}),this.on("touchmove",function(a){if(a.touches.length>1)s=!1;else if(n){const u=a.touches[0].pageX-n.pageX,l=a.touches[0].pageY-n.pageY;Math.sqrt(u*u+l*l)>10&&(s=!1)}});const o=function(){s=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(a){n=null,!0===s&&O().performance.now()-e<200&&(a.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Xt(this.player(),this.player().reportUserActivity);let n;this.on("touchstart",function(){e(),this.clearInterval(n),n=this.setInterval(e,250)});const r=function(i){e(),this.clearInterval(n)};this.on("touchmove",e),this.on("touchend",r),this.on("touchcancel",r)}setTimeout(e,n){var r;return e=Xt(this,e),this.clearTimersOnDispose_(),r=O().setTimeout(()=>{this.setTimeoutIds_.has(r)&&this.setTimeoutIds_.delete(r),e()},n),this.setTimeoutIds_.add(r),r}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),O().clearTimeout(e)),e}setInterval(e,n){e=Xt(this,e),this.clearTimersOnDispose_();const r=O().setInterval(e,n);return this.setIntervalIds_.add(r),r}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),O().clearInterval(e)),e}requestAnimationFrame(e){var n;return this.clearTimersOnDispose_(),e=Xt(this,e),n=O().requestAnimationFrame(()=>{this.rafIds_.has(n)&&this.rafIds_.delete(n),e()}),this.rafIds_.add(n),n}requestNamedAnimationFrame(e,n){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),n=Xt(this,n);const r=this.requestAnimationFrame(()=>{n(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,r),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),O().cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,n])=>{this[e].forEach((r,i)=>this[n](i))}),this.clearingTimersOnDispose_=!1}))}static registerComponent(e,n){if("string"!=typeof e||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const r=H.getComponent("Tech"),i=r&&r.isTech(n),s=H===n||H.prototype.isPrototypeOf(n.prototype);if(i||!s){let a;throw a=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${e}"; ${a}.`)}e=mn(e),H.components_||(H.components_={});const o=H.getComponent("Player");if("Player"===e&&o&&o.players){const a=o.players,u=Object.keys(a);if(a&&u.length>0&&u.map(l=>a[l]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return H.components_[e]=n,H.components_[pd(e)]=n,n}static getComponent(e){if(e&&H.components_)return H.components_[e]}}function OM(t,e,n,r){return function gG(t,e,n){if("number"!=typeof e||e<0||e>n)throw new Error(`Failed to execute '${t}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${n}).`)}(t,r,n.length-1),n[r][e]}function V_(t){let e;return e=void 0===t||0===t.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:OM.bind(null,"start",0,t),end:OM.bind(null,"end",1,t)},O().Symbol&&O().Symbol.iterator&&(e[O().Symbol.iterator]=()=>(t||[]).values()),e}function ss(t,e){return Array.isArray(t)?V_(t):void 0===t||void 0===e?V_():V_([[t,e]])}H.registerComponent("Component",H);const kM=function(t,e){t=t<0?0:t;let n=Math.floor(t%60),r=Math.floor(t/60%60),i=Math.floor(t/3600);const s=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(i=r=n="-"),i=i>0||o>0?i+":":"",r=((i||s>=10)&&r<10?"0"+r:r)+":",n=n<10?"0"+n:n,i+r+n};let j_=kM;function PM(t){j_=t}function NM(){j_=kM}function na(t,e=t){return j_(t,e)}var mG=Object.freeze({__proto__:null,createTimeRanges:ss,createTimeRange:ss,setFormatTime:PM,resetFormatTime:NM,formatTime:na});function RM(t,e){let r,i,n=0;if(!e)return 0;(!t||!t.length)&&(t=ss(0,0));for(let s=0;s<t.length;s++)r=t.start(s),i=t.end(s),i>e&&(i=e),n+=i-r;return n/e}function vr(t){if(t instanceof vr)return t;"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:es(t)&&("number"==typeof t.code&&(this.code=t.code),Object.assign(this,t)),this.message||(this.message=vr.defaultMessages[this.code]||"")}vr.prototype.code=0,vr.prototype.message="",vr.prototype.status=null,vr.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],vr.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let t=0;t<vr.errorTypes.length;t++)vr[vr.errorTypes[t]]=t,vr.prototype[vr.errorTypes[t]]=t;function gd(t){return null!=t&&"function"==typeof t.then}function os(t){gd(t)&&t.then(null,e=>{})}const $_=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((n,r,i)=>(t[r]&&(n[r]=t[r]),n),{cues:t.cues&&Array.prototype.map.call(t.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})})};const H_="vjs-modal-dialog";class Yu extends H{constructor(e,n){super(e,n),this.handleKeyDown_=r=>this.handleKeyDown(r),this.close_=r=>this.close(r),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=ht("div",{className:`${H_}-content`},{role:"document"}),this.descEl_=ht("p",{className:`${H_}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),po(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${H_} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(!this.opened_){const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if("boolean"==typeof e){const n=this.closeable_=!!e;let r=this.getChild("closeButton");if(n&&!r){const i=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(r,"close",this.close_)}!n&&r&&(this.off(r,"close",this.close_),this.removeChild(r),r.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const n=this.contentEl(),r=n.parentNode,i=n.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(n),this.empty(),vM(n,e),this.trigger("modalfill"),i?r.insertBefore(n,i):r.appendChild(n);const s=this.getChild("closeButton");s&&r.appendChild(s.el_)}empty(){this.trigger("beforemodalempty"),Up(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=ue().activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(e)||n===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),it().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(!it().isEventKey(e,"Tab"))return;const n=this.focusableEls_(),r=this.el_.querySelector(":focus");let i;for(let s=0;s<n.length;s++)if(r===n[s]){i=s;break}ue().activeElement===this.el_&&(i=0),e.shiftKey&&0===i?(n[n.length-1].focus(),e.preventDefault()):!e.shiftKey&&i===n.length-1&&(n[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,n=>(n instanceof O().HTMLAnchorElement||n instanceof O().HTMLAreaElement)&&n.hasAttribute("href")||(n instanceof O().HTMLInputElement||n instanceof O().HTMLSelectElement||n instanceof O().HTMLTextAreaElement||n instanceof O().HTMLButtonElement)&&!n.hasAttribute("disabled")||n instanceof O().HTMLIFrameElement||n instanceof O().HTMLObjectElement||n instanceof O().HTMLEmbedElement||n.hasAttribute("tabindex")&&-1!==n.getAttribute("tabindex")||n.hasAttribute("contenteditable"))}}Yu.prototype.options_={pauseOnOpen:!0,temporary:!0},H.registerComponent("ModalDialog",Yu);class Qu extends oi{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let n=0;n<e.length;n++)this.addTrack(e[n])}addTrack(e){const n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Ls(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let n;for(let r=0,i=this.length;r<i;r++)if(this[r]===e){n=this[r],n.off&&n.off(),this.tracks_.splice(r,1);break}n&&this.trigger({track:n,type:"removetrack",target:this})}getTrackById(e){let n=null;for(let r=0,i=this.length;r<i;r++){const s=this[r];if(s.id===e){n=s;break}}return n}}Qu.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const t in Qu.prototype.allowedEvents_)Qu.prototype["on"+t]=null;const q_=function(t,e){for(let n=0;n<t.length;n++)!Object.keys(t[n]).length||e.id===t[n].id||(t[n].enabled=!1)},z_=function(t,e){for(let n=0;n<t.length;n++)!Object.keys(t[n]).length||e.id===t[n].id||(t[n].selected=!1)};class FM extends Qu{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class zp{constructor(e){zp.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const n=this.length||0;let r=0;const i=e.length;this.cues_=e,this.length_=e.length;const s=function(o){""+o in this||Object.defineProperty(this,""+o,{get(){return this.cues_[o]}})};if(n<i)for(r=n;r<i;r++)s.call(this,r)}getCueById(e){let n=null;for(let r=0,i=this.length;r<i;r++){const s=this[r];if(s.id===e){n=s;break}}return n}}const bG={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},TG={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},CG={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},BM={disabled:"disabled",hidden:"hidden",showing:"showing"};class G_ extends oi{constructor(e={}){super();const n={id:e.id||"vjs_track_"+rs(),kind:e.kind||"",language:e.language||""};let r=e.label||"";for(const i in n)Object.defineProperty(this,i,{get:()=>n[i],set(){}});Object.defineProperty(this,"label",{get:()=>r,set(i){i!==r&&(r=i,this.trigger("labelchange"))}})}}const W_=function(t){const e=["protocol","hostname","port","pathname","search","hash","host"],n=ue().createElement("a");n.href=t;const r={};for(let i=0;i<e.length;i++)r[e[i]]=n[e[i]];return"http:"===r.protocol&&(r.host=r.host.replace(/:80$/,"")),"https:"===r.protocol&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=O().location.protocol),r.host||(r.host=O().location.host),r},UM=function(t){if(!t.match(/^https?:\/\//)){const e=ue().createElement("a");e.href=t,t=e.href}return t},X_=function(t){if("string"==typeof t){const n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(n)return n.pop().toLowerCase()}return""},Gp=function(t,e=O().location){const n=W_(t);return(":"===n.protocol?e.protocol:n.protocol)+n.host!==e.protocol+e.host};var EG=Object.freeze({__proto__:null,parseUrl:W_,getAbsoluteURL:UM,getFileExtension:X_,isCrossOrigin:Gp});const VM=function(t,e){const n=new(O().WebVTT.Parser)(O(),O().vttjs,O().WebVTT.StringDecoder()),r=[];n.oncue=function(i){e.addCue(i)},n.onparsingerror=function(i){r.push(i)},n.onflush=function(){e.trigger({type:"loadeddata",target:e})},n.parse(t),r.length>0&&(O().console&&O().console.groupCollapsed&&O().console.groupCollapsed(`Text Track parsing errors for ${e.src}`),r.forEach(i=>yt.error(i)),O().console&&O().console.groupEnd&&O().console.groupEnd()),n.flush()},jM=function(t,e){const n={uri:t},r=Gp(t);r&&(n.cors=r);const i="use-credentials"===e.tech_.crossOrigin();i&&(n.withCredentials=i),DI()(n,Xt(this,function(s,o,a){if(s)return yt.error(s,o);e.loaded_=!0,"function"!=typeof O().WebVTT?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],u=>{if("vttjserror"!==u.type)return VM(a,e);yt.error(`vttjs failed to load, stopping trying to process ${e.src}`)}):VM(a,e)}))};class md extends G_{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const n=Wt(e,{kind:CG[e.kind]||"subtitles",language:e.language||e.srclang||""});let r=BM[n.mode]||"disabled";const i=n.default;("metadata"===n.kind||"chapters"===n.kind)&&(r="hidden"),super(n),this.tech_=n.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const s=new zp(this.cues_),o=new zp(this.activeCues_);let a=!1;this.timeupdateHandler=Xt(this,function(l={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_)return void("timeupdate"!==l.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)));this.activeCues=this.activeCues,a&&(this.trigger("cuechange"),a=!1),"timeupdate"!==l.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}}),this.tech_.one("dispose",()=>{this.stopTracking()}),"disabled"!==r&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>i,set(){}},mode:{get:()=>r,set(l){BM[l]&&r!==l&&(r=l,!this.preload_&&"disabled"!==r&&0===this.cues.length&&jM(this.src,this),this.stopTracking(),"disabled"!==r&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return o;const l=this.tech_.currentTime(),d=[];for(let g=0,v=this.cues.length;g<v;g++){const b=this.cues[g];b.startTime<=l&&b.endTime>=l&&d.push(b)}if(a=!1,d.length!==this.activeCues_.length)a=!0;else for(let g=0;g<d.length;g++)-1===this.activeCues_.indexOf(d[g])&&(a=!0);return this.activeCues_=d,o.setCues_(this.activeCues_),o},set(){}}}),n.src?(this.src=n.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==n.kind&&"captions"!==n.kind)&&jM(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let n=e;if(!("getCueAsHTML"in n)){n=new(O().vttjs.VTTCue)(e.startTime,e.endTime,e.text);for(const i in e)i in n||(n[i]=e[i]);n.id=e.id,n.originalCue_=e}const r=this.tech_.textTracks();for(let i=0;i<r.length;i++)r[i]!==this&&r[i].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)}removeCue(e){let n=this.cues_.length;for(;n--;){const r=this.cues_[n];if(r===e||r.originalCue_&&r.originalCue_===e){this.cues_.splice(n,1),this.cues.setCues_(this.cues_);break}}}}md.prototype.allowedEvents_={cuechange:"cuechange"};class $M extends G_{constructor(e={}){const n=Wt(e,{kind:TG[e.kind]||""});super(n);let r=!1;Object.defineProperty(this,"enabled",{get:()=>r,set(i){"boolean"!=typeof i||i===r||(r=i,this.trigger("enabledchange"))}}),n.enabled&&(this.enabled=n.enabled),this.loaded_=!0}}class HM extends G_{constructor(e={}){const n=Wt(e,{kind:bG[e.kind]||""});super(n);let r=!1;Object.defineProperty(this,"selected",{get:()=>r,set(i){"boolean"!=typeof i||i===r||(r=i,this.trigger("selectedchange"))}}),n.selected&&(this.selected=n.selected)}}class Fs extends oi{constructor(e={}){let n;super();const r=new md(e);this.kind=r.kind,this.src=r.src,this.srclang=r.language,this.label=r.label,this.default=r.default,Object.defineProperties(this,{readyState:{get:()=>n},track:{get:()=>r}}),n=Fs.NONE,r.addEventListener("loadeddata",()=>{n=Fs.LOADED,this.trigger({type:"load",target:this})})}}Fs.prototype.allowedEvents_={load:"load"},Fs.NONE=0,Fs.LOADING=1,Fs.LOADED=2,Fs.ERROR=3;const ai={audio:{ListClass:class yG extends Qu{constructor(e=[]){for(let n=e.length-1;n>=0;n--)if(e[n].enabled){q_(e,e[n]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&q_(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,q_(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}},TrackClass:$M,capitalName:"Audio"},video:{ListClass:class vG extends Qu{constructor(e=[]){for(let n=e.length-1;n>=0;n--)if(e[n].selected){z_(e,e[n]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let n=0;n<this.length;n++)if(this[n].selected)return n;return-1},set(){}})}addTrack(e){e.selected&&z_(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,z_(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}},TrackClass:HM,capitalName:"Video"},text:{ListClass:FM,TrackClass:md,capitalName:"Text"}};Object.keys(ai).forEach(function(t){ai[t].getterName=`${t}Tracks`,ai[t].privateName=`${t}Tracks_`});const Zu={remoteText:{ListClass:FM,TrackClass:md,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class _G{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let n=0,r=e.length;n<r;n++)this.addTrackElement_(e[n])}addTrackElement_(e){const n=this.trackElements_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.trackElements_[n]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let n;for(let r=0,i=this.trackElements_.length;r<i;r++)if(e===this.trackElements_[r].track){n=this.trackElements_[r];break}return n}removeTrackElement_(e){for(let n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n]){this.trackElements_[n].track&&"function"==typeof this.trackElements_[n].track.off&&this.trackElements_[n].track.off(),"function"==typeof this.trackElements_[n].off&&this.trackElements_[n].off(),this.trackElements_.splice(n,1);break}}},TrackClass:Fs,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},_r=Object.assign({},ai,Zu);Zu.names=Object.keys(Zu),ai.names=Object.keys(ai),_r.names=[].concat(Zu.names).concat(ai.names);class at extends H{constructor(e={},n=function(){}){e.reportTouchActivity=!1,super(null,e,n),this.onDurationChange_=r=>this.onDurationChange(r),this.trackProgress_=r=>this.trackProgress(r),this.trackCurrentTime_=r=>this.trackCurrentTime(r),this.stopTrackingCurrentTime_=r=>this.stopTrackingCurrentTime(r),this.disposeSourceHandler_=r=>this.disposeSourceHandler(r),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),_r.names.forEach(r=>{const i=_r[r];e&&e[i.getterName]&&(this[i.privateName]=e[i.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(r=>{!1===e[`native${r}Tracks`]&&(this[`featuresNative${r}Tracks`]=!1)}),!1===e.nativeCaptions||!1===e.nativeTextTracks?this.featuresNativeTextTracks=!1:(!0===e.nativeCaptions||!0===e.nativeTextTracks)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==e.preloadTextTracks,this.autoRemoteTextTracks_=new _r.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Xt(this,function(){const n=this.bufferedPercent();this.bufferedPercent_!==n&&this.trigger("progress"),this.bufferedPercent_=n,1===n&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return ss(0,0)}bufferedPercent(){return RM(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(ai.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){(e=[].concat(e)).forEach(n=>{const r=this[`${n}Tracks`]()||[];let i=r.length;for(;i--;){const s=r[i];"text"===n&&this.removeRemoteTextTrack(s),r.removeTrack(s)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let n=e.length;for(;n--;)this.removeRemoteTextTrack(e[n])}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return void 0!==e&&(this.error_=new vr(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?ss(0,0):ss()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){ai.names.forEach(e=>{const r=()=>{this.trigger(`${e}trackchange`)},i=this[ai[e].getterName]();i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),this.on("dispose",()=>{i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)})})}addWebVttScript_(){if(!O().WebVTT)if(ue().body.contains(this.el())){if(!this.options_["vtt.js"]&&Vu(SI())&&Object.keys(SI()).length>0)return void this.trigger("vttjsloaded");const e=ue().createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),O().WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),n=this.remoteTextTracks(),r=a=>e.addTrack(a.track),i=a=>e.removeTrack(a.track);n.on("addtrack",r),n.on("removetrack",i),this.addWebVttScript_();const s=()=>this.trigger("texttrackchange"),o=()=>{s();for(let a=0;a<e.length;a++){const u=e[a];u.removeEventListener("cuechange",s),"showing"===u.mode&&u.addEventListener("cuechange",s)}};o(),e.addEventListener("change",o),e.addEventListener("addtrack",o),e.addEventListener("removetrack",o),this.on("dispose",function(){n.off("addtrack",r),n.off("removetrack",i),e.removeEventListener("change",o),e.removeEventListener("addtrack",o),e.removeEventListener("removetrack",o);for(let a=0;a<e.length;a++)e[a].removeEventListener("cuechange",s)})}addTextTrack(e,n,r){if(!e)throw new Error("TextTrack kind is required but was not provided");return function DG(t,e,n,r,i={}){const s=t.textTracks();i.kind=e,n&&(i.label=n),r&&(i.language=r),i.tech=t;const o=new _r.text.TrackClass(i);return s.addTrack(o),o}(this,e,n,r)}createRemoteTextTrack(e){const n=Wt(e,{tech:this});return new Zu.remoteTextEl.TrackClass(n)}addRemoteTextTrack(e={},n){const r=this.createRemoteTextTrack(e);return"boolean"!=typeof n&&(n=!1),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!1===n&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(r.track)),r}removeRemoteTextTrack(e){const n=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(n),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const n=rs();return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",()=>{this.queuedHanders_.has(n)&&(this.queuedHanders_.delete(n),e())})):this.requestNamedAnimationFrame(n,e),n}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,n){return at.canPlayType(e.type)}static isTech(e){return e.prototype instanceof at||e instanceof at||e===at}static registerTech(e,n){if(at.techs_||(at.techs_={}),!at.isTech(n))throw new Error(`Tech ${e} must be a Tech`);if(!at.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!at.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=mn(e),at.techs_[e]=n,at.techs_[pd(e)]=n,"Tech"!==e&&at.defaultTechOrder_.push(e),n}static getTech(e){if(e){if(at.techs_&&at.techs_[e])return at.techs_[e];if(e=mn(e),O()&&O().videojs&&O().videojs[e])return yt.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),O().videojs[e]}}}_r.names.forEach(function(t){const e=_r[t];at.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),at.prototype.featuresVolumeControl=!0,at.prototype.featuresMuteControl=!0,at.prototype.featuresFullscreenResize=!1,at.prototype.featuresPlaybackRate=!1,at.prototype.featuresProgressEvents=!1,at.prototype.featuresSourceset=!1,at.prototype.featuresTimeupdateEvents=!1,at.prototype.featuresNativeTextTracks=!1,at.prototype.featuresVideoFrameCallback=!1,at.withSourceHandlers=function(t){t.registerSourceHandler=function(n,r){let i=t.sourceHandlers;i||(i=t.sourceHandlers=[]),void 0===r&&(r=i.length),i.splice(r,0,n)},t.canPlayType=function(n){const r=t.sourceHandlers||[];let i;for(let s=0;s<r.length;s++)if(i=r[s].canPlayType(n),i)return i;return""},t.selectSourceHandler=function(n,r){const i=t.sourceHandlers||[];let s;for(let o=0;o<i.length;o++)if(s=i[o].canHandleSource(n,r),s)return i[o];return null},t.canPlaySource=function(n,r){const i=t.selectSourceHandler(n,r);return i?i.canHandleSource(n,r):""},["seekable","seeking","duration"].forEach(function(n){const r=this[n];"function"==typeof r&&(this[n]=function(){return this.sourceHandler_&&this.sourceHandler_[n]?this.sourceHandler_[n].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(n){let r=t.selectSourceHandler(n,this.options_);r||(t.nativeSourceHandler?r=t.nativeSourceHandler:yt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==t.nativeSourceHandler&&(this.currentSource_=n),this.sourceHandler_=r.handleSource(n,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},H.registerComponent("Tech",at),at.registerTech("Tech",at),at.defaultTechOrder_=[];const ra={},K_={},Wp={};function wG(t,e,n){t.setTimeout(()=>ia(e,ra[e.type],n,t),1)}function qM(t,e,n,r=null){const i="call"+mn(n),s=t.reduce(Y_(i),r),o=s===Wp,a=o?null:e[n](s);return function kG(t,e,n,r){for(let i=t.length-1;i>=0;i--){const s=t[i];s[e]&&s[e](r,n)}}(t,n,a,o),a}const MG={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},OG={setCurrentTime:1,setMuted:1,setVolume:1},zM={play:1,pause:1};function Y_(t){return(e,n)=>e===Wp?Wp:n[t]?n[t](e):e}function ia(t={},e=[],n,r,i=[],s=!1){const[o,...a]=e;if("string"==typeof o)ia(t,ra[o],n,r,i,s);else if(o){const u=function NG(t,e){const n=K_[t.id()];let r=null;if(null==n)return r=e(t),K_[t.id()]=[[e,r]],r;for(let i=0;i<n.length;i++){const[s,o]=n[i];s===e&&(r=o)}return null===r&&(r=e(t),n.push([e,r])),r}(r,o);if(!u.setSource)return i.push(u),ia(t,a,n,r,i,s);u.setSource(Object.assign({},t),function(l,d){if(l)return ia(t,a,n,r,i,s);i.push(u),ia(d,t.type===d.type?a:ra[d.type],n,r,i,s)})}else a.length?ia(t,a,n,r,i,s):s?n(t,i):ia(t,ra["*"],n,r,i,!0)}const RG={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Xp=function(t=""){const e=X_(t);return RG[e.toLowerCase()]||""},GM=function(t){if(Array.isArray(t)){let e=[];t.forEach(function(n){n=GM(n),Array.isArray(n)?e=e.concat(n):es(n)&&e.push(n)}),t=e}else t="string"==typeof t&&t.trim()?[WM({src:t})]:es(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[WM(t)]:[];return t};function WM(t){if(!t.type){const e=Xp(t.src);e&&(t.type=e)}return t}H.registerComponent("MediaLoader",class BG extends H{constructor(e,n,r){if(super(e,Wt({createEl:!1},n),r),n.playerOptions.sources&&0!==n.playerOptions.sources.length)e.src(n.playerOptions.sources);else for(let s=0,o=n.playerOptions.techOrder;s<o.length;s++){const a=mn(o[s]);let u=at.getTech(a);if(a||(u=H.getComponent(a)),u&&u.isSupported()){e.loadTech_(a);break}}}});class Kp extends H{constructor(e,n){super(e,n),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=r=>this.handleMouseOver(r),this.handleMouseOut_=r=>this.handleMouseOut(r),this.handleClick_=r=>this.handleClick(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.emitTapEvents(),this.enable()}createEl(e="div",n={},r={}){n=Object.assign({className:this.buildCSSClass(),tabIndex:0},n),"button"===e&&yt.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),r=Object.assign({role:"button"},r),this.tabIndex_=n.tabIndex;const i=ht(e,n,r);return this.player_.options_.experimentalSvgIcons||i.appendChild(ht("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=ht("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,n=this.el()){if(void 0===e)return this.controlText_||"Need Text";const r=this.localize(e);this.controlText_=e,po(this.controlTextEl_,r),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&n.setAttribute("title",r)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){it().isEventKey(e,"Space")||it().isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}H.registerComponent("ClickableComponent",Kp);class Q_ extends Kp{constructor(e,n){super(e,n),this.update(),this.update_=r=>this.update(r),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return ht("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===e||"anonymous"===e||"use-credentials"===e?this.$("img")&&(this.$("img").crossOrigin=e):this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}update(e){const n=this.player().poster();this.setSrc(n),n?this.show():this.hide()}setSrc(e){e?(this.$("img")||this.el_.appendChild(ht("picture",{className:"vjs-poster",tabIndex:-1},{},ht("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e):this.el_.textContent=""}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?os(this.player_.play()):this.player_.pause())}}Q_.prototype.crossorigin=Q_.prototype.crossOrigin,H.registerComponent("PosterImage",Q_);const ui="#222",UG={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Z_(t,e){let n;if(4===t.length)n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");n=t.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+e+")"}function yd(t,e,n){try{t.style[e]=n}catch{return}}function KM(t){return t?`${t}px`:""}H.registerComponent("TextTrackDisplay",class VG extends H{constructor(e,n,r){super(e,n,r);const s=o=>{this.updateDisplayOverlay(),this.updateDisplay(o)};e.on("loadstart",o=>this.toggleDisplay(o)),e.on("texttrackchange",o=>this.updateDisplay(o)),e.on("loadedmetadata",o=>{this.updateDisplayOverlay(),this.preselectTrack(o)}),e.ready(Xt(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)return void this.hide();e.on("fullscreenchange",s),e.on("playerresize",s);const o=O().screen.orientation||O(),a=O().screen.orientation?"change":"orientationchange";o.addEventListener(a,s),e.on("dispose",()=>o.removeEventListener(a,s));const u=this.options_.playerOptions.tracks||[];for(let l=0;l<u.length;l++)this.player_.addRemoteTextTrack(u[l],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},n=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage;let i,s,o;for(let a=0;a<n.length;a++){const u=n[a];r&&r.enabled&&r.language&&r.language===u.language&&u.kind in e?u.kind===r.kind?o=u:o||(o=u):r&&!r.enabled?(o=null,i=null,s=null):u.default&&("descriptions"!==u.kind||i?u.kind in e&&!s&&(s=u):i=u)}o?o.mode="showing":s?s.mode="showing":i&&(i.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"==typeof O().WebVTT&&O().WebVTT.processCues(O(),[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),n=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),n){const o=[];for(let a=0;a<e.length;++a){const u=e[a];"showing"===u.mode&&o.push(u)}return void this.updateForTrack(o)}let r=null,i=null,s=e.length;for(;s--;){const o=e[s];"showing"===o.mode&&("descriptions"===o.kind?r=o:i=o)}i?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):r&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(r))}updateDisplayOverlay(){if(!this.player_.videoHeight()||!O().CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),n=this.player_.currentHeight(),r=e/n,i=this.player_.videoWidth()/this.player_.videoHeight();let s=0,o=0;Math.abs(r-i)>.1&&(r>i?s=Math.round((e-n*i)/2):o=Math.round((n-e/i)/2)),yd(this.el_,"insetInline",KM(s)),yd(this.el_,"insetBlock",KM(o))}updateDisplayState(e){const n=this.player_.textTrackSettings.getValues(),r=e.activeCues;let i=r.length;for(;i--;){const s=r[i];if(!s)continue;const o=s.displayState;if(n.color&&(o.firstChild.style.color=n.color),n.textOpacity&&yd(o.firstChild,"color",Z_(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(o.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&yd(o.firstChild,"backgroundColor",Z_(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?yd(o,"backgroundColor",Z_(n.windowColor,n.windowOpacity)):o.style.backgroundColor=n.windowColor),n.edgeStyle&&("dropshadow"===n.edgeStyle?o.firstChild.style.textShadow=`2px 2px 3px ${ui}, 2px 2px 4px ${ui}, 2px 2px 5px ${ui}`:"raised"===n.edgeStyle?o.firstChild.style.textShadow=`1px 1px ${ui}, 2px 2px ${ui}, 3px 3px ${ui}`:"depressed"===n.edgeStyle?o.firstChild.style.textShadow=`1px 1px #ccc, 0 1px #ccc, -1px -1px ${ui}, 0 -1px ${ui}`:"uniform"===n.edgeStyle&&(o.firstChild.style.textShadow=`0 0 4px ${ui}, 0 0 4px ${ui}, 0 0 4px ${ui}, 0 0 4px ${ui}`)),n.fontPercent&&1!==n.fontPercent){const a=O().parseFloat(o.style.fontSize);o.style.fontSize=a*n.fontPercent+"px",o.style.height="auto",o.style.top="auto"}n.fontFamily&&"default"!==n.fontFamily&&("small-caps"===n.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=UG[n.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),"function"!=typeof O().WebVTT||e.every(r=>!r.activeCues))return;const n=[];for(let r=0;r<e.length;++r){const i=e[r];for(let s=0;s<i.activeCues.length;++s)n.push(i.activeCues[s])}O().WebVTT.processCues(O(),n,this.el_);for(let r=0;r<e.length;++r){const i=e[r];for(let s=0;s<i.activeCues.length;++s){const o=i.activeCues[s].displayState;ea(o,"vjs-text-track-cue","vjs-text-track-cue-"+(i.language?i.language:r)),i.language&&Gu(o,"lang",i.language)}this.player_.textTrackSettings&&this.updateDisplayState(i)}}}),H.registerComponent("LoadingSpinner",class jG extends H{createEl(){const e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),r=ht("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(r),i}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}});class qr extends Kp{createEl(e,n={},r={}){const i=ht("button",n=Object.assign({className:this.buildCSSClass()},n),r=Object.assign({type:"button"},r));return this.player_.options_.experimentalSvgIcons||i.appendChild(ht("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}addChild(e,n={}){return yt.warn(`Adding an actionable (user controllable) child to a Button (${this.constructor.name}) is not supported; use a ClickableComponent instead.`),H.prototype.addChild.call(this,e,n)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){it().isEventKey(e,"Space")||it().isEventKey(e,"Enter")?e.stopPropagation():super.handleKeyDown(e)}}H.registerComponent("Button",qr);class YM extends qr{constructor(e,n){super(e,n),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",r=>this.handleMouseDown(r))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const n=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e)return os(n),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const r=this.player_.getChild("controlBar"),i=r&&r.getChild("playToggle");if(!i)return void this.player_.tech(!0).focus();const s=()=>i.focus();gd(n)?n.then(s,()=>{}):this.setTimeout(s,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}YM.prototype.controlText_="Play Video",H.registerComponent("BigPlayButton",YM),H.registerComponent("CloseButton",class $G extends qr{constructor(e,n){super(e,n),this.setIcon("cancel"),this.controlText(n&&n.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){it().isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}});class QM extends qr{constructor(e,n={}){super(e,n),n.replay=void 0===n.replay||n.replay,this.setIcon("play"),this.on(e,"play",r=>this.handlePlay(r)),this.on(e,"pause",r=>this.handlePause(r)),n.replay&&this.on(e,"ended",r=>this.handleEnded(r))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?os(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",n=>this.handleSeeked(n))}}QM.prototype.controlText_="Play",H.registerComponent("PlayToggle",QM);class Ju extends H{constructor(e,n){super(e,n),this.on(e,["timeupdate","ended"],r=>this.updateContent(r)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),n=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),r=ht("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}\xa0`},{role:"presentation"});return n.appendChild(r),this.contentEl_=ht("span",{className:`${e}-display`},{role:"presentation"}),n.appendChild(this.contentEl_),n}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(e=0){e=na(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let n=this.textNode_;n&&this.contentEl_.firstChild!==n&&(n=null,yt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=ue().createTextNode(this.formattedTime_),this.textNode_&&(n?this.contentEl_.replaceChild(this.textNode_,n):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}Ju.prototype.labelText_="Time",Ju.prototype.controlText_="Time",H.registerComponent("TimeDisplay",Ju);class J_ extends Ju{buildCSSClass(){return"vjs-current-time"}updateContent(e){let n;n=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(n)}}J_.prototype.labelText_="Current Time",J_.prototype.controlText_="Current Time",H.registerComponent("CurrentTimeDisplay",J_);class eb extends Ju{constructor(e,n){super(e,n);const r=i=>this.updateContent(i);this.on(e,"durationchange",r),this.on(e,"loadstart",r),this.on(e,"loadedmetadata",r)}buildCSSClass(){return"vjs-duration"}updateContent(e){const n=this.player_.duration();this.updateTextNode_(n)}}eb.prototype.labelText_="Duration",eb.prototype.controlText_="Duration",H.registerComponent("DurationDisplay",eb),H.registerComponent("TimeDivider",class HG extends H{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=super.createEl("div"),r=super.createEl("span",{textContent:"/"});return n.appendChild(r),e.appendChild(n),e}});class tb extends Ju{constructor(e,n){super(e,n),this.on(e,"durationchange",r=>this.updateContent(r))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return!1!==this.options_.displayNegative&&e.insertBefore(ht("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if("number"!=typeof this.player_.duration())return;let n;n=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(n)}}tb.prototype.labelText_="Remaining Time",tb.prototype.controlText_="Remaining Time",H.registerComponent("RemainingTimeDisplay",tb),H.registerComponent("LiveDisplay",class qG extends H{constructor(e,n){super(e,n),this.updateShowing(),this.on(this.player(),"durationchange",r=>this.updateShowing(r))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=ht("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(ht("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}\xa0`})),this.contentEl_.appendChild(ue().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}});class ZM extends qr{constructor(e,n){super(e,n),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=r=>this.updateLiveEdgeStatus(r),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=ht("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function vd(t,e,n){return t=Number(t),Math.min(n,Math.max(e,isNaN(t)?e:t))}ZM.prototype.controlText_="Seek to live, currently playing live",H.registerComponent("SeekToLive",ZM);var zG=Object.freeze({__proto__:null,clamp:vd});class nb extends H{constructor(e,n){super(e,n),this.handleMouseDown_=r=>this.handleMouseDown(r),this.handleMouseUp_=r=>this.handleMouseUp(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.handleClick_=r=>this.handleClick(r),this.handleMouseMove_=r=>this.handleMouseMove(r),this.update_=r=>this.update(r),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,n={},r={}){return n.className=n.className+" vjs-slider",n=Object.assign({tabIndex:0},n),r=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},r),super.createEl(e,n,r)}handleMouseDown(e){const n=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"===e.type&&!ns&&e.preventDefault(),pM(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(n,"mousemove",this.handleMouseMove_),this.on(n,"mouseup",this.handleMouseUp_),this.on(n,"touchmove",this.handleMouseMove_),this.on(n,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const n=this.bar.el_.ownerDocument;gM(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(n,"mousemove",this.handleMouseMove_),this.off(n,"mouseup",this.handleMouseUp_),this.off(n,"touchmove",this.handleMouseMove_),this.off(n,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const n=this.vertical()?"height":"width";this.bar.el().style[n]=(100*e).toFixed(2)+"%"})),e}getProgress(){return Number(vd(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const n=Bp(this.el_,e);return this.vertical()?n.y:n.x}handleKeyDown(e){it().isEventKey(e,"Left")||it().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):it().isEventKey(e,"Right")||it().isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")}}H.registerComponent("Slider",nb);const rb=(t,e)=>vd(t/e*100,0,100).toFixed(2)+"%";H.registerComponent("LoadProgressBar",class GG extends H{constructor(e,n){super(e,n),this.partEls_=[],this.on(e,"progress",r=>this.update(r))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),n=ht("span",{className:"vjs-control-text"}),r=ht("span",{textContent:this.localize("Loaded")}),i=ue().createTextNode(": ");return this.percentageEl_=ht("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(n),n.appendChild(r),n.appendChild(i),n.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const n=this.player_.liveTracker,r=this.player_.buffered(),i=n&&n.isLive()?n.seekableEnd():this.player_.duration(),s=this.player_.bufferedEnd(),o=this.partEls_,a=rb(s,i);this.percent_!==a&&(this.el_.style.width=a,po(this.percentageEl_,a),this.percent_=a);for(let u=0;u<r.length;u++){const l=r.start(u),d=r.end(u);let g=o[u];g||(g=this.el_.appendChild(ht()),o[u]=g),(g.dataset.start!==l||g.dataset.end!==d)&&(g.dataset.start=l,g.dataset.end=d,g.style.left=rb(l,s),g.style.width=rb(d-l,s))}for(let u=o.length;u>r.length;u--)this.el_.removeChild(o[u-1]);o.length=r.length})}}),H.registerComponent("TimeTooltip",class WG extends H{constructor(e,n){super(e,n),this.update=is(Xt(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,n,r){const i=dd(this.el_),s=Wu(this.player_.el()),o=e.width*n;if(!s||!i)return;const a=e.left-s.left+o,u=e.width-o+(s.right-e.right);let l=i.width/2;a<l?l+=l-a:u<l&&(l=u),l<0?l=0:l>i.width&&(l=i.width),l=Math.round(l),this.el_.style.right=`-${l}px`,this.write(r)}write(e){po(this.el_,e)}updateTime(e,n,r,i){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let s;const o=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const a=this.player_.liveTracker.liveWindow(),u=a-n*a;s=(u<1?"":"-")+na(u,a)}else s=na(r,o);this.update(e,n,s),i&&i()})}});class ib extends H{constructor(e,n){super(e,n),this.setIcon("circle"),this.update=is(Xt(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,n){const r=this.getChild("timeTooltip");if(!r)return;const i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(e,n,i)}}ib.prototype.options_={children:[]},!mr&&!ts&&ib.prototype.options_.children.push("timeTooltip"),H.registerComponent("PlayProgressBar",ib);class JM extends H{constructor(e,n){super(e,n),this.update=is(Xt(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,n){const r=n*this.player_.duration();this.getChild("timeTooltip").updateTime(e,n,r,()=>{this.el_.style.left=e.width*n+"px"})}}JM.prototype.options_={children:["timeTooltip"]},H.registerComponent("MouseTimeDisplay",JM);class sb extends nb{constructor(e,n){super(e,n),this.setEventHandlers_()}setEventHandlers_(){this.update_=Xt(this,this.update),this.update=is(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in ue()&&"visibilityState"in ue()&&this.on(ue(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){"hidden"===ue().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if("hidden"===ue().visibilityState)return;const n=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const r=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),i=this.player_.liveTracker;let s=this.player_.duration();i&&i.isLive()&&(s=this.player_.liveTracker.liveCurrentTime()),this.percent_!==n&&(this.el_.setAttribute("aria-valuenow",(100*n).toFixed(2)),this.percent_=n),(this.currentTime_!==r||this.duration_!==s)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[na(r,s),na(s,s)],"{1} of {2}")),this.currentTime_=r,this.duration_=s),this.bar&&this.bar.update(Wu(this.el()),this.getProgress())}),n}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let n;const r=this.player_.liveTracker;return r&&r.isLive()?(n=(e-r.seekableStart())/r.liveWindow(),r.atLiveEdge()&&(n=1)):n=e/this.player_.duration(),n}handleMouseDown(e){hd(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,n=!1){if(!hd(e)||isNaN(this.player_.duration()))return;let r;!n&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);const i=this.calculateDistance(e),s=this.player_.liveTracker;if(s&&s.isLive()){if(i>=.99)return void s.seekToLiveEdge();const o=s.seekableStart(),a=s.liveCurrentTime();if(r=o+i*s.liveWindow(),r>=a&&(r=a),r<=o&&(r=o+.1),r===1/0)return}else r=i*this.player_.duration(),r===this.player_.duration()&&(r-=.1);this.userSeek_(r)}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?os(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const n=this.player_.liveTracker;if(it().isEventKey(e,"Space")||it().isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(it().isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(it().isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(it()(e))){e.preventDefault(),e.stopPropagation();const r=10*(it().codes[it()(e)]-it().codes[0])/100;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*r):this.userSeek_(this.player_.duration()*r)}else it().isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):it().isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in ue()&&"visibilityState"in ue()&&this.off(ue(),"visibilitychange",this.toggleVisibility_),super.dispose()}}sb.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!mr&&!ts&&sb.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),H.registerComponent("SeekBar",sb);class tO extends H{constructor(e,n){super(e,n),this.handleMouseMove=is(Xt(this,this.handleMouseMove),30),this.throttledHandleMouseSeek=is(Xt(this,this.handleMouseSeek),30),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.handleMouseDownHandler_=r=>this.handleMouseDown(r),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const n=this.getChild("seekBar");if(!n)return;const r=n.getChild("playProgressBar"),i=n.getChild("mouseTimeDisplay");if(!r&&!i)return;const s=n.el(),o=dd(s);let a=Bp(s,e).x;a=vd(a,0,1),i&&i.update(o,a),r&&r.update(o,n.getProgress())}handleMouseSeek(e){const n=this.getChild("seekBar");n&&n.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&os(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const n=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseDown(e),this.on(n,"mousemove",this.throttledHandleMouseSeek),this.on(n,"touchmove",this.throttledHandleMouseSeek),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}tO.prototype.options_={children:["seekBar"]},H.registerComponent("ProgressControl",tO);class nO extends qr{constructor(e,n){super(e,n),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],r=>this.handlePictureInPictureChange(r)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],r=>this.handlePictureInPictureEnabledChange(r)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){"audio"===this.player_.currentType().substring(0,5)||this.player_.audioPosterMode()||this.player_.audioOnlyMode()?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){ue().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in O()?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){"function"==typeof ue().exitPictureInPicture&&super.show()}}nO.prototype.controlText_="Picture-in-Picture",H.registerComponent("PictureInPictureToggle",nO);class rO extends qr{constructor(e,n){super(e,n),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",r=>this.handleFullscreenChange(r)),!1===ue()[e.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}rO.prototype.controlText_="Fullscreen",H.registerComponent("FullscreenToggle",rO),H.registerComponent("VolumeLevel",class KG extends H{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}),H.registerComponent("VolumeLevelTooltip",class YG extends H{constructor(e,n){super(e,n),this.update=is(Xt(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,n,r,i){if(!r){const s=Wu(this.el_),o=Wu(this.player_.el()),a=e.width*n;if(!o||!s)return;const u=e.left-o.left+a,l=e.width-a+(o.right-e.right);let d=s.width/2;u<d?d+=d-u:l<d&&(d=l),d<0?d=0:d>s.width&&(d=s.width),this.el_.style.right=`-${d}px`}this.write(`${i}%`)}write(e){po(this.el_,e)}updateVolume(e,n,r,i,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,n,r,i.toFixed(0)),s&&s()})}});class iO extends H{constructor(e,n){super(e,n),this.update=is(Xt(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,n,r){const i=100*n;this.getChild("volumeLevelTooltip").updateVolume(e,n,r,i,()=>{r?this.el_.style.bottom=e.height*n+"px":this.el_.style.left=e.width*n+"px"})}}iO.prototype.options_={children:["volumeLevelTooltip"]},H.registerComponent("MouseVolumeLevelDisplay",iO);class Qp extends nb{constructor(e,n){super(e,n),this.on("slideractive",r=>this.updateLastVolume_(r)),this.on(e,"volumechange",r=>this.updateARIAAttributes(r)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){hd(e)&&super.handleMouseDown(e)}handleMouseMove(e){const n=this.getChild("mouseVolumeLevelDisplay");if(n){const r=this.el(),i=Wu(r),s=this.vertical();let o=Bp(r,e);o=s?o.y:o.x,o=vd(o,0,1),n.update(i,o,s)}hd(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const n=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",n),this.el_.setAttribute("aria-valuetext",n+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{0===this.player_.volume()&&this.player_.lastVolume_(e)})}}Qp.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!mr&&!ts&&Qp.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Qp.prototype.playerEvent="volumechange",H.registerComponent("VolumeBar",Qp);class sO extends H{constructor(e,n={}){n.vertical=n.vertical||!1,(typeof n.volumeBar>"u"||Vu(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),super(e,n),function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})}(this,e),this.throttledHandleMouseMove=is(Xt(this,this.handleMouseMove),30),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.on("mousedown",r=>this.handleMouseDown(r)),this.on("touchstart",r=>this.handleMouseDown(r)),this.on("mousemove",r=>this.handleMouseMove(r)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const n=this.el_.ownerDocument;this.on(n,"mousemove",this.throttledHandleMouseMove),this.on(n,"touchmove",this.throttledHandleMouseMove),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseMove),this.off(n,"touchmove",this.throttledHandleMouseMove),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}sO.prototype.options_={children:["volumeBar"]},H.registerComponent("VolumeControl",sO);class oO extends qr{constructor(e,n){super(e,n),function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})}(this,e),this.on(e,["loadstart","volumechange"],r=>this.update(r))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const n=this.player_.volume(),r=this.player_.lastVolume_();0===n?(this.player_.volume(r<.1?.1:r),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let n=3;this.setIcon("volume-high"),mr&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?(this.setIcon("volume-mute"),n=0):e<.33?(this.setIcon("volume-low"),n=1):e<.67&&(this.setIcon("volume-medium"),n=2),Lp(this.el_,[0,1,2,3].reduce((r,i)=>r+`${i?" ":""}vjs-vol-${i}`,"")),ea(this.el_,`vjs-vol-${n}`)}updateControlText_(){const n=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n)}}oO.prototype.controlText_="Mute",H.registerComponent("MuteToggle",oO);class aO extends H{constructor(e,n={}){n.inline=!(typeof n.inline<"u")||n.inline,(typeof n.volumeControl>"u"||Vu(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),super(e,n),this.handleKeyPressHandler_=r=>this.handleKeyPress(r),this.on(e,["loadstart"],r=>this.volumePanelState_(r)),this.on(this.muteToggle,"keyup",r=>this.handleKeyPress(r)),this.on(this.volumeControl,"keyup",r=>this.handleVolumeControlKeyUp(r)),this.on("keydown",r=>this.handleKeyPress(r)),this.on("mouseover",r=>this.handleMouseOver(r)),this.on("mouseout",r=>this.handleMouseOut(r)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){it().isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Hr(ue(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),er(ue(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){it().isEventKey(e,"Esc")&&this.handleMouseOut()}}aO.prototype.options_={children:["muteToggle","volumeControl"]},H.registerComponent("VolumePanel",aO),H.registerComponent("SkipForward",class ZG extends qr{constructor(e,n){super(e,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const n=this.player_.currentTime(),r=this.player_.liveTracker,i=r&&r.isLive()?r.seekableEnd():this.player_.duration();let s;s=n+this.skipTime<=i?n+this.skipTime:i,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}});class uO extends qr{constructor(e,n){super(e,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const n=this.player_.currentTime(),r=this.player_.liveTracker,i=r&&r.isLive()&&r.seekableStart();let s;s=i&&n-this.skipTime<=i?i:n>=this.skipTime?n-this.skipTime:0,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}uO.prototype.controlText_="Skip Backward",H.registerComponent("SkipBackward",uO);class lO extends H{constructor(e,n){super(e,n),n&&(this.menuButton_=n.menuButton),this.focusedChild_=-1,this.on("keydown",r=>this.handleKeyDown(r)),this.boundHandleBlur_=r=>this.handleBlur(r),this.boundHandleTapClick_=r=>this.handleTapClick(r)}addEventListenerForItem(e){e instanceof H&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof H&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const n=this.addChild(e);n&&this.addEventListenerForItem(n)}createEl(){this.contentEl_=ht(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const n=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),Hr(n,"click",function(r){r.preventDefault(),r.stopImmediatePropagation()}),n}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const n=e.relatedTarget||ue().activeElement;if(!this.children().some(r=>r.el()===n)){const r=this.menuButton_;r&&r.buttonPressed_&&n!==r.el().firstChild&&r.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const n=this.children();if(!Array.isArray(n))return;const r=n.filter(i=>i.el()===e.target)[0];if(!r)return;"CaptionSettingsMenuItem"!==r.name()&&this.menuButton_.focus()}}handleKeyDown(e){it().isEventKey(e,"Left")||it().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(it().isEventKey(e,"Right")||it().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const n=this.children().slice();n.length&&n[0].hasClass("vjs-menu-title")&&n.shift(),n.length>0&&(e<0?e=0:e>=n.length&&(e=n.length-1),this.focusedChild_=e,n[e].el_.focus())}}H.registerComponent("Menu",lO);class ob extends H{constructor(e,n={}){super(e,n),this.menuButton_=new qr(e,n),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const r=qr.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+r,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const i=s=>this.handleClick(s);this.handleMenuKeyUp_=s=>this.handleMenuKeyUp(s),this.on(this.menuButton_,"tap",i),this.on(this.menuButton_,"click",i),this.on(this.menuButton_,"keydown",s=>this.handleKeyDown(s)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Hr(ue(),"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",s=>this.handleMouseLeave(s)),this.on("keydown",s=>this.handleSubmenuKeyDown(s))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new lO(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const n=ht("li",{className:"vjs-menu-title",textContent:mn(this.options_.title),tabIndex:-1}),r=new H(this.player_,{el:n});e.addItem(r)}if(this.items=this.createItems(),this.items)for(let n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";return e+=!0===this.options_.inline?"-inline":"-popup",`vjs-menu-button ${e} ${qr.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return e+=!0===this.options_.inline?"-inline":"-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,n=this.menuButton_.el()){return this.menuButton_.controlText(e,n)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),er(ue(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){it().isEventKey(e,"Esc")||it().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),it().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(it().isEventKey(e,"Up")||it().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(it().isEventKey(e,"Esc")||it().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(it().isEventKey(e,"Esc")||it().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),it().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),mr&&lM())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}H.registerComponent("MenuButton",ob);class ab extends ob{constructor(e,n){const r=n.tracks;if(super(e,n),this.items.length<=1&&this.hide(),!r)return;const i=Xt(this,this.update);r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),r.addEventListener("labelchange",i),this.player_.on("ready",i),this.player_.on("dispose",function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i),r.removeEventListener("labelchange",i)})}}H.registerComponent("TrackButton",ab);const JG=["Tab","Esc","Up","Down","Right","Left"];class _d extends Kp{constructor(e,n){super(e,n),this.selectable=n.selectable,this.isSelected_=n.selected||!1,this.multiSelectable=n.multiSelectable,this.selected(this.isSelected_),this.el_.setAttribute("role",this.selectable?this.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem")}createEl(e,n,r){this.nonIconControl=!0;const i=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},n),r),s=ht("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?i.appendChild(s):i.replaceChild(s,i.querySelector(".vjs-icon-placeholder")),i}handleKeyDown(e){JG.some(n=>it().isEventKey(e,n))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}H.registerComponent("MenuItem",_d);class bd extends _d{constructor(e,n){const r=n.track,i=e.textTracks();n.label=r.label||r.language||"Unknown",n.selected="showing"===r.mode,super(e,n),this.track=r,this.kinds=(n.kinds||[n.kind||this.track.kind]).filter(Boolean);const s=(...a)=>{this.handleTracksChange.apply(this,a)},o=(...a)=>{this.handleSelectedLanguageChange.apply(this,a)};if(e.on(["loadstart","texttrackchange"],s),i.addEventListener("change",s),i.addEventListener("selectedlanguagechange",o),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),i.removeEventListener("change",s),i.removeEventListener("selectedlanguagechange",o)}),void 0===i.onchange){let a;this.on(["tap","click"],function(){if("object"!=typeof O().Event)try{a=new(O().Event)("change")}catch{}a||(a=ue().createEvent("Event"),a.initEvent("change",!0,!0)),i.dispatchEvent(a)})}this.handleTracksChange()}handleClick(e){const n=this.track,r=this.player_.textTracks();if(super.handleClick(e),r)for(let i=0;i<r.length;i++){const s=r[i];-1!==this.kinds.indexOf(s.kind)&&(s===n?"showing"!==s.mode&&(s.mode="showing"):"disabled"!==s.mode&&(s.mode="disabled"))}}handleTracksChange(e){const n="showing"===this.track.mode;n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){if("showing"===this.track.mode){const n=this.player_.cache_.selectedLanguage;if(n&&n.enabled&&n.language===this.track.language&&n.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}H.registerComponent("TextTrackMenuItem",bd);class cO extends bd{constructor(e,n){n.track={player:e,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.track.label=n.label?n.label:n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,super(e,n)}handleTracksChange(e){const n=this.player().textTracks();let r=!0;for(let i=0,s=n.length;i<s;i++){const o=n[i];if(this.options_.kinds.indexOf(o.kind)>-1&&"showing"===o.mode){r=!1;break}}r!==this.isSelected_&&this.selected(r)}handleSelectedLanguageChange(e){const n=this.player().textTracks();let r=!0;for(let i=0,s=n.length;i<s;i++){const o=n[i];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&"showing"===o.mode){r=!1;break}}r&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}H.registerComponent("OffTextTrackMenuItem",cO);class el extends ab{constructor(e,n={}){n.tracks=e.textTracks(),super(e,n)}createItems(e=[],n=bd){let r;this.label_&&(r=`${this.label_} off`),e.push(new cO(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r})),this.hideThreshold_+=1;const i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let s=0;s<i.length;s++){const o=i[s];if(this.kinds_.indexOf(o.kind)>-1){const a=new n(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});a.addClass(`vjs-${o.kind}-menu-item`),e.push(a)}}return e}}H.registerComponent("TextTrackButton",el);class dO extends _d{constructor(e,n){const r=n.track,i=n.cue,s=e.currentTime();n.selectable=!0,n.multiSelectable=!1,n.label=i.text,n.selected=i.startTime<=s&&s<i.endTime,super(e,n),this.track=r,this.cue=i}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}H.registerComponent("ChaptersTrackMenuItem",dO);class ub extends el{constructor(e,n,r){super(e,n,r),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(i=>{i.selected(this.track_.activeCues[0]===i.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&"chapters"!==e.track.kind)return;const n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),super.update()):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.kind===this.kind_)return r}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(mn(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const n=this.track_.cues;if(!n)return e;for(let r=0,i=n.length;r<i;r++){const o=new dO(this.player_,{track:this.track_,cue:n[r]});e.push(o)}return e}}ub.prototype.kind_="chapters",ub.prototype.controlText_="Chapters",H.registerComponent("ChaptersButton",ub);class lb extends el{constructor(e,n,r){super(e,n,r),this.setIcon("audio-description");const i=e.textTracks(),s=Xt(this,this.handleTracksChange);i.addEventListener("change",s),this.on("dispose",function(){i.removeEventListener("change",s)})}handleTracksChange(e){const n=this.player().textTracks();let r=!1;for(let i=0,s=n.length;i<s;i++){const o=n[i];if(o.kind!==this.kind_&&"showing"===o.mode){r=!0;break}}r?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}lb.prototype.kind_="descriptions",lb.prototype.controlText_="Descriptions",H.registerComponent("DescriptionsButton",lb);class cb extends el{constructor(e,n,r){super(e,n,r),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}cb.prototype.kind_="subtitles",cb.prototype.controlText_="Subtitles",H.registerComponent("SubtitlesButton",cb);class db extends bd{constructor(e,n){n.track={player:e,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",super(e,n),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+n.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}H.registerComponent("CaptionSettingsMenuItem",db);class hb extends el{constructor(e,n,r){super(e,n,r),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new db(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}hb.prototype.kind_="captions",hb.prototype.controlText_="Captions",H.registerComponent("CaptionsButton",hb);class hO extends bd{createEl(e,n,r){const i=super.createEl(e,n,r),s=i.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",i):s.appendChild(ht("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(ht("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),i}}H.registerComponent("SubsCapsMenuItem",hO);class fb extends el{constructor(e,n={}){super(e,n),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(mn(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new db(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,hO),e}}fb.prototype.kinds_=["captions","subtitles"],fb.prototype.controlText_="Subtitles",H.registerComponent("SubsCapsButton",fb);class fO extends _d{constructor(e,n){const r=n.track,i=e.audioTracks();n.label=r.label||r.language||"Unknown",n.selected=r.enabled,super(e,n),this.track=r,this.addClass(`vjs-${r.kind}-menu-item`);const s=(...o)=>{this.handleTracksChange.apply(this,o)};i.addEventListener("change",s),this.on("dispose",()=>{i.removeEventListener("change",s)})}createEl(e,n,r){const i=super.createEl(e,n,r),s=i.querySelector(".vjs-menu-item-text");return["main-desc","description"].indexOf(this.options_.track.kind)>=0&&(s.appendChild(ht("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(ht("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const n=this.player_.audioTracks();for(let r=0;r<n.length;r++){const i=n[r];i!==this.track&&(i.enabled=i===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}H.registerComponent("AudioTrackMenuItem",fO);class pO extends ab{constructor(e,n={}){n.tracks=e.audioTracks(),super(e,n),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const n=this.player_.audioTracks();for(let r=0;r<n.length;r++)e.push(new fO(this.player_,{track:n[r],selectable:!0,multiSelectable:!1}));return e}}pO.prototype.controlText_="Audio Track",H.registerComponent("AudioTrackButton",pO);class pb extends _d{constructor(e,n){const r=n.rate,i=parseFloat(r,10);n.label=r,n.selected=i===e.playbackRate(),n.selectable=!0,n.multiSelectable=!1,super(e,n),this.label=r,this.rate=i,this.on(e,"ratechange",s=>this.update(s))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}pb.prototype.contentElType="button",H.registerComponent("PlaybackRateMenuItem",pb);class gO extends ob{constructor(e,n){super(e,n),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",r=>this.updateVisibility(r)),this.on(e,"ratechange",r=>this.updateLabel(r)),this.on(e,"playbackrateschange",r=>this.handlePlaybackRateschange(r))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=ht("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),n=[];for(let r=e.length-1;r>=0;r--)n.push(new pb(this.player(),{rate:e[r]+"x"}));return n}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}gO.prototype.controlText_="Playback Rate",H.registerComponent("PlaybackRateMenuButton",gO);class mO extends H{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",n={},r={}){return n.className||(n.className=this.buildCSSClass()),super.createEl(e,n,r)}}H.registerComponent("Spacer",mO),H.registerComponent("CustomControlSpacer",class eW extends mO{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:"\xa0"})}});class yO extends H{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}yO.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},H.registerComponent("ControlBar",yO);class vO extends Yu{constructor(e,n){super(e,n),this.on(e,"error",r=>this.open(r))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}vO.prototype.options_=Object.assign({},Yu.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),H.registerComponent("ErrorDisplay",vO);const gb="vjs-text-track-settings",_O=["#000","Black"],bO=["#00F","Blue"],TO=["#0FF","Cyan"],CO=["#0F0","Green"],EO=["#F0F","Magenta"],DO=["#F00","Red"],SO=["#FFF","White"],wO=["#FF0","Yellow"],mb=["1","Opaque"],yb=["0.5","Semi-Transparent"],xO=["0","Transparent"],sa={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[_O,SO,DO,CO,bO,wO,EO,TO]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[mb,yb,xO]},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[SO,_O,DO,CO,bO,wO,EO,TO]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:t=>"1.00"===t?null:Number(t)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[mb,yb]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[xO,yb,mb]}};function AO(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}sa.windowColor.options=sa.backgroundColor.options,H.registerComponent("TextTrackSettings",class rW extends Yu{constructor(e,n){n.temporary=!1,super(e,n),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=ht("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===n.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults(),this.updateDisplay()}),Uu(sa,r=>{this.on(this.$(r.selector),"change",this.updateDisplay)}),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,n="",r="label"){const i=sa[e],s=i.id.replace("%s",this.id_),o=[n,s].join(" ").trim();return[`<${r} id="${s}" class="${"label"===r?"vjs-label":""}">`,this.localize(i.label),`</${r}>`,`<select aria-labelledby="${o}">`].concat(i.options.map(a=>{const u=s+"-"+a[1].replace(/\W+/g,"");return[`<option id="${u}" value="${a[0]}" `,`aria-labelledby="${o} ${u}">`,this.localize(a[1]),"</option>"].join("")})).concat("</select>").join("")}createElFgColor_(){const e=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text"),"</legend>",'<span class="vjs-text-color">',this.createElSelect_("color",e),"</span>",'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){const e=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text Background"),"</legend>",'<span class="vjs-bg-color">',this.createElSelect_("backgroundColor",e),"</span>",'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){const e=`captions-window-${this.id_}`;return['<fieldset class="vjs-window vjs-track-setting">',`<legend id="${e}">`,this.localize("Caption Area Background"),"</legend>",'<span class="vjs-window-color">',this.createElSelect_("windowColor",e),"</span>",'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return ht("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return ht("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const e=this.localize("restore all settings to the default values");return ht("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${e}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${e}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return nM(sa,(e,n,r)=>{const i=function tW(t,e){return AO(t.options[t.options.selectedIndex].value,e)}(this.$(n.selector),n.parser);return void 0!==i&&(e[r]=i),e},{})}setValues(e){Uu(sa,(n,r)=>{!function nW(t,e,n){if(e)for(let r=0;r<t.options.length;r++)if(AO(t.options[r].value,n)===e){t.selectedIndex=r;break}}(this.$(n.selector),e[r],n.parser)})}setDefaults(){Uu(sa,e=>{const n=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=n})}restoreSettings(){let e;try{e=JSON.parse(O().localStorage.getItem(gb))}catch(n){yt.warn(n)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?O().localStorage.setItem(gb,JSON.stringify(e)):O().localStorage.removeItem(gb)}catch(n){yt.warn(n)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const e=this.player_.controlBar,n=e&&e.subsCapsButton,r=e&&e.captionsButton;n?n.focus():r&&r.focus()}handleLanguagechange(){this.fill()}}),H.registerComponent("ResizeManager",class iW extends H{constructor(e,n){let r=n.ResizeObserver||O().ResizeObserver;null===n.ResizeObserver&&(r=!1),super(e,Wt({createEl:!r,reportTouchActivity:!1},n)),this.ResizeObserver=n.ResizeObserver||O().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=wM(()=>{this.resizeHandler()},100,!1,this),r?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const s=this.debouncedHandler_;let o=this.unloadListener_=function(){er(this,"resize",s),er(this,"unload",o),o=null};Hr(this.el_.contentWindow,"unload",o),Hr(this.el_.contentWindow,"resize",s)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});const sW={trackingThreshold:20,liveTolerance:15};H.registerComponent("LiveTracker",class oW extends H{constructor(e,n){super(e,Wt(sW,n,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=i=>this.handlePlay(i),this.handleFirstTimeupdate_=i=>this.handleFirstTimeupdate(i),this.handleSeeked_=i=>this.handleSeeked(i),this.seekToLiveEdge_=i=>this.seekToLiveEdge(i),this.reset_(),this.on(this.player_,"durationchange",i=>this.handleDurationchange(i)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const n=Number(O().performance.now().toFixed(4)),r=-1===this.lastTime_?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+r;const i=this.liveCurrentTime(),s=this.player_.currentTime();let o=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-s)>this.options_.liveTolerance;(!this.timeupdateSeen_||i===1/0)&&(o=!1),o!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),n=[];let r=e?e.length:0;for(;r--;)n.push(e.end(r));return n.length?n.sort()[n.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),n=[];let r=e?e.length:0;for(;r--;)n.push(e.start(r));return n.length?n.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"==typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}),H.registerComponent("TitleBar",class aW extends H{constructor(e,n){super(e,n),this.on("statechanged",r=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:ht("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${rs()}`}),description:ht("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${rs()}`})},ht("div",{className:"vjs-title-bar"},{},rM(this.els))}updateDom_(){const e=this.player_.tech_,n=e&&e.el_,r={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(i=>{const s=this.state[i],o=this.els[i],a=r[i];Up(o),s&&po(o,s),n&&(n.removeAttribute(a),s&&n.setAttribute(a,o.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,n=e&&e.el_;n&&(n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});const vb=t=>{const e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;const n=t.$$("source"),r=[];let i="";if(!n.length)return!1;for(let s=0;s<n.length;s++){const o=n[s].src;o&&-1===r.indexOf(o)&&r.push(o)}return!!r.length&&(1===r.length&&(i=r[0]),t.triggerSourceset(i),!0)},uW=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(t){const e=ue().createElement(this.nodeName.toLowerCase());e.innerHTML=t;const n=ue().createDocumentFragment();for(;e.childNodes.length;)n.appendChild(e.childNodes[0]);return this.innerText="",O().Element.prototype.appendChild.call(this,n),this.innerHTML}}),IO=(t,e)=>{let n={};for(let r=0;r<t.length&&(n=Object.getOwnPropertyDescriptor(t[r],e),!(n&&n.set&&n.get));r++);return n.enumerable=!0,n.configurable=!0,n},MO=function(t){const e=t.el();if(e.resetSourceWatch_)return;const n={},r=(t=>IO([t.el(),O().HTMLMediaElement.prototype,O().Element.prototype,uW],"innerHTML"))(t),i=s=>(...o)=>{const a=s.apply(e,o);return vb(t),a};["append","appendChild","insertAdjacentHTML"].forEach(s=>{e[s]&&(n[s]=e[s],e[s]=i(n[s]))}),Object.defineProperty(e,"innerHTML",Wt(r,{set:i(r.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(n).forEach(s=>{e[s]=n[s]}),Object.defineProperty(e,"innerHTML",r)},t.one("sourceset",e.resetSourceWatch_)},cW=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?UM(O().Element.prototype.getAttribute.call(this,"src")):""},set(t){return O().Element.prototype.setAttribute.call(this,"src",t),t}});class Ie extends at{constructor(e,n){super(e,n);const r=e.source;let i=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,r&&(this.el_.currentSrc!==r.src||e.tag&&3===e.tag.initNetworkState_)?this.setSource(r):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const s=this.el_.childNodes;let o=s.length;const a=[];for(;o--;){const u=s[o];"track"===u.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(u),this.remoteTextTracks().addTrack(u.track),this.textTracks().addTrack(u.track),!i&&!this.el_.hasAttribute("crossorigin")&&Gp(u.src)&&(i=!0)):a.push(u))}for(let u=0;u<a.length;u++)this.el_.removeChild(a[u])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&i&&yt.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(ld||Np)&&!0===e.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Ie.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){!function(t){if(!t.featuresSourceset)return;const e=t.el();if(e.resetSourceset_)return;const n=(t=>IO([t.el(),O().HTMLMediaElement.prototype,cW],"src"))(t),r=e.setAttribute,i=e.load;Object.defineProperty(e,"src",Wt(n,{set:s=>{const o=n.set.call(e,s);return t.triggerSourceset(e.src),o}})),e.setAttribute=(s,o)=>{const a=r.call(e,s,o);return/src/i.test(s)&&t.triggerSourceset(e.src),a},e.load=()=>{const s=i.call(e);return vb(t)||(t.triggerSourceset(""),MO(t)),s},e.currentSrc?t.triggerSourceset(e.currentSrc):vb(t)||MO(t),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=i,e.setAttribute=r,Object.defineProperty(e,"src",n),e.resetSourceWatch_&&e.resetSourceWatch_()}}(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let n;const r=()=>{n=[];for(let s=0;s<e.length;s++){const o=e[s];"metadata"===o.kind&&n.push({track:o,storedMode:o.mode})}};r(),e.addEventListener("change",r),this.on("dispose",()=>e.removeEventListener("change",r));const i=()=>{for(let s=0;s<n.length;s++){const o=n[s];"disabled"===o.track.mode&&o.track.mode!==o.storedMode&&(o.track.mode=o.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",r),e.removeEventListener("change",i),e.addEventListener("change",i)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",r),e.addEventListener("change",r),e.removeEventListener("change",i)})}overrideNative_(e,n){if(n!==this[`featuresNative${e}Tracks`])return;const r=e.toLowerCase();this[`${r}TracksListeners_`]&&Object.keys(this[`${r}TracksListeners_`]).forEach(i=>{this.el()[`${r}Tracks`].removeEventListener(i,this[`${r}TracksListeners_`][i])}),this[`featuresNative${e}Tracks`]=!n,this[`${r}TracksListeners_`]=null,this.proxyNativeTracksForType_(r)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const n=ai[e],r=this.el()[n.getterName],i=this[n.getterName]();if(!this[`featuresNative${n.capitalName}Tracks`]||!r||!r.addEventListener)return;const s={change:a=>{const u={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(u),"text"===e&&this[Zu.remoteText.getterName]().trigger(u)},addtrack(a){i.addTrack(a.track)},removetrack(a){i.removeTrack(a.track)}},o=function(){const a=[];for(let u=0;u<i.length;u++){let l=!1;for(let d=0;d<r.length;d++)if(r[d]===i[u]){l=!0;break}l||a.push(i[u])}for(;a.length;)i.removeTrack(a.shift())};this[n.getterName+"Listeners_"]=s,Object.keys(s).forEach(a=>{const u=s[a];r.addEventListener(a,u),this.on("dispose",l=>r.removeEventListener(a,u))}),this.on("loadstart",o),this.on("dispose",a=>this.off("loadstart",o))}proxyNativeTracks_(){ai.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){const r=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(r,e),Ie.disposeMediaElement(e),e=r}else{e=ue().createElement("video");const i=Wt({},this.options_.tag&&go(this.options_.tag));(!ld||!0!==this.options_.nativeControlsForTouch)&&delete i.controls,hM(e,Object.assign(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Gu(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const n=["loop","muted","playsinline","autoplay"];for(let r=0;r<n.length;r++){const i=n[r],s=this.options_[i];typeof s<"u"&&(s?Gu(e,i,i):Fp(e,i),e[i]=s)}return e}handleLateInit_(e){if(0===e.networkState||3===e.networkState)return;if(0===e.readyState){let r=!1;const i=function(){r=!0};this.on("loadstart",i);const s=function(){r||this.trigger("loadstart")};return this.on("loadedmetadata",s),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",s),r||this.trigger("loadstart")})}const n=["loadstart"];n.push("loadedmetadata"),e.readyState>=2&&n.push("loadeddata"),e.readyState>=3&&n.push("canplay"),e.readyState>=4&&n.push("canplaythrough"),this.ready(function(){n.forEach(function(r){this.trigger(r)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&Rp?this.el_.fastSeek(e):this.el_.currentTime=e}catch(n){yt(n,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&ts&&ns&&0===this.el_.currentTime){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",()=>{this.off("webkitbeginfullscreen",n),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return"function"==typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)os(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},0);else try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(void 0===e)return this.el_.src;this.setSrc(e)}reset(){Ie.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,r):super.addTextTrack(e,n,r)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const n=ue().createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n}addRemoteTextTrack(e,n){const r=super.addRemoteTextTrack(e,n);return this.featuresNativeTextTracks&&this.el().appendChild(r),r}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const n=this.$$("track");let r=n.length;for(;r--;)(e===n[r]||e===n[r].track)&&this.el().removeChild(n[r])}}getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),O().performance&&(e.creationTime=O().performance.now()),e}}Ip(Ie,"TEST_VID",function(){if(!qu())return;const t=ue().createElement("video"),e=ue().createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t}),Ie.isSupported=function(){try{Ie.TEST_VID.volume=.5}catch{return!1}return!(!Ie.TEST_VID||!Ie.TEST_VID.canPlayType)},Ie.canPlayType=function(t){return Ie.TEST_VID.canPlayType(t)},Ie.canPlaySource=function(t,e){return Ie.canPlayType(t.type)},Ie.canControlVolume=function(){try{const t=Ie.TEST_VID.volume;Ie.TEST_VID.volume=t/2+.1;const e=t!==Ie.TEST_VID.volume;return e&&mr?(O().setTimeout(()=>{Ie&&Ie.prototype&&(Ie.prototype.featuresVolumeControl=t!==Ie.TEST_VID.volume)}),!1):e}catch{return!1}},Ie.canMuteVolume=function(){try{const t=Ie.TEST_VID.muted;return Ie.TEST_VID.muted=!t,Ie.TEST_VID.muted?Gu(Ie.TEST_VID,"muted","muted"):Fp(Ie.TEST_VID,"muted"),t!==Ie.TEST_VID.muted}catch{return!1}},Ie.canControlPlaybackRate=function(){if(ts&&ns&&Mp<58)return!1;try{const t=Ie.TEST_VID.playbackRate;return Ie.TEST_VID.playbackRate=t/2+.1,t!==Ie.TEST_VID.playbackRate}catch{return!1}},Ie.canOverrideAttributes=function(){try{const t=()=>{};Object.defineProperty(ue().createElement("video"),"src",{get:t,set:t}),Object.defineProperty(ue().createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(ue().createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(ue().createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0},Ie.supportsNativeTextTracks=function(){return Rp||mr&&ns},Ie.supportsNativeVideoTracks=function(){return!(!Ie.TEST_VID||!Ie.TEST_VID.videoTracks)},Ie.supportsNativeAudioTracks=function(){return!(!Ie.TEST_VID||!Ie.TEST_VID.audioTracks)},Ie.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([t,e]){Ip(Ie.prototype,t,()=>Ie[e](),!0)}),Ie.prototype.featuresVolumeControl=Ie.canControlVolume(),Ie.prototype.movingMediaElementInDOM=!mr,Ie.prototype.featuresFullscreenResize=!0,Ie.prototype.featuresProgressEvents=!0,Ie.prototype.featuresTimeupdateEvents=!0,Ie.prototype.featuresVideoFrameCallback=!(!Ie.TEST_VID||!Ie.TEST_VID.requestVideoFrameCallback),Ie.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch{}}()}},Ie.resetMediaElement=function(t){if(!t)return;const e=t.querySelectorAll("source");let n=e.length;for(;n--;)t.removeChild(e[n]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch{}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Ie.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Ie.prototype["set"+mn(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){Ie.prototype[t]=function(){return this.el_[t]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){Ie.prototype["set"+mn(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(t){Ie.prototype[t]=function(){return this.el_[t]()}}),at.withSourceHandlers(Ie),Ie.nativeSourceHandler={},Ie.nativeSourceHandler.canPlayType=function(t){try{return Ie.TEST_VID.canPlayType(t)}catch{return""}},Ie.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Ie.nativeSourceHandler.canPlayType(t.type);if(t.src){const n=X_(t.src);return Ie.nativeSourceHandler.canPlayType(`video/${n}`)}return""},Ie.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)},Ie.nativeSourceHandler.dispose=function(){},Ie.registerSourceHandler(Ie.nativeSourceHandler),at.registerTech("Html5",Ie);const OO=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],_b={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},bb=["tiny","xsmall","small","medium","large","xlarge","huge"],Zp={};bb.forEach(t=>{const e="x"===t.charAt(0)?`x-${t.substring(1)}`:t;Zp[t]=`vjs-layout-${e}`});const fW={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Kt extends H{constructor(e,n,r){if(e.id=e.id||n.id||`vjs_video_${rs()}`,(n=Object.assign(Kt.getTagSettings(e),n)).initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language){const o=e.closest("[lang]");o&&(n.language=o.getAttribute("lang"))}if(super(null,n,r),this.boundDocumentFullscreenChange_=o=>this.documentFullscreenChange_(o),this.boundFullWindowOnEscKey_=o=>this.fullWindowOnEscKey(o),this.boundUpdateStyleEl_=o=>this.updateStyleEl_(o),this.boundApplyInitTime_=o=>this.applyInitTime_(o),this.boundUpdateCurrentBreakpoint_=o=>this.updateCurrentBreakpoint_(o),this.boundHandleTechClick_=o=>this.handleTechClick_(o),this.boundHandleTechDoubleClick_=o=>this.handleTechDoubleClick_(o),this.boundHandleTechTouchStart_=o=>this.handleTechTouchStart_(o),this.boundHandleTechTouchMove_=o=>this.handleTechTouchMove_(o),this.boundHandleTechTouchEnd_=o=>this.handleTechTouchEnd_(o),this.boundHandleTechTap_=o=>this.handleTechTap_(o),this.isFullscreen_=!1,this.log=eM(this.id_),this.fsApi_=xp,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&go(e),this.language(this.options_.language),n.languages){const o={};Object.getOwnPropertyNames(n.languages).forEach(function(a){o[a.toLowerCase()]=n.languages[a]}),this.languages_=o}else this.languages_=Kt.prototype.options_.languages;this.resetCache_(),this.poster_=n.poster||"",this.controls_=!!n.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach(o=>{if("function"!=typeof this[o])throw new Error(`plugin "${o}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),U_(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Hr(ue(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const i=Wt(this.options_);if(n.plugins&&Object.keys(n.plugins).forEach(o=>{this[o](n.plugins[o])}),n.debug&&this.debug(!0),this.options_.playerOptions=i,this.middleware_=[],this.playbackRates(n.playbackRates),n.experimentalSvgIcons){const a=(new(O().DOMParser)).parseFromString('<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play">\n      <path d="M16 10v28l22-14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">\n      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">\n      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">\n      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">\n      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">\n      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">\n      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">\n      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">\n      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">\n      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">\n      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">\n      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">\n      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">\n      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">\n      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">\n      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">\n      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">\n      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">\n      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-share">\n      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">\n      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-square">\n      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">\n      <circle cx="24" cy="24" r="20"></circle>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">\n      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">\n      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">\n      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">\n      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">\n      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">\n      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">\n      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">\n      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">\n      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">\n      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">\n      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">\n      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">\n      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">\n      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">\n      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">\n      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>\n      <path fill="none" d="M-1-3h24v24H-1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">\n      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">\n      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-twitter">\n      <path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5T1369.5 1125 1185 1335.5t-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5T285 1033q33 5 61 5 43 0 85-11-112-23-185.5-111.5T172 710v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5T884 653q-8-38-8-74 0-134 94.5-228.5T1199 256q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">\n      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">\n      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>\n    </symbol>\n  </defs>\n</svg>',"image/svg+xml");if(a.querySelector("parsererror"))yt.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const l=a.documentElement;l.style.display="none",this.el_.appendChild(l),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio("audio"===e.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),ld&&this.addClass("vjs-touch-enabled"),mr||this.addClass("vjs-workinghover"),Kt.players[this.id_]=this;const s="8.6.1".split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",o=>this.listenForUserActivity_(o)),this.on("keydown",o=>this.handleKeyDown(o)),this.on("languagechange",o=>this.handleLanguagechange(o)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),er(ue(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),er(ue(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Kt.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function PG(t){K_[t.id()]=null}(this),_r.names.forEach(e=>{const r=this[_r[e].getterName]();r&&r.off&&r.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let n,e=this.tag,r=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const i="video-js"===this.tag.tagName.toLowerCase();r?n=this.el_=e.parentNode:i||(n=this.el_=super.createEl("div"));const s=go(e);if(i){for(n=this.el_=e,e=this.tag=ue().createElement("video");n.children.length;)e.appendChild(n.firstChild);cd(n,"video-js")||ea(n,"video-js"),n.appendChild(e),r=this.playerElIngest_=n,Object.keys(n).forEach(a=>{try{e[a]=n[a]}catch{}})}if(e.setAttribute("tabindex","-1"),s.tabindex="-1",ns&&kp&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(a){i&&"class"===a||n.setAttribute(a,s[a]),i&&e.setAttribute(a,s[a])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=n.player=this,this.addClass("vjs-paused"),!0!==O().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=EM("vjs-styles-dimensions");const a=mo(".vjs-styles-defaults"),u=mo("head");u.insertBefore(this.styleEl_,a?a.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const o=e.getElementsByTagName("a");for(let a=0;a<o.length;a++){const u=o.item(a);ea(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!r&&e.parentNode.insertBefore(n,e),M_(e,n),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=n,n}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");null===e||"anonymous"===e||"use-credentials"===e?(this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)):yt.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,n){const r=e+"_";if(void 0===n)return this[r]||0;if(""===n||"auto"===n)return this[r]=void 0,void this.updateStyleEl_();const i=parseFloat(n);isNaN(i)?yt.error(`Improper value "${n}" supplied for for ${e}`):(this[r]=i,this.updateStyleEl_())}fluid(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,Ls(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),((t,e)=>{Ls(t)?e():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(e))})(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===O().VIDEOJS_NO_DYNAMIC_STYLE){const a="number"==typeof this.width_?this.width_:this.options_.width,u="number"==typeof this.height_?this.height_:this.options_.height,l=this.tech_&&this.tech_.el();return void(l&&(a>=0&&(l.width=a),u>=0&&(l.height=u)))}let e,n,r,i;r=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const s=r.split(":"),o=s[1]/s[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/o:this.videoWidth()||300,n=void 0!==this.height_?this.height_:e*o,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),DM(this.styleEl_,`\n      .${i} {\n        width: ${e}px;\n        height: ${n}px;\n      }\n\n      .${i}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*o}%;\n      }\n    `)}loadTech_(e,n){this.tech_&&this.unloadTech_();const r=mn(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(at.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;let s=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(s=!1);const o={source:n,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${i}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};_r.names.forEach(u=>{const l=_r[u];o[l.getterName]=this[l.privateName]}),Object.assign(o,this.options_[r]),Object.assign(o,this.options_[i]),Object.assign(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),n&&n.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);const a=at.getTech(e);if(!a)throw new Error(`No Tech named '${r}' exists! '${r}' should be registered using videojs.registerTech()'`);this.tech_=new a(o),this.tech_.ready(Xt(this,this.handleTechReady_),!0),function(t,e){t.forEach(function(n){const r=e.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(i=>r.addCue(i))}),e.textTracks()}(this.textTracksJson_||[],this.tech_),OO.forEach(u=>{this.on(this.tech_,u,l=>this[`handleTech${mn(u)}_`](l))}),Object.keys(_b).forEach(u=>{this.on(this.tech_,u,l=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${_b[u]}_`].bind(this),event:l}):this[`handleTech${_b[u]}_`](l)})}),this.on(this.tech_,"loadstart",u=>this.handleTechLoadStart_(u)),this.on(this.tech_,"sourceset",u=>this.handleTechSourceset_(u)),this.on(this.tech_,"waiting",u=>this.handleTechWaiting_(u)),this.on(this.tech_,"ended",u=>this.handleTechEnded_(u)),this.on(this.tech_,"seeking",u=>this.handleTechSeeking_(u)),this.on(this.tech_,"play",u=>this.handleTechPlay_(u)),this.on(this.tech_,"pause",u=>this.handleTechPause_(u)),this.on(this.tech_,"durationchange",u=>this.handleTechDurationChange_(u)),this.on(this.tech_,"fullscreenchange",(u,l)=>this.handleTechFullscreenChange_(u,l)),this.on(this.tech_,"fullscreenerror",(u,l)=>this.handleTechFullscreenError_(u,l)),this.on(this.tech_,"enterpictureinpicture",u=>this.handleTechEnterPictureInPicture_(u)),this.on(this.tech_,"leavepictureinpicture",u=>this.handleTechLeavePictureInPicture_(u)),this.on(this.tech_,"error",u=>this.handleTechError_(u)),this.on(this.tech_,"posterchange",u=>this.handleTechPosterChange_(u)),this.on(this.tech_,"textdata",u=>this.handleTechTextData_(u)),this.on(this.tech_,"ratechange",u=>this.handleTechRateChange_(u)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==r||!this.tag)&&M_(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){_r.names.forEach(e=>{const n=_r[e];this[n.privateName]=this[n.getterName]()}),this.textTracksJson_=function(t){const e=t.$$("track"),n=Array.prototype.map.call(e,i=>i.track);return Array.prototype.map.call(e,function(i){const s=$_(i.track);return i.src&&(s.src=i.src),s}).concat(Array.prototype.filter.call(t.textTracks(),function(i){return-1===n.indexOf(i)}).map($_))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return void 0===e&&yt.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||"string"!=typeof e)return;const n=()=>{const i=this.muted();this.muted(!0);const s=()=>{this.muted(i)};this.playTerminatedQueue_.push(s);const o=this.play();if(gd(o))return o.catch(a=>{throw s(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${a||""}`)})};let r;return"any"!==e||this.muted()?r="muted"!==e||this.muted()?this.play():n():(r=this.play(),gd(r)&&(r=r.catch(n))),gd(r)?r.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})}):void 0}updateSourceCaches_(e=""){let n=e,r="";"string"!=typeof n&&(n=e.src,r=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],n&&!r&&(r=((t,e)=>{if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;const n=t.cache_.sources.filter(i=>i.src===e);if(n.length)return n[0].type;const r=t.$$("source");for(let i=0;i<r.length;i++){const s=r[i];if(s.type&&s.src&&s.src===e)return s.type}return Xp(e)})(this,n)),this.cache_.source=Wt({},e,{src:n,type:r});const i=this.cache_.sources.filter(u=>u.src&&u.src===n),s=[],o=this.$$("source"),a=[];for(let u=0;u<o.length;u++){const l=go(o[u]);s.push(l),l.src&&l.src===n&&a.push(l.src)}a.length&&!i.length?this.cache_.sources=s:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=n}handleTechSourceset_(e){if(!this.changingSrc_){let n=s=>this.updateSourceCaches_(s);const r=this.currentSource().src,i=e.src;r&&!/^blob:/.test(r)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==r)&&(n=()=>{}),n(i),e.src||this.tech_.any(["sourceset","loadstart"],s=>{if("sourceset"===s.type)return;const o=this.techGet_("currentSrc");this.lastSource_.tech=o,this.updateSourceCaches_(o)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),n=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",n))};this.on("timeupdate",n)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?os(this.play()):this.pause())}handleTechDoubleClick_(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),r=>r.contains(e.target))||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const n=e.target.player;if(n&&n!==this)return;const r=this.el();let i=ue()[this.fsApi_.fullscreenElement]===r;!i&&r.matches&&(i=r.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}handleTechFullscreenChange_(e,n){n&&(n.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(n.isFullscreen))}handleTechFullscreenError_(e,n){this.trigger("fullscreenerror",n)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,n){this.ready(function(){if(e in OG)return function IG(t,e,n,r){return e[n](t.reduce(Y_(n),r))}(this.middleware_,this.tech_,e,n);if(e in zM)return qM(this.middleware_,this.tech_,e,n);try{this.tech_&&this.tech_[e](n)}catch(r){throw yt(r),r}},!0)}techGet_(e){if(this.tech_&&this.tech_.isReady_){if(e in MG)return function AG(t,e,n){return t.reduceRight(Y_(n),e[n]())}(this.middleware_,this.tech_,e);if(e in zM)return qM(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(n){throw void 0===this.tech_[e]?(yt(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,n),n):"TypeError"===n.name?(yt(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,n),this.tech_.isReady_=!1,n):(yt(n),n)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=os){this.playCallbacks_.push(e);const n=!(this.changingSrc_||!this.src()&&!this.currentSrc()),r=!(!Rp&&!mr);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=o=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!n&&r&&this.load());const i=this.techGet_("play");r&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(n){n()})}runPlayCallbacks_(e){const n=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],n.forEach(function(r){r(e)})}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||ss(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){return void 0===e?(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime):(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),this.cache_.initTime=0,void(isFinite(e)&&(this.cache_.currentTime=Number(e)))):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_)))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=ss(0,0)),e}bufferedPercent(){return RM(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),n=this.duration();let r=e.end(e.length-1);return r>n&&(r=n),r}volume(e){let n;return void 0!==e?(n=Math.max(0,Math.min(1,e)),this.cache_.volume=n,this.techCall_("setVolume",n),void(n>0&&this.lastVolume_(n))):(n=parseFloat(this.techGet_("volume")),isNaN(n)?1:n)}muted(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)}defaultMuted(e){return void 0!==e&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(void 0!==e){const n=this.isFullscreen_;return this.isFullscreen_=!!e,this.isFullscreen_!==n&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const n=this;return new Promise((r,i)=>{function s(){n.off("fullscreenerror",a),n.off("fullscreenchange",o)}function o(){s(),r()}function a(l,d){s(),i(d)}n.one("fullscreenchange",o),n.one("fullscreenerror",a);const u=n.requestFullscreenHelper_(e);u&&(u.then(s,s),u.then(r,i))})}requestFullscreenHelper_(e){let n;if(this.fsApi_.prefixed||(n=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(n=e)),this.fsApi_.requestFullscreen){const r=this.el_[this.fsApi_.requestFullscreen](n);return r&&r.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),r}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((n,r)=>{function i(){e.off("fullscreenerror",o),e.off("fullscreenchange",s)}function s(){i(),n()}function o(u,l){i(),r(l)}e.one("fullscreenchange",s),e.one("fullscreenerror",o);const a=e.exitFullscreenHelper_();a&&(a.then(i,i),a.then(n,r))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=ue()[this.fsApi_.exitFullscreen]();return e&&os(e.then(()=>this.isFullscreen(!1))),e}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=ue().documentElement.style.overflow,Hr(ue(),"keydown",this.boundFullWindowOnEscKey_),ue().documentElement.style.overflow="hidden",ea(ue().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){it().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,er(ue(),"keydown",this.boundFullWindowOnEscKey_),ue().documentElement.style.overflow=this.docOrigOverflow,Lp(ue().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&O().documentPictureInPicture){const e=ue().createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(ht("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),O().documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(n=>(bM(n),this.el_.parentNode.insertBefore(e,this.el_),n.document.body.appendChild(this.el_),n.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger("enterpictureinpicture"),n.addEventListener("pagehide",r=>{const i=r.target.querySelector(".video-js");e.parentNode.replaceChild(i,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),n))}return"pictureInPictureEnabled"in ue()&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return O().documentPictureInPicture&&O().documentPictureInPicture.window?(O().documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in ue()?ue().exitPictureInPicture():void 0}handleKeyDown(e){const{userActions:n}=this.options_;!n||!n.hotkeys||(i=>{const s=i.tagName.toLowerCase();return!!i.isContentEditable||("input"===s?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(i.type):-1!==["textarea"].indexOf(s))})(this.el_.ownerDocument.activeElement)||("function"==typeof n.hotkeys?n.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const n=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:r=(o=>it().isEventKey(o,"f")),muteKey:i=(o=>it().isEventKey(o,"m")),playPauseKey:s=(o=>it().isEventKey(o,"k")||it().isEventKey(o,"Space"))}=n;if(r.call(this,e)){e.preventDefault(),e.stopPropagation();const o=H.getComponent("FullscreenToggle");!1!==ue()[this.fsApi_.fullscreenEnabled]&&o.prototype.handleClick.call(this,e)}else i.call(this,e)?(e.preventDefault(),e.stopPropagation(),H.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),H.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let n;for(let r=0,i=this.options_.techOrder;r<i.length;r++){const s=i[r];let o=at.getTech(s);if(o||(o=H.getComponent(s)),o){if(o.isSupported()&&(n=o.canPlayType(e),n))return n}else yt.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(e){const n=this.options_.techOrder.map(a=>[a,at.getTech(a)]).filter(([a,u])=>u?u.isSupported():(yt.error(`The "${a}" tech is undefined. Skipped browser support check for that tech.`),!1)),r=function(a,u,l){let d;return a.some(g=>u.some(v=>{if(d=l(g,v),d)return!0})),d};let i;const o=([a,u],l)=>{if(u.canPlaySource(l,this.options_[a.toLowerCase()]))return{source:l,tech:a}};return i=this.options_.sourceOrder?r(e,n,(a=o,(u,l)=>a(l,u))):r(n,e,o),i||!1;var a}handleSrc_(e,n){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const r=GM(e);if(r.length){if(this.changingSrc_=!0,n||(this.cache_.sources=r),this.updateSourceCaches_(r[0]),wG(this,r[0],(i,s)=>{if(this.middleware_=s,n||(this.cache_.sources=r),this.updateSourceCaches_(i),this.src_(i))return r.length>1?this.handleSrc_(r.slice(1)):(this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void this.triggerReady());!function xG(t,e){t.forEach(n=>n.setTech&&n.setTech(e))}(s,this.tech_)}),r.length>1){const i=()=>{this.error(null),this.handleSrc_(r.slice(1),!0)},s=()=>{this.off("error",i)};this.one("error",i),this.one("playing",s),this.resetRetryOnError_=()=>{this.off("error",i),this.off("playing",s)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)}src(e){return this.handleSrc_(e,!1)}src_(e){const n=this.selectSource([e]);return!n||(MM(n.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1))}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")}reset(){this.paused()?this.doReset_():os(this.play().then(()=>this.doReset_()))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Ls(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:n,progressControl:r,remainingTimeDisplay:i}=this.controlBar||{},{seekBar:s}=r||{};e&&e.updateContent(),n&&n.updateContent(),i&&i.updateContent(),s&&(s.update(),s.loadProgressBar&&s.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),n=[];return 0!==Object.keys(e).length&&n.push(e),this.cache_.sources||n}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")}autoplay(e){if(void 0===e)return this.options_.autoplay||!1;let n;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),n=!1):this.options_.autoplay=!!e,n=typeof n>"u"?this.options_.autoplay:n,this.tech_&&this.techCall_("setAutoplay",n)}playsinline(e){return void 0!==e&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")}poster(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(void 0===e)return this.error_||null;if(fo("beforeerror").forEach(n=>{const r=n(this,e);es(r)&&!Array.isArray(r)||"string"==typeof r||"number"==typeof r||null===r?e=r:this.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&e&&4===e.code){const n=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),void this.one("loadstart",function(){this.off(["click","touchstart"],n)})}if(null===e)return this.error_=null,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new vr(e),this.addClass("vjs-error"),yt.error(`(CODE:${this.error_.code} ${vr.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),fo("error").forEach(n=>n(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(n){n.stopPropagation(),n.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,n,r;const i=Xt(this,this.reportUserActivity),a=function(g){i(),this.clearInterval(e)};this.on("mousedown",function(){i(),this.clearInterval(e),e=this.setInterval(i,250)}),this.on("mousemove",function(g){(g.screenX!==n||g.screenY!==r)&&(n=g.screenX,r=g.screenY,i())}),this.on("mouseup",a),this.on("mouseleave",a);const u=this.getChild("controlBar");let l;u&&!mr&&!ts&&(u.on("mouseenter",function(g){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),u.on("mouseleave",function(g){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",i),this.on("keyup",i),this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(l);const g=this.options_.inactivityTimeout;g<=0||(l=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},g))},250)}playbackRate(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)}defaultPlaybackRate(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),n=this.getChild("ControlBar"),r=n&&n.currentHeight();e.forEach(i=>{i!==n&&i.el_&&!i.hasClass("vjs-hidden")&&(i.hide(),this.audioOnlyCache_.hiddenChildren.push(i))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(r),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const n=[];return this.isInPictureInPicture()&&n.push(this.exitPictureInPicture()),this.isFullscreen()&&n.push(this.exitFullscreen()),this.audioPosterMode()&&n.push(this.audioPosterMode(!1)),Promise.all(n).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return"boolean"!=typeof e||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,n,r){if(this.tech_)return this.tech_.addTextTrack(e,n,r)}addRemoteTextTrack(e,n){if(this.tech_)return this.tech_.addRemoteTextTrack(e,n)}removeRemoteTextTrack(e={}){let{track:n}=e;if(n||(n=e),this.tech_)return this.tech_.removeRemoteTextTrack(n)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Ls(this)&&this.trigger("languagechange"))}languages(){return Wt(Kt.prototype.options_.languages,this.languages_)}toJSON(){const e=Wt(this.options_),n=e.tracks;e.tracks=[];for(let r=0;r<n.length;r++){let i=n[r];i=Wt(i),i.player=void 0,e.tracks[r]=i}return e}createModal(e,n){(n=n||{}).content=e||"";const r=new Yu(this,n);return this.addChild(r),r.on("dispose",()=>{this.removeChild(r)}),r.open(),r}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),n=this.currentWidth();for(let r=0;r<bb.length;r++){const i=bb[r];if(n<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(Zp[e]),this.addClass(Zp[i]),this.breakpoint_=i;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Object.assign({},fW,e),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(e){return void 0===e?this.responsive_:(e=!!e)!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Zp[this.breakpoint_]||""}loadMedia(e,n){if(!e||"object"!=typeof e)return;const r=this.crossOrigin();this.reset(),this.cache_.media=Wt(e);const{artist:i,artwork:s,description:o,poster:a,src:u,textTracks:l,title:d}=this.cache_.media;!s&&a&&(this.cache_.media.artwork=[{src:a,type:Xp(a)}]),r&&this.crossOrigin(r),u&&this.src(u),a&&this.poster(a),Array.isArray(l)&&l.forEach(g=>this.addRemoteTextTrack(g,!1)),this.titleBar&&this.titleBar.update({title:d,description:o||i||""}),this.ready(n)}getMedia(){if(!this.cache_.media){const e=this.poster(),i={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),s=>({kind:s.kind,label:s.label,language:s.language,src:s.src}))};return e&&(i.poster=e,i.artwork=[{src:i.poster,type:Xp(i.poster)}]),i}return Wt(this.cache_.media)}static getTagSettings(e){const n={sources:[],tracks:[]},r=go(e),i=r["data-setup"];if(cd(e,"vjs-fill")&&(r.fill=!0),cd(e,"vjs-fluid")&&(r.fluid=!0),null!==i){const[s,o]=iq()(i||"{}");s&&yt.error(s),Object.assign(r,o)}if(Object.assign(n,r),e.hasChildNodes()){const s=e.childNodes;for(let o=0,a=s.length;o<a;o++){const u=s[o],l=u.nodeName.toLowerCase();"source"===l?n.sources.push(go(u)):"track"===l&&n.tracks.push(go(u))}}return n}debug(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every(n=>"number"==typeof n)&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}_r.names.forEach(function(t){const e=_r[t];Kt.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),Kt.prototype.crossorigin=Kt.prototype.crossOrigin,Kt.players={};const Td=O().navigator;Kt.prototype.options_={techOrder:at.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Td&&(Td.languages&&Td.languages[0]||Td.userLanguage||Td.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(t){Kt.prototype[t]=function(){return this.techGet_(t)}}),OO.forEach(function(t){Kt.prototype[`handleTech${mn(t)}_`]=function(){return this.trigger(t)}}),H.registerComponent("Player",Kt);const Jp="plugin",tl="activePlugins_",nl={},eg=t=>nl.hasOwnProperty(t),tg=t=>eg(t)?nl[t]:void 0,kO=(t,e)=>{t[tl]=t[tl]||{},t[tl][e]=!0},ng=(t,e,n)=>{const r=(n?"before":"")+"pluginsetup";t.trigger(r,e),t.trigger(r+":"+e.name,e)},PO=(t,e)=>(e.prototype.name=t,function(...n){ng(this,{name:t,plugin:e,instance:null},!0);const r=new e(this,...n);return this[t]=()=>r,ng(this,r.getEventHash()),r});let yo=(()=>{class t{constructor(n){if(this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=n,this.log||(this.log=this.player.log.createLogger(this.name)),U_(this),delete this.trigger,IM(this,this.constructor.defaultState),kO(n,this.name),this.dispose=this.dispose.bind(this),n.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(n={}){return n.name=this.name,n.plugin=this.constructor,n.instance=this,n}trigger(n,r={}){return Ku(this.eventBusEl_,n,this.getEventHash(r))}handleStateChanged(n){}dispose(){const{name:n,player:r}=this;this.trigger("dispose"),this.off(),r.off("dispose",this.dispose),r[tl][n]=!1,this.player=this.state=null,r[n]=PO(n,nl[n])}static isBasic(n){const r="string"==typeof n?tg(n):n;return"function"==typeof r&&!t.prototype.isPrototypeOf(r.prototype)}static registerPlugin(n,r){if("string"!=typeof n)throw new Error(`Illegal plugin name, "${n}", must be a string, was ${typeof n}.`);if(eg(n))yt.warn(`A plugin named "${n}" already exists. You may want to avoid re-registering plugins!`);else if(Kt.prototype.hasOwnProperty(n))throw new Error(`Illegal plugin name, "${n}", cannot share a name with an existing player method!`);if("function"!=typeof r)throw new Error(`Illegal plugin for "${n}", must be a function, was ${typeof r}.`);return nl[n]=r,n!==Jp&&(Kt.prototype[n]=t.isBasic(r)?function(t,e){const n=function(){ng(this,{name:t,plugin:e,instance:null},!0);const r=e.apply(this,arguments);return kO(this,t),ng(this,{name:t,plugin:e,instance:r}),r};return Object.keys(e).forEach(function(r){n[r]=e[r]}),n}(n,r):PO(n,r)),r}static deregisterPlugin(n){if(n===Jp)throw new Error("Cannot de-register base plugin.");eg(n)&&(delete nl[n],delete Kt.prototype[n])}static getPlugins(n=Object.keys(nl)){let r;return n.forEach(i=>{const s=tg(i);s&&(r=r||{},r[i]=s)}),r}static getPluginVersion(n){const r=tg(n);return r&&r.VERSION||""}}return t.getPlugin=tg,t.BASE_PLUGIN_NAME=Jp,t})();function wi(t,e,n,r){return function gW(t,e){let n=!1;return function(...r){return n||yt.warn(t),n=!0,e.apply(this,r)}}(`${e} is deprecated and will be removed in ${t}.0; please use ${n} instead.`,r)}yo.registerPlugin(Jp,yo),Kt.prototype.usingPlugin=function(t){return!!this[tl]&&!0===this[tl][t]},Kt.prototype.hasPlugin=function(t){return!!eg(t)};const NO=t=>0===t.indexOf("#")?t.slice(1):t;function $(t,e,n){let r=$.getPlayer(t);if(r)return e&&yt.warn(`Player "${t}" is already initialised. Options will not be applied.`),n&&r.ready(n),r;const i="string"==typeof t?mo("#"+NO(t)):t;if(!zu(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");const o="getRootNode"in i&&i.getRootNode()instanceof O().ShadowRoot?i.getRootNode():i.ownerDocument.body;(!i.ownerDocument.defaultView||!o.contains(i))&&yt.warn("The element supplied is not included in the DOM"),!0===(e=e||{}).restoreEl&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),fo("beforesetup").forEach(u=>{const l=u(i,Wt(e));es(l)&&!Array.isArray(l)?e=Wt(e,l):yt.error("please return an object in beforesetup hooks")});const a=H.getComponent("Player");return r=new a(i,e,n),fo("setup").forEach(u=>u(r)),r}if($.hooks_=Rs,$.hooks=fo,$.hook=function(t,e){fo(t,e)},$.hookOnce=function(t,e){fo(t,[].concat(e).map(n=>{const r=(...i)=>(ZI(t,r),n(...i));return r}))},$.removeHook=ZI,!0!==O().VIDEOJS_NO_DYNAMIC_STYLE&&qu()){let t=mo(".vjs-styles-defaults");if(!t){t=EM("vjs-styles-defaults");const e=mo("head");e&&e.insertBefore(t,e.firstChild),DM(t,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}P_(1,$),$.VERSION="8.6.1",$.options=Kt.prototype.options_,$.getPlayers=()=>Kt.players,$.getPlayer=t=>{const e=Kt.players;let n;if("string"==typeof t){const r=NO(t),i=e[r];if(i)return i;n=mo("#"+r)}else n=t;if(zu(n)){const{player:r,playerId:i}=n;if(r||e[i])return r||e[i]}},$.getAllPlayers=()=>Object.keys(Kt.players).map(t=>Kt.players[t]).filter(Boolean),$.players=Kt.players,$.getComponent=H.getComponent,$.registerComponent=(t,e)=>(at.isTech(e)&&yt.warn(`The ${t} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),H.registerComponent.call(H,t,e)),$.getTech=at.getTech,$.registerTech=at.registerTech,$.use=function SG(t,e){ra[t]=ra[t]||[],ra[t].push(e)},Object.defineProperty($,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty($.middleware,"TERMINATOR",{value:Wp,writeable:!1,enumerable:!0}),$.browser=rG,$.obj=nG,$.mergeOptions=wi(9,"videojs.mergeOptions","videojs.obj.merge",Wt),$.defineLazyProperty=wi(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Ip),$.bind=wi(9,"videojs.bind","native Function.prototype.bind",Xt),$.registerPlugin=yo.registerPlugin,$.deregisterPlugin=yo.deregisterPlugin,$.plugin=(t,e)=>(yt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),yo.registerPlugin(t,e)),$.getPlugins=yo.getPlugins,$.getPlugin=yo.getPlugin,$.getPluginVersion=yo.getPluginVersion,$.addLanguage=function(t,e){return t=(""+t).toLowerCase(),($.options.languages=Wt($.options.languages,{[t]:e}))[t]},$.log=yt,$.createLogger=eM,$.time=mG,$.createTimeRange=wi(9,"videojs.createTimeRange","videojs.time.createTimeRanges",ss),$.createTimeRanges=wi(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",ss),$.formatTime=wi(9,"videojs.formatTime","videojs.time.formatTime",na),$.setFormatTime=wi(9,"videojs.setFormatTime","videojs.time.setFormatTime",PM),$.resetFormatTime=wi(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",NM),$.parseUrl=wi(9,"videojs.parseUrl","videojs.url.parseUrl",W_),$.isCrossOrigin=wi(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Gp),$.EventTarget=oi,$.any=L_,$.on=Hr,$.one=$p,$.off=er,$.trigger=Ku,$.xhr=DI(),$.TextTrack=md,$.AudioTrack=$M,$.VideoTrack=HM,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(t=>{$[t]=function(){return yt.warn(`videojs.${t}() is deprecated; use videojs.dom.${t}() instead`),TM[t].apply(null,arguments)}}),$.computedStyle=wi(9,"videojs.computedStyle","videojs.dom.computedStyle",Xu),$.dom=TM,$.fn=cG,$.num=zG,$.str=pG,$.url=EG;class mW{constructor(e){let n=this;return n.id=e.id,n.label=n.id,n.width=e.width,n.height=e.height,n.bitrate=e.bandwidth,n.frameRate=e.frameRate,n.enabled_=e.enabled,Object.defineProperty(n,"enabled",{get:()=>n.enabled_(),set(r){n.enabled_(r)}}),n}}class rg extends $.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get:()=>e.selectedIndex_}),Object.defineProperty(e,"length",{get:()=>e.levels_.length}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let n=this.getQualityLevelById(e.id);if(n)return n;const r=this.levels_.length;return n=new mW(e),""+r in this||Object.defineProperty(this,r,{get(){return this.levels_[r]}}),this.levels_.push(n),this.trigger({qualityLevel:n,type:"addqualitylevel"}),n}removeQualityLevel(e){let n=null;for(let r=0,i=this.length;r<i;r++)if(this[r]===e){n=this.levels_.splice(r,1)[0],this.selectedIndex_===r?this.selectedIndex_=-1:this.selectedIndex_>r&&this.selectedIndex_--;break}return n&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),n}getQualityLevelById(e){for(let n=0,r=this.length;n<r;n++){const i=this[n];if(i.id===e)return i}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}rg.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const t in rg.prototype.allowedEvents_)rg.prototype["on"+t]=null;const LO=function(t){return function(t,e){const n=t.qualityLevels,r=new rg,i=function(){r.dispose(),t.qualityLevels=n,t.off("dispose",i)};return t.on("dispose",i),t.qualityLevels=()=>r,t.qualityLevels.VERSION="4.0.0",r}(this,$.obj.merge({},t))};$.registerPlugin("qualityLevels",LO),LO.VERSION="4.0.0";const zr=function(e,n){if(/^[a-z]+:/i.test(n))return n;/^data:/.test(e)&&(e=O().location&&O().location.href||"");var r="function"==typeof O().URL,i=/^\/\//.test(e),s=!O().location&&!/\/\//i.test(e);if(r?e=new(O().URL)(e,O().location||"http://example.com"):/\/\//i.test(e)||(e=Cp().buildAbsoluteURL(O().location&&O().location.href||"",e)),r){var o=new URL(n,e);return s?o.href.slice(18):i?o.href.slice(o.protocol.length):o.href}return Cp().buildAbsoluteURL(e,n)},ig=(t,e)=>e&&e.responseURL&&t!==e.responseURL?e.responseURL:t,li=t=>$.log.debug?$.log.debug.bind($,"VHS:",`${t} >`):function(){};function Rt(...t){const e=$.obj||$;return(e.merge||e.mergeOptions).apply(e,t)}function tr(...t){const e=$.time||$;return(e.createTimeRanges||e.createTimeRanges).apply(e,t)}const vo=1/30,as=.1,FO=function(t,e){const n=[];let r;if(t&&t.length)for(r=0;r<t.length;r++)e(t.start(r),t.end(r))&&n.push([t.start(r),t.end(r)]);return tr(n)},rl=function(t,e){return FO(t,function(n,r){return n-as<=e&&r+as>=e})},sg=function(t,e){return FO(t,function(n){return n-vo>=e})},BO=t=>{const e=[];if(!t||!t.length)return"";for(let n=0;n<t.length;n++)e.push(t.start(n)+" => "+t.end(n));return e.join(", ")},oa=t=>{const e=[];for(let n=0;n<t.length;n++)e.push({start:t.start(n),end:t.end(n)});return e},UO=function(t){if(t&&t.length&&t.end)return t.end(t.length-1)},Tb=function(t,e){let n=0;if(!t||!t.length)return n;for(let r=0;r<t.length;r++){const i=t.start(r),s=t.end(r);if(!(e>s)){if(e>i&&e<=s){n+=s-e;continue}n+=s-i}}return n},Cb=(t,e)=>{if(!e.preload)return e.duration;let n=0;return(e.parts||[]).forEach(function(r){n+=r.duration}),(e.preloadHints||[]).forEach(function(r){"PART"===r.type&&(n+=t.partTargetDuration)}),n},Eb=t=>(t.segments||[]).reduce((e,n,r)=>(n.parts?n.parts.forEach(function(i,s){e.push({duration:i.duration,segmentIndex:r,partIndex:s,part:i,segment:n})}):e.push({duration:n.duration,segmentIndex:r,partIndex:null,segment:n,part:null}),e),[]),VO=t=>{const e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]},jO=({preloadSegment:t})=>{if(!t)return;const{parts:e,preloadHints:n}=t;let r=(n||[]).reduce((i,s)=>i+("PART"===s.type?1:0),0);return r+=e&&e.length?e.length:0,r},$O=(t,e)=>{if(e.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;const n=VO(e).length>0;return n&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:n&&e.partTargetDuration?3*e.partTargetDuration:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?3*e.targetDuration:0},HO=function(t,e,n){if(typeof e>"u"&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;const r=function(t,e){let n=0,r=e-t.mediaSequence,i=t.segments[r];if(i){if(typeof i.start<"u")return{result:i.start,precise:!0};if(typeof i.end<"u")return{result:i.end-i.duration,precise:!0}}for(;r--;){if(i=t.segments[r],typeof i.end<"u")return{result:n+i.end,precise:!0};if(n+=Cb(t,i),typeof i.start<"u")return{result:n+i.start,precise:!0}}return{result:n,precise:!1}}(t,e);if(r.precise)return r.result;const i=function(t,e){let r,n=0,i=e-t.mediaSequence;for(;i<t.segments.length;i++){if(r=t.segments[i],typeof r.start<"u")return{result:r.start-n,precise:!0};if(n+=Cb(t,r),typeof r.end<"u")return{result:r.end-n,precise:!0}}return{result:-1,precise:!1}}(t,e);return i.precise?i.result:r.result+n},qO=function(t,e,n){if(!t)return 0;if("number"!=typeof n&&(n=0),typeof e>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return O()[1/0]}return HO(t,e,n)},Cd=function({defaultDuration:t,durationList:e,startIndex:n,endIndex:r}){let i=0;if(n>r&&([n,r]=[r,n]),n<0){for(let s=n;s<Math.min(0,r);s++)i+=t;n=0}for(let s=n;s<r;s++)i+=e[s].duration;return i},zO=function(t,e,n,r){if(!t||!t.segments)return null;if(t.endList)return qO(t);if(null===e)return null;let i=HO(t,t.mediaSequence+t.segments.length,e=e||0);return n&&(i-=r="number"==typeof r?r:$O(null,t)),Math.max(0,i)},GO=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},Db=function(t){return t.excludeUntil&&t.excludeUntil===1/0},og=function(t){const e=GO(t);return!t.disabled&&!e},WO=function(t,e){return e.attributes&&e.attributes[t]},Sb=(t,e)=>{if(1===t.playlists.length)return!0;const n=e.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===t.playlists.filter(r=>!!og(r)&&(r.attributes.BANDWIDTH||0)<n).length},wb=(t,e)=>!(!t&&!e||!t&&e||t&&!e||!(t===e||t.id&&e.id&&t.id===e.id||t.resolvedUri&&e.resolvedUri&&t.resolvedUri===e.resolvedUri||t.uri&&e.uri&&t.uri===e.uri)),XO=function(t,e){const n=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{};let r=!1;for(const i in n){for(const s in n[i])if(r=e(n[i][s]),r)break;if(r)break}return!!r},Ed=t=>{if(!t||!t.playlists||!t.playlists.length)return XO(t,n=>n.playlists&&n.playlists.length||n.uri);for(let e=0;e<t.playlists.length;e++){const n=t.playlists[e],r=n.attributes&&n.attributes.CODECS;if(!(r&&r.split(",").every(s=>AI(s))||XO(t,s=>wb(n,s))))return!1}return!0};var Mr={liveEdgeDelay:$O,duration:qO,seekable:function(t,e,n){const i=e||0;let s=zO(t,e,!0,n);return null===s?tr():(s<i&&(s=i),tr(i,s))},getMediaInfoForTime:function({playlist:t,currentTime:e,startingSegmentIndex:n,startingPartIndex:r,startTime:i,exactManifestTimings:s}){let o=e-i;const a=Eb(t);let u=0;for(let l=0;l<a.length;l++){const d=a[l];if(n===d.segmentIndex&&("number"!=typeof r||"number"!=typeof d.partIndex||r===d.partIndex)){u=l;break}}if(o<0){if(u>0)for(let l=u-1;l>=0;l--){const d=a[l];if(o+=d.duration,s){if(o<0)continue}else if(o+vo<=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:i-Cd({defaultDuration:t.targetDuration,durationList:a,startIndex:u,endIndex:l})}}return{partIndex:a[0]&&a[0].partIndex||null,segmentIndex:a[0]&&a[0].segmentIndex||0,startTime:e}}if(u<0){for(let l=u;l<0;l++)if(o-=t.targetDuration,o<0)return{partIndex:a[0]&&a[0].partIndex||null,segmentIndex:a[0]&&a[0].segmentIndex||0,startTime:e};u=0}for(let l=u;l<a.length;l++){const d=a[l];if(o-=d.duration,s){if(o>0)continue}else if(o-vo>=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:i+Cd({defaultDuration:t.targetDuration,durationList:a,startIndex:u,endIndex:l})}}return{segmentIndex:a[a.length-1].segmentIndex,partIndex:a[a.length-1].partIndex,startTime:e}},isEnabled:og,isDisabled:function(t){return t.disabled},isExcluded:GO,isIncompatible:Db,playlistEnd:zO,isAes:function(t){for(let e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},hasAttribute:WO,estimateSegmentRequestTime:function(t,e,n,r=0){return WO("BANDWIDTH",n)?(t*n.attributes.BANDWIDTH-8*r)/e:NaN},isLowestEnabledRendition:Sb,isAudioOnly:Ed,playlistMatch:wb,segmentDurationWithParts:Cb};const{log:KO}=$,xb=(t,e)=>`${t}-${e}`,MW=(t,e,n)=>`placeholder-uri-${t}-${e}-${n}`,il=(t,e)=>{t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(n=>{if(t.mediaGroups[n])for(const r in t.mediaGroups[n])for(const i in t.mediaGroups[n][r])e(t.mediaGroups[n][r][i],n,r,i)})},YO=({playlist:t,uri:e,id:n})=>{t.id=n,t.playlistErrors_=0,e&&(t.uri=e),t.attributes=t.attributes||{}},QO=(t,e,n=MW)=>{t.uri=e;for(let i=0;i<t.playlists.length;i++)t.playlists[i].uri||(t.playlists[i].uri=`placeholder-uri-${i}`);const r=Ed(t);il(t,(i,s,o,a)=>{if(!i.playlists||!i.playlists.length){if(r&&"AUDIO"===s&&!i.uri)for(let u=0;u<t.playlists.length;u++){const l=t.playlists[u];if(l.attributes&&l.attributes.AUDIO&&l.attributes.AUDIO===o)return}i.playlists=[co({},i)]}i.playlists.forEach(function(u,l){const d=n(s,o,a,u),g=xb(l,d);u.uri?u.resolvedUri=u.resolvedUri||zr(t.uri,u.uri):(u.uri=0===l?d:g,u.resolvedUri=u.uri),u.id=u.id||g,u.attributes=u.attributes||{},t.playlists[u.id]=u,t.playlists[u.uri]=u})}),(t=>{let e=t.playlists.length;for(;e--;){const n=t.playlists[e];YO({playlist:n,id:xb(e,n.uri)}),n.resolvedUri=zr(t.uri,n.uri),t.playlists[n.id]=n,t.playlists[n.uri]=n,n.attributes.BANDWIDTH||KO.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(t),(t=>{il(t,e=>{e.uri&&(e.resolvedUri=zr(t.uri,e.uri))})})(t)};class ZO{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(null!==this.offset_||!e.length)return;const[n]=e;void 0!==n.programDateTime&&(this.offset_=n.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[n]=e,r=n.startDate.getTime();this.trimProcessedDateRanges_(r),this.pendingDateRanges_=e.reduce((i,s)=>(i.set(s.id,s),i),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(null===this.offset_)return[];const e={},n=[];this.pendingDateRanges_.forEach((r,i)=>{if(!this.processedDateRanges_.has(i)&&(r.startTime=r.startDate.getTime()/1e3-this.offset_,r.processDateRange=()=>this.processDateRange(r),n.push(r),r.class))if(e[r.class]){const s=e[r.class].push(r);r.classListIndex=s-1}else e[r.class]=[r],r.classListIndex=0});for(const r of n){const i=e[r.class]||[];r.endTime=r.endDate?r.endDate.getTime()/1e3-this.offset_:r.endOnNext&&i[r.classListIndex+1]?i[r.classListIndex+1].startTime:r.duration?r.startTime+r.duration:r.plannedDuration?r.startTime+r.plannedDuration:r.startTime}return n}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((r,i)=>{r.startDate.getTime()<e&&this.processedDateRanges_.delete(i)})}}const{EventTarget:RW}=$,FW=(t,e)=>{if(!t)return e;const n=Rt(t,e);if(t.preloadHints&&!e.preloadHints&&delete n.preloadHints,t.parts&&!e.parts)delete n.parts;else if(t.parts&&e.parts)for(let r=0;r<e.parts.length;r++)t.parts&&t.parts[r]&&(n.parts[r]=Rt(t.parts[r],e.parts[r]));return!t.skipped&&e.skipped&&(n.skipped=!1),t.preload&&!e.preload&&(n.preload=!1),n},JO=(t,e)=>{!t.resolvedUri&&t.uri&&(t.resolvedUri=zr(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=zr(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=zr(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=zr(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(n=>{n.resolvedUri||(n.resolvedUri=zr(e,n.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(n=>{n.resolvedUri||(n.resolvedUri=zr(e,n.uri))})},ek=function(t){const e=t.segments||[],n=t.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(let r=0;r<n.preloadHints.length;r++)if("MAP"===n.preloadHints[r].type)return e;n.duration=t.targetDuration,n.preload=!0,e.push(n)}return e},tk=(t,e)=>t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence&&t.preloadSegment===e.preloadSegment,Ab=(t,e,n=tk)=>{const r=Rt(t,{}),i=r.playlists[e.id];if(!i||n(i,e))return null;e.segments=ek(e);const s=Rt(i,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,i.segments){if(e.skip){e.segments=e.segments||[];for(let o=0;o<e.skip.skippedSegments;o++)e.segments.unshift({skipped:!0})}s.segments=((t,e,n)=>{const r=t.slice(),i=e.slice();n=n||0;const s=[];let o;for(let a=0;a<i.length;a++){const u=r[a+n],l=i[a];u?(o=u.map||o,s.push(FW(u,l))):(o&&!l.map&&(l.map=o),s.push(l))}return s})(i.segments,e.segments,e.mediaSequence-i.mediaSequence)}s.segments.forEach(o=>{JO(o,s.resolvedUri)});for(let o=0;o<r.playlists.length;o++)r.playlists[o].id===e.id&&(r.playlists[o]=s);return r.playlists[e.id]=s,r.playlists[e.uri]=s,il(t,(o,a,u,l)=>{if(o.playlists)for(let d=0;d<o.playlists.length;d++)e.id===o.playlists[d].id&&(o.playlists[d]=s)}),r},Ib=(t,e)=>{const n=t.segments||[],r=n[n.length-1],i=r&&r.parts&&r.parts[r.parts.length-1],s=i&&i.duration||r&&r.duration;return e&&s?1e3*s:500*(t.partTargetDuration||t.targetDuration||10)};class sl extends RW{constructor(e,n,r={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=li("PlaylistLoader");const{withCredentials:i=!1}=r;this.src=e,this.vhs_=n,this.withCredentials=i,this.addDateRangesToTextTrack_=r.addDateRangesToTextTrack;const s=n.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.dateRangesStorage_=new ZO,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const n=this.dateRangesStorage_.getDateRangesToProcess();!n.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(n)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const e=this.media();let n=zr(this.main.uri,e.uri);this.llhls&&(n=((t,e)=>{if(e.endList||!e.serverControl)return t;const n={};if(e.serverControl.canBlockReload){const{preloadSegment:r}=e;let i=e.mediaSequence+e.segments.length;if(r){const s=r.parts||[],o=jO(e)-1;o>-1&&o!==s.length-1&&(n._HLS_part=o),(o>-1||s.length)&&i--}n._HLS_msn=i}if(e.serverControl&&e.serverControl.canSkipUntil&&(n._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){const r=new(O().URL)(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(i){n.hasOwnProperty(i)&&r.searchParams.set(i,n[i])}),t=r.toString()}return t})(n,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials},(r,i)=>{if(this.request){if(r)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,n,r){const{uri:i,id:s}=n;this.request=null,r&&(this.state=r),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${i}.`,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}parseManifest_({url:e,manifestString:n}){return(({onwarn:t,oninfo:e,manifestString:n,customTagParsers:r=[],customTagMappers:i=[],llhls:s})=>{const o=new yq;t&&o.on("warn",t),e&&o.on("info",e),r.forEach(l=>o.addParser(l)),i.forEach(l=>o.addTagMapper(l)),o.push(n),o.end();const a=o.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(l){a.hasOwnProperty(l)&&delete a[l]}),a.segments&&a.segments.forEach(function(l){["parts","preloadHints"].forEach(function(d){l.hasOwnProperty(d)&&delete l[d]})})),!a.targetDuration){let l=10;a.segments&&a.segments.length&&(l=a.segments.reduce((d,g)=>Math.max(d,g.duration),0)),t&&t(`manifest has no targetDuration defaulting to ${l}`),a.targetDuration=l}const u=VO(a);if(u.length&&!a.partTargetDuration){const l=u.reduce((d,g)=>Math.max(d,g.duration),0);t&&(t(`manifest has no partTargetDuration defaulting to ${l}`),KO.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),a.partTargetDuration=l}return a})({onwarn:({message:r})=>this.logger_(`m3u8-parser warn for ${e}: ${r}`),oninfo:({message:r})=>this.logger_(`m3u8-parser info for ${e}: ${r}`),manifestString:n,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:n,url:r,id:i}){this.request=null,this.state="HAVE_METADATA";const s=n||this.parseManifest_({url:r,manifestString:e});s.lastRequest=Date.now(),YO({playlist:s,uri:r,id:i});const o=Ab(this.main,s);this.targetDuration=s.partTargetDuration||s.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Ib(this.media(),!!o)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),O().clearTimeout(this.mediaUpdateTimeout),O().clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new ZO,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,n){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(O().clearTimeout(this.finalRenditionTimeout),n){const o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=O().setTimeout(this.media.bind(this,e,!1),o))}const r=this.state,i=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),this.trigger("HAVE_MAIN_MANIFEST"===r?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(Ib(e,!0)),i){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(o,a)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=ig(e.resolvedUri,a),o)return this.playlistRequestError(this.request,e,r);this.haveMetadata({playlistString:a.responseText,url:e.uri,id:e.id}),this.trigger("HAVE_MAIN_MANIFEST"===r?"loadedmetadata":"mediachange")}})}}pause(){this.mediaUpdateTimeout&&(O().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(O().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const n=this.media();if(e){const r=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=O().setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},r)}else this.started?this.trigger(n&&!n.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(O().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=O().setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=O().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(e,n)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:n.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:n.responseText,code:2},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.src=ig(this.src,n);const r=this.parseManifest_({manifestString:n.responseText,url:this.src});this.setupInitialPlaylist(r)})}srcUri(){return"string"==typeof this.src?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists)return this.main=e,QO(this.main,this.srcUri()),e.playlists.forEach(r=>{r.segments=ek(r),r.segments.forEach(i=>{JO(i,r.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const n=this.srcUri()||O().location.href;this.main=((t,e)=>{const n=xb(0,e),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:O().location.href,resolvedUri:O().location.href,playlists:[{uri:e,id:n,resolvedUri:e,attributes:{}}]};return r.playlists[n]=r.playlists[0],r.playlists[e]=r.playlists[0],r})(0,n),this.haveMetadata({playlistObject:e,url:n,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}}const{xhr:UW}=$,Mb=function(t,e,n,r){const i="arraybuffer"===t.responseType?t.response:t.responseText;!e&&i&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=i.byteLength||i.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),n.headers&&(t.responseHeaders=n.headers),e&&"ETIMEDOUT"===e.code&&(t.timedout=!0),!e&&!t.aborted&&200!==n.statusCode&&206!==n.statusCode&&0!==n.statusCode&&(e=new Error("XHR Failed with a response of: "+(t&&(i||t.responseText)))),r(e,t)},nk=function(){const t=function e(n,r){n=Rt({timeout:45e3},n);const i=e.beforeRequest||$.Vhs.xhr.beforeRequest,s=e._requestCallbackSet||$.Vhs.xhr._requestCallbackSet||new Set,o=e._responseCallbackSet||$.Vhs.xhr._responseCallbackSet;i&&"function"==typeof i&&($.log.warn("beforeRequest is deprecated, use onRequest instead."),s.add(i));const a=!0===$.Vhs.xhr.original?UW:$.Vhs.xhr,u=((t,e)=>{if(!t||!t.size)return;let n=e;return t.forEach(r=>{n=r(n)}),n})(s,n);s.delete(i);const l=a(u||n,function(g,v){return((t,e,n,r)=>{!t||!t.size||t.forEach(i=>{i(e,n,r)})})(o,l,g,v),Mb(l,g,v,r)}),d=l.abort;return l.abort=function(){return l.aborted=!0,d.apply(l,arguments)},l.uri=n.uri,l.requestTime=Date.now(),l};return t.original=!0,t},Ob=function(t){const e={};return t.byterange&&(e.Range=function(t){let e;const n=t.offset;return e="bigint"==typeof t.offset||"bigint"==typeof t.length?O().BigInt(t.offset)+O().BigInt(t.length)-O().BigInt(1):t.offset+t.length-1,"bytes="+n+"-"+e}(t.byterange)),e},HW=function(t,e){return t.start(e)+"-"+t.end(e)},qW=function(t,e){const n=t.toString(16);return"00".substring(0,2-n.length)+n+(e%2?" ":"")},zW=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},rk=function(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];e[n]=kI(r)?{bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:r}),e},ag=function(t){const e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},ik=function(t){return t.resolvedUri},sk=t=>{const e=Array.prototype.slice.call(t),n=16;let i,s,r="";for(let o=0;o<e.length/n;o++)i=e.slice(o*n,o*n+n).map(qW).join(""),s=e.slice(o*n,o*n+n).map(zW).join(""),r+=i+" "+s+"\n";return r};var GW=Object.freeze({__proto__:null,createTransferableMessage:rk,initSegmentId:ag,segmentKeyId:ik,hexDump:sk,tagDump:({bytes:t})=>sk(t),textRanges:t=>{let n,e="";for(n=0;n<t.length;n++)e+=HW(t,n)+" ";return e}});const ak=({programTime:t,playlist:e,retryCount:n=2,seekTo:r,pauseAfterSeek:i=!0,tech:s,callback:o})=>{if(!o)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!e||!r)return o({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return o({message:"player must be playing a live stream to start buffering"});if(!(t=>{if(!t.segments||0===t.segments.length)return!1;for(let e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0})(e))return o({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const a=((t,e)=>{let n;try{n=new Date(t)}catch{return null}if(!e||!e.segments||0===e.segments.length)return null;let r=e.segments[0];if(n<new Date(r.dateTimeObject))return null;for(let u=0;u<e.segments.length-1&&(r=e.segments[u],!(n<new Date(e.segments[u+1].dateTimeObject)));u++);const i=e.segments[e.segments.length-1],s=i.dateTimeObject,o=i.videoTimingInfo?(t=>t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds)(i.videoTimingInfo):i.duration+.25*i.duration;return n>new Date(s.getTime()+1e3*o)?null:(n>new Date(s)&&(r=i),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:Mr.duration(e,e.mediaSequence+e.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})})(t,e);if(!a)return o({message:`${t} was not found in the stream`});const u=a.segment,l=((t,e)=>{let n,r;try{n=new Date(t),r=new Date(e)}catch{}const i=n.getTime();return(r.getTime()-i)/1e3})(u.dateTimeObject,t);if("estimate"===a.type)return 0===n?o({message:`${t} is not buffered yet. Try again`}):(r(a.estimatedStart+l),void s.one("seeked",()=>{ak({programTime:t,playlist:e,retryCount:n-1,seekTo:r,pauseAfterSeek:i,tech:s,callback:o})}));const d=u.start+l;s.one("seeked",()=>o(null,s.currentTime())),i&&s.pause(),r(d)},kb=(t,e)=>{if(4===t.readyState)return e()},{EventTarget:tX}=$,uk=function(t,e){if(!tk(t,e)||t.sidx&&e.sidx&&(t.sidx.offset!==e.sidx.offset||t.sidx.length!==e.sidx.length))return!1;if(!t.sidx&&e.sidx||t.sidx&&!e.sidx||t.segments&&!e.segments||!t.segments&&e.segments)return!1;if(!t.segments&&!e.segments)return!0;for(let n=0;n<t.segments.length;n++){const r=t.segments[n],i=e.segments[n];if(r.uri!==i.uri)return!1;if(!r.byterange&&!i.byterange)continue;const s=r.byterange,o=i.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}return!0},nX=(t,e,n,r)=>`placeholder-uri-${t}-${e}-${r.attributes.NAME||n}`,oX=(t,e)=>(!t.map&&!e.map||!(!t.map||!e.map||t.map.byterange.offset!==e.map.byterange.offset||t.map.byterange.length!==e.map.byterange.length))&&t.uri===e.uri&&t.byterange.offset===e.byterange.offset&&t.byterange.length===e.byterange.length,lk=(t,e)=>{const n={};for(const r in t){const s=t[r].sidx;if(s){const o=Dp(s);if(!e[o])break;oX(e[o].sidxInfo,s)&&(n[o]=e[o])}}return n};class Pb extends tX{constructor(e,n,r={},i){super(),this.mainPlaylistLoader_=i||this,i||(this.isMain_=!0);const{withCredentials:s=!1}=r;if(this.vhs_=n,this.withCredentials=s,this.addMetadataToTextTrack=r.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.media().attributes.serviceLocation||this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=li("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,n,r){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2}:e,r&&(this.state=r),this.trigger("error"),!0):void 0)}addSidxSegments_(e,n,r){const i=e.sidx&&Dp(e.sidx);if(!e.sidx||!i||this.mainPlaylistLoader_.sidxMapping_[i])return void(this.mediaRequest_=O().setTimeout(()=>r(!1),0));const s=ig(e.sidx.resolvedUri),o=(a,u)=>{if(this.requestErrored_(a,u,n))return;const l=this.mainPlaylistLoader_.sidxMapping_;let d;try{d=kz()(Fe(u.response).subarray(8))}catch(g){return void this.requestErrored_(g,u,n)}return l[i]={sidxInfo:e.sidx,sidx:d},y_(e,d,e.sidx.resolvedUri),r(!0)};this.request=((t,e,n)=>{let i,r=[],s=!1;const o=function(d,g,v,b){return g.abort(),s=!0,n(d,g,v,b)},a=function(d,g){if(s)return;if(d)return o(d,g,"",r);const v=g.responseText.substring(r&&r.byteLength||0,g.responseText.length);if(r=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if((n=n.filter(function(a){return a&&(a.byteLength||a.length)&&"string"!=typeof a})).length<=1)return Fe(n[0]);var i=n.reduce(function(a,u,l){return a+(u.byteLength||u.length)},0),s=new Uint8Array(i),o=0;return n.forEach(function(a){a=Fe(a),s.set(a,o),o+=a.byteLength}),s}(r,NI(v,!0)),i=i||od(r),r.length<10||i&&r.length<i+2)return kb(g,()=>o(d,g,"",r));const b=w_(r);return"ts"===b&&r.length<188||!b&&r.length<376?kb(g,()=>o(d,g,"",r)):o(null,g,b,r)},l=e({uri:t,beforeSend(d){d.overrideMimeType("text/plain; charset=x-user-defined"),d.addEventListener("progress",function({}){return Mb(d,null,{statusCode:d.status},a)})}},function(d,g){return Mb(l,d,g,a)});return l})(s,this.vhs_.xhr,(a,u,l,d)=>{if(a)return o(a,u);if(!l||"mp4"!==l)return o({status:u.status,message:`Unsupported ${l||"unknown"} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u);const{offset:g,length:v}=e.sidx.byterange;if(d.length>=v+g)return o(a,{response:d.subarray(g,g+v),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",headers:Ob({byterange:e.sidx.byterange})},o)})}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},O().clearTimeout(this.minimumUpdatePeriodTimeout_),O().clearTimeout(this.mediaRequest_),O().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const n=this.state;if("string"==typeof e){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const r=!this.media_||e.id!==this.media_.id;if(r&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));r&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,i=>{this.haveMetadata({startingState:n,playlist:e})}))}haveMetadata({startingState:e,playlist:n}){this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),this.trigger("HAVE_MAIN_MANIFEST"===e?"loadedmetadata":"mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),O().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(O().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(e){O().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const n=this.media();if(e){const r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=O().setTimeout(()=>this.load(),r)}else this.started?n&&!n.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_((e,n)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])}):this.mediaRequest_=O().setTimeout(()=>this.haveMain_(),0)}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(n,r)=>{if(this.requestErrored_(n,r))return void("HAVE_NOTHING"===this.state&&(this.started=!1));const i=r.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=r.responseText,this.mainLoaded_=r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):Date.now(),this.mainPlaylistLoader_.srcUrl=ig(this.mainPlaylistLoader_.srcUrl,r),i?(this.handleMain_(),void this.syncClientServerClock_(()=>e(r,i))):e(r,i)})}syncClientServerClock_(e){const n=(t=>(t=>{const e=rn(t,"UTCTiming")[0];if(!e)return null;const n=wn(e);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n})(XI(t)))(this.mainPlaylistLoader_.mainXml_);return null===n?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.mainPlaylistLoader_.clientOffset_=n.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:zr(this.mainPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},(r,i)=>{if(!this.request)return;if(r)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let s;s="HEAD"===n.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):this.mainLoaded_:Date.parse(i.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()}))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main;let n=(({mainXml:t,srcUrl:e,clientOffset:n,sidxMapping:r,previousManifest:i})=>{const s=((t,e={})=>{const n=((t,e={})=>{const{manifestUri:n="",NOW:r=Date.now(),clientOffset:i=0,eventHandler:s=function(){}}=e,o=rn(t,"Period");if(!o.length)throw new Error("INVALID_NUMBER_OF_PERIOD");const a=rn(t,"Location"),u=wn(t),l=Sp([{baseUrl:n}],rn(t,"BaseURL")),d=rn(t,"ContentSteering");u.type=u.type||"static",u.sourceDuration=u.mediaPresentationDuration||0,u.NOW=r,u.clientOffset=i,a.length&&(u.locations=a.map(sd));const g=[];return o.forEach((v,b)=>{const _=wn(v),E=g[b-1];_.start=(({attributes:t,priorPeriodAttributes:e,mpdType:n})=>"number"==typeof t.start?t.start:e&&"number"==typeof e.start&&"number"==typeof e.duration?e.start+e.duration:e||"static"!==n?null:0)({attributes:_,priorPeriodAttributes:E?E.attributes:null,mpdType:u.type}),g.push({node:v,attributes:_})}),{locations:u.locations,contentSteeringInfo:Sz(d,s),representationInfo:Nu(g.map(Dz(u,l))),eventStream:Nu(g.map(Cz))}})(XI(t),e),r=(t=>t.map(pz))(n.representationInfo);return oz({dashPlaylists:r,locations:n.locations,contentSteering:n.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:n.eventStream})})(t,{manifestUri:e,clientOffset:n,sidxMapping:r,previousManifest:i});return QO(s,e,nX),s})({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(n=((t,e,n)=>{let r=!0,i=Rt(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const o=e.playlists[s];if(o.sidx){const u=Dp(o.sidx);n&&n[u]&&n[u].sidx&&y_(o,n[u].sidx,o.sidx.resolvedUri)}const a=Ab(i,o,uk);a&&(i=a,r=!1)}return il(e,(s,o,a,u)=>{if(s.playlists&&s.playlists.length){const l=s.playlists[0].id,d=Ab(i,s.playlists[0],uk);d&&(i=d,u in i.mediaGroups[o][a]||(i.mediaGroups[o][a][u]=s),i.mediaGroups[o][a][u].playlists[0]=i.playlists[l],r=!1)}}),((t,e)=>{il(t,(n,r,i,s)=>{s in e.mediaGroups[r][i]||delete t.mediaGroups[r][i][s]})})(i,e),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(r=!1),r?null:i})(e,n,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=n||e;const r=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return r&&r!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=r),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(n),!!n}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(O().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let n=e.main&&e.main.minimumUpdatePeriod;0===n&&(e.media()?n=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof n||n<=0?n<0&&this.logger_(`found invalid minimumUpdatePeriod of ${n}, not setting a timeout`):this.createMUPTimeout_(n)}createMUPTimeout_(e){const n=this.mainPlaylistLoader_;n.minimumUpdatePeriodTimeout_=O().setTimeout(()=>{n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,n)=>{n&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((t,e)=>{let r=lk(t.playlists,e);return il(t,(i,s,o,a)=>{i.playlists&&i.playlists.length&&(r=Rt(r,lk(i.playlists,e)))}),r})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,r=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const n=this.mainPlaylistLoader_.main.playlists,r=!this.media_||this.media_!==n[e];if(r?this.media_=n[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const i=()=>{this.media().endList||(this.mediaUpdateTimeout=O().setTimeout(()=>{this.trigger("mediaupdatetimeout"),i()},Ib(this.media(),!!r)))};i()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const n=this.mainPlaylistLoader_.main.eventStream.map(r=>({cueTime:r.start,frames:[{data:r.messageData}]}));this.addMetadataToTextTrack("EventStream",n,this.mainPlaylistLoader_.main.duration)}}}var Rn={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const ck=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},dk=function(t){return function(){const e=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{const n=new BlobBuilder;return n.append(t),URL.createObjectURL(n.getBlob())}}(t),n=ck(new Worker(e));n.objURL=e;const r=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(e),r.call(this)},n}},hk=function(t){return`var browserWorkerPolyFill = ${ck.toString()};\nbrowserWorkerPolyFill(self);\n`+t},fk=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},cX=hk(fk(function(){var t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var c={};this.on=function(h,p){c[h]||(c[h]=[]),c[h]=c[h].concat(p)},this.off=function(h,p){var f;return!!c[h]&&(f=c[h].indexOf(p),c[h]=c[h].slice(),c[h].splice(f,1),f>-1)},this.trigger=function(h){var p,f,m,y;if(p=c[h])if(2===arguments.length)for(m=p.length,f=0;f<m;++f)p[f].call(this,arguments[1]);else{for(y=[],f=arguments.length,f=1;f<arguments.length;++f)y.push(arguments[f]);for(m=p.length,f=0;f<m;++f)p[f].apply(this,y)}},this.dispose=function(){c={}}}};e.prototype.pipe=function(c){return this.on("data",function(h){c.push(h)}),this.on("done",function(h){c.flush(h)}),this.on("partialdone",function(h){c.partialFlush(h)}),this.on("endedtimeline",function(h){c.endTimeline(h)}),this.on("reset",function(h){c.reset(h)}),c},e.prototype.push=function(c){this.trigger("data",c)},e.prototype.flush=function(c){this.trigger("done",c)},e.prototype.partialFlush=function(c){this.trigger("partialdone",c)},e.prototype.endTimeline=function(c){this.trigger("endedtimeline",c)},e.prototype.reset=function(c){this.trigger("reset",c)};var a,u,l,d,g,v,b,_,E,A,P,x,B,F,R,Z,we,st,ft,sn,Ln,yn,Be,Ut,cs,Vs,_o,aa,ua,la,ca,da,yg,rP,iP,sP,c,h,n=e,r=Math.pow(2,32),s={getUint64:function(c){var p,h=new DataView(c.buffer,c.byteOffset,c.byteLength);return h.getBigUint64?(p=h.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(p):p:h.getUint32(0)*r+h.getUint32(4)},MAX_UINT32:r},o=s.MAX_UINT32;(function(){var c;if(Be={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(c in Be)Be.hasOwnProperty(c)&&(Be[c]=[c.charCodeAt(0),c.charCodeAt(1),c.charCodeAt(2),c.charCodeAt(3)]);Ut=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Vs=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),cs=new Uint8Array([0,0,0,1]),_o=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),aa=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ua={video:_o,audio:aa},da=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ca=new Uint8Array([0,0,0,0,0,0,0,0]),yg=new Uint8Array([0,0,0,0,0,0,0,0]),rP=yg,iP=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),sP=yg,la=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),a=function(c){var f,m,h=[],p=0;for(f=1;f<arguments.length;f++)h.push(arguments[f]);for(f=h.length;f--;)p+=h[f].byteLength;for(m=new Uint8Array(p+8),new DataView(m.buffer,m.byteOffset,m.byteLength).setUint32(0,m.byteLength),m.set(c,4),f=0,p=8;f<h.length;f++)m.set(h[f],p),p+=h[f].byteLength;return m},u=function(){return a(Be.dinf,a(Be.dref,da))},l=function(c){return a(Be.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,c.audioobjecttype<<3|c.samplingfrequencyindex>>>1,c.samplingfrequencyindex<<7|c.channelcount<<3,6,1,2]))},d=function(){return a(Be.ftyp,Ut,cs,Ut,Vs)},Z=function(c){return a(Be.hdlr,ua[c])},g=function(c){return a(Be.mdat,c)},R=function(c){var h=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,c.duration>>>24&255,c.duration>>>16&255,c.duration>>>8&255,255&c.duration,85,196,0,0]);return c.samplerate&&(h[12]=c.samplerate>>>24&255,h[13]=c.samplerate>>>16&255,h[14]=c.samplerate>>>8&255,h[15]=255&c.samplerate),a(Be.mdhd,h)},F=function(c){return a(Be.mdia,R(c),Z(c.type),b(c))},v=function(c){return a(Be.mfhd,new Uint8Array([0,0,0,0,(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c]))},b=function(c){return a(Be.minf,"video"===c.type?a(Be.vmhd,la):a(Be.smhd,ca),u(),st(c))},_=function(c,h){for(var p=[],f=h.length;f--;)p[f]=sn(h[f]);return a.apply(null,[Be.moof,v(c)].concat(p))},E=function(c){for(var h=c.length,p=[];h--;)p[h]=x(c[h]);return a.apply(null,[Be.moov,P(4294967295)].concat(p).concat(A(c)))},A=function(c){for(var h=c.length,p=[];h--;)p[h]=Ln(c[h]);return a.apply(null,[Be.mvex].concat(p))},P=function(c){var h=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a(Be.mvhd,h)},we=function(c){var f,m,h=c.samples||[],p=new Uint8Array(4+h.length);for(m=0;m<h.length;m++)p[m+4]=(f=h[m].flags).dependsOn<<4|f.isDependedOn<<2|f.hasRedundancy;return a(Be.sdtp,p)},st=function(c){return a(Be.stbl,ft(c),a(Be.stts,sP),a(Be.stsc,rP),a(Be.stsz,iP),a(Be.stco,yg))},ft=function(p){return a(Be.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===p.type?c(p):h(p))},c=function(p){var S,M,f=p.sps||[],m=p.pps||[],y=[],D=[];for(S=0;S<f.length;S++)y.push((65280&f[S].byteLength)>>>8),y.push(255&f[S].byteLength),y=y.concat(Array.prototype.slice.call(f[S]));for(S=0;S<m.length;S++)D.push((65280&m[S].byteLength)>>>8),D.push(255&m[S].byteLength),D=D.concat(Array.prototype.slice.call(m[S]));if(M=[Be.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&p.width)>>8,255&p.width,(65280&p.height)>>8,255&p.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a(Be.avcC,new Uint8Array([1,p.profileIdc,p.profileCompatibility,p.levelIdc,255].concat([f.length],y,[m.length],D))),a(Be.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],p.sarRatio){var k=p.sarRatio[0],L=p.sarRatio[1];M.push(a(Be.pasp,new Uint8Array([(4278190080&k)>>24,(16711680&k)>>16,(65280&k)>>8,255&k,(4278190080&L)>>24,(16711680&L)>>16,(65280&L)>>8,255&L])))}return a.apply(null,M)},h=function(p){return a(Be.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&p.channelcount)>>8,255&p.channelcount,(65280&p.samplesize)>>8,255&p.samplesize,0,0,0,0,(65280&p.samplerate)>>8,255&p.samplerate,0,0]),l(p))},B=function(c){var h=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&c.id)>>24,(16711680&c.id)>>16,(65280&c.id)>>8,255&c.id,0,0,0,0,(4278190080&c.duration)>>24,(16711680&c.duration)>>16,(65280&c.duration)>>8,255&c.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&c.width)>>8,255&c.width,0,0,(65280&c.height)>>8,255&c.height,0,0]);return a(Be.tkhd,h)},sn=function(c){var h,p,f,m,D,S;return h=a(Be.tfhd,new Uint8Array([0,0,0,58,(4278190080&c.id)>>24,(16711680&c.id)>>16,(65280&c.id)>>8,255&c.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),D=Math.floor(c.baseMediaDecodeTime/o),S=Math.floor(c.baseMediaDecodeTime%o),p=a(Be.tfdt,new Uint8Array([1,0,0,0,D>>>24&255,D>>>16&255,D>>>8&255,255&D,S>>>24&255,S>>>16&255,S>>>8&255,255&S])),"audio"===c.type?(f=yn(c,92),a(Be.traf,h,p,f)):(m=we(c),f=yn(c,m.length+92),a(Be.traf,h,p,f,m))},x=function(c){return c.duration=c.duration||4294967295,a(Be.trak,B(c),F(c))},Ln=function(c){var h=new Uint8Array([0,0,0,0,(4278190080&c.id)>>24,(16711680&c.id)>>16,(65280&c.id)>>8,255&c.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==c.type&&(h[h.length-1]=0),a(Be.trex,h)},function(){var c,h,p;p=function(f,m){var y=0,D=0,S=0,M=0;return f.length&&(void 0!==f[0].duration&&(y=1),void 0!==f[0].size&&(D=2),void 0!==f[0].flags&&(S=4),void 0!==f[0].compositionTimeOffset&&(M=8)),[0,0,y|D|S|M,1,(4278190080&f.length)>>>24,(16711680&f.length)>>>16,(65280&f.length)>>>8,255&f.length,(4278190080&m)>>>24,(16711680&m)>>>16,(65280&m)>>>8,255&m]},h=function(f,m){var y,D,S,M,k,L;for(S=p(M=f.samples||[],m+=20+16*M.length),(D=new Uint8Array(S.length+16*M.length)).set(S),y=S.length,L=0;L<M.length;L++)D[y++]=(4278190080&(k=M[L]).duration)>>>24,D[y++]=(16711680&k.duration)>>>16,D[y++]=(65280&k.duration)>>>8,D[y++]=255&k.duration,D[y++]=(4278190080&k.size)>>>24,D[y++]=(16711680&k.size)>>>16,D[y++]=(65280&k.size)>>>8,D[y++]=255&k.size,D[y++]=k.flags.isLeading<<2|k.flags.dependsOn,D[y++]=k.flags.isDependedOn<<6|k.flags.hasRedundancy<<4|k.flags.paddingValue<<1|k.flags.isNonSyncSample,D[y++]=61440&k.flags.degradationPriority,D[y++]=15&k.flags.degradationPriority,D[y++]=(4278190080&k.compositionTimeOffset)>>>24,D[y++]=(16711680&k.compositionTimeOffset)>>>16,D[y++]=(65280&k.compositionTimeOffset)>>>8,D[y++]=255&k.compositionTimeOffset;return a(Be.trun,D)},c=function(f,m){var y,D,S,M,k,L;for(S=p(M=f.samples||[],m+=20+8*M.length),(y=new Uint8Array(S.length+8*M.length)).set(S),D=S.length,L=0;L<M.length;L++)y[D++]=(4278190080&(k=M[L]).duration)>>>24,y[D++]=(16711680&k.duration)>>>16,y[D++]=(65280&k.duration)>>>8,y[D++]=255&k.duration,y[D++]=(4278190080&k.size)>>>24,y[D++]=(16711680&k.size)>>>16,y[D++]=(65280&k.size)>>>8,y[D++]=255&k.size;return a(Be.trun,y)},yn=function(f,m){return"audio"===f.type?c(f,m):h(f,m)}}();var $b,qb,zb,vg,Gb,aP,uP,lP,iY={ftyp:d,mdat:g,moof:_,moov:E,initSegment:function(c){var f,h=d(),p=E(c);return(f=new Uint8Array(h.byteLength+p.byteLength)).set(h),f.set(p,h.byteLength),f}},oP=function(c,h){var p={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return p.dataOffset=h,p.compositionTimeOffset=c.pts-c.dts,p.duration=c.duration,p.size=4*c.length,p.size+=c.byteLength,c.keyFrame&&(p.flags.dependsOn=2,p.flags.isNonSyncSample=0),p},fY={groupNalsIntoFrames:function(c){var h,p,f=[],m=[];for(m.byteLength=0,m.nalCount=0,m.duration=0,f.byteLength=0,h=0;h<c.length;h++)"access_unit_delimiter_rbsp"===(p=c[h]).nalUnitType?(f.length&&(f.duration=p.dts-f.dts,m.byteLength+=f.byteLength,m.nalCount+=f.length,m.duration+=f.duration,m.push(f)),(f=[p]).byteLength=p.data.byteLength,f.pts=p.pts,f.dts=p.dts):("slice_layer_without_partitioning_rbsp_idr"===p.nalUnitType&&(f.keyFrame=!0),f.duration=p.dts-f.dts,f.byteLength+=p.data.byteLength,f.push(p));return m.length&&(!f.duration||f.duration<=0)&&(f.duration=m[m.length-1].duration),m.byteLength+=f.byteLength,m.nalCount+=f.length,m.duration+=f.duration,m.push(f),m},groupFramesIntoGops:function(c){var h,p,f=[],m=[];for(f.byteLength=0,f.nalCount=0,f.duration=0,f.pts=c[0].pts,f.dts=c[0].dts,m.byteLength=0,m.nalCount=0,m.duration=0,m.pts=c[0].pts,m.dts=c[0].dts,h=0;h<c.length;h++)(p=c[h]).keyFrame?(f.length&&(m.push(f),m.byteLength+=f.byteLength,m.nalCount+=f.nalCount,m.duration+=f.duration),(f=[p]).nalCount=p.length,f.byteLength=p.byteLength,f.pts=p.pts,f.dts=p.dts,f.duration=p.duration):(f.duration+=p.duration,f.nalCount+=p.length,f.byteLength+=p.byteLength,f.push(p));return m.length&&f.duration<=0&&(f.duration=m[m.length-1].duration),m.byteLength+=f.byteLength,m.nalCount+=f.nalCount,m.duration+=f.duration,m.push(f),m},extendFirstKeyFrame:function(c){var h;return!c[0][0].keyFrame&&c.length>1&&(h=c.shift(),c.byteLength-=h.byteLength,c.nalCount-=h.nalCount,c[0][0].dts=h.dts,c[0][0].pts=h.pts,c[0][0].duration+=h.duration),c},generateSampleTable:function(c,h){var p,f,m,y,S=h||0,M=[];for(p=0;p<c.length;p++)for(y=c[p],f=0;f<y.length;f++)S+=(m=oP(y[f],S)).size,M.push(m);return M},concatenateNalData:function(c){var h,p,f,m,y,D,S=0,V=new Uint8Array(c.byteLength+4*c.nalCount),Te=new DataView(V.buffer);for(h=0;h<c.length;h++)for(m=c[h],p=0;p<m.length;p++)for(y=m[p],f=0;f<y.length;f++)Te.setUint32(S,(D=y[f]).data.byteLength),V.set(D.data,S+=4),S+=D.data.byteLength;return V},generateSampleTableForFrame:function(c,h){var p,m=[];return p=oP(c,h||0),m.push(p),m},concatenateNalDataForFrame:function(c){var h,p,f=0,S=new Uint8Array(c.byteLength+4*c.length),M=new DataView(S.buffer);for(h=0;h<c.length;h++)M.setUint32(f,(p=c[h]).data.byteLength),S.set(p.data,f+=4),f+=p.data.byteLength;return S}},bo=[33,16,5,32,164,27],jb=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],kt=function(c){for(var h=[];c--;)h.push(0);return h};qb=function(c){return 9e4*c},zb=function(c,h){return c*h},vg=function(c){return c/9e4},Gb=function(c,h){return c/h},aP=function(c,h){return qb(Gb(c,h))},uP=function(c,h){return zb(vg(c),h)},lP=function(c,h,p){return vg(p?c:c-h)};var Qt={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:qb,secondsToAudioTs:zb,videoTsToSeconds:vg,audioTsToSeconds:Gb,audioTsToVideoTs:aP,videoTsToAudioTs:uP,metadataTsToSeconds:lP},_g=Qt,CY={prefixWithSilence:function(c,h,p,f){var m,k,L,V,y=0,D=0,S=0,M=0;if(h.length&&(m=_g.audioTsToVideoTs(c.baseMediaDecodeTime,c.samplerate),y=Math.ceil(_g.ONE_SECOND_IN_TS/(c.samplerate/1024)),p&&f&&(D=m-Math.max(p,f),M=(S=Math.floor(D/y))*y),!(S<1||M>_g.ONE_SECOND_IN_TS/2))){for((k=function(){if(!$b){var c={96e3:[bo,[227,64],kt(154),[56]],88200:[bo,[231],kt(170),[56]],64e3:[bo,[248,192],kt(240),[56]],48e3:[bo,[255,192],kt(268),[55,148,128],kt(54),[112]],44100:[bo,[255,192],kt(268),[55,163,128],kt(84),[112]],32e3:[bo,[255,192],kt(268),[55,234],kt(226),[112]],24e3:[bo,[255,192],kt(268),[55,255,128],kt(268),[111,112],kt(126),[224]],16e3:[bo,[255,192],kt(268),[55,255,128],kt(268),[111,255],kt(269),[223,108],kt(195),[1,192]],12e3:[jb,kt(268),[3,127,248],kt(268),[6,255,240],kt(268),[13,255,224],kt(268),[27,253,128],kt(259),[56]],11025:[jb,kt(268),[3,127,248],kt(268),[6,255,240],kt(268),[13,255,224],kt(268),[27,255,192],kt(268),[55,175,128],kt(108),[112]],8e3:[jb,kt(268),[3,121,16],kt(47),[7]]};$b=function(c){return Object.keys(c).reduce(function(h,p){return h[p]=new Uint8Array(c[p].reduce(function(f,m){return f.concat(m)},[])),h},{})}(c)}return $b}()[c.samplerate])||(k=h[0].data),L=0;L<S;L++)h.splice(0,0,{data:k,dts:(V=h[0]).dts-y,pts:V.pts-y});return c.baseMediaDecodeTime-=Math.floor(_g.videoTsToAudioTs(M,c.samplerate)),M}},trimAdtsFramesByEarliestDts:function(c,h,p){return h.minSegmentDts>=p?c:(h.minSegmentDts=1/0,c.filter(function(f){return f.dts>=p&&(h.minSegmentDts=Math.min(h.minSegmentDts,f.dts),h.minSegmentPts=h.minSegmentDts,!0)}))},generateSampleTable:function(c){var h,f=[];for(h=0;h<c.length;h++)f.push({size:c[h].data.byteLength,duration:1024});return f},concatenateFrameData:function(c){var h,p,f=0,m=new Uint8Array(function(c){var h,f=0;for(h=0;h<c.length;h++)f+=c[h].data.byteLength;return f}(c));for(h=0;h<c.length;h++)m.set((p=c[h]).data,f),f+=p.data.byteLength;return m}},EY=Qt.ONE_SECOND_IN_TS,xY={clearDtsInfo:function(c){delete c.minSegmentDts,delete c.maxSegmentDts,delete c.minSegmentPts,delete c.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(c,h){var p,m=c.minSegmentDts;return h||(m-=c.timelineStartInfo.dts),p=c.timelineStartInfo.baseMediaDecodeTime,p+=m,p=Math.max(0,p),"audio"===c.type&&(p*=c.samplerate/EY,p=Math.floor(p)),p},collectDtsInfo:function(c,h){"number"==typeof h.pts&&(void 0===c.timelineStartInfo.pts&&(c.timelineStartInfo.pts=h.pts),c.minSegmentPts=void 0===c.minSegmentPts?h.pts:Math.min(c.minSegmentPts,h.pts),c.maxSegmentPts=void 0===c.maxSegmentPts?h.pts:Math.max(c.maxSegmentPts,h.pts)),"number"==typeof h.dts&&(void 0===c.timelineStartInfo.dts&&(c.timelineStartInfo.dts=h.dts),c.minSegmentDts=void 0===c.minSegmentDts?h.dts:Math.min(c.minSegmentDts,h.dts),c.maxSegmentDts=void 0===c.maxSegmentDts?h.dts:Math.max(c.maxSegmentDts,h.dts))}},dP={parseSei:function(c){for(var h=0,p={payloadType:-1,payloadSize:0},f=0,m=0;h<c.byteLength&&128!==c[h];){for(;255===c[h];)f+=255,h++;for(f+=c[h++];255===c[h];)m+=255,h++;if(m+=c[h++],!p.payload&&4===f){if("GA94"===String.fromCharCode(c[h+3],c[h+4],c[h+5],c[h+6])){p.payloadType=f,p.payloadSize=m,p.payload=c.subarray(h,h+m);break}p.payload=void 0}h+=m,f=0,m=0}return p},parseUserData:function(c){return 181!==c.payload[0]||49!=(c.payload[1]<<8|c.payload[2])||"GA94"!==String.fromCharCode(c.payload[3],c.payload[4],c.payload[5],c.payload[6])||3!==c.payload[7]?null:c.payload.subarray(8,c.payload.length-1)},parseCaptionPackets:function(c,h){var f,m,y,D,p=[];if(!(64&h[0]))return p;for(m=31&h[0],f=0;f<m;f++)D={type:3&h[2+(y=3*f)],pts:c},4&h[y+2]&&(D.ccData=h[y+3]<<8|h[y+4],p.push(D));return p},discardEmulationPreventionBytes:function(c){for(var m,y,h=c.byteLength,p=[],f=1;f<h-2;)0===c[f]&&0===c[f+1]&&3===c[f+2]?(p.push(f+2),f+=2):f++;if(0===p.length)return c;m=h-p.length,y=new Uint8Array(m);var D=0;for(f=0;f<m;D++,f++)D===p[0]&&(D++,p.shift()),y[f]=c[D];return y},USER_DATA_REGISTERED_ITU_T_T35:4},Wb=n,bg=dP,Or=function(c){c=c||{},Or.prototype.init.call(this),this.parse708captions_="boolean"!=typeof c.parse708captions||c.parse708captions,this.captionPackets_=[],this.ccStreams_=[new on(0,0),new on(0,1),new on(1,0),new on(1,1)],this.parse708captions_&&(this.cc708Stream_=new Vt({captionServices:c.captionServices})),this.reset(),this.ccStreams_.forEach(function(h){h.on("data",this.trigger.bind(this,"data")),h.on("partialdone",this.trigger.bind(this,"partialdone")),h.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Or.prototype=new Wb,Or.prototype.push=function(c){var h,p,f;if("sei_rbsp"===c.nalUnitType&&(h=bg.parseSei(c.escapedRBSP)).payload&&h.payloadType===bg.USER_DATA_REGISTERED_ITU_T_T35&&(p=bg.parseUserData(h))){if(c.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(c.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));f=bg.parseCaptionPackets(c.pts,p),this.captionPackets_=this.captionPackets_.concat(f),this.latestDts_!==c.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=c.dts}},Or.prototype.flushCCStreams=function(c){this.ccStreams_.forEach(function(h){return"flush"===c?h.flush():h.partialFlush()},this)},Or.prototype.flushStream=function(c){this.captionPackets_.length?(this.captionPackets_.forEach(function(h,p){h.presortIndex=p}),this.captionPackets_.sort(function(h,p){return h.pts===p.pts?h.presortIndex-p.presortIndex:h.pts-p.pts}),this.captionPackets_.forEach(function(h){h.type<2?this.dispatchCea608Packet(h):this.dispatchCea708Packet(h)},this),this.captionPackets_.length=0,this.flushCCStreams(c)):this.flushCCStreams(c)},Or.prototype.flush=function(){return this.flushStream("flush")},Or.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Or.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(c){c.reset()})},Or.prototype.dispatchCea608Packet=function(c){this.setsTextOrXDSActive(c)?this.activeCea608Channel_[c.type]=null:this.setsChannel1Active(c)?this.activeCea608Channel_[c.type]=0:this.setsChannel2Active(c)&&(this.activeCea608Channel_[c.type]=1),null!==this.activeCea608Channel_[c.type]&&this.ccStreams_[(c.type<<1)+this.activeCea608Channel_[c.type]].push(c)},Or.prototype.setsChannel1Active=function(c){return 4096==(30720&c.ccData)},Or.prototype.setsChannel2Active=function(c){return 6144==(30720&c.ccData)},Or.prototype.setsTextOrXDSActive=function(c){return 256==(28928&c.ccData)||4138==(30974&c.ccData)||6186==(30974&c.ccData)},Or.prototype.dispatchCea708Packet=function(c){this.parse708captions_&&this.cc708Stream_.push(c)};var PY={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Tg=function(c){return 32<=c&&c<=127||160<=c&&c<=255},js=function(c){this.windowNum=c,this.reset()};js.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},js.prototype.getText=function(){return this.rows.join("\n")},js.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},js.prototype.newLine=function(c){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(c),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},js.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},js.prototype.addText=function(c){this.rows[this.rowIdx]+=c},js.prototype.backspace=function(){if(!this.isEmpty()){var c=this.rows[this.rowIdx];this.rows[this.rowIdx]=c.substr(0,c.length-1)}};var Cg=function(c,h,p){this.serviceNum=c,this.text="",this.currentWindow=new js(-1),this.windows=[],this.stream=p,"string"==typeof h&&this.createTextDecoder(h)};Cg.prototype.init=function(c,h){this.startPts=c;for(var p=0;p<8;p++)this.windows[p]=new js(p),"function"==typeof h&&(this.windows[p].beforeRowOverflow=h)},Cg.prototype.setCurrentWindow=function(c){this.currentWindow=this.windows[c]},Cg.prototype.createTextDecoder=function(c){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(c)}catch(h){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+c+" encoding. "+h})}};var Vt=function(c){c=c||{},Vt.prototype.init.call(this);var m,h=this,p=c.captionServices||{},f={};Object.keys(p).forEach(y=>{m=p[y],/^SERVICE/.test(y)&&(f[y]=m.encoding)}),this.serviceEncodings=f,this.current708Packet=null,this.services={},this.push=function(y){3===y.type?(h.new708Packet(),h.add708Bytes(y)):(null===h.current708Packet&&h.new708Packet(),h.add708Bytes(y))}};Vt.prototype=new Wb,Vt.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Vt.prototype.add708Bytes=function(c){var h=c.ccData,p=h>>>8,f=255&h;this.current708Packet.ptsVals.push(c.pts),this.current708Packet.data.push(p),this.current708Packet.data.push(f)},Vt.prototype.push708Packet=function(){var c=this.current708Packet,h=c.data,p=null,f=null,m=0,y=h[m++];for(c.seq=y>>6,c.sizeCode=63&y;m<h.length;m++)f=31&(y=h[m++]),7==(p=y>>5)&&f>0&&(p=y=h[m++]),this.pushServiceBlock(p,m,f),f>0&&(m+=f-1)},Vt.prototype.pushServiceBlock=function(c,h,p){var f,m=h,y=this.current708Packet.data,D=this.services[c];for(D||(D=this.initService(c,m));m<h+p&&m<y.length;m++)Tg(f=y[m])?m=this.handleText(m,D):24===f?m=this.multiByteCharacter(m,D):16===f?m=this.extendedCommands(m,D):128<=f&&f<=135?m=this.setCurrentWindow(m,D):152<=f&&f<=159?m=this.defineWindow(m,D):136===f?m=this.clearWindows(m,D):140===f?m=this.deleteWindows(m,D):137===f?m=this.displayWindows(m,D):138===f?m=this.hideWindows(m,D):139===f?m=this.toggleWindows(m,D):151===f?m=this.setWindowAttributes(m,D):144===f?m=this.setPenAttributes(m,D):145===f?m=this.setPenColor(m,D):146===f?m=this.setPenLocation(m,D):143===f?D=this.reset(m,D):8===f?D.currentWindow.backspace():12===f?D.currentWindow.clearText():13===f?D.currentWindow.pendingNewLine=!0:14===f?D.currentWindow.clearText():141===f&&m++},Vt.prototype.extendedCommands=function(c,h){var f=this.current708Packet.data[++c];return Tg(f)&&(c=this.handleText(c,h,{isExtended:!0})),c},Vt.prototype.getPts=function(c){return this.current708Packet.ptsVals[Math.floor(c/2)]},Vt.prototype.initService=function(c,h){var f,m,p=this;return(f="SERVICE"+c)in this.serviceEncodings&&(m=this.serviceEncodings[f]),this.services[c]=new Cg(c,m,p),this.services[c].init(this.getPts(h),function(y){p.flushDisplayed(y,p.services[c])}),this.services[c]},Vt.prototype.handleText=function(c,h,p){var L,V,f=p&&p.isExtended,m=p&&p.isMultiByte,y=this.current708Packet.data,D=f?4096:0,S=y[c],k=h.currentWindow;if(m?(V=[S,y[c+1]],c++):V=[S],h.textDecoder_&&!f)L=h.textDecoder_.decode(new Uint8Array(V));else if(m){const G=function Te(G){return G.map(He=>("0"+(255&He).toString(16)).slice(-2)).join("")}(V);L=String.fromCharCode(parseInt(G,16))}else L=function(c){var h=PY[c]||c;return 4096&c&&c===h?"":String.fromCharCode(h)}(D|S);return k.pendingNewLine&&!k.isEmpty()&&k.newLine(this.getPts(c)),k.pendingNewLine=!1,k.addText(L),c},Vt.prototype.multiByteCharacter=function(c,h){var p=this.current708Packet.data,m=p[c+2];return Tg(p[c+1])&&Tg(m)&&(c=this.handleText(++c,h,{isMultiByte:!0})),c},Vt.prototype.setCurrentWindow=function(c,h){return h.setCurrentWindow(7&this.current708Packet.data[c]),c},Vt.prototype.defineWindow=function(c,h){var p=this.current708Packet.data,f=p[c];h.setCurrentWindow(7&f);var y=h.currentWindow;return f=p[++c],y.visible=(32&f)>>5,y.rowLock=(16&f)>>4,y.columnLock=(8&f)>>3,y.priority=7&f,f=p[++c],y.relativePositioning=(128&f)>>7,y.anchorVertical=127&f,f=p[++c],y.anchorHorizontal=f,f=p[++c],y.anchorPoint=(240&f)>>4,y.rowCount=15&f,f=p[++c],y.columnCount=63&f,f=p[++c],y.windowStyle=(56&f)>>3,y.penStyle=7&f,y.virtualRowCount=y.rowCount+1,c},Vt.prototype.setWindowAttributes=function(c,h){var p=this.current708Packet.data,f=p[c],m=h.currentWindow.winAttr;return f=p[++c],m.fillOpacity=(192&f)>>6,m.fillRed=(48&f)>>4,m.fillGreen=(12&f)>>2,m.fillBlue=3&f,f=p[++c],m.borderType=(192&f)>>6,m.borderRed=(48&f)>>4,m.borderGreen=(12&f)>>2,m.borderBlue=3&f,f=p[++c],m.borderType+=(128&f)>>5,m.wordWrap=(64&f)>>6,m.printDirection=(48&f)>>4,m.scrollDirection=(12&f)>>2,m.justify=3&f,f=p[++c],m.effectSpeed=(240&f)>>4,m.effectDirection=(12&f)>>2,m.displayEffect=3&f,c},Vt.prototype.flushDisplayed=function(c,h){for(var p=[],f=0;f<8;f++)h.windows[f].visible&&!h.windows[f].isEmpty()&&p.push(h.windows[f].getText());h.endPts=c,h.text=p.join("\n\n"),this.pushCaption(h),h.startPts=c},Vt.prototype.pushCaption=function(c){""!==c.text&&(this.trigger("data",{startPts:c.startPts,endPts:c.endPts,text:c.text,stream:"cc708_"+c.serviceNum}),c.text="",c.startPts=c.endPts)},Vt.prototype.displayWindows=function(c,h){var f=this.current708Packet.data[++c],m=this.getPts(c);this.flushDisplayed(m,h);for(var y=0;y<8;y++)f&1<<y&&(h.windows[y].visible=1);return c},Vt.prototype.hideWindows=function(c,h){var f=this.current708Packet.data[++c],m=this.getPts(c);this.flushDisplayed(m,h);for(var y=0;y<8;y++)f&1<<y&&(h.windows[y].visible=0);return c},Vt.prototype.toggleWindows=function(c,h){var f=this.current708Packet.data[++c],m=this.getPts(c);this.flushDisplayed(m,h);for(var y=0;y<8;y++)f&1<<y&&(h.windows[y].visible^=1);return c},Vt.prototype.clearWindows=function(c,h){var f=this.current708Packet.data[++c],m=this.getPts(c);this.flushDisplayed(m,h);for(var y=0;y<8;y++)f&1<<y&&h.windows[y].clearText();return c},Vt.prototype.deleteWindows=function(c,h){var f=this.current708Packet.data[++c],m=this.getPts(c);this.flushDisplayed(m,h);for(var y=0;y<8;y++)f&1<<y&&h.windows[y].reset();return c},Vt.prototype.setPenAttributes=function(c,h){var p=this.current708Packet.data,f=p[c],m=h.currentWindow.penAttr;return f=p[++c],m.textTag=(240&f)>>4,m.offset=(12&f)>>2,m.penSize=3&f,f=p[++c],m.italics=(128&f)>>7,m.underline=(64&f)>>6,m.edgeType=(56&f)>>3,m.fontStyle=7&f,c},Vt.prototype.setPenColor=function(c,h){var p=this.current708Packet.data,f=p[c],m=h.currentWindow.penColor;return f=p[++c],m.fgOpacity=(192&f)>>6,m.fgRed=(48&f)>>4,m.fgGreen=(12&f)>>2,m.fgBlue=3&f,f=p[++c],m.bgOpacity=(192&f)>>6,m.bgRed=(48&f)>>4,m.bgGreen=(12&f)>>2,m.bgBlue=3&f,f=p[++c],m.edgeRed=(48&f)>>4,m.edgeGreen=(12&f)>>2,m.edgeBlue=3&f,c},Vt.prototype.setPenLocation=function(c,h){var p=this.current708Packet.data,f=p[c],m=h.currentWindow.penLoc;return h.currentWindow.pendingNewLine=!0,f=p[++c],m.row=15&f,f=p[++c],m.column=63&f,c},Vt.prototype.reset=function(c,h){var p=this.getPts(c);return this.flushDisplayed(p,h),this.initService(h.serviceNum,c)};var RY={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Eg=function(c){return null===c?"":(c=RY[c]||c,String.fromCharCode(c))},LY=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ha=function(){for(var c=[],h=15;h--;)c.push({text:"",indent:0,offset:0});return c},on=function(c,h){on.prototype.init.call(this),this.field_=c||0,this.dataChannel_=h||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(p){var f,m,y,D,S;if((f=32639&p.ccData)!==this.lastControlCode_){if(4096==(61440&f)?this.lastControlCode_=f:f!==this.PADDING_&&(this.lastControlCode_=null),y=f>>>8,D=255&f,f!==this.PADDING_)if(f===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(f===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(p.pts),this.flushDisplayed(p.pts),m=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=m,this.startPts_=p.pts;else if(f===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(p.pts);else if(f===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(p.pts);else if(f===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(p.pts);else if(f===this.CARRIAGE_RETURN_)this.clearFormatting(p.pts),this.flushDisplayed(p.pts),this.shiftRowsUp_(),this.startPts_=p.pts;else if(f===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(f===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(p.pts),this.displayed_=ha();else if(f===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ha();else if(f===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(p.pts),this.displayed_=ha()),this.mode_="paintOn",this.startPts_=p.pts;else if(this.isSpecialCharacter(y,D))S=Eg((y=(3&y)<<8)|D),this[this.mode_](p.pts,S),this.column_++;else if(this.isExtCharacter(y,D))"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),S=Eg((y=(3&y)<<8)|D),this[this.mode_](p.pts,S),this.column_++;else if(this.isMidRowCode(y,D))this.clearFormatting(p.pts),this[this.mode_](p.pts," "),this.column_++,14==(14&D)&&this.addFormatting(p.pts,["i"]),1==(1&D)&&this.addFormatting(p.pts,["u"]);else if(this.isOffsetControlCode(y,D)){const k=3&D;this.nonDisplayed_[this.row_].offset=k,this.column_+=k}else if(this.isPAC(y,D)){var M=LY.indexOf(7968&f);if("rollUp"===this.mode_&&(M-this.rollUpRows_+1<0&&(M=this.rollUpRows_-1),this.setRollUp(p.pts,M)),M!==this.row_&&(this.clearFormatting(p.pts),this.row_=M),1&D&&-1===this.formatting_.indexOf("u")&&this.addFormatting(p.pts,["u"]),16==(16&f)){const k=(14&f)>>1;this.column_=4*k,this.nonDisplayed_[this.row_].indent+=k}this.isColorPAC(D)&&14==(14&D)&&this.addFormatting(p.pts,["i"])}else this.isNormalChar(y)&&(0===D&&(D=null),S=Eg(y),S+=Eg(D),this[this.mode_](p.pts,S),this.column_+=S.length)}else this.lastControlCode_=null}};on.prototype=new Wb,on.prototype.flushDisplayed=function(c){const h=f=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+f+"."})},p=[];this.displayed_.forEach((f,m)=>{if(f&&f.text&&f.text.length){try{f.text=f.text.trim()}catch{h(m)}f.text.length&&p.push({text:f.text,line:m+1,position:10+Math.min(70,10*f.indent)+2.5*f.offset})}else null==f&&h(m)}),p.length&&this.trigger("data",{startPts:this.startPts_,endPts:c,content:p,stream:this.name_})},on.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ha(),this.nonDisplayed_=ha(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},on.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},on.prototype.isSpecialCharacter=function(c,h){return c===this.EXT_&&h>=48&&h<=63},on.prototype.isExtCharacter=function(c,h){return(c===this.EXT_+1||c===this.EXT_+2)&&h>=32&&h<=63},on.prototype.isMidRowCode=function(c,h){return c===this.EXT_&&h>=32&&h<=47},on.prototype.isOffsetControlCode=function(c,h){return c===this.OFFSET_&&h>=33&&h<=35},on.prototype.isPAC=function(c,h){return c>=this.BASE_&&c<this.BASE_+8&&h>=64&&h<=127},on.prototype.isColorPAC=function(c){return c>=64&&c<=79||c>=96&&c<=127},on.prototype.isNormalChar=function(c){return c>=32&&c<=127},on.prototype.setRollUp=function(c,h){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(c),this.nonDisplayed_=ha(),this.displayed_=ha()),void 0!==h&&h!==this.row_)for(var p=0;p<this.rollUpRows_;p++)this.displayed_[h-p]=this.displayed_[this.row_-p],this.displayed_[this.row_-p]={text:"",indent:0,offset:0};void 0===h&&(h=this.row_),this.topRow_=h-this.rollUpRows_+1},on.prototype.addFormatting=function(c,h){this.formatting_=this.formatting_.concat(h);var p=h.reduce(function(f,m){return f+"<"+m+">"},"");this[this.mode_](c,p)},on.prototype.clearFormatting=function(c){if(this.formatting_.length){var h=this.formatting_.reverse().reduce(function(p,f){return p+"</"+f+">"},"");this.formatting_=[],this[this.mode_](c,h)}},on.prototype.popOn=function(c,h){var p=this.nonDisplayed_[this.row_].text;this.nonDisplayed_[this.row_].text=p+=h},on.prototype.rollUp=function(c,h){var p=this.displayed_[this.row_].text;this.displayed_[this.row_].text=p+=h},on.prototype.shiftRowsUp_=function(){var c;for(c=0;c<this.topRow_;c++)this.displayed_[c]={text:"",indent:0,offset:0};for(c=this.row_+1;c<15;c++)this.displayed_[c]={text:"",indent:0,offset:0};for(c=this.topRow_;c<this.row_;c++)this.displayed_[c]=this.displayed_[c+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},on.prototype.paintOn=function(c,h){var p=this.displayed_[this.row_].text;this.displayed_[this.row_].text=p+=h};var hP={CaptionStream:Or,Cea608Stream:on,Cea708Stream:Vt},Sg={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Xb=function(c,h){var p=1;for(c>h&&(p=-1);Math.abs(h-c)>4294967296;)c+=8589934592*p;return c},Kb=function(c){var h,p;Kb.prototype.init.call(this),this.type_=c||"shared",this.push=function(f){"shared"!==this.type_&&f.type!==this.type_||(void 0===p&&(p=f.dts),f.dts=Xb(f.dts,p),f.pts=Xb(f.pts,p),h=f.dts,this.trigger("data",f))},this.flush=function(){p=h,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){p=void 0,h=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Kb.prototype=new n;var Ag,pP={TimestampRolloverStream:Kb,handleRollover:Xb},wg=(c,h,p)=>{if(!c)return-1;for(var f=p;f<c.length;f++)if(c[f]===h)return f;return-1},gP=function(c,h,p){var f,m="";for(f=h;f<p;f++)m+="%"+("00"+c[f].toString(16)).slice(-2);return m},Ad=function(c,h,p){return decodeURIComponent(gP(c,h,p))},Id=function(c,h,p){return unescape(gP(c,h,p))},Md=function(c){return c[0]<<21|c[1]<<14|c[2]<<7|c[3]},Od={APIC:function(c){var p,f,h=1;3===c.data[0]&&!((p=wg(c.data,0,h))<0)&&(c.mimeType=Id(c.data,h,p),c.pictureType=c.data[h=p+1],h++,!((f=wg(c.data,0,h))<0)&&(c.description=Ad(c.data,h,f),h=f+1,"--\x3e"===c.mimeType?c.url=Id(c.data,h,c.data.length):c.pictureData=c.data.subarray(h,c.data.length)))},"T*":function(c){3===c.data[0]&&(c.value=Ad(c.data,1,c.data.length).replace(/\0*$/,""),c.values=c.value.split("\0"))},TXXX:function(c){var h;3===c.data[0]&&-1!==(h=wg(c.data,0,1))&&(c.description=Ad(c.data,1,h),c.value=Ad(c.data,h+1,c.data.length).replace(/\0*$/,""),c.data=c.value)},"W*":function(c){c.url=Id(c.data,0,c.data.length).replace(/\0.*$/,"")},WXXX:function(c){var h;3===c.data[0]&&-1!==(h=wg(c.data,0,1))&&(c.description=Ad(c.data,1,h),c.url=Id(c.data,h+1,c.data.length).replace(/\0.*$/,""))},PRIV:function(c){var h;for(h=0;h<c.data.length;h++)if(0===c.data[h]){c.owner=Id(c.data,0,h);break}c.privateData=c.data.subarray(h+1),c.data=c.privateData}},mP={parseId3Frames:function(c){var h,f=10,m=0,y=[];if(!(c.length<10||c[0]!=="I".charCodeAt(0)||c[1]!=="D".charCodeAt(0)||c[2]!=="3".charCodeAt(0))){m=Md(c.subarray(6,10)),m+=10,64&c[5]&&(f+=4,f+=Md(c.subarray(10,14)),m-=Md(c.subarray(16,20)));do{if((h=Md(c.subarray(f+4,f+8)))<1)break;var S={id:String.fromCharCode(c[f],c[f+1],c[f+2],c[f+3]),data:c.subarray(f+10,f+h+10)};S.key=S.id,Od[S.id]?Od[S.id](S):"T"===S.id[0]?Od["T*"](S):"W"===S.id[0]&&Od["W*"](S),y.push(S),f+=10,f+=h}while(f<m);return y}},parseSyncSafeInteger:Md,frameParsers:Od},qY=Sg,To=mP;Ag=function(c){var y,h={descriptor:c&&c.descriptor},p=0,f=[],m=0;if(Ag.prototype.init.call(this),this.dispatchType=qY.METADATA_STREAM_TYPE.toString(16),h.descriptor)for(y=0;y<h.descriptor.length;y++)this.dispatchType+=("00"+h.descriptor[y].toString(16)).slice(-2);this.push=function(D){var S,M,k,L,V;if("timed-metadata"===D.type){if(D.dataAlignmentIndicator&&(m=0,f.length=0),0===f.length&&(D.data.length<10||D.data[0]!=="I".charCodeAt(0)||D.data[1]!=="D".charCodeAt(0)||D.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(f.push(D),m+=D.data.byteLength,1===f.length&&(p=To.parseSyncSafeInteger(D.data.subarray(6,10)),p+=10),!(m<p)){for(S={data:new Uint8Array(p),frames:[],pts:f[0].pts,dts:f[0].dts},V=0;V<p;)S.data.set(f[0].data.subarray(0,p-V),V),V+=f[0].data.byteLength,m-=f[0].data.byteLength,f.shift();M=10,64&S.data[5]&&(M+=4,M+=To.parseSyncSafeInteger(S.data.subarray(10,14)),p-=To.parseSyncSafeInteger(S.data.subarray(16,20)));do{if((k=To.parseSyncSafeInteger(S.data.subarray(M+4,M+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((L={id:String.fromCharCode(S.data[M],S.data[M+1],S.data[M+2],S.data[M+3]),data:S.data.subarray(M+10,M+k+10)}).key=L.id,To.frameParsers[L.id]?To.frameParsers[L.id](L):"T"===L.id[0]?To.frameParsers["T*"](L):"W"===L.id[0]&&To.frameParsers["W*"](L),"com.apple.streaming.transportStreamTimestamp"===L.owner){var G=L.data,He=(1&G[3])<<30|G[4]<<22|G[5]<<14|G[6]<<6|G[7]>>>2;He*=4,L.timeStamp=He+=3&G[7],void 0===S.pts&&void 0===S.dts&&(S.pts=L.timeStamp,S.dts=L.timeStamp),this.trigger("timestamp",L)}S.frames.push(L),M+=10,M+=k}while(M<p);this.trigger("data",S)}}}},Ag.prototype=new n;var Ig,kd,Mg,zY=Ag,Yb=n,Qb=hP,xi=Sg,GY=pP.TimestampRolloverStream;Ig=function(){var c=new Uint8Array(188),h=0;Ig.prototype.init.call(this),this.push=function(p){var y,f=0,m=188;for(h?((y=new Uint8Array(p.byteLength+h)).set(c.subarray(0,h)),y.set(p,h),h=0):y=p;m<y.byteLength;)71!==y[f]||71!==y[m]?(f++,m++):(this.trigger("data",y.subarray(f,m)),f+=188,m+=188);f<y.byteLength&&(c.set(y.subarray(f),0),h=y.byteLength-f)},this.flush=function(){188===h&&71===c[0]&&(this.trigger("data",c),h=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){h=0,this.trigger("reset")}},Ig.prototype=new Yb,kd=function(){var c,h,p,f;kd.prototype.init.call(this),f=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,c=function(m,y){var D=0;y.payloadUnitStartIndicator&&(D+=m[D]+1),"pat"===y.type?h(m.subarray(D),y):p(m.subarray(D),y)},h=function(m,y){y.section_number=m[7],y.last_section_number=m[8],f.pmtPid=(31&m[10])<<8|m[11],y.pmtPid=f.pmtPid},p=function(m,y){var S,k;if(1&m[5]){for(f.programMapTable={video:null,audio:null,"timed-metadata":{}},S=3+((15&m[1])<<8|m[2])-4,k=12+((15&m[10])<<8|m[11]);k<S;){var L=m[k],V=(31&m[k+1])<<8|m[k+2];L===xi.H264_STREAM_TYPE&&null===f.programMapTable.video?f.programMapTable.video=V:L===xi.ADTS_STREAM_TYPE&&null===f.programMapTable.audio?f.programMapTable.audio=V:L===xi.METADATA_STREAM_TYPE&&(f.programMapTable["timed-metadata"][V]=L),k+=5+((15&m[k+3])<<8|m[k+4])}y.programMapTable=f.programMapTable}},this.push=function(m){var y={},D=4;if(y.payloadUnitStartIndicator=!!(64&m[1]),y.pid=31&m[1],y.pid<<=8,y.pid|=m[2],(48&m[3])>>>4>1&&(D+=m[D]+1),0===y.pid)y.type="pat",c(m.subarray(D),y),this.trigger("data",y);else if(y.pid===this.pmtPid)for(y.type="pmt",c(m.subarray(D),y),this.trigger("data",y);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([m,D,y]):this.processPes_(m,D,y)},this.processPes_=function(m,y,D){D.streamType=D.pid===this.programMapTable.video?xi.H264_STREAM_TYPE:D.pid===this.programMapTable.audio?xi.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][D.pid],D.type="pes",D.data=m.subarray(y),this.trigger("data",D)}},kd.prototype=new Yb,kd.STREAM_TYPES={h264:27,adts:15},Mg=function(){var y,c=this,h=!1,p={data:[],size:0},f={data:[],size:0},m={data:[],size:0},S=function(M,k,L){var kn,V=new Uint8Array(M.size),Te={type:k},G=0,He=0,et=!1;if(M.data.length&&!(M.size<9)){for(Te.trackId=M.data[0].pid,G=0;G<M.data.length;G++)V.set((kn=M.data[G]).data,He),He+=kn.data.byteLength;(function(M,k){var L;const V=M[0]<<16|M[1]<<8|M[2];k.data=new Uint8Array,1===V&&(k.packetLength=6+(M[4]<<8|M[5]),k.dataAlignmentIndicator=0!=(4&M[6]),192&(L=M[7])&&(k.pts=(14&M[9])<<27|(255&M[10])<<20|(254&M[11])<<12|(255&M[12])<<5|(254&M[13])>>>3,k.pts*=4,k.pts+=(6&M[13])>>>1,k.dts=k.pts,64&L&&(k.dts=(14&M[14])<<27|(255&M[15])<<20|(254&M[16])<<12|(255&M[17])<<5|(254&M[18])>>>3,k.dts*=4,k.dts+=(6&M[18])>>>1)),k.data=M.subarray(9+M[8]))})(V,Te),et="video"===k||Te.packetLength<=M.size,(L||et)&&(M.size=0,M.data.length=0),et&&c.trigger("data",Te)}};Mg.prototype.init.call(this),this.push=function(M){({pat:function(){},pes:function(){var k,L;switch(M.streamType){case xi.H264_STREAM_TYPE:k=p,L="video";break;case xi.ADTS_STREAM_TYPE:k=f,L="audio";break;case xi.METADATA_STREAM_TYPE:k=m,L="timed-metadata";break;default:return}M.payloadUnitStartIndicator&&S(k,L,!0),k.data.push(M),k.size+=M.data.byteLength},pmt:function(){var k={type:"metadata",tracks:[]};null!==(y=M.programMapTable).video&&k.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+y.video,codec:"avc",type:"video"}),null!==y.audio&&k.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+y.audio,codec:"adts",type:"audio"}),h=!0,c.trigger("data",k)}})[M.type]()},this.reset=function(){p.size=0,p.data.length=0,f.size=0,f.data.length=0,this.trigger("reset")},this.flushStreams_=function(){S(p,"video"),S(f,"audio"),S(m,"timed-metadata")},this.flush=function(){if(!h&&y){var M={type:"metadata",tracks:[]};null!==y.video&&M.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+y.video,codec:"avc",type:"video"}),null!==y.audio&&M.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+y.audio,codec:"adts",type:"audio"}),c.trigger("data",M)}h=!1,this.flushStreams_(),this.trigger("done")}},Mg.prototype=new Yb;var yP={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Ig,TransportParseStream:kd,ElementaryStream:Mg,TimestampRolloverStream:GY,CaptionStream:Qb.CaptionStream,Cea608Stream:Qb.Cea608Stream,Cea708Stream:Qb.Cea708Stream,MetadataStream:zY};for(var Jb in xi)xi.hasOwnProperty(Jb)&&(yP[Jb]=xi[Jb]);var Og,WY=yP,KY=Qt.ONE_SECOND_IN_TS,vP=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Og=function(c){var h,p=0;Og.prototype.init.call(this),this.skipWarn_=function(f,m){this.trigger("log",{level:"warn",message:`adts skiping bytes ${f} to ${m} in frame ${p} outside syncword`})},this.push=function(f){var y,D,S,M,k,m=0;if(c||(p=0),"audio"===f.type){h&&h.length?(S=h,(h=new Uint8Array(S.byteLength+f.data.byteLength)).set(S),h.set(f.data,S.byteLength)):h=f.data;for(var L;m+7<h.length;)if(255===h[m]&&240==(246&h[m+1])){if("number"==typeof L&&(this.skipWarn_(L,m),L=null),D=2*(1&~h[m+1]),k=(M=1024*(1+(3&h[m+6])))*KY/vP[(60&h[m+2])>>>2],h.byteLength-m<(y=(3&h[m+3])<<11|h[m+4]<<3|(224&h[m+5])>>5))break;this.trigger("data",{pts:f.pts+p*k,dts:f.dts+p*k,sampleCount:M,audioobjecttype:1+(h[m+2]>>>6&3),channelcount:(1&h[m+2])<<2|(192&h[m+3])>>>6,samplerate:vP[(60&h[m+2])>>>2],samplingfrequencyindex:(60&h[m+2])>>>2,samplesize:16,data:h.subarray(m+7+D,m+y)}),p++,m+=y}else"number"!=typeof L&&(L=m),m++;"number"==typeof L&&(this.skipWarn_(L,m),L=null),h=h.subarray(m)}},this.flush=function(){p=0,this.trigger("done")},this.reset=function(){h=void 0,this.trigger("reset")},this.endTimeline=function(){h=void 0,this.trigger("endedtimeline")}},Og.prototype=new n;var _P,YY=Og;_P=function(c){var h=c.byteLength,p=0,f=0;this.length=function(){return 8*h},this.bitsAvailable=function(){return 8*h+f},this.loadWord=function(){var m=c.byteLength-h,y=new Uint8Array(4),D=Math.min(4,h);if(0===D)throw new Error("no bytes available");y.set(c.subarray(m,m+D)),p=new DataView(y.buffer).getUint32(0),f=8*D,h-=D},this.skipBits=function(m){var y;f>m?(p<<=m,f-=m):(m-=f,m-=8*(y=Math.floor(m/8)),h-=y,this.loadWord(),p<<=m,f-=m)},this.readBits=function(m){var y=Math.min(f,m),D=p>>>32-y;return(f-=y)>0?p<<=y:h>0&&this.loadWord(),(y=m-y)>0?D<<y|this.readBits(y):D},this.skipLeadingZeros=function(){var m;for(m=0;m<f;++m)if(p&2147483648>>>m)return p<<=m,f-=m,m;return this.loadWord(),m+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var m=this.skipLeadingZeros();return this.readBits(m+1)-1},this.readExpGolomb=function(){var m=this.readUnsignedExpGolomb();return 1&m?1+m>>>1:-1*(m>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var kg,Pd,TP,bP=n,ZY=_P;Pd=function(){var h,p,c=0;Pd.prototype.init.call(this),this.push=function(f){var m;p?((m=new Uint8Array(p.byteLength+f.data.byteLength)).set(p),m.set(f.data,p.byteLength),p=m):p=f.data;for(var y=p.byteLength;c<y-3;c++)if(1===p[c+2]){h=c+5;break}for(;h<y;)switch(p[h]){case 0:if(0!==p[h-1]){h+=2;break}if(0!==p[h-2]){h++;break}c+3!==h-2&&this.trigger("data",p.subarray(c+3,h-2));do{h++}while(1!==p[h]&&h<y);c=h-2,h+=3;break;case 1:if(0!==p[h-1]||0!==p[h-2]){h+=3;break}this.trigger("data",p.subarray(c+3,h-2)),c=h-2,h+=3;break;default:h+=3}p=p.subarray(c),h-=c,c=0},this.reset=function(){p=null,c=0,this.trigger("reset")},this.flush=function(){p&&p.byteLength>3&&this.trigger("data",p.subarray(c+3)),p=null,c=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Pd.prototype=new bP,TP={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},kg=function(){var h,p,f,m,y,D,S,c=new Pd;kg.prototype.init.call(this),h=this,this.push=function(M){"video"===M.type&&(p=M.trackId,f=M.pts,m=M.dts,c.push(M))},c.on("data",function(M){var k={trackId:p,pts:f,dts:m,data:M,nalUnitTypeCode:31&M[0]};switch(k.nalUnitTypeCode){case 5:k.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:k.nalUnitType="sei_rbsp",k.escapedRBSP=y(M.subarray(1));break;case 7:k.nalUnitType="seq_parameter_set_rbsp",k.escapedRBSP=y(M.subarray(1)),k.config=D(k.escapedRBSP);break;case 8:k.nalUnitType="pic_parameter_set_rbsp";break;case 9:k.nalUnitType="access_unit_delimiter_rbsp"}h.trigger("data",k)}),c.on("done",function(){h.trigger("done")}),c.on("partialdone",function(){h.trigger("partialdone")}),c.on("reset",function(){h.trigger("reset")}),c.on("endedtimeline",function(){h.trigger("endedtimeline")}),this.flush=function(){c.flush()},this.partialFlush=function(){c.partialFlush()},this.reset=function(){c.reset()},this.endTimeline=function(){c.endTimeline()},S=function(M,k){var Te,L=8,V=8;for(Te=0;Te<M;Te++)0!==V&&(V=(L+k.readExpGolomb()+256)%256),L=0===V?L:V},y=function(M){for(var Te,G,k=M.byteLength,L=[],V=1;V<k-2;)0===M[V]&&0===M[V+1]&&3===M[V+2]?(L.push(V+2),V+=2):V++;if(0===L.length)return M;Te=k-L.length,G=new Uint8Array(Te);var He=0;for(V=0;V<Te;He++,V++)He===L[0]&&(He++,L.shift()),G[V]=M[He];return G},D=function(M){var G,He,et,kn,ci,ga,KP,YP,QP,cT,ZP,ma,k=0,L=0,V=0,Te=0,En=[1,1];if(He=(G=new ZY(M)).readUnsignedByte(),kn=G.readUnsignedByte(),et=G.readUnsignedByte(),G.skipUnsignedExpGolomb(),TP[He]&&(3===(ci=G.readUnsignedExpGolomb())&&G.skipBits(1),G.skipUnsignedExpGolomb(),G.skipUnsignedExpGolomb(),G.skipBits(1),G.readBoolean()))for(ZP=3!==ci?8:12,ma=0;ma<ZP;ma++)G.readBoolean()&&S(ma<6?16:64,G);if(G.skipUnsignedExpGolomb(),0===(ga=G.readUnsignedExpGolomb()))G.readUnsignedExpGolomb();else if(1===ga)for(G.skipBits(1),G.skipExpGolomb(),G.skipExpGolomb(),KP=G.readUnsignedExpGolomb(),ma=0;ma<KP;ma++)G.skipExpGolomb();if(G.skipUnsignedExpGolomb(),G.skipBits(1),YP=G.readUnsignedExpGolomb(),QP=G.readUnsignedExpGolomb(),0===(cT=G.readBits(1))&&G.skipBits(1),G.skipBits(1),G.readBoolean()&&(k=G.readUnsignedExpGolomb(),L=G.readUnsignedExpGolomb(),V=G.readUnsignedExpGolomb(),Te=G.readUnsignedExpGolomb()),G.readBoolean()&&G.readBoolean())switch(G.readUnsignedByte()){case 1:En=[1,1];break;case 2:En=[12,11];break;case 3:En=[10,11];break;case 4:En=[16,11];break;case 5:En=[40,33];break;case 6:En=[24,11];break;case 7:En=[20,11];break;case 8:En=[32,11];break;case 9:En=[80,33];break;case 10:En=[18,11];break;case 11:En=[15,11];break;case 12:En=[64,33];break;case 13:En=[160,99];break;case 14:En=[4,3];break;case 15:En=[3,2];break;case 16:En=[2,1];break;case 255:En=[G.readUnsignedByte()<<8|G.readUnsignedByte(),G.readUnsignedByte()<<8|G.readUnsignedByte()]}return{profileIdc:He,levelIdc:et,profileCompatibility:kn,width:16*(YP+1)-2*k-2*L,height:(2-cT)*(QP+1)*16-2*V-2*Te,sarRatio:En}}},kg.prototype=new bP;var Pg,JY={H264Stream:kg,NalByteStream:Pd},eQ=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],CP=function(c,h){var p=c[h+6]<<21|c[h+7]<<14|c[h+8]<<7|c[h+9];return p=p>=0?p:0,(16&c[h+5])>>4?p+20:p+10},EP=function(c,h){return c.length-h<10||c[h]!=="I".charCodeAt(0)||c[h+1]!=="D".charCodeAt(0)||c[h+2]!=="3".charCodeAt(0)?h:(h+=CP(c,h),EP(c,h))},DP=function(c){return c[0]<<21|c[1]<<14|c[2]<<7|c[3]},rQ=function(c,h,p){return unescape(function(c,h,p){var f,m="";for(f=h;f<p;f++)m+="%"+("00"+c[f].toString(16)).slice(-2);return m}(c,h,p))},eT={isLikelyAacData:function(c){var h=EP(c,0);return c.length>=h+2&&255==(255&c[h])&&240==(240&c[h+1])&&16==(22&c[h+1])},parseId3TagSize:CP,parseAdtsSize:function(c,h){return 6144&c[h+3]|c[h+4]<<3|(224&c[h+5])>>5},parseType:function(c,h){return c[h]==="I".charCodeAt(0)&&c[h+1]==="D".charCodeAt(0)&&c[h+2]==="3".charCodeAt(0)?"timed-metadata":!0&c[h]&&240==(240&c[h+1])?"audio":null},parseSampleRate:function(c){for(var h=0;h+5<c.length;){if(255===c[h]&&240==(246&c[h+1]))return eQ[(60&c[h+2])>>>2];h++}return null},parseAacTimestamp:function(c){var h,p,f;h=10,64&c[5]&&(h+=4,h+=DP(c.subarray(10,14)));do{if((p=DP(c.subarray(h+4,h+8)))<1)return null;if("PRIV"===String.fromCharCode(c[h],c[h+1],c[h+2],c[h+3])){f=c.subarray(h+10,h+p+10);for(var y=0;y<f.byteLength;y++)if(0===f[y]){if("com.apple.streaming.transportStreamTimestamp"===rQ(f,0,y)){var S=f.subarray(y+1),M=(1&S[3])<<30|S[4]<<22|S[5]<<14|S[6]<<6|S[7]>>>2;return(M*=4)+(3&S[7])}break}}h+=10,h+=p}while(h<c.byteLength);return null}},SP=eT;Pg=function(){var c=new Uint8Array,h=0;Pg.prototype.init.call(this),this.setTimestamp=function(p){h=p},this.push=function(p){var D,S,M,f=0,m=0;for(c.length?(M=c.length,(c=new Uint8Array(p.byteLength+M)).set(c.subarray(0,M)),c.set(p,M)):c=p;c.length-m>=3;)if(c[m]!=="I".charCodeAt(0)||c[m+1]!=="D".charCodeAt(0)||c[m+2]!=="3".charCodeAt(0))if(255!=(255&c[m])||240!=(240&c[m+1]))m++;else{if(c.length-m<7||m+(f=SP.parseAdtsSize(c,m))>c.length)break;S={type:"audio",data:c.subarray(m,m+f),pts:h,dts:h},this.trigger("data",S),m+=f}else{if(c.length-m<10||m+(f=SP.parseId3TagSize(c,m))>c.length)break;D={type:"timed-metadata",data:c.subarray(m,m+f)},this.trigger("data",D),m+=f}c=c.length-m>0?c.subarray(m):new Uint8Array},this.reset=function(){c=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){c=new Uint8Array,this.trigger("endedtimeline")}},Pg.prototype=new n;var Ld,cl,Fg,fa,Ng=n,Nd=iY,Rd=fY,Rg=CY,Ai=xY,$s=WY,Lg=Qt,wP=YY,pQ=JY.H264Stream,gQ=Pg,mQ=eT.isLikelyAacData,yQ=Qt.ONE_SECOND_IN_TS,tT=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],nT=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],vQ=function(c,h){h.stream=c,this.trigger("log",h)},xP=function(c,h){for(var p=Object.keys(h),f=0;f<p.length;f++){var m=p[f];"headOfPipeline"===m||!h[m].on||h[m].on("log",vQ.bind(c,m))}},AP=function(c,h){var p;if(c.length!==h.length)return!1;for(p=0;p<c.length;p++)if(c[p]!==h[p])return!1;return!0},rT=function(c,h,p,f,m,y){return{start:{dts:c,pts:c+(p-h)},end:{dts:c+(f-h),pts:c+(m-p)},prependedContentDuration:y,baseMediaDecodeTime:c}};cl=function(c,h){var f,p=[],m=0,y=0,D=1/0;f=(h=h||{}).firstSequenceNumber||0,cl.prototype.init.call(this),this.push=function(S){Ai.collectDtsInfo(c,S),c&&tT.forEach(function(M){c[M]=S[M]}),p.push(S)},this.setEarliestDts=function(S){m=S},this.setVideoBaseMediaDecodeTime=function(S){D=S},this.setAudioAppendStart=function(S){y=S},this.flush=function(){var S,M,k,L,V,Te,G;0!==p.length?(S=Rg.trimAdtsFramesByEarliestDts(p,c,m),c.baseMediaDecodeTime=Ai.calculateTrackBaseMediaDecodeTime(c,h.keepOriginalTimestamps),G=Rg.prefixWithSilence(c,S,y,D),c.samples=Rg.generateSampleTable(S),k=Nd.mdat(Rg.concatenateFrameData(S)),p=[],M=Nd.moof(f,[c]),L=new Uint8Array(M.byteLength+k.byteLength),f++,L.set(M),L.set(k,M.byteLength),Ai.clearDtsInfo(c),V=Math.ceil(1024*yQ/c.samplerate),S.length&&(Te=S.length*V,this.trigger("segmentTimingInfo",rT(Lg.audioTsToVideoTs(c.baseMediaDecodeTime,c.samplerate),S[0].dts,S[0].pts,S[0].dts+Te,S[0].pts+Te,G||0)),this.trigger("timingInfo",{start:S[0].pts,end:S[0].pts+Te})),this.trigger("data",{track:c,boxes:L}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Ai.clearDtsInfo(c),p=[],this.trigger("reset")}},cl.prototype=new Ng,Ld=function(c,h){var p,y,D,f=[],m=[];p=(h=h||{}).firstSequenceNumber||0,Ld.prototype.init.call(this),delete c.minPTS,this.gopCache_=[],this.push=function(S){Ai.collectDtsInfo(c,S),"seq_parameter_set_rbsp"===S.nalUnitType&&!y&&(y=S.config,c.sps=[S.data],nT.forEach(function(M){c[M]=y[M]},this)),"pic_parameter_set_rbsp"===S.nalUnitType&&!D&&(D=S.data,c.pps=[S.data]),f.push(S)},this.flush=function(){for(var S,M,k,L,V,Te,He,et,G=0;f.length&&"access_unit_delimiter_rbsp"!==f[0].nalUnitType;)f.shift();if(0===f.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(S=Rd.groupNalsIntoFrames(f),(k=Rd.groupFramesIntoGops(S))[0][0].keyFrame||((M=this.getGopForFusion_(f[0],c))?(G=M.duration,k.unshift(M),k.byteLength+=M.byteLength,k.nalCount+=M.nalCount,k.pts=M.pts,k.dts=M.dts,k.duration+=M.duration):k=Rd.extendFirstKeyFrame(k)),m.length){var kn;if(!(kn=h.alignGopsAtEnd?this.alignGopsAtEnd_(k):this.alignGopsAtStart_(k)))return this.gopCache_.unshift({gop:k.pop(),pps:c.pps,sps:c.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Ai.clearDtsInfo(c),k=kn}Ai.collectDtsInfo(c,k),c.samples=Rd.generateSampleTable(k),V=Nd.mdat(Rd.concatenateNalData(k)),c.baseMediaDecodeTime=Ai.calculateTrackBaseMediaDecodeTime(c,h.keepOriginalTimestamps),this.trigger("processedGopsInfo",k.map(function(ci){return{pts:ci.pts,dts:ci.dts,byteLength:ci.byteLength}})),this.trigger("segmentTimingInfo",rT(c.baseMediaDecodeTime,(He=k[0]).dts,He.pts,(et=k[k.length-1]).dts+et.duration,et.pts+et.duration,G)),this.trigger("timingInfo",{start:k[0].pts,end:k[k.length-1].pts+k[k.length-1].duration}),this.gopCache_.unshift({gop:k.pop(),pps:c.pps,sps:c.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.trigger("baseMediaDecodeTime",c.baseMediaDecodeTime),this.trigger("timelineStartInfo",c.timelineStartInfo),L=Nd.moof(p,[c]),Te=new Uint8Array(L.byteLength+V.byteLength),p++,Te.set(L),Te.set(V,L.byteLength),this.trigger("data",{track:c,boxes:Te}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),f=[],this.gopCache_.length=0,m.length=0,this.trigger("reset")},this.resetStream_=function(){Ai.clearDtsInfo(c),y=void 0,D=void 0},this.getGopForFusion_=function(S){var V,Te,G,He,et,L=1/0;for(et=0;et<this.gopCache_.length;et++)G=(He=this.gopCache_[et]).gop,c.pps&&AP(c.pps[0],He.pps[0])&&c.sps&&AP(c.sps[0],He.sps[0])&&(G.dts<c.timelineStartInfo.dts||(V=S.dts-G.dts-G.duration)>=-1e4&&V<=45e3&&(!Te||L>V)&&(Te=He,L=V));return Te?Te.gop:null},this.alignGopsAtStart_=function(S){var M,k,L,V,Te,G,He,et;for(Te=S.byteLength,G=S.nalCount,He=S.duration,M=k=0;M<m.length&&k<S.length&&(L=m[M]).pts!==(V=S[k]).pts;)V.pts>L.pts?M++:(k++,Te-=V.byteLength,G-=V.nalCount,He-=V.duration);return 0===k?S:k===S.length?null:((et=S.slice(k)).byteLength=Te,et.duration=He,et.nalCount=G,et.pts=et[0].pts,et.dts=et[0].dts,et)},this.alignGopsAtEnd_=function(S){var M,k,L,V,Te,G,He;for(M=m.length-1,k=S.length-1,Te=null,G=!1;M>=0&&k>=0;){if((L=m[M]).pts===(V=S[k]).pts){G=!0;break}L.pts>V.pts?M--:(M===m.length-1&&(Te=k),k--)}if(!G&&null===Te)return null;if(0===(He=G?k:Te))return S;var et=S.slice(He),kn=et.reduce(function(ci,ga){return ci.byteLength+=ga.byteLength,ci.duration+=ga.duration,ci.nalCount+=ga.nalCount,ci},{byteLength:0,duration:0,nalCount:0});return et.byteLength=kn.byteLength,et.duration=kn.duration,et.nalCount=kn.nalCount,et.pts=et[0].pts,et.dts=et[0].dts,et},this.alignGopsWith=function(S){m=S}},Ld.prototype=new Ng,fa=function(c,h){this.numberOfTracks=0,this.metadataStream=h,this.remuxTracks=!(typeof(c=c||{}).remux<"u"&&!c.remux),this.keepOriginalTimestamps="boolean"==typeof c.keepOriginalTimestamps&&c.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,fa.prototype.init.call(this),this.push=function(p){return p.content||p.text?this.pendingCaptions.push(p):p.frames?this.pendingMetadata.push(p):(this.pendingTracks.push(p.track),this.pendingBytes+=p.boxes.byteLength,"video"===p.track.type&&(this.videoTrack=p.track,this.pendingBoxes.push(p.boxes)),void("audio"===p.track.type&&(this.audioTrack=p.track,this.pendingBoxes.unshift(p.boxes))))}},fa.prototype=new Ng,fa.prototype.flush=function(c){var f,m,y,S,h=0,p={captions:[],captionStreams:{},metadata:[],info:{}},D=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==c&&"AudioSegmentStream"!==c)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(D=this.videoTrack.timelineStartInfo.pts,nT.forEach(function(M){p.info[M]=this.videoTrack[M]},this)):this.audioTrack&&(D=this.audioTrack.timelineStartInfo.pts,tT.forEach(function(M){p.info[M]=this.audioTrack[M]},this)),this.videoTrack||this.audioTrack){for(p.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,y=Nd.initSegment(this.pendingTracks),p.initSegment=new Uint8Array(y.byteLength),p.initSegment.set(y),p.data=new Uint8Array(this.pendingBytes),S=0;S<this.pendingBoxes.length;S++)p.data.set(this.pendingBoxes[S],h),h+=this.pendingBoxes[S].byteLength;for(S=0;S<this.pendingCaptions.length;S++)(f=this.pendingCaptions[S]).startTime=Lg.metadataTsToSeconds(f.startPts,D,this.keepOriginalTimestamps),f.endTime=Lg.metadataTsToSeconds(f.endPts,D,this.keepOriginalTimestamps),p.captionStreams[f.stream]=!0,p.captions.push(f);for(S=0;S<this.pendingMetadata.length;S++)(m=this.pendingMetadata[S]).cueTime=Lg.metadataTsToSeconds(m.pts,D,this.keepOriginalTimestamps),p.metadata.push(m);for(p.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",p),S=0;S<p.captions.length;S++)this.trigger("caption",f=p.captions[S]);for(S=0;S<p.metadata.length;S++)this.trigger("id3Frame",m=p.metadata[S])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},fa.prototype.setRemux=function(c){this.remuxTracks=c},Fg=function(c){var f,m,h=this,p=!0;Fg.prototype.init.call(this),this.baseMediaDecodeTime=(c=c||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var y={};this.transmuxPipeline_=y,y.type="aac",y.metadataStream=new $s.MetadataStream,y.aacStream=new gQ,y.audioTimestampRolloverStream=new $s.TimestampRolloverStream("audio"),y.timedMetadataTimestampRolloverStream=new $s.TimestampRolloverStream("timed-metadata"),y.adtsStream=new wP,y.coalesceStream=new fa(c,y.metadataStream),y.headOfPipeline=y.aacStream,y.aacStream.pipe(y.audioTimestampRolloverStream).pipe(y.adtsStream),y.aacStream.pipe(y.timedMetadataTimestampRolloverStream).pipe(y.metadataStream).pipe(y.coalesceStream),y.metadataStream.on("timestamp",function(D){y.aacStream.setTimestamp(D.timeStamp)}),y.aacStream.on("data",function(D){"timed-metadata"!==D.type&&"audio"!==D.type||y.audioSegmentStream||(m=m||{timelineStartInfo:{baseMediaDecodeTime:h.baseMediaDecodeTime},codec:"adts",type:"audio"},y.coalesceStream.numberOfTracks++,y.audioSegmentStream=new cl(m,c),y.audioSegmentStream.on("log",h.getLogTrigger_("audioSegmentStream")),y.audioSegmentStream.on("timingInfo",h.trigger.bind(h,"audioTimingInfo")),y.adtsStream.pipe(y.audioSegmentStream).pipe(y.coalesceStream),h.trigger("trackinfo",{hasAudio:!!m,hasVideo:!!f}))}),y.coalesceStream.on("data",this.trigger.bind(this,"data")),y.coalesceStream.on("done",this.trigger.bind(this,"done")),xP(this,y)},this.setupTsPipeline=function(){var y={};this.transmuxPipeline_=y,y.type="ts",y.metadataStream=new $s.MetadataStream,y.packetStream=new $s.TransportPacketStream,y.parseStream=new $s.TransportParseStream,y.elementaryStream=new $s.ElementaryStream,y.timestampRolloverStream=new $s.TimestampRolloverStream,y.adtsStream=new wP,y.h264Stream=new pQ,y.captionStream=new $s.CaptionStream(c),y.coalesceStream=new fa(c,y.metadataStream),y.headOfPipeline=y.packetStream,y.packetStream.pipe(y.parseStream).pipe(y.elementaryStream).pipe(y.timestampRolloverStream),y.timestampRolloverStream.pipe(y.h264Stream),y.timestampRolloverStream.pipe(y.adtsStream),y.timestampRolloverStream.pipe(y.metadataStream).pipe(y.coalesceStream),y.h264Stream.pipe(y.captionStream).pipe(y.coalesceStream),y.elementaryStream.on("data",function(D){var S;if("metadata"===D.type){for(S=D.tracks.length;S--;)f||"video"!==D.tracks[S].type?!m&&"audio"===D.tracks[S].type&&((m=D.tracks[S]).timelineStartInfo.baseMediaDecodeTime=h.baseMediaDecodeTime):(f=D.tracks[S]).timelineStartInfo.baseMediaDecodeTime=h.baseMediaDecodeTime;f&&!y.videoSegmentStream&&(y.coalesceStream.numberOfTracks++,y.videoSegmentStream=new Ld(f,c),y.videoSegmentStream.on("log",h.getLogTrigger_("videoSegmentStream")),y.videoSegmentStream.on("timelineStartInfo",function(M){m&&!c.keepOriginalTimestamps&&(m.timelineStartInfo=M,y.audioSegmentStream.setEarliestDts(M.dts-h.baseMediaDecodeTime))}),y.videoSegmentStream.on("processedGopsInfo",h.trigger.bind(h,"gopInfo")),y.videoSegmentStream.on("segmentTimingInfo",h.trigger.bind(h,"videoSegmentTimingInfo")),y.videoSegmentStream.on("baseMediaDecodeTime",function(M){m&&y.audioSegmentStream.setVideoBaseMediaDecodeTime(M)}),y.videoSegmentStream.on("timingInfo",h.trigger.bind(h,"videoTimingInfo")),y.h264Stream.pipe(y.videoSegmentStream).pipe(y.coalesceStream)),m&&!y.audioSegmentStream&&(y.coalesceStream.numberOfTracks++,y.audioSegmentStream=new cl(m,c),y.audioSegmentStream.on("log",h.getLogTrigger_("audioSegmentStream")),y.audioSegmentStream.on("timingInfo",h.trigger.bind(h,"audioTimingInfo")),y.audioSegmentStream.on("segmentTimingInfo",h.trigger.bind(h,"audioSegmentTimingInfo")),y.adtsStream.pipe(y.audioSegmentStream).pipe(y.coalesceStream)),h.trigger("trackinfo",{hasAudio:!!m,hasVideo:!!f})}}),y.coalesceStream.on("data",this.trigger.bind(this,"data")),y.coalesceStream.on("id3Frame",function(D){D.dispatchType=y.metadataStream.dispatchType,h.trigger("id3Frame",D)}),y.coalesceStream.on("caption",this.trigger.bind(this,"caption")),y.coalesceStream.on("done",this.trigger.bind(this,"done")),xP(this,y)},this.setBaseMediaDecodeTime=function(y){var D=this.transmuxPipeline_;c.keepOriginalTimestamps||(this.baseMediaDecodeTime=y),m&&(m.timelineStartInfo.dts=void 0,m.timelineStartInfo.pts=void 0,Ai.clearDtsInfo(m),D.audioTimestampRolloverStream&&D.audioTimestampRolloverStream.discontinuity()),f&&(D.videoSegmentStream&&(D.videoSegmentStream.gopCache_=[]),f.timelineStartInfo.dts=void 0,f.timelineStartInfo.pts=void 0,Ai.clearDtsInfo(f),D.captionStream.reset()),D.timestampRolloverStream&&D.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(y){m&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(y)},this.setRemux=function(y){var D=this.transmuxPipeline_;c.remux=y,D&&D.coalesceStream&&D.coalesceStream.setRemux(y)},this.alignGopsWith=function(y){f&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(y)},this.getLogTrigger_=function(y){var D=this;return function(S){S.stream=y,D.trigger("log",S)}},this.push=function(y){if(p){var D=mQ(y);D&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!D&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),p=!1}this.transmuxPipeline_.headOfPipeline.push(y)},this.flush=function(){p=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Fg.prototype=new Ng;var Fd,VP,HP,sT,qP,_Q={Transmuxer:Fg,VideoSegmentStream:Ld,AudioSegmentStream:cl,AUDIO_PROPERTIES:tT,VIDEO_PROPERTIES:nT,generateSegmentTimingInfo:rT},Bg_toUnsigned=function(c){return c>>>0},IP=function(c){var h="";return h+=String.fromCharCode(c[0]),h+=String.fromCharCode(c[1]),(h+=String.fromCharCode(c[2]))+String.fromCharCode(c[3])},EQ=Bg_toUnsigned,DQ=IP,MP=function(c,h){var f,m,y,D,S,p=[];if(!h.length)return null;for(f=0;f<c.byteLength;)m=EQ(c[f]<<24|c[f+1]<<16|c[f+2]<<8|c[f+3]),y=DQ(c.subarray(f+4,f+8)),D=m>1?f+m:c.byteLength,y===h[0]&&(1===h.length?p.push(c.subarray(f+8,D)):(S=MP(c.subarray(f+8,D),h.slice(1))).length&&(p=p.concat(S))),f=D;return p},SQ=Bg_toUnsigned,wQ=s.getUint64,kP=function(c){var h={version:c[0],flags:new Uint8Array(c.subarray(1,4))};return h.baseMediaDecodeTime=1===h.version?wQ(c.subarray(4)):SQ(c[4]<<24|c[5]<<16|c[6]<<8|c[7]),h},PP=function(c){return{isLeading:(12&c[0])>>>2,dependsOn:3&c[0],isDependedOn:(192&c[1])>>>6,hasRedundancy:(48&c[1])>>>4,paddingValue:(14&c[1])>>>1,isNonSyncSample:1&c[1],degradationPriority:c[2]<<8|c[3]}},NP=function(c){var V,h={version:c[0],flags:new Uint8Array(c.subarray(1,4)),samples:[]},p=new DataView(c.buffer,c.byteOffset,c.byteLength),f=1&h.flags[2],m=4&h.flags[2],y=1&h.flags[1],D=2&h.flags[1],S=4&h.flags[1],M=8&h.flags[1],k=p.getUint32(4),L=8;for(f&&(h.dataOffset=p.getInt32(L),L+=4),m&&k&&(V={flags:PP(c.subarray(L,L+4))},L+=4,y&&(V.duration=p.getUint32(L),L+=4),D&&(V.size=p.getUint32(L),L+=4),M&&(V.compositionTimeOffset=1===h.version?p.getInt32(L):p.getUint32(L),L+=4),h.samples.push(V),k--);k--;)V={},y&&(V.duration=p.getUint32(L),L+=4),D&&(V.size=p.getUint32(L),L+=4),S&&(V.flags=PP(c.subarray(L,L+4)),L+=4),M&&(V.compositionTimeOffset=1===h.version?p.getInt32(L):p.getUint32(L),L+=4),h.samples.push(V);return h},RP=function(c){var L,h=new DataView(c.buffer,c.byteOffset,c.byteLength),p={version:c[0],flags:new Uint8Array(c.subarray(1,4)),trackId:h.getUint32(4)},f=1&p.flags[2],m=2&p.flags[2],y=8&p.flags[2],D=16&p.flags[2],S=32&p.flags[2],M=65536&p.flags[0],k=131072&p.flags[0];return L=8,f&&(L+=4,p.baseDataOffset=h.getUint32(12),L+=4),m&&(p.sampleDescriptionIndex=h.getUint32(L),L+=4),y&&(p.defaultSampleDuration=h.getUint32(L),L+=4),D&&(p.defaultSampleSize=h.getUint32(L),L+=4),S&&(p.defaultSampleFlags=h.getUint32(L)),M&&(p.durationIsEmpty=!0),!f&&k&&(p.baseDataOffsetIsMoof=!0),p},kQ=(Fd=typeof window<"u"?window:typeof t<"u"?t:typeof self<"u"?self:{},dP.discardEmulationPreventionBytes),PQ=hP.CaptionStream,Bd=MP,NQ=kP,RQ=NP,LQ=RP,FP=Fd,FQ=function(c,h){for(var p=c,f=0;f<h.length;f++){var m=h[f];if(p<m.size)return m;p-=m.size}return null},HQ=function(){var h,p,f,m,y,D,c=!1;this.isInitialized=function(){return c},this.init=function(S){h=new PQ,c=!0,D=!!S&&S.isPartial,h.on("data",function(M){M.startTime=M.startPts/m,M.endTime=M.endPts/m,y.captions.push(M),y.captionStreams[M.stream]=!0}),h.on("log",function(M){y.logs.push(M)})},this.isNewInit=function(S,M){return!(S&&0===S.length||M&&"object"==typeof M&&0===Object.keys(M).length||f===S[0]&&m===M[f])},this.parse=function(S,M,k){var L;if(!this.isInitialized())return null;if(!M||!k)return null;if(this.isNewInit(M,k))m=k[f=M[0]];else if(null===f||!m)return p.push(S),null;for(;p.length>0;){var V=p.shift();this.parse(V,M,k)}return L=function(c,h,p){if(null===h)return null;var m=function(c,h){var p=Bd(c,["moof","traf"]),f=Bd(c,["mdat"]),m={},y=[];return f.forEach(function(D,S){y.push({mdat:D,traf:p[S]})}),y.forEach(function(D){var et,kn,S=D.mdat,M=D.traf,k=Bd(M,["tfhd"]),L=LQ(k[0]),V=L.trackId,Te=Bd(M,["tfdt"]),G=Te.length>0?NQ(Te[0]).baseMediaDecodeTime:0,He=Bd(M,["trun"]);h===V&&He.length>0&&(et=function(c,h,p){var f=h,m=p.defaultSampleDuration||0,y=p.defaultSampleSize||0,D=p.trackId,S=[];return c.forEach(function(M){var L=RQ(M).samples;L.forEach(function(V){void 0===V.duration&&(V.duration=m),void 0===V.size&&(V.size=y),V.trackId=D,V.dts=f,void 0===V.compositionTimeOffset&&(V.compositionTimeOffset=0),"bigint"==typeof f?(V.pts=f+FP.BigInt(V.compositionTimeOffset),f+=FP.BigInt(V.duration)):(V.pts=f+V.compositionTimeOffset,f+=V.duration)}),S=S.concat(L)}),S}(He,G,L),kn=function(c,h,p){var y,D,S,M,f=new DataView(c.buffer,c.byteOffset,c.byteLength),m={logs:[],seiNals:[]};for(D=0;D+4<c.length;D+=S)if(S=f.getUint32(D),D+=4,!(S<=0))switch(31&c[D]){case 6:var k=c.subarray(D+1,D+1+S),L=FQ(D,h);if(y={nalUnitType:"sei_rbsp",size:S,data:k,escapedRBSP:kQ(k),trackId:p},L)y.pts=L.pts,y.dts=L.dts,M=L;else{if(!M){m.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+D+" for trackId "+p+". See mux.js#223."});break}y.pts=M.pts,y.dts=M.dts}m.seiNals.push(y)}return m}(S,et,V),m[V]||(m[V]={seiNals:[],logs:[]}),m[V].seiNals=m[V].seiNals.concat(kn.seiNals),m[V].logs=m[V].logs.concat(kn.logs))}),m}(c,h)[h]||{};return{seiNals:m.seiNals,logs:m.logs,timescale:p}}(S,f,m),L&&L.logs&&(y.logs=y.logs.concat(L.logs)),null!==L&&L.seiNals?(this.pushNals(L.seiNals),this.flushStream(),y):y.logs.length?{logs:y.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(S){if(!this.isInitialized()||!S||0===S.length)return null;S.forEach(function(M){h.push(M)})},this.flushStream=function(){if(!this.isInitialized())return null;D?h.partialFlush():h.flush()},this.clearParsedCaptions=function(){y.captions=[],y.captionStreams={},y.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;h.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){p=[],f=null,m=null,y?this.clearParsedCaptions():y={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Ug=function(c){for(var h=0,p=String.fromCharCode(c[h]),f="";"\0"!==p;)f+=p,h++,p=String.fromCharCode(c[h]);return f+p},GQ=s.getUint64,BP=function(c){return void 0!==c||null!==c},YQ={parseEmsgBox:function(c){var f,m,y,D,S,M,k,h=4,p=c[0];if(0===p)h+=(f=Ug(c.subarray(h))).length,h+=(m=Ug(c.subarray(h))).length,y=(V=new DataView(c.buffer)).getUint32(h),S=V.getUint32(h+=4),M=V.getUint32(h+=4),k=V.getUint32(h+=4),h+=4;else if(1===p){var V;y=(V=new DataView(c.buffer)).getUint32(h),D=GQ(c.subarray(h+=4)),M=V.getUint32(h+=8),k=V.getUint32(h+=4),h+=4,h+=(f=Ug(c.subarray(h))).length,h+=(m=Ug(c.subarray(h))).length}var Te={scheme_id_uri:f,value:m,timescale:y||1,presentation_time:D,presentation_time_delta:S,event_duration:M,id:k,message_data:new Uint8Array(c.subarray(h,c.byteLength))};return function(c,h){var p="\0"!==h.scheme_id_uri,f=0===c&&BP(h.presentation_time_delta)&&p,m=1===c&&BP(h.presentation_time)&&p;return!(c>1)&&f||m}(p,Te)?Te:void 0},scaleTime:function(c,h,p,f){return c||0===c?c/h:f+p/h}},Vg=Bg_toUnsigned,Ud=function(c){return("00"+c.toString(16)).slice(-2)},Cn=MP,dl=IP,iT=YQ,eZ=s.getUint64,oT=Fd,tZ=mP.parseId3Frames;VP=function(c,h){var f=Cn(h,["moof","traf"]).reduce(function(m,y){var V,D=Cn(y,["tfhd"])[0],S=Vg(D[4]<<24|D[5]<<16|D[6]<<8|D[7]),M=c[S]||9e4,k=Cn(y,["tfdt"])[0],L=new DataView(k.buffer,k.byteOffset,k.byteLength);let Te;return"bigint"==typeof(V=1===k[0]?eZ(k.subarray(4,12)):L.getUint32(4))?Te=V/oT.BigInt(M):"number"==typeof V&&!isNaN(V)&&(Te=V/M),Te<Number.MAX_SAFE_INTEGER&&(Te=Number(Te)),Te<m&&(m=Te),m},1/0);return"bigint"==typeof f||isFinite(f)?f:0},sT=function(c){var p=0===c[0]?12:20;return Vg(c[p]<<24|c[p+1]<<16|c[p+2]<<8|c[p+3])},HP=function(c){var h=Cn(c,["moov","trak"]),p=[];return h.forEach(function(f){var D,S,m={},y=Cn(f,["tkhd"])[0];y&&(S=(D=new DataView(y.buffer,y.byteOffset,y.byteLength)).getUint8(0),m.id=D.getUint32(0===S?12:20));var M=Cn(f,["mdia","hdlr"])[0];if(M){var k=dl(M.subarray(8,12));m.type="vide"===k?"video":"soun"===k?"audio":k}var L=Cn(f,["mdia","minf","stbl","stsd"])[0];if(L){var V=L.subarray(8);m.codec=dl(V.subarray(4,8));var G,Te=Cn(V,[m.codec])[0];Te&&(/^[asm]vc[1-9]$/i.test(m.codec)?(G=Te.subarray(78),"avcC"===dl(G.subarray(4,8))&&G.length>11?(m.codec+=".",m.codec+=Ud(G[9]),m.codec+=Ud(G[10]),m.codec+=Ud(G[11])):m.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(m.codec)?(G=Te.subarray(28),"esds"===dl(G.subarray(4,8))&&G.length>20&&0!==G[19]?(m.codec+="."+Ud(G[19]),m.codec+="."+Ud(G[20]>>>2&63).replace(/^0/,"")):m.codec="mp4a.40.2"):m.codec=m.codec.toLowerCase())}var et=Cn(f,["mdia","mdhd"])[0];et&&(m.timescale=sT(et)),p.push(m)}),p},qP=function(c,h=0){return Cn(c,["emsg"]).map(f=>{var m=iT.parseEmsgBox(new Uint8Array(f)),y=tZ(m.message_data);return{cueTime:iT.scaleTime(m.presentation_time,m.timescale,m.presentation_time_delta,h),duration:iT.scaleTime(m.event_duration,m.timescale),frames:y}})};var aT_startTime=VP,aT_tracks=HP,aT_getEmsgID3=qP,uT=Sg,zP=function(c){var h=31&c[1];return(h<<=8)|c[2]},jg=function(c){return!!(64&c[1])},$g=function(c){var h=0;return(48&c[3])>>>4>1&&(h+=c[4]+1),h},lT=function(c){switch(c){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},uZ={parseType:function(c,h){var p=zP(c);return 0===p?"pat":p===h?"pmt":h?"pes":null},parsePat:function(c){var h=jg(c),p=4+$g(c);return h&&(p+=c[p]+1),(31&c[p+10])<<8|c[p+11]},parsePmt:function(c){var h={},p=jg(c),f=4+$g(c);if(p&&(f+=c[f]+1),1&c[f+5]){var y;y=3+((15&c[f+1])<<8|c[f+2])-4;for(var S=12+((15&c[f+10])<<8|c[f+11]);S<y;){var M=f+S;h[(31&c[M+1])<<8|c[M+2]]=c[M],S+=5+((15&c[M+3])<<8|c[M+4])}return h}},parsePayloadUnitStartIndicator:jg,parsePesType:function(c,h){switch(h[zP(c)]){case uT.H264_STREAM_TYPE:return"video";case uT.ADTS_STREAM_TYPE:return"audio";case uT.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(c){if(!jg(c))return null;var p=4+$g(c);if(p>=c.byteLength)return null;var m,f=null;return 192&(m=c[p+7])&&((f={}).pts=(14&c[p+9])<<27|(255&c[p+10])<<20|(254&c[p+11])<<12|(255&c[p+12])<<5|(254&c[p+13])>>>3,f.pts*=4,f.pts+=(6&c[p+13])>>>1,f.dts=f.pts,64&m&&(f.dts=(14&c[p+14])<<27|(255&c[p+15])<<20|(254&c[p+16])<<12|(255&c[p+17])<<5|(254&c[p+18])>>>3,f.dts*=4,f.dts+=(6&c[p+18])>>>1)),f},videoPacketContainsKeyFrame:function(c){for(var h=4+$g(c),p=c.subarray(h),f=0,m=0,y=!1;m<p.byteLength-3;m++)if(1===p[m+2]){f=m+5;break}for(;f<p.byteLength;)switch(p[f]){case 0:if(0!==p[f-1]){f+=2;break}if(0!==p[f-2]){f++;break}m+3!==f-2&&"slice_layer_without_partitioning_rbsp_idr"===lT(31&p[m+3])&&(y=!0);do{f++}while(1!==p[f]&&f<p.length);m=f-2,f+=3;break;case 1:if(0!==p[f-1]||0!==p[f-2]){f+=3;break}"slice_layer_without_partitioning_rbsp_idr"===lT(31&p[m+3])&&(y=!0),m=f-2,f+=3;break;default:f+=3}return p=p.subarray(m),f-=m,m=0,p&&p.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===lT(31&p[m+3])&&(y=!0),y}},GP=Sg,hl=pP.handleRollover,Pt={};Pt.ts=uZ,Pt.aac=eT;var pa=Qt.ONE_SECOND_IN_TS,br=188,WP=function(c,h,p){for(var y,S,M,k,f=0,m=br,L=!1;m<=c.byteLength;)if(71!==c[f]||71!==c[m]&&m!==c.byteLength)f++,m++;else{if("pes"===(y=c.subarray(f,m),Pt.ts.parseType(y,h.pid))&&(S=Pt.ts.parsePesType(y,h.table),M=Pt.ts.parsePayloadUnitStartIndicator(y),"audio"===S&&M&&(k=Pt.ts.parsePesTime(y))&&(k.type="audio",p.audio.push(k),L=!0)),L)break;f+=br,m+=br}for(f=(m=c.byteLength)-br,L=!1;f>=0;)if(71!==c[f]||71!==c[m]&&m!==c.byteLength)f--,m--;else{if("pes"===(y=c.subarray(f,m),Pt.ts.parseType(y,h.pid))&&(S=Pt.ts.parsePesType(y,h.table),M=Pt.ts.parsePayloadUnitStartIndicator(y),"audio"===S&&M&&(k=Pt.ts.parsePesTime(y))&&(k.type="audio",p.audio.push(k),L=!0)),L)break;f-=br,m-=br}},cZ=function(c,h,p){for(var y,S,M,k,L,V,Te,f=0,m=br,G=!1,He={data:[],size:0};m<c.byteLength;)if(71!==c[f]||71!==c[m])f++,m++;else{if("pes"===(y=c.subarray(f,m),Pt.ts.parseType(y,h.pid))&&(S=Pt.ts.parsePesType(y,h.table),M=Pt.ts.parsePayloadUnitStartIndicator(y),"video"===S&&(M&&!G&&(k=Pt.ts.parsePesTime(y))&&(k.type="video",p.video.push(k),G=!0),!p.firstKeyFrame))){if(M&&0!==He.size){for(L=new Uint8Array(He.size),V=0;He.data.length;)Te=He.data.shift(),L.set(Te,V),V+=Te.byteLength;if(Pt.ts.videoPacketContainsKeyFrame(L)){var et=Pt.ts.parsePesTime(L);et?(p.firstKeyFrame=et,p.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}He.size=0}He.data.push(y),He.size+=y.byteLength}if(G&&p.firstKeyFrame)break;f+=br,m+=br}for(f=(m=c.byteLength)-br,G=!1;f>=0;)if(71!==c[f]||71!==c[m])f--,m--;else{if("pes"===(y=c.subarray(f,m),Pt.ts.parseType(y,h.pid))&&(S=Pt.ts.parsePesType(y,h.table),M=Pt.ts.parsePayloadUnitStartIndicator(y),"video"===S&&M&&(k=Pt.ts.parsePesTime(y))&&(k.type="video",p.video.push(k),G=!0)),G)break;f-=br,m-=br}},gZ_inspect=function(c,h){var f;return f=Pt.aac.isLikelyAacData(c)?function(c){for(var S,h=!1,p=0,f=null,m=null,y=0,D=0;c.length-D>=3;){switch(Pt.aac.parseType(c,D)){case"timed-metadata":if(c.length-D<10){h=!0;break}if((y=Pt.aac.parseId3TagSize(c,D))>c.length){h=!0;break}null===m&&(S=c.subarray(D,D+y),m=Pt.aac.parseAacTimestamp(S)),D+=y;break;case"audio":if(c.length-D<7){h=!0;break}if((y=Pt.aac.parseAdtsSize(c,D))>c.length){h=!0;break}null===f&&(S=c.subarray(D,D+y),f=Pt.aac.parseSampleRate(S)),p++,D+=y;break;default:D++}if(h)return null}if(null===f||null===m)return null;var k=pa/f;return{audio:[{type:"audio",dts:m,pts:m},{type:"audio",dts:m+1024*p*k,pts:m+1024*p*k}]}}(c):function(c){var h={pid:null,table:null},p={};for(var f in function(c,h){for(var m,p=0,f=br;f<c.byteLength;)if(71!==c[p]||71!==c[f])p++,f++;else{switch(m=c.subarray(p,f),Pt.ts.parseType(m,h.pid)){case"pat":h.pid=Pt.ts.parsePat(m);break;case"pmt":var D=Pt.ts.parsePmt(m);h.table=h.table||{},Object.keys(D).forEach(function(S){h.table[S]=D[S]})}p+=br,f+=br}}(c,h),h.table)if(h.table.hasOwnProperty(f))switch(h.table[f]){case GP.H264_STREAM_TYPE:p.video=[],cZ(c,h,p),0===p.video.length&&delete p.video;break;case GP.ADTS_STREAM_TYPE:p.audio=[],WP(c,h,p),0===p.audio.length&&delete p.audio}return p}(c),f&&(f.audio||f.video)?(function(c,h){if(c.audio&&c.audio.length){var p=h;(typeof p>"u"||isNaN(p))&&(p=c.audio[0].dts),c.audio.forEach(function(y){y.dts=hl(y.dts,p),y.pts=hl(y.pts,p),y.dtsTime=y.dts/pa,y.ptsTime=y.pts/pa})}if(c.video&&c.video.length){var f=h;if((typeof f>"u"||isNaN(f))&&(f=c.video[0].dts),c.video.forEach(function(y){y.dts=hl(y.dts,f),y.pts=hl(y.pts,f),y.dtsTime=y.dts/pa,y.ptsTime=y.pts/pa}),c.firstKeyFrame){var m=c.firstKeyFrame;m.dts=hl(m.dts,f),m.pts=hl(m.pts,f),m.dtsTime=m.dts/pa,m.ptsTime=m.pts/pa}}}(f,h),f):null};class XP{constructor(h,p){this.options=p||{},this.self=h,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new _Q.Transmuxer(this.options),function(c,h){h.on("data",function(p){const f=p.initSegment;p.initSegment={data:f.buffer,byteOffset:f.byteOffset,byteLength:f.byteLength};const m=p.data;p.data=m.buffer,c.postMessage({action:"data",segment:p,byteOffset:m.byteOffset,byteLength:m.byteLength},[p.data])}),h.on("done",function(p){c.postMessage({action:"done"})}),h.on("gopInfo",function(p){c.postMessage({action:"gopInfo",gopInfo:p})}),h.on("videoSegmentTimingInfo",function(p){const f={start:{decode:Qt.videoTsToSeconds(p.start.dts),presentation:Qt.videoTsToSeconds(p.start.pts)},end:{decode:Qt.videoTsToSeconds(p.end.dts),presentation:Qt.videoTsToSeconds(p.end.pts)},baseMediaDecodeTime:Qt.videoTsToSeconds(p.baseMediaDecodeTime)};p.prependedContentDuration&&(f.prependedContentDuration=Qt.videoTsToSeconds(p.prependedContentDuration)),c.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:f})}),h.on("audioSegmentTimingInfo",function(p){const f={start:{decode:Qt.videoTsToSeconds(p.start.dts),presentation:Qt.videoTsToSeconds(p.start.pts)},end:{decode:Qt.videoTsToSeconds(p.end.dts),presentation:Qt.videoTsToSeconds(p.end.pts)},baseMediaDecodeTime:Qt.videoTsToSeconds(p.baseMediaDecodeTime)};p.prependedContentDuration&&(f.prependedContentDuration=Qt.videoTsToSeconds(p.prependedContentDuration)),c.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:f})}),h.on("id3Frame",function(p){c.postMessage({action:"id3Frame",id3Frame:p})}),h.on("caption",function(p){c.postMessage({action:"caption",caption:p})}),h.on("trackinfo",function(p){c.postMessage({action:"trackinfo",trackInfo:p})}),h.on("audioTimingInfo",function(p){c.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Qt.videoTsToSeconds(p.start),end:Qt.videoTsToSeconds(p.end)}})}),h.on("videoTimingInfo",function(p){c.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Qt.videoTsToSeconds(p.start),end:Qt.videoTsToSeconds(p.end)}})}),h.on("log",function(p){c.postMessage({action:"log",log:p})})}(this.self,this.transmuxer)}pushMp4Captions(h){this.captionParser||(this.captionParser=new HQ,this.captionParser.init());const p=new Uint8Array(h.data,h.byteOffset,h.byteLength),f=this.captionParser.parse(p,h.trackIds,h.timescales);this.self.postMessage({action:"mp4Captions",captions:f&&f.captions||[],logs:f&&f.logs||[],data:p.buffer},[p.buffer])}probeMp4StartTime({timescales:h,data:p}){const f=aT_startTime(h,p);this.self.postMessage({action:"probeMp4StartTime",startTime:f,data:p},[p.buffer])}probeMp4Tracks({data:h}){const p=aT_tracks(h);this.self.postMessage({action:"probeMp4Tracks",tracks:p,data:h},[h.buffer])}probeEmsgID3({data:h,offset:p}){const f=aT_getEmsgID3(h,p);this.self.postMessage({action:"probeEmsgID3",id3Frames:f,emsgData:h},[h.buffer])}probeTs({data:h,baseStartTime:p}){const f="number"!=typeof p||isNaN(p)?void 0:p*Qt.ONE_SECOND_IN_TS,m=gZ_inspect(h,f);let y=null;m&&(y={hasVideo:m.video&&2===m.video.length||!1,hasAudio:m.audio&&2===m.audio.length||!1},y.hasVideo&&(y.videoStart=m.video[0].ptsTime),y.hasAudio&&(y.audioStart=m.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:y,data:h},[h.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(h){const p=new Uint8Array(h.data,h.byteOffset,h.byteLength);this.transmuxer.push(p)}reset(){this.transmuxer.reset()}setTimestampOffset(h){this.transmuxer.setBaseMediaDecodeTime(Math.round(Qt.secondsToVideoTs(h.timestampOffset||0)))}setAudioAppendStart(h){this.transmuxer.setAudioAppendStart(Math.ceil(Qt.secondsToVideoTs(h.appendStart)))}setRemux(h){this.transmuxer.setRemux(h.remux)}flush(h){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(h){this.transmuxer.alignGopsWith(h.gopsToAlignWith.slice())}}self.onmessage=function(c){"init"===c.data.action&&c.data.options?this.messageHandlers=new XP(self,c.data.options):(this.messageHandlers||(this.messageHandlers=new XP(self)),c.data&&c.data.action&&"init"!==c.data.action&&this.messageHandlers[c.data.action]&&this.messageHandlers[c.data.action](c.data))}}));var dX=dk(cX);const pk=t=>{const{transmuxer:e,bytes:n,audioAppendStart:r,gopsToAlignWith:i,remux:s,onData:o,onTrackInfo:a,onAudioTimingInfo:u,onVideoTimingInfo:l,onVideoSegmentTimingInfo:d,onAudioSegmentTimingInfo:g,onId3:v,onCaptions:b,onDone:_,onEndedTimeline:E,onTransmuxerLog:A,isEndOfTimeline:P}=t,x={buffer:[]};let B=P;if(e.onmessage=R=>{e.currentTransmux===t&&("data"===R.data.action&&((t,e,n)=>{const{type:r,initSegment:i,captions:s,captionStreams:o,metadata:a,videoFrameDtsTime:u,videoFramePtsTime:l}=t.data.segment;e.buffer.push({captions:s,captionStreams:o,metadata:a});const d=t.data.segment.boxes||{data:t.data.segment.data},g={type:r,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(i.data,i.byteOffset,i.byteLength)};typeof u<"u"&&(g.videoFrameDtsTime=u),typeof l<"u"&&(g.videoFramePtsTime=l),n(g)})(R,x,o),"trackinfo"===R.data.action&&a(R.data.trackInfo),"gopInfo"===R.data.action&&((t,e)=>{e.gopInfo=t.data.gopInfo})(R,x),"audioTimingInfo"===R.data.action&&u(R.data.audioTimingInfo),"videoTimingInfo"===R.data.action&&l(R.data.videoTimingInfo),"videoSegmentTimingInfo"===R.data.action&&d(R.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===R.data.action&&g(R.data.audioSegmentTimingInfo),"id3Frame"===R.data.action&&v([R.data.id3Frame],R.data.id3Frame.dispatchType),"caption"===R.data.action&&b(R.data.caption),"endedtimeline"===R.data.action&&(B=!1,E()),"log"===R.data.action&&A(R.data.log),"transmuxed"===R.data.type&&(B||(e.onmessage=null,(({transmuxedData:t,callback:e})=>{t.buffer=[],e(t)})({transmuxedData:x,callback:_}),gk(e))))},r&&e.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(i)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),n.byteLength){const R=n instanceof ArrayBuffer?n:n.buffer,Z=n instanceof ArrayBuffer?0:n.byteOffset;e.postMessage({action:"push",data:R,byteOffset:Z,byteLength:n.byteLength},[R])}P&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},gk=t=>{t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),"function"==typeof t.currentTransmux?t.currentTransmux():pk(t.currentTransmux))},mk=(t,e)=>{t.postMessage({action:e}),gk(t)};var Nb_reset=t=>{((t,e)=>{if(!e.currentTransmux)return e.currentTransmux=t,void mk(e,t);e.transmuxQueue.push(mk.bind(null,e,t))})("reset",t)};const Dd=function(t){const e=t.transmuxer,n=t.endAction||t.action,r=t.callback,i=co({},t,{endAction:null,transmuxer:null,callback:null}),s=o=>{o.data.action===n&&(e.removeEventListener("message",s),o.data.data&&(o.data.data=new Uint8Array(o.data.data,t.byteOffset||0,t.byteLength||o.data.data.byteLength),t.data&&(t.data=o.data.data)),r(o.data))};if(e.addEventListener("message",s),t.data){const o=t.data instanceof ArrayBuffer;i.byteOffset=o?0:t.data.byteOffset,i.byteLength=t.data.byteLength,e.postMessage(i,[o?t.data:t.data.buffer])}else e.postMessage(i)},Rb=t=>{t.forEach(e=>{e.abort()})},Lb=(t,e)=>e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:-101,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:-102,xhr:e}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:2,xhr:e}:"arraybuffer"===e.responseType&&0===e.response.byteLength?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:2,xhr:e}:null,_k=(t,e,n)=>(r,i)=>{const s=i.response,o=Lb(r,i);if(o)return n(o,t);if(16!==s.byteLength)return n({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:2,xhr:i},t);const a=new DataView(s),u=new Uint32Array([a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12)]);for(let l=0;l<e.length;l++)e[l].bytes=u;return n(null,t)},bk=(t,e)=>{const n=w_(t.map.bytes);if("mp4"!==n)return e({internal:!0,message:`Found unsupported ${n||"unknown"} container for initialization segment at URL: ${t.map.resolvedUri||t.map.uri}`,code:2});Dd({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:({tracks:r,data:i})=>(t.map.bytes=i,r.forEach(function(s){t.map.tracks=t.map.tracks||{},!t.map.tracks[s.type]&&(t.map.tracks[s.type]=s,"number"==typeof s.id&&s.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[s.id]=s.timescale))}),e(null))})},TX=({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:g,onTransmuxerLog:v})=>{const b=t.map&&t.map.tracks||{},_=!(!b.audio||!b.video);let E=r.bind(null,t,"audio","start");const A=r.bind(null,t,"audio","end");let P=r.bind(null,t,"video","start");const x=r.bind(null,t,"video","end");Dd({action:"probeTs",transmuxer:t.transmuxer,data:e,baseStartTime:t.baseStartTime,callback:F=>{t.bytes=e=F.data;const R=F.result;R&&(n(t,{hasAudio:R.hasAudio,hasVideo:R.hasVideo,isMuxed:_}),n=null),(t=>{if(!t.transmuxer.currentTransmux)return t.transmuxer.currentTransmux=t,void pk(t);t.transmuxer.transmuxQueue.push(t)})({bytes:e,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:_,onData:F=>{F.type="combined"===F.type?"video":F.type,d(t,F)},onTrackInfo:F=>{n&&(_&&(F.isMuxed=!0),n(t,F))},onAudioTimingInfo:F=>{E&&typeof F.start<"u"&&(E(F.start),E=null),A&&typeof F.end<"u"&&A(F.end)},onVideoTimingInfo:F=>{P&&typeof F.start<"u"&&(P(F.start),P=null),x&&typeof F.end<"u"&&x(F.end)},onVideoSegmentTimingInfo:F=>{i(F)},onAudioSegmentTimingInfo:F=>{s(F)},onId3:(F,R)=>{o(t,F,R)},onCaptions:F=>{a(t,[F])},isEndOfTimeline:u,onEndedTimeline:()=>{l()},onTransmuxerLog:v,onDone:F=>{g&&(F.type="combined"===F.type?"video":F.type,g(null,t,F))}})}})},Tk=({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:g,onTransmuxerLog:v})=>{let b=new Uint8Array(e);if(function(e){return Ar(e,["moof"]).length>0}(b)){t.isFmp4=!0;const{tracks:_}=t.map,E={isFmp4:!0,hasVideo:!!_.video,hasAudio:!!_.audio};_.audio&&_.audio.codec&&"enca"!==_.audio.codec&&(E.audioCodec=_.audio.codec),_.video&&_.video.codec&&"encv"!==_.video.codec&&(E.videoCodec=_.video.codec),_.video&&_.audio&&(E.isMuxed=!0),n(t,E);const A=(P,x)=>{d(t,{data:b,type:E.hasAudio&&!E.isMuxed?"audio":"video"}),x&&x.length&&o(t,x),P&&P.length&&a(t,P),g(null,t,{})};Dd({action:"probeMp4StartTime",timescales:t.map.timescales,data:b,transmuxer:t.transmuxer,callback:({data:P,startTime:x})=>{e=P.buffer,t.bytes=b=P,E.hasAudio&&!E.isMuxed&&r(t,"audio","start",x),E.hasVideo&&r(t,"video","start",x),Dd({action:"probeEmsgID3",data:b,transmuxer:t.transmuxer,offset:x,callback:({emsgData:B,id3Frames:F})=>{e=B.buffer,t.bytes=b=B,_.video&&B.byteLength&&t.transmuxer?Dd({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:b,timescales:t.map.timescales,trackIds:[_.video.id],callback:R=>{e=R.data.buffer,t.bytes=b=R.data,R.logs.forEach(function(Z){v(Rt(Z,{stream:"mp4CaptionParser"}))}),A(R.captions,F)}}):A(void 0,F)}})}})}else{if(t.transmuxer)return typeof t.container>"u"&&(t.container=w_(b)),"ts"!==t.container&&"aac"!==t.container?(n(t,{hasAudio:!1,hasVideo:!1}),void g(null,t,{})):void TX({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:g,onTransmuxerLog:v});g(null,t,{})}},Ck=function({id:t,key:e,encryptedBytes:n,decryptionWorker:r},i){const s=a=>{if(a.data.source===t){r.removeEventListener("message",s);const u=a.data.decrypted;i(new Uint8Array(u.bytes,u.byteOffset,u.byteLength))}};let o;r.addEventListener("message",s),o=e.bytes.slice?e.bytes.slice():new Uint32Array(Array.prototype.slice.call(e.bytes)),r.postMessage(rk({source:t,encrypted:n,key:o,iv:e.iv}),[n.buffer,o.buffer])},wX=({xhr:t,xhrOptions:e,decryptionWorker:n,segment:r,abortFn:i,progressFn:s,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:l,id3Fn:d,captionsFn:g,isEndOfTimeline:v,endedTimelineFn:b,dataFn:_,doneFn:E,onTransmuxerLog:A})=>{const P=[],x=(({activeXhrs:t,decryptionWorker:e,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:g,onTransmuxerLog:v})=>{let b=0,_=!1;return(E,A)=>{if(!_){if(E)return _=!0,Rb(t),g(E,A);if(b+=1,b===t.length){const P=function(){if(A.encryptedBytes)return(({decryptionWorker:t,segment:e,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:g,onTransmuxerLog:v})=>{Ck({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:t},b=>{e.bytes=b,Tk({segment:e,bytes:e.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:g,onTransmuxerLog:v})})})({decryptionWorker:e,segment:A,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:g,onTransmuxerLog:v});Tk({segment:A,bytes:A.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:g,onTransmuxerLog:v})};if(A.endOfAllRequests=Date.now(),A.map&&A.map.encryptedBytes&&!A.map.bytes)return Ck({decryptionWorker:e,id:A.requestId+"-init",encryptedBytes:A.map.encryptedBytes,key:A.map.key},x=>{A.map.bytes=x,bk(A,B=>{if(B)return Rb(t),g(B,A);P()})});P()}}}})({activeXhrs:P,decryptionWorker:n,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:l,id3Fn:d,captionsFn:g,isEndOfTimeline:v,endedTimelineFn:b,dataFn:_,doneFn:E,onTransmuxerLog:A});if(r.key&&!r.key.bytes){const we=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&we.push(r.map.key);const sn=t(Rt(e,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),_k(r,we,x));P.push(sn)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){const Be=t(Rt(e,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),_k(r,[r.map.key],x));P.push(Be)}const st=Rt(e,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Ob(r.map)}),ft=(({segment:t,finishProcessingFn:e})=>(n,r)=>{const i=Lb(n,r);if(i)return e(i,t);const s=new Uint8Array(r.response);if(t.map.key)return t.map.encryptedBytes=s,e(null,t);t.map.bytes=s,bk(t,function(o){if(o)return o.xhr=r,o.status=r.status,e(o,t);e(null,t)})})({segment:r,finishProcessingFn:x}),sn=t(st,ft);P.push(sn)}const B=Rt(e,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:Ob(r)}),R=t(B,(({segment:t,finishProcessingFn:e,responseType:n})=>(r,i)=>{const s=Lb(r,i);if(s)return e(s,t);const o="arraybuffer"!==n&&i.responseText?(t=>{const e=new Uint8Array(new ArrayBuffer(t.length));for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e.buffer})(i.responseText.substring(t.lastReachedChar||0)):i.response;return t.stats=(t=>({bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}))(i),t.key?t.encryptedBytes=new Uint8Array(o):t.bytes=new Uint8Array(o),e(null,t)})({segment:r,finishProcessingFn:x,responseType:B.responseType}));R.addEventListener("progress",(({segment:t,progressFn:e})=>g=>{if(!g.target.aborted)return t.stats=Rt(t.stats,(t=>{const e=t.target,r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return r.bytesReceived=t.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r})(g)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),e(g,t)})({segment:r,progressFn:s,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:l,id3Fn:d,captionsFn:g,isEndOfTimeline:v,endedTimelineFn:b,dataFn:_})),P.push(R);const Z={};return P.forEach(we=>{we.addEventListener("loadend",(({loadendState:t,abortFn:e})=>n=>{n.target.aborted&&e&&!t.calledAbortFn&&(e(),t.calledAbortFn=!0)})({loadendState:Z,abortFn:i}))}),()=>Rb(P)},xX=li("CodecUtils"),Ek=(t,e)=>{const n=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&n.AUDIO&&t.mediaGroups.AUDIO[n.AUDIO]},ug=function(t){const e={};return t.forEach(({mediaType:n,type:r,details:i})=>{e[n]=e[n]||[],e[n].push(h_(`${r}${i}`))}),Object.keys(e).forEach(function(n){if(e[n].length>1)return xX(`multiple ${n} codecs found as attributes: ${e[n].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(e[n]=null);e[n]=e[n][0]}),e},Dk=function(t){let e=0;return t.audio&&e++,t.video&&e++,e},Sd=function(t,e){const n=e.attributes||{},r=ug(function(t){const e=t.attributes||{};if(e.CODECS)return Ji(e.CODECS)}(e)||[]);if(Ek(t,e)&&!r.audio&&!((t,e)=>{if(!Ek(t,e))return!0;const r=t.mediaGroups.AUDIO[(e.attributes||{}).AUDIO];for(const i in r)if(!r[i].uri&&!r[i].playlists)return!0;return!1})(t,e)){const i=ug(function(e,n){if(!e.mediaGroups.AUDIO||!n)return null;var r=e.mediaGroups.AUDIO[n];if(!r)return null;for(var i in r){var s=r[i];if(s.default&&s.playlists)return Ji(s.playlists[0].attributes.CODECS)}return null}(t,n.AUDIO)||[]);i.audio&&(r.audio=i.audio)}return r},lg=li("PlaylistSelector"),Sk=function(t){if(!t||!t.playlist)return;const e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})},cg=function(t,e){if(!t)return"";const n=O().getComputedStyle(t);return n?n[e]:""},ol=function(t,e){const n=t.slice();t.sort(function(r,i){const s=e(r,i);return 0===s?n.indexOf(r)-n.indexOf(i):s})},Fb=function(t,e){let n,r;return t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||O().Number.MAX_VALUE,e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||O().Number.MAX_VALUE,n-r};let wk=function(t,e,n,r,i,s){if(!t)return;const o={bandwidth:e,width:n,height:r,limitRenditionByPlayerDimensions:i};let a=t.playlists;Mr.isAudioOnly(t)&&(a=s.getAudioTrackPlaylists_(),o.audioOnly=!0);let u=a.map(R=>{let Z;const we=R.attributes&&R.attributes.RESOLUTION&&R.attributes.RESOLUTION.width,st=R.attributes&&R.attributes.RESOLUTION&&R.attributes.RESOLUTION.height;return Z=R.attributes&&R.attributes.BANDWIDTH,Z=Z||O().Number.MAX_VALUE,{bandwidth:Z,width:we,height:st,playlist:R}});ol(u,(R,Z)=>R.bandwidth-Z.bandwidth),u=u.filter(R=>!Mr.isIncompatible(R.playlist));let l=u.filter(R=>Mr.isEnabled(R.playlist));l.length||(l=u.filter(R=>!Mr.isDisabled(R.playlist)));const d=l.filter(R=>R.bandwidth*Rn.BANDWIDTH_VARIANCE<e);let g=d[d.length-1];const v=d.filter(R=>R.bandwidth===g.bandwidth)[0];if(!1===i){const R=v||l[0]||u[0];if(R&&R.playlist){let Z="sortedPlaylistReps";return v&&(Z="bandwidthBestRep"),l[0]&&(Z="enabledPlaylistReps"),lg(`choosing ${Sk(R)} using ${Z} with options`,o),R.playlist}return lg("could not choose a playlist with options",o),null}const b=d.filter(R=>R.width&&R.height);ol(b,(R,Z)=>R.width-Z.width);const _=b.filter(R=>R.width===n&&R.height===r);g=_[_.length-1];const E=_.filter(R=>R.bandwidth===g.bandwidth)[0];let A,P,x,B;if(E||(A=b.filter(R=>R.width>n||R.height>r),P=A.filter(R=>R.width===A[0].width&&R.height===A[0].height),g=P[P.length-1],x=P.filter(R=>R.bandwidth===g.bandwidth)[0]),s.leastPixelDiffSelector){const R=b.map(Z=>(Z.pixelDiff=Math.abs(Z.width-n)+Math.abs(Z.height-r),Z));ol(R,(Z,we)=>Z.pixelDiff===we.pixelDiff?we.bandwidth-Z.bandwidth:Z.pixelDiff-we.pixelDiff),B=R[0]}const F=B||x||E||v||l[0]||u[0];if(F&&F.playlist){let R="sortedPlaylistReps";return B?R="leastPixelDiffRep":x?R="resolutionPlusOneRep":E?R="resolutionBestRep":v?R="bandwidthBestRep":l[0]&&(R="enabledPlaylistReps"),lg(`choosing ${Sk(F)} using ${R} with options`,o),F.playlist}return lg("could not choose a playlist with options",o),null};const xk=function(){const t=this.useDevicePixelRatio&&O().devicePixelRatio||1;return wk(this.playlists.main,this.systemBandwidth,parseInt(cg(this.tech_.el(),"width"),10)*t,parseInt(cg(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.playlistController_)},UX={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},VX=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Ak=(t,e,n)=>{t.metadataTrack_||(t.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,$.browser.IS_ANY_SAFARI||(t.metadataTrack_.inBandMetadataTrackDispatchType=e))},wd=function(t,e,n){let r,i;if(n&&n.cues)for(r=n.cues.length;r--;)i=n.cues[r],i.startTime>=t&&i.endTime<=e&&n.removeCue(i)},Mk=t=>"number"==typeof t&&isFinite(t),dg=1/60,al=t=>{const{startOfSegment:e,duration:n,segment:r,part:i,playlist:{mediaSequence:s,id:o,segments:a=[]},mediaIndex:u,partIndex:l,timeline:d}=t,g=a.length-1;let v="mediaIndex/partIndex increment";t.getMediaInfoForTime?v=`getMediaInfoForTime (${t.getMediaInfoForTime})`:t.isSyncRequest&&(v="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(v+=` with independent ${t.independent}`);const b="number"==typeof l,_=t.segment.uri?"segment":"pre-segment",E=b?jO({preloadSegment:r})-1:0;return`${_} [${s+u}/${s+g}]`+(b?` part [${l}/${E}]`:"")+` segment start/end [${r.start} => ${r.end}]`+(b?` part start/end [${i.start} => ${i.end}]`:"")+` startOfSegment [${e}] duration [${n}] timeline [${d}] selected by [${v}] playlist [${o}]`},Ok=t=>`${t}TimingInfo`,kk=(t,e)=>t.length?t.end(t.length-1):e,Pk=({timelineChangeController:t,currentTimeline:e,segmentTimeline:n,loaderType:r,audioDisabled:i})=>{if(e===n)return!1;if("audio"===r){const s=t.lastTimelineChange({type:"main"});return!s||s.to!==n}if("main"===r&&i){const s=t.pendingTimelineChange({type:"audio"});return!(s&&s.to===n)}return!1},Nk=({segmentDuration:t,maxDuration:e})=>!!t&&Math.round(t)>e+vo;class Bb extends $.EventTarget{constructor(e,n={}){if(super(),!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.calculateTimestampOffsetForEachSegment_=e.calculateTimestampOffsetForEachSegment,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.replaceSegmentsUntil_=-1,this.logger_=li(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(r){r!==this.state_&&(this.logger_(`${this.state_} -> ${r}`),this.state_=r,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}createTransmuxer_(){return(t=>{const e=new dX;e.currentTransmux=null,e.transmuxQueue=[];const n=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,n.call(e)),e.postMessage({action:"init",options:t}),e})({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&O().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,O().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&Nb_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return tr();if("main"===this.loaderType_){const{hasAudio:n,hasVideo:r,isMuxed:i}=e;if(r&&n&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(r)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,n=!1){if(!e)return null;const r=ag(e);let i=this.initSegments_[r];return n&&!i&&e.bytes&&(this.initSegments_[r]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}segmentKey(e,n=!1){if(!e)return null;const r=ik(e);let i=this.keyCache_[r];this.cacheEncryptionKeys_&&n&&!i&&e.bytes&&(this.keyCache_[r]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(i||e).resolvedUri};return i&&(s.bytes=i.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,n={}){if(!e)return;const r=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(r&&(r.id?s=r.id:r.uri&&(s=r.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!r||r.uri!==e.uri)return null!==this.mediaIndex&&(e.endList||"number"!=typeof e.partTargetDuration?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const o=e.mediaSequence-r.mediaSequence;if(this.logger_(`live window shift [${o}]`),null!==this.mediaIndex)if(this.mediaIndex-=o,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const a=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!a.parts||!a.parts.length||!a.parts[this.partIndex])){const u=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=u}}i&&(i.mediaIndex-=o,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(r,e)}pause(){this.checkBufferTimeout_&&(O().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetLoaderProperties(){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0}}resetEverything(e){this.resetLoaderProperties(),this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&Nb_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,n,r=(()=>{}),i=!1){if(n===1/0&&(n=this.duration_()),n<=e)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let s=1;const o=()=>{s--,0===s&&r()};(i||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,n,o)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=((t,e,n,r)=>{const i=Math.ceil((e-r)*wp.ONE_SECOND_IN_TS),s=Math.ceil((n-r)*wp.ONE_SECOND_IN_TS),o=t.slice();let a=t.length;for(;a--&&!(t[a].pts<=s););if(-1===a)return o;let u=a+1;for(;u--&&!(t[u].pts<=i););return u=Math.max(u,0),o.splice(u,a-u+1),o})(this.gopBuffer_,e,n,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,n,o));for(const a in this.inbandTextTracks_)wd(e,n,this.inbandTextTracks_[a]);wd(e,n,this.segmentMetadataTrack_),o()}monitorBuffer_(){this.checkBufferTimeout_&&O().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=O().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&O().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=O().setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,n=this.playlist_,r=this.partIndex){if(!n||!this.mediaSource_)return!1;const i="number"==typeof e&&n.segments[e];return n.endList&&"open"===this.mediaSource_.readyState&&e+1===n.segments.length&&(!i||!i.parts||r+1===i.parts.length)}chooseNextRequest_(){const e=this.buffered_(),n=UO(e)||0,r=Tb(e,this.currentTime_()),i=!this.hasPlayed_()&&r>=1,s=r>=this.goalBufferLength_(),o=this.playlist_.segments;if(!o.length||i||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());const a={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(a.isSyncRequest)a.mediaIndex=function(t,e,n){e=e||[];const r=[];let i=0;for(let s=0;s<e.length;s++){const o=e[s];if(t===o.timeline&&(r.push(s),i+=o.duration,i>n))return s}return 0===r.length?0:r[r.length-1]}(this.currentTimeline_,o,n);else if(null!==this.mediaIndex){const v=o[this.mediaIndex],b="number"==typeof this.partIndex?this.partIndex:-1;a.startOfSegment=v.end?v.end:n,v.parts&&v.parts[b+1]?(a.mediaIndex=this.mediaIndex,a.partIndex=b+1):a.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:v,startTime:b,partIndex:_}=Mr.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?n:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});a.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${n}`:`currentTime ${this.currentTime_()}`,a.mediaIndex=v,a.startOfSegment=b,a.partIndex=_}const u=o[a.mediaIndex];let l=u&&"number"==typeof a.partIndex&&u.parts&&u.parts[a.partIndex];if(!u||"number"==typeof a.partIndex&&!l)return null;if("number"!=typeof a.partIndex&&u.parts&&(a.partIndex=0,l=u.parts[0]),!r&&l&&!(this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments)&&!l.independent)if(0===a.partIndex){const v=o[a.mediaIndex-1],b=v.parts&&v.parts.length&&v.parts[v.parts.length-1];b&&b.independent&&(a.mediaIndex-=1,a.partIndex=v.parts.length-1,a.independent="previous segment")}else u.parts[a.partIndex-1].independent&&(a.partIndex-=1,a.independent="previous part");return a.mediaIndex>=o.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(a)}generateSegmentInfo_(e){const{independent:n,playlist:r,mediaIndex:i,startOfSegment:s,isSyncRequest:o,partIndex:a,forceTimestampOffset:u,getMediaInfoForTime:l}=e,d=r.segments[i],g="number"==typeof a&&d.parts[a],v={requestId:"segment-loader-"+Math.random(),uri:g&&g.resolvedUri||d.resolvedUri,mediaIndex:i,partIndex:g?a:null,isSyncRequest:o,startOfSegment:s,playlist:r,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:d.timeline,duration:g&&g.duration||d.duration,segment:d,part:g,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:l,independent:n},b=typeof u<"u"?u:this.isPendingTimestampOffset_;v.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:d.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),calculateTimestampOffsetForEachSegment:this.calculateTimestampOffsetForEachSegment_,overrideCheck:b});const _=UO(this.sourceUpdater_.audioBuffered());return"number"==typeof _&&(v.audioAppendStart=_-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(v.gopsToAlignWith=((t,e,n)=>{if(typeof e>"u"||null===e||!t.length)return[];const r=Math.ceil((e-this.timeMapping_+3)*wp.ONE_SECOND_IN_TS);let i;for(i=0;i<t.length&&!(t[i].pts>r);i++);return t.slice(i)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset())),v}timestampOffsetForSegment_(e){return(({segmentTimeline:t,currentTimeline:e,startOfSegment:n,buffered:r,calculateTimestampOffsetForEachSegment:i,overrideCheck:s})=>i?kk(r,n):s||t!==e?t<e?n:kk(r,n):null)(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const n=this.currentTime_(),r=e.bandwidth,i=this.pendingSegment_.duration,s=Mr.estimateSegmentRequestTime(i,r,this.playlist_,e.bytesReceived),o=function(t,e,n=1){return((t.length?t.end(t.length-1):0)-e)/n}(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(s<=o)return;const a=function(t){const{main:e,currentTime:n,bandwidth:r,duration:i,segmentDuration:s,timeUntilRebuffer:o,currentTimeline:a,syncController:u}=t,l=e.playlists.filter(_=>!Mr.isIncompatible(_));let d=l.filter(Mr.isEnabled);d.length||(d=l.filter(_=>!Mr.isDisabled(_)));const v=d.filter(Mr.hasAttribute.bind(null,"BANDWIDTH")).map(_=>{const A=u.getSyncPoint(_,i,a,n)?1:2;return{playlist:_,rebufferingImpact:Mr.estimateSegmentRequestTime(s,r,_)*A-o}}),b=v.filter(_=>_.rebufferingImpact<=0);return ol(b,(_,E)=>Fb(E.playlist,_.playlist)),b.length?b[0]:(ol(v,(_,E)=>_.rebufferingImpact-E.rebufferingImpact),v[0]||null)}({main:this.vhs_.playlists.main,currentTime:n,bandwidth:r,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!a)return;let d=.5;o<=vo&&(d=1),a.playlist&&a.playlist.uri!==this.playlist_.uri&&!(s-o-a.rebufferingImpact<d)&&(this.bandwidth=a.playlist.attributes.BANDWIDTH*Rn.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${al(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,n){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&this.trigger("progress")}handleTrackInfo_(e,n){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(n)||(function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;const n=Object.keys(t).sort(),r=Object.keys(e).sort();if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++){const s=n[i];if(s!==r[i]||t[s]!==e[s])return!1}return!0}(this.currentMediaInfo_,n=n||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(e,n,r,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,o=Ok(n);s[o]=s[o]||{},s[o][r]=i,this.logger_(`timinginfo: ${n} - ${r} - ${i}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(0===n.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,n));const i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};n.forEach(o=>{s[o.stream]=s[o.stream]||{startTime:1/0,captions:[],endTime:0};const a=s[o.stream];a.startTime=Math.min(a.startTime,o.startTime+i),a.endTime=Math.max(a.endTime,o.endTime+i),a.captions.push(o)}),Object.keys(s).forEach(o=>{const{startTime:a,endTime:u,captions:l}=s[o],d=this.inbandTextTracks_;this.logger_(`adding cues from ${a} -> ${u} for ${o}`),function(t,e,n){if(!t[n]){e.trigger({type:"usage",name:"vhs-608"});let r=n;/^cc708_/.test(n)&&(r="SERVICE"+n.split("_")[1]);const i=e.textTracks().getTrackById(r);if(i)t[n]=i;else{let o=n,a=n,u=!1;const l=(e.options_.vhs&&e.options_.vhs.captionServices||{})[r];l&&(o=l.label,a=l.language,u=l.default),t[n]=e.addRemoteTextTrack({kind:"captions",id:r,default:u,label:o,language:a},!1).track}}}(d,this.vhs_.tech_,o),wd(a,u,d[o]),function({inbandTextTracks:t,captionArray:e,timestampOffset:n}){if(!e)return;const r=O().WebKitDataCue||O().VTTCue;e.forEach(i=>{const s=i.stream;i.content?i.content.forEach(o=>{const a=new r(i.startTime+n,i.endTime+n,o.text);a.line=o.line,a.align="left",a.position=o.position,a.positionAlign="line-left",t[s].addCue(a)}):t[s].addCue(new r(i.startTime+n,i.endTime+n,i.text))})}({captionArray:l,inbandTextTracks:d,timestampOffset:i})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,n,r){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||(this.pendingSegment_.hasAppendedData_?this.addMetadataToTextTrack(r,n,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,n,r)))}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(n=>n())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(n=>n())}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&Pk({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,n=this.getCurrentMediaInfo_();if(!e||!n)return!1;const{hasAudio:r,hasVideo:i,isMuxed:s}=n;return!(i&&!e.videoTimingInfo||r&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||Pk({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,e,n));const r=this.pendingSegment_;if(this.setTimeMapping_(r.timeline),this.updateMediaSecondsLoaded_(r.part||r.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),r.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),r.isFmp4=e.isFmp4,r.timingInfo=r.timingInfo||{},r.isFmp4)this.trigger("fmp4"),r.timingInfo.start=r[Ok(n.type)].start;else{const i=this.getCurrentMediaInfo_(),s="main"===this.loaderType_&&i&&i.hasVideo;let o;s&&(o=r.videoTimingInfo.start),r.timingInfo.start=this.trueSegmentStart_({currentStart:r.timingInfo.start,playlist:r.playlist,mediaIndex:r.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:o,videoTimingInfo:r.videoTimingInfo,audioTimingInfo:r.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(r,n.type),this.updateSourceBufferTimestampOffset_(r),r.isSyncRequest){this.updateTimingInfoEnd_(r),this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:"main"===this.loaderType_});const i=this.chooseNextRequest_();if(i.mediaIndex!==r.mediaIndex||i.partIndex!==r.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}r.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(r,n)}}updateAppendInitSegmentStatus(e,n){"main"===this.loaderType_&&"number"==typeof e.timestampOffset&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==e.playlist&&(this.appendInitSegment_[n]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:n,map:r,playlist:i}){if(r){const s=ag(r);if(this.activeInitSegmentId_===s)return null;n=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=s}return n&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=i,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,n):null}handleQuotaExceededError_({segmentInfo:e,type:n,bytes:r},i){const s=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+oa(s).join(", ")),o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+oa(o).join(", "));const a=s.length?s.start(0):0,u=s.length?s.end(s.length-1):0,l=o.length?o.start(0):0,d=o.length?o.end(o.length-1):0;if(u-a<=1&&d-l<=1)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${r.byteLength}, audio buffer: ${oa(s).join(", ")}, video buffer: ${oa(o).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:n,bytes:r}));const v=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${v}`),this.remove(0,v,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=O().setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},1e3)},!0)}handleAppendError_({segmentInfo:e,type:n,bytes:r},i){if(i){if(22===i.code)return void this.handleQuotaExceededError_({segmentInfo:e,type:n,bytes:r});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error(`${n} append of ${r.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:r,data:i,bytes:s}){if(!s){const o=[i];let a=i.byteLength;r&&(o.unshift(r),a+=r.byteLength),s=(t=>{let n,e=0;return t.bytes&&(n=new Uint8Array(t.bytes),t.segments.forEach(r=>{n.set(r,e),e+=r.byteLength})),n})({bytes:a,segments:o})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:n,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:n,bytes:s}))}handleSegmentTimingInfo_(e,n,r){if(!this.pendingSegment_||n!==this.pendingSegment_.requestId)return;const i=this.pendingSegment_.segment,s=`${e}TimingInfo`;i[s]||(i[s]={}),i[s].transmuxerPrependedSeconds=r.prependedContentDuration||0,i[s].transmuxedPresentationStart=r.start.presentation,i[s].transmuxedDecodeStart=r.start.decode,i[s].transmuxedPresentationEnd=r.end.presentation,i[s].transmuxedDecodeEnd=r.end.decode,i[s].baseMediaDecodeTime=r.baseMediaDecodeTime}appendData_(e,n){const{type:r,data:i}=n;if(!i||!i.byteLength||"audio"===r&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:r,initSegment:n.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:r,initSegment:s,data:i})}loadSegment_(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push(()=>{const n=co({},e,{forceTimestampOffset:!0});co(e,this.generateSegmentInfo_(n)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)})}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const n=this.createSimplifiedSegmentObj_(e),o=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)||null!==this.mediaIndex&&e.timeline!==this.currentTimeline_&&e.timeline>0;this.logger_(`Requesting ${al(e)}`),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=wX({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:a,level:u,stream:l})=>{this.logger_(`${al(e)} logged from transmuxer stream ${l} as a ${u}: ${a}`)}})}trimBackBuffer_(e){const n=((t,e,n)=>{let r=e-Rn.BACK_BUFFER_LENGTH;return t.length&&(r=Math.max(r,t.start(0))),Math.min(e-n,r)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)}createSimplifiedSegmentObj_(e){const n=e.segment,r=e.part,i={resolvedUri:r?r.resolvedUri:n.resolvedUri,byterange:r?r.byterange:n.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},s=e.playlist.segments[e.mediaIndex-1];if(s&&s.timeline===n.timeline&&(s.videoTimingInfo?i.baseStartTime=s.videoTimingInfo.transmuxedDecodeEnd:s.audioTimingInfo&&(i.baseStartTime=s.audioTimingInfo.transmuxedDecodeEnd)),n.key){const o=n.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(n.key),i.key.iv=o}return n.map&&(i.map=this.initSegmentForMap(n.map)),i}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,n){this.pendingSegment_.byteLength=n.bytesReceived,e<dg?this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${dg}`):(this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,n,r){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,n,r));if(this.saveTransferStats_(n.stats),!this.pendingSegment_||n.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",-102===e.code)return;return this.pause(),-101===e.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,n.stats),i.endOfAllRequests=n.endOfAllRequests,r.gopInfo&&(this.gopBuffer_=((t,e,n)=>{if(!e.length)return t;if(this.safeAppend_)return e.slice();const r=e[0].pts;let i=0;for(;i<t.length&&!(t[i].pts>=r);i++);return t.slice(0,i).concat(e)})(this.gopBuffer_,r.gopInfo)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}setTimeMapping_(e){const n=this.syncController_.mappingForTimeline(e);null!==n&&(this.timeMapping_=n)}updateMediaSecondsLoaded_(e){this.mediaSecondsLoaded+="number"==typeof e.start&&"number"==typeof e.end?e.end-e.start:e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:e,playlist:n,mediaIndex:r,firstVideoFrameTimeForData:i,currentVideoTimestampOffset:s,useVideoTimingInfo:o,videoTimingInfo:a,audioTimingInfo:u}){if(typeof e<"u")return e;if(!o)return u.start;const l=n.segments[r-1];return 0===r||!l||typeof l.start>"u"||l.end!==i+s?i:a.start}waitForAppendsToComplete_(e){const n=this.getCurrentMediaInfo_(e);if(!n)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:r,hasVideo:i,isMuxed:s}=n,o="main"===this.loaderType_&&i,a=!this.audioDisabled_&&r&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_)return!e.timingInfo&&"number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);o&&e.waitingOnAppends++,a&&e.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),a&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const n=((t,e,n)=>"main"===t&&e&&n?n.hasAudio||n.hasVideo?e.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!n&&(this.error({message:n,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(e){if(null===e.timestampOffset||"number"!=typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_)return;let n=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),n=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:n,timingInfo:r}){return this.useDtsForTimestampOffset_?e&&"number"==typeof e.transmuxedDecodeStart?e.transmuxedDecodeStart:n&&"number"==typeof n.transmuxedDecodeStart?n.transmuxedDecodeStart:r.start:r.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const n=this.getMediaInfo_(),i="main"===this.loaderType_&&n&&n.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;i&&(e.timingInfo.end="number"==typeof i.end?i.end:i.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});const n=((t,e)=>{if("hls"!==e)return null;const n=(t=>{let e=0;return["video","audio"].forEach(function(n){const r=t[`${n}TimingInfo`];if(!r)return;const{start:i,end:s}=r;let o;"bigint"==typeof i||"bigint"==typeof s?o=O().BigInt(s)-O().BigInt(i):"number"==typeof i&&"number"==typeof s&&(o=s-i),typeof o<"u"&&o>e&&(e=o)}),"bigint"==typeof e&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e})({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!n)return null;const r=t.playlist.targetDuration,i=Nk({segmentDuration:n,maxDuration:2*r}),s=Nk({segmentDuration:n,maxDuration:r});return i||s?{severity:i?"warn":"info",message:`Segment with index ${t.mediaIndex} from playlist ${t.playlist.id} has a duration of ${n} when the reported duration is ${t.duration} and the target duration is ${r}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`}:null})(e,this.sourceType_);if(n&&("warn"===n.severity?$.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${al(e)}`);this.logger_(`Appended ${al(e)}`),this.addSegmentMetadataCue_(e),this.currentTime_()>=this.replaceSegmentsUntil_&&(this.replaceSegmentsUntil_=-1,this.fetchAtBuffer_=!0),this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const r=e.segment,i=e.part,s=r.end&&this.currentTime_()-r.end>3*e.playlist.targetDuration,o=i&&i.end&&this.currentTime_()-i.end>3*e.playlist.partTargetDuration;if(s||o)return this.logger_(`bad ${s?"segment":"part"} ${al(e)}`),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<dg)return void this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${dg}`);const n=this.throughput.rate,r=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/r*8*1e3);this.throughput.rate+=(i-n)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const n=e.segment,r=n.start,i=n.end;if(!Mk(r)||!Mk(i))return;wd(r,i,this.segmentMetadataTrack_);const s=O().WebKitDataCue||O().VTTCue,o={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,programDateTime:n.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:r,end:i},u=new s(r,i,JSON.stringify(o));u.value=o,this.segmentMetadataTrack_.addCue(u)}set replaceSegmentsUntil(e){this.logger_(`Replacing currently buffered segments until ${e}`),this.replaceSegmentsUntil_=e}}function Bs(){}const Rk=function(t){return"string"!=typeof t?t:t.replace(/./,e=>e.toUpperCase())},eK=["video","audio"],Ub=(t,e)=>{const n=e[`${t}Buffer`];return n&&n.updating||e.queuePending[t]},ul=(t,e)=>{if(0===e.queue.length)return;let n=0,r=e.queue[n];if("mediaSource"!==r.type){if("mediaSource"!==t&&e.ready()&&"closed"!==e.mediaSource.readyState&&!Ub(t,e)){if(r.type!==t){if(n=((t,e)=>{for(let n=0;n<e.length;n++){const r=e[n];if("mediaSource"===r.type)return null;if(r.type===t)return n}return null})(t,e.queue),null===n)return;r=e.queue[n]}if(e.queue.splice(n,1),e.queuePending[t]=r,r.action(t,e),!r.doneFn)return e.queuePending[t]=null,void ul(t,e)}}else!e.updating()&&"closed"!==e.mediaSource.readyState&&(e.queue.shift(),r.action(e),r.doneFn&&r.doneFn(),ul("audio",e),ul("video",e))},Lk=(t,e)=>{const n=e[`${t}Buffer`],r=Rk(t);n&&(n.removeEventListener("updateend",e[`on${r}UpdateEnd_`]),n.removeEventListener("error",e[`on${r}Error_`]),e.codecs[t]=null,e[`${t}Buffer`]=null)},ls=(t,e)=>t&&e&&-1!==Array.prototype.indexOf.call(t.sourceBuffers,e),Gr_appendBuffer=(t,e,n)=>(r,i)=>{const s=i[`${r}Buffer`];if(ls(i.mediaSource,s)){i.logger_(`Appending segment ${e.mediaIndex}'s ${t.length} bytes to ${r}Buffer`);try{s.appendBuffer(t)}catch(o){i.logger_(`Error with code ${o.code} `+(22===o.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${r}Buffer`),i.queuePending[r]=null,n(o)}}},Gr_remove=(t,e)=>(n,r)=>{const i=r[`${n}Buffer`];if(ls(r.mediaSource,i)){r.logger_(`Removing ${t} to ${e} from ${n}Buffer`);try{i.remove(t,e)}catch{r.logger_(`Remove ${t} to ${e} from ${n}Buffer failed`)}}},Gr_timestampOffset=t=>(e,n)=>{const r=n[`${e}Buffer`];ls(n.mediaSource,r)&&(n.logger_(`Setting ${e}timestampOffset to ${t}`),r.timestampOffset=t)},Gr_callback=t=>(e,n)=>{t()},Gr_endOfStream=t=>e=>{if("open"===e.mediaSource.readyState){e.logger_(`Calling mediaSource endOfStream(${t||""})`);try{e.mediaSource.endOfStream(t)}catch(n){$.log.warn("Failed to call media source endOfStream",n)}}},Gr_duration=t=>e=>{e.logger_(`Setting mediaSource duration to ${t}`);try{e.mediaSource.duration=t}catch(n){$.log.warn("Failed to set media source duration",n)}},Gr_addSourceBuffer=(t,e)=>n=>{const r=Rk(t),i=rd(e);n.logger_(`Adding ${t}Buffer with codec ${e} to mediaSource`);const s=n.mediaSource.addSourceBuffer(i);s.addEventListener("updateend",n[`on${r}UpdateEnd_`]),s.addEventListener("error",n[`on${r}Error_`]),n.codecs[t]=e,n[`${t}Buffer`]=s},Gr_removeSourceBuffer=t=>e=>{const n=e[`${t}Buffer`];if(Lk(t,e),ls(e.mediaSource,n)){e.logger_(`Removing ${t}Buffer with codec ${e.codecs[t]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(n)}catch(r){$.log.warn(`Failed to removeSourceBuffer ${t}Buffer`,r)}}},Gr_changeType=t=>(e,n)=>{const r=n[`${e}Buffer`],i=rd(t);ls(n.mediaSource,r)&&n.codecs[e]!==t&&(n.logger_(`changing ${e}Buffer codec from ${n.codecs[e]} to ${t}`),r.changeType(i),n.codecs[e]=t)},Wr=({type:t,sourceUpdater:e,action:n,doneFn:r,name:i})=>{e.queue.push({type:t,action:n,doneFn:r,name:i}),ul(t,e)},Fk=(t,e)=>n=>{const i=function vW(t){let e="";for(let n=0;n<t.length;n++){const r=t.start(n),i=t.end(n);e.length&&(e+="\n"),e+=`[${i-r}](${r} -> ${i})`}return e||"empty"}(e[`${t}Buffered`]());if(e.logger_(`${t} source buffer update end. Buffered: \n`,i),e.queuePending[t]){const s=e.queuePending[t].doneFn;e.queuePending[t]=null,s&&s(e[`${t}Error_`])}ul(t,e)};class Bk extends $.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>ul("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=li("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=Fk("video",this),this.onAudioUpdateEnd_=Fk("audio",this),this.onVideoError_=n=>{this.videoError_=n},this.onAudioError_=n=>{this.audioError_=n},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,n){Wr({type:"mediaSource",sourceUpdater:this,action:Gr_addSourceBuffer(e,n),name:"addSourceBuffer"})}abort(e){Wr({type:e,sourceUpdater:this,action:(t,e)=>{if("open"!==e.mediaSource.readyState)return;const n=e[`${t}Buffer`];if(ls(e.mediaSource,n)){e.logger_(`calling abort on ${t}Buffer`);try{n.abort()}catch(r){$.log.warn(`Failed to abort on ${t}Buffer`,r)}}},name:"abort"})}removeSourceBuffer(e){this.canRemoveSourceBuffer()?Wr({type:"mediaSource",sourceUpdater:this,action:Gr_removeSourceBuffer(e),name:"removeSourceBuffer"}):$.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!$.browser.IS_FIREFOX&&O().MediaSource&&O().MediaSource.prototype&&"function"==typeof O().MediaSource.prototype.removeSourceBuffer}static canChangeType(){return O().SourceBuffer&&O().SourceBuffer.prototype&&"function"==typeof O().SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(e,n){this.canChangeType()?Wr({type:e,sourceUpdater:this,action:Gr_changeType(n),name:"changeType"}):$.log.error("changeType is not supported!")}addOrChangeSourceBuffers(e){if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(n=>{const r=e[n];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(n,r);this.canChangeType()&&this.changeType(n,r)})}appendBuffer(e,n){const{segmentInfo:r,type:i,bytes:s}=e;if(this.processedAppend_=!0,"audio"===i&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,n]),void this.logger_(`delayed audio append of ${s.length} until video append`);if(Wr({type:i,sourceUpdater:this,action:Gr_appendBuffer(s,r||{mediaIndex:-1},n),doneFn:n,name:"appendBuffer"}),"video"===i){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const a=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${a.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,a.forEach(u=>{this.appendBuffer.apply(this,u)})}}audioBuffered(){return ls(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:tr()}videoBuffered(){return ls(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:tr()}buffered(){const e=ls(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=ls(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!e?this.audioBuffered():e&&!n?this.videoBuffered():function(t,e){let n=null,r=null,i=0;const s=[],o=[];if(!(t&&t.length&&e&&e.length))return tr();let a=t.length;for(;a--;)s.push({time:t.start(a),type:"start"}),s.push({time:t.end(a),type:"end"});for(a=e.length;a--;)s.push({time:e.start(a),type:"start"}),s.push({time:e.end(a),type:"end"});for(s.sort(function(u,l){return u.time-l.time}),a=0;a<s.length;a++)"start"===s[a].type?(i++,2===i&&(n=s[a].time)):"end"===s[a].type&&(i--,1===i&&(r=s[a].time)),null!==n&&null!==r&&(o.push([n,r]),n=null,r=null);return tr(o)}(this.audioBuffered(),this.videoBuffered())}setDuration(e,n=Bs){Wr({type:"mediaSource",sourceUpdater:this,action:Gr_duration(e),name:"duration",doneFn:n})}endOfStream(e=null,n=Bs){"string"!=typeof e&&(e=void 0),Wr({type:"mediaSource",sourceUpdater:this,action:Gr_endOfStream(e),name:"endOfStream",doneFn:n})}removeAudio(e,n,r=Bs){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Wr({type:"audio",sourceUpdater:this,action:Gr_remove(e,n),doneFn:r,name:"remove"}):r()}removeVideo(e,n,r=Bs){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Wr({type:"video",sourceUpdater:this,action:Gr_remove(e,n),doneFn:r,name:"remove"}):r()}updating(){return!(!Ub("audio",this)&&!Ub("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Wr({type:"audio",sourceUpdater:this,action:Gr_timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Wr({type:"video",sourceUpdater:this,action:Gr_timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&Wr({type:"audio",sourceUpdater:this,action:Gr_callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&Wr({type:"video",sourceUpdater:this,action:Gr_callback(e),name:"callback"})}dispose(){this.trigger("dispose"),eK.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>Lk(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const Uk=t=>decodeURIComponent(escape(String.fromCharCode.apply(null,t))),Vk=new Uint8Array("\n\n".split("").map(t=>t.charCodeAt(0)));class nK extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class rK extends Bb{constructor(e,n={}){super(e,n),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return tr();const e=this.subtitlesTrack_.cues;return tr([[e[0].startTime,e[e.length-1].startTime]])}initSegmentForMap(e,n=!1){if(!e)return null;const r=ag(e);let i=this.initSegments_[r];if(n&&!i&&e.bytes){const o=new Uint8Array(Vk.byteLength+e.bytes.byteLength);o.set(e.bytes),o.set(Vk,e.bytes.byteLength),this.initSegments_[r]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return i||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(e,n){wd(e,n,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline))return this.syncController_.one("timestampoffset",()=>{this.state="READY",this.paused()||this.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,n,r){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(n.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return-101===e.code&&this.handleTimeout_(),-102===e.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,n.stats),n.key&&this.segmentKey(n.key,!0),this.state="APPENDING",this.trigger("appending");const s=i.segment;if(s.map&&(s.map.bytes=n.map.bytes),i.bytes=n.bytes,"function"!=typeof O().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then(()=>this.segmentRequestFinished_(e,n,r),()=>this.stopForError({message:"Error loading vtt.js"}));s.requested=!0;try{this.parseVTTCues_(i)}catch(o){return void this.stopForError({message:o.message})}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.timingInfo=i.cues.length?{start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:{start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,i.cues.forEach(o=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(O().VTTCue)(o.startTime,o.endTime,o.text):o)}),function(t){const e=t.cues;if(!e)return;const n={};for(let r=e.length-1;r>=0;r--){const i=e[r],s=`${i.startTime}-${i.endTime}-${i.text}`;n[s]?t.removeCue(i):n[s]=i}}(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let n,r=!1;if("function"!=typeof O().WebVTT)throw new nK;"function"==typeof O().TextDecoder?n=new(O().TextDecoder)("utf8"):(n=O().WebVTT.StringDecoder(),r=!0);const i=new(O().WebVTT.Parser)(O(),O().vttjs,n);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=o=>{e.timestampmap=o},i.onparsingerror=o=>{$.log.warn("Error encountered when parsing cues: "+o.message)},e.segment.map){let o=e.segment.map.bytes;r&&(o=Uk(o)),i.parse(o)}let s=e.bytes;r&&(s=Uk(s)),i.parse(s),i.flush()}updateTimeMapping_(e,n,r){const i=e.segment;if(!n)return;if(!e.cues.length)return void(i.empty=!0);const s=e.timestampmap,o=s.MPEGTS/wp.ONE_SECOND_IN_TS-s.LOCAL+n.mapping;e.cues.forEach(a=>{a.startTime+=o,a.endTime+=o}),r.syncInfo||(r.syncInfo={mediaSequence:r.mediaSequence+e.mediaIndex,time:Math.min(e.cues[0].startTime,e.cues[e.cues.length-1].startTime-i.duration)})}}const iK=function(t,e){const n=t.cues;for(let r=0;r<n.length;r++){const i=n[r];if(e>=i.adStartTime&&e<=i.adEndTime)return i}return null},jk=[{name:"VOD",run:(t,e,n,r,i)=>n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"ProgramDateTime",run:(t,e,n,r,i)=>{if(!Object.keys(t.timelineToDatetimeMappings).length)return null;let s=null,o=null;const a=Eb(e);i=i||0;for(let u=0;u<a.length;u++){const d=a[e.endList||0===i?u:a.length-(u+1)],g=d.segment,v=t.timelineToDatetimeMappings[g.timeline];if(!v||!g.dateTimeObject)continue;let _=g.dateTimeObject.getTime()/1e3+v;if(g.parts&&"number"==typeof d.partIndex)for(let A=0;A<d.partIndex;A++)_+=g.parts[A].duration;const E=Math.abs(i-_);if(null!==o&&(0===E||o<E))break;o=E,s={time:_,segmentIndex:d.segmentIndex,partIndex:d.partIndex}}return s}},{name:"Segment",run:(t,e,n,r,i)=>{let s=null,o=null;i=i||0;const a=Eb(e);for(let u=0;u<a.length;u++){const d=a[e.endList||0===i?u:a.length-(u+1)],g=d.segment,v=d.part&&d.part.start||g&&g.start;if(g.timeline===r&&typeof v<"u"){const b=Math.abs(i-v);if(null!==o&&o<b)break;(!s||null===o||o>=b)&&(o=b,s={time:v,segmentIndex:d.segmentIndex,partIndex:d.partIndex})}}return s}},{name:"Discontinuity",run:(t,e,n,r,i)=>{let s=null;if(i=i||0,e.discontinuityStarts&&e.discontinuityStarts.length){let o=null;for(let a=0;a<e.discontinuityStarts.length;a++){const u=e.discontinuityStarts[a],d=t.discontinuities[e.discontinuitySequence+a+1];if(d){const g=Math.abs(i-d.time);if(null!==o&&o<g)break;(!s||null===o||o>=g)&&(o=g,s={time:d.time,segmentIndex:u,partIndex:null})}}}return s}},{name:"Playlist",run:(t,e,n,r,i)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class aK extends $.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=li("SyncController")}getSyncPoint(e,n,r,i){const s=this.runStrategies_(e,n,r,i);return s.length?this.selectSyncPoint_(s,{key:"time",value:i}):null}getExpiredTime(e,n){if(!e||!e.segments)return null;const r=this.runStrategies_(e,n,e.discontinuitySequence,0);if(!r.length)return null;const i=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+Cd({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}runStrategies_(e,n,r,i){const s=[];for(let o=0;o<jk.length;o++){const a=jk[o],u=a.run(this,e,n,r,i);u&&(u.strategy=a.name,s.push({strategy:a.name,syncPoint:u}))}return s}selectSyncPoint_(e,n){let r=e[0].syncPoint,i=Math.abs(e[0].syncPoint[n.key]-n.value),s=e[0].strategy;for(let o=1;o<e.length;o++){const a=Math.abs(e[o].syncPoint[n.key]-n.value);a<i&&(i=a,r=e[o].syncPoint,s=e[o].strategy)}return this.logger_(`syncPoint for [${n.key}: ${n.value}] chosen with strategy [${s}]: [time:${r.time}, segmentIndex:${r.segmentIndex}`+("number"==typeof r.partIndex?`,partIndex:${r.partIndex}`:"")+"]"),r}saveExpiredSegmentInfo(e,n){const r=n.mediaSequence-e.mediaSequence;if(r>86400)$.log.warn(`Not saving expired segment info. Media sequence gap ${r} is too large.`);else for(let i=r-1;i>=0;i--){const s=e.segments[i];if(s&&typeof s.start<"u"){n.syncInfo={mediaSequence:e.mediaSequence+i,time:s.start},this.logger_(`playlist refresh sync: [time:${n.syncInfo.time}, mediaSequence: ${n.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const n=e.segments[0],r=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-r}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:n}){const r=this.calculateSegmentTimeMapping_(e,e.timingInfo,n),i=e.segment;r&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:i.start}));const s=i.dateTimeObject;i.discontinuity&&n&&s&&(this.timelineToDatetimeMappings[i.timeline]=-s.getTime()/1e3)}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,n,r){const i=e.segment,s=e.part;let a,u,o=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)o={time:e.startOfSegment,mapping:e.startOfSegment-n.start},r&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${o.time}] [mapping: ${o.mapping}]`)),a=e.startOfSegment,u=n.end+o.mapping;else{if(!o)return!1;a=n.start+o.mapping,u=n.end+o.mapping}return s&&(s.start=a,s.end=u),(!i.start||a<i.start)&&(i.start=a),i.end=u,!0}saveDiscontinuitySyncInfo_(e){const n=e.playlist,r=e.segment;if(r.discontinuity)this.discontinuities[r.timeline]={time:r.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(let i=0;i<n.discontinuityStarts.length;i++){const s=n.discontinuityStarts[i],o=n.discontinuitySequence+i+1,a=s-e.mediaIndex,u=Math.abs(a);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>u){let l;l=a<0?r.start-Cd({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex,endIndex:s}):r.end+Cd({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[o]={time:l,accuracy:u}}}}dispose(){this.trigger("dispose"),this.off()}}class uK extends $.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:n,to:r}){return"number"==typeof n&&"number"==typeof r&&(this.pendingTimelineChanges_[e]={type:e,from:n,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:n,to:r}){return"number"==typeof n&&"number"==typeof r&&(this.lastTimelineChanges_[e]={type:e,from:n,to:r},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const lK=hk(fk(function(){var t=function(){function E(){this.listeners={}}var A=E.prototype;return A.on=function(x,B){this.listeners[x]||(this.listeners[x]=[]),this.listeners[x].push(B)},A.off=function(x,B){if(!this.listeners[x])return!1;var F=this.listeners[x].indexOf(B);return this.listeners[x]=this.listeners[x].slice(0),this.listeners[x].splice(F,1),F>-1},A.trigger=function(x){var B=this.listeners[x];if(B)if(2===arguments.length)for(var F=B.length,R=0;R<F;++R)B[R].call(this,arguments[1]);else for(var Z=Array.prototype.slice.call(arguments,1),we=B.length,st=0;st<we;++st)B[st].apply(this,Z)},A.dispose=function(){this.listeners={}},A.pipe=function(x){this.on("data",function(B){x.push(B)})},E}();let r=null;class i{constructor(A){let P,x,B;r||(r=function(){const E=[[[],[],[],[],[]],[[],[],[],[],[]]],A=E[0],P=E[1],x=A[4],B=P[4];let F,R,Z;const we=[],st=[];let ft,sn,Ln,yn,Be,Ut;for(F=0;F<256;F++)st[(we[F]=F<<1^283*(F>>7))^F]=F;for(R=Z=0;!x[R];R^=ft||1,Z=st[Z]||1)for(yn=Z^Z<<1^Z<<2^Z<<3^Z<<4,yn=yn>>8^255&yn^99,x[R]=yn,B[yn]=R,Ln=we[sn=we[ft=we[R]]],Ut=16843009*Ln^65537*sn^257*ft^16843008*R,Be=257*we[yn]^16843008*yn,F=0;F<4;F++)A[F][R]=Be=Be<<24^Be>>>8,P[F][yn]=Ut=Ut<<24^Ut>>>8;for(F=0;F<5;F++)A[F]=A[F].slice(0),P[F]=P[F].slice(0);return E}()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];const F=this._tables[0][4],R=this._tables[1],Z=A.length;let we=1;if(4!==Z&&6!==Z&&8!==Z)throw new Error("Invalid aes key size");const st=A.slice(0),ft=[];for(this._key=[st,ft],P=Z;P<4*Z+28;P++)B=st[P-1],(P%Z==0||8===Z&&P%Z==4)&&(B=F[B>>>24]<<24^F[B>>16&255]<<16^F[B>>8&255]<<8^F[255&B],P%Z==0&&(B=B<<8^B>>>24^we<<24,we=we<<1^283*(we>>7))),st[P]=st[P-Z]^B;for(x=0;P;x++,P--)B=st[3&x?P:P-4],ft[x]=P<=4||x<4?B:R[0][F[B>>>24]]^R[1][F[B>>16&255]]^R[2][F[B>>8&255]]^R[3][F[255&B]]}decrypt(A,P,x,B,F,R){const Z=this._key[1];let Ln,yn,Be,we=A^Z[0],st=B^Z[1],ft=x^Z[2],sn=P^Z[3];const Ut=Z.length/4-2;let cs,Vs=4;const _o=this._tables[1],aa=_o[0],ua=_o[1],la=_o[2],ca=_o[3],da=_o[4];for(cs=0;cs<Ut;cs++)Ln=aa[we>>>24]^ua[st>>16&255]^la[ft>>8&255]^ca[255&sn]^Z[Vs],yn=aa[st>>>24]^ua[ft>>16&255]^la[sn>>8&255]^ca[255&we]^Z[Vs+1],Be=aa[ft>>>24]^ua[sn>>16&255]^la[we>>8&255]^ca[255&st]^Z[Vs+2],sn=aa[sn>>>24]^ua[we>>16&255]^la[st>>8&255]^ca[255&ft]^Z[Vs+3],Vs+=4,we=Ln,st=yn,ft=Be;for(cs=0;cs<4;cs++)F[(3&-cs)+R]=da[we>>>24]<<24^da[st>>16&255]<<16^da[ft>>8&255]<<8^da[255&sn]^Z[Vs++],Ln=we,we=st,st=ft,ft=sn,sn=Ln}}class s extends t{constructor(){super(t),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null}push(A){this.jobs.push(A),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const o=function(E){return E<<24|(65280&E)<<8|(16711680&E)>>8|E>>>24};class u{constructor(A,P,x,B){const F=u.STEP,R=new Int32Array(A.buffer),Z=new Uint8Array(A.byteLength);let we=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(R.subarray(we,we+F),P,x,Z)),we=F;we<R.length;we+=F)x=new Uint32Array([o(R[we-4]),o(R[we-3]),o(R[we-2]),o(R[we-1])]),this.asyncStream_.push(this.decryptChunk_(R.subarray(we,we+F),P,x,Z));this.asyncStream_.push(function(){B(null,function e(E){return E.subarray(0,E.byteLength-E[E.byteLength-1])}(Z))})}static get STEP(){return 32e3}decryptChunk_(A,P,x,B){return function(){const F=function(E,A,P){const x=new Int32Array(E.buffer,E.byteOffset,E.byteLength>>2),B=new i(Array.prototype.slice.call(A)),F=new Uint8Array(E.byteLength),R=new Int32Array(F.buffer);let Z,we,st,ft,sn,Ln,yn,Be,Ut;for(Z=P[0],we=P[1],st=P[2],ft=P[3],Ut=0;Ut<x.length;Ut+=4)sn=o(x[Ut]),Ln=o(x[Ut+1]),yn=o(x[Ut+2]),Be=o(x[Ut+3]),B.decrypt(sn,Ln,yn,Be,R,Ut),R[Ut]=o(R[Ut]^Z),R[Ut+1]=o(R[Ut+1]^we),R[Ut+2]=o(R[Ut+2]^st),R[Ut+3]=o(R[Ut+3]^ft),Z=sn,we=Ln,st=yn,ft=Be;return F}(A,P,x);B.set(F,A.byteOffset)}}}var E,l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},b=(typeof window<"u"?window:typeof l<"u"?l:typeof self<"u"?self:{}).BigInt||Number;b("0x1"),b("0x100"),b("0x10000"),b("0x1000000"),b("0x100000000"),b("0x10000000000"),b("0x1000000000000"),b("0x100000000000000"),b("0x10000000000000000"),E=new Uint16Array([65484]),new Uint8Array(E.buffer,E.byteOffset,E.byteLength);self.onmessage=function(E){const A=E.data,P=new Uint8Array(A.encrypted.bytes,A.encrypted.byteOffset,A.encrypted.byteLength),x=new Uint32Array(A.key.bytes,A.key.byteOffset,A.key.byteLength/4),B=new Uint32Array(A.iv.bytes,A.iv.byteOffset,A.iv.byteLength/4);new u(P,x,B,function(F,R){self.postMessage(function(E){const A={};return Object.keys(E).forEach(P=>{const x=E[P];A[P]=function(A){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(A):A&&A.buffer instanceof ArrayBuffer}(x)?{bytes:x.buffer,byteOffset:x.byteOffset,byteLength:x.byteLength}:x}),A}({source:A.source,decrypted:R}),[R.buffer])})}}));var cK=dk(lK);const dK=t=>{let e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},$k=(t,e)=>{t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},Vb=(t,e)=>{e.activePlaylistLoader=t,t.load()},hg={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:n},excludePlaylist:r}=e,i=n.activeTrack(),s=n.activeGroup(),o=(s.filter(u=>u.default)[0]||s[0]).id,a=n.tracks[o];if(i!==a){$.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const u in n.tracks)n.tracks[u].enabled=n.tracks[u]===a;n.onTrackChanged()}else r({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:n}}=e;$.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}},Hk={AUDIO:(t,e,n)=>{if(!e)return;const{tech:r,requestOptions:i,segmentLoaders:{[t]:s}}=n;e.on("loadedmetadata",()=>{const o=e.media();s.playlist(o,i),(!r.paused()||o.endList&&"none"!==r.preload())&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),r.paused()||s.load()}),e.on("error",hg[t](t,n))},SUBTITLES:(t,e,n)=>{const{tech:r,requestOptions:i,segmentLoaders:{[t]:s},mediaTypes:{[t]:o}}=n;e.on("loadedmetadata",()=>{const a=e.media();s.playlist(a,i),s.track(o.activeTrack()),(!r.paused()||a.endList&&"none"!==r.preload())&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),r.paused()||s.load()}),e.on("error",hg[t](t,n))}},gK={AUDIO:(t,e)=>{const{vhs:n,sourceType:r,segmentLoaders:{[t]:i},requestOptions:s,main:{mediaGroups:o},mediaTypes:{[t]:{groups:a,tracks:u,logger_:l}},mainPlaylistLoader:d}=e,g=Ed(d.main);(!o[t]||0===Object.keys(o[t]).length)&&(o[t]={main:{default:{default:!0}}},g&&(o[t].main.default.playlists=d.main.playlists));for(const v in o[t]){a[v]||(a[v]=[]);for(const b in o[t][v]){let E,_=o[t][v][b];if(g?(l(`AUDIO group '${v}' label '${b}' is a main playlist`),_.isMainPlaylist=!0,E=null):E="vhs-json"===r&&_.playlists?new sl(_.playlists[0],n,s):_.resolvedUri?new sl(_.resolvedUri,n,s):_.playlists&&"dash"===r?new Pb(_.playlists[0],n,s,d):null,_=Rt({id:b,playlistLoader:E},_),Hk[t](t,_.playlistLoader,e),a[v].push(_),typeof u[b]>"u"){const A=new $.AudioTrack({id:b,kind:dK(_),enabled:!1,language:_.language,default:_.default,label:b});u[b]=A}}}i.on("error",hg[t](t,e))},SUBTITLES:(t,e)=>{const{tech:n,vhs:r,sourceType:i,segmentLoaders:{[t]:s},requestOptions:o,main:{mediaGroups:a},mediaTypes:{[t]:{groups:u,tracks:l}},mainPlaylistLoader:d}=e;for(const g in a[t]){u[g]||(u[g]=[]);for(const v in a[t][g]){if(!r.options_.useForcedSubtitles&&a[t][g][v].forced)continue;let _,b=a[t][g][v];if("hls"===i)_=new sl(b.resolvedUri,r,o);else if("dash"===i){if(!b.playlists.filter(A=>A.excludeUntil!==1/0).length)return;_=new Pb(b.playlists[0],r,o,d)}else"vhs-json"===i&&(_=new sl(b.playlists?b.playlists[0]:b.resolvedUri,r,o));if(b=Rt({id:v,playlistLoader:_},b),Hk[t](t,b.playlistLoader,e),u[g].push(b),typeof l[v]>"u"){const E=n.addRemoteTextTrack({id:v,kind:"subtitles",default:b.default&&b.autoselect,language:b.language,label:v},!1).track;l[v]=E}}}s.on("error",hg[t](t,e))},"CLOSED-CAPTIONS":(t,e)=>{const{tech:n,main:{mediaGroups:r},mediaTypes:{[t]:{groups:i,tracks:s}}}=e;for(const o in r[t]){i[o]||(i[o]=[]);for(const a in r[t][o]){const u=r[t][o][a];if(!/^(?:CC|SERVICE)/.test(u.instreamId))continue;const l=n.options_.vhs&&n.options_.vhs.captionServices||{};let d={label:a,language:u.language,instreamId:u.instreamId,default:u.default&&u.autoselect};if(l[d.instreamId]&&(d=Rt(d,l[d.instreamId])),void 0===d.default&&delete d.default,i[o].push(Rt({id:a},u)),typeof s[a]>"u"){const g=n.addRemoteTextTrack({id:d.instreamId,kind:"captions",default:d.default,language:d.language,label:d.label},!1).track;s[a]=g}}}}},qk=(t,e)=>{for(let n=0;n<t.length;n++)if(wb(e,t[n])||t[n].playlists&&qk(t[n].playlists,e))return!0;return!1},yK={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:n}}}=e;for(const r in n)if(n[r].enabled)return n[r];return null},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:n}}}=e;for(const r in n)if("showing"===n[r].mode||"hidden"===n[r].mode)return n[r];return null}};class zk{constructor(){this.priority_=[]}set version(e){1===e&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=zr(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}}class TK extends $.EventTarget{constructor(e,n){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.availablePathways_=new Set,this.excludedPathways_=new Set,this.steeringManifest=new zk,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.logger_=li("Content Steering"),this.xhr_=e,this.getBandwidth_=n}assignTagProperties(e,n){this.manifestType_=n.serverUri?"HLS":"DASH";const r=n.serverUri||n.serverURL;if(!r)return this.logger_(`steering manifest URL is ${r}, cannot request steering manifest.`),void this.trigger("error");r.startsWith("data:")?this.decodeDataUriManifest_(r.substring(r.indexOf(",")+1)):(this.steeringManifest.reloadUri=this.queryBeforeStart?r:zr(e,r),this.defaultPathway=n.pathwayId||n.defaultServiceLocation,this.queryBeforeStart=n.queryBeforeStart||!1,this.proxyServerUrl_=n.proxyServerURL||null,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering"),this.queryBeforeStart&&this.requestSteeringManifest(this.steeringManifest.reloadUri))}requestSteeringManifest(e){const n=this.steeringManifest.reloadUri;if(!e&&!n)return;const r=e||this.getRequestURI(n);if(!r)return this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),void this.dispose();this.request_=this.xhr_({uri:r},(i,s)=>{if(i){if(410===s.status)return this.logger_(`manifest request 410 ${i}.`),this.logger_(`There will be no more content steering requests to ${r} this session.`),void this.excludedSteeringManifestURLs.add(r);if(429===s.status){const a=s.responseHeaders["retry-after"];return this.logger_(`manifest request 429 ${i}.`),this.logger_(`content steering will retry in ${a} seconds.`),void this.startTTLTimeout_(parseInt(a,10))}return this.logger_(`manifest failed to load ${i}.`),void this.startTTLTimeout_()}const o=JSON.parse(this.request_.responseText);this.startTTLTimeout_(),this.assignSteeringProperties_(o)})}setProxyServerUrl_(e){const n=new(O().URL)(e),r=new(O().URL)(this.proxyServerUrl_);return r.searchParams.set("url",encodeURI(n.toString())),this.setSteeringParams_(r.toString())}decodeDataUriManifest_(e){const n=JSON.parse(O().atob(e));this.assignSteeringProperties_(n)}setSteeringParams_(e){const n=new(O().URL)(e),r=this.getPathway(),i=this.getBandwidth_();return r&&n.searchParams.set(`_${this.manifestType_}_pathway`,r),i&&n.searchParams.set(`_${this.manifestType_}_throughput`,i),n.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version)return this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),void this.trigger("error");this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const r=(i=>{for(const s of i)if(this.availablePathways_.has(s))return s;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==r&&(this.currentPathway=r,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const n=i=>this.excludedSteeringManifestURLs.has(i);if(this.proxyServerUrl_){const i=this.setProxyServerUrl_(e);if(!n(i))return i}const r=this.setSteeringParams_(e);return n(r)?null:r}startTTLTimeout_(e=this.steeringManifest.ttl){const n=1e3*e;this.ttlTimeout_=O().setTimeout(()=>{this.requestSteeringManifest()},n)}clearTTLTimeout_(){O().clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.excludedPathways_=new Set,this.steeringManifest=new zk}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}}let Us;const EK=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],DK=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]};class wK extends $.EventTarget{constructor(e){super();const{src:n,withCredentials:r,tech:i,bandwidth:s,externVhs:o,useCueTags:a,playlistExclusionDuration:u,enableLowInitialPlaylist:l,sourceType:d,cacheEncryptionKeys:g,bufferBasedABR:v,leastPixelDiffSelector:b,captionServices:_}=e;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:E}=e;(null===E||typeof E>"u")&&(E=1/0),Us=o,this.bufferBasedABR=!!v,this.leastPixelDiffSelector=!!b,this.withCredentials=r,this.tech_=i,this.vhs_=i.vhs,this.sourceType_=d,this.useCueTags_=a,this.playlistExclusionDuration=u,this.maxPlaylistRetries=E,this.enableLowInitialPlaylist=l,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:r,maxPlaylistRetries:E,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{const t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Bs,activeTrack:Bs,getActiveGroup:Bs,onGroupChanged:Bs,onTrackChanged:Bs,lastTrack_:null,logger_:li(`MediaGroups[${e}]`)}}),t})(),this.mediaSource=new(O().MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=tr(),this.hasPlayed_=!1,this.syncController_=new aK(e),this.segmentMetadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new cK,this.sourceUpdater_=new Bk(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new uK;const A={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,calculateTimestampOffsetForEachSegment:e.calculateTimestampOffsetForEachSegment,captionServices:_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:g,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_="dash"===this.sourceType_?new Pb(n,this.vhs_,Rt(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new sl(n,this.vhs_,Rt(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new Bb(Rt(A,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new Bb(Rt(A,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new rK(Rt(A,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((B,F)=>{function R(){i.off("vttjserror",Z),B()}function Z(){i.off("vttjsloaded",R),F()}i.one("vttjsloaded",R),i.one("vttjserror",Z),i.addWebVttScript_()})}),e),this.contentSteeringController_=new TK(this.vhs_.xhr,()=>this.mainSegmentLoader_.bandwidth),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),EK.forEach(B=>{this[B+"_"]=DK.bind(this,B)}),this.logger_=li("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const x="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(x,()=>{const B=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-B,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return-1===e||-1===n?-1:e+n}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,e)}switchMedia_(e,n,r){const i=this.media(),s=i&&(i.id||i.uri),o=e.id||e.uri;s&&s!==o&&(this.logger_(`switch media ${s} -> ${o} from ${n}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${n}`})),this.mainPlaylistLoader_.media(e,r)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const n=this.mediaTypes_[e],r=n?n.activeGroup():null,i=this.contentSteeringController_.getPathway();if(r&&i){const o=(r.length?r[0].playlists:r.playlists).filter(a=>a.attributes.serviceLocation===i);o.length&&this.mediaTypes_[e].activePlaylistLoader.media(o[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=O().setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(O().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),n=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return n;const r=e.mediaGroups.AUDIO,i=Object.keys(r);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const a=r.main||i.length&&r[i[0]];for(const u in a)if(a[u].default){s={label:u};break}}if(!s)return n;const o=[];for(const a in r)if(r[a][s.label]){const u=r[a][s.label];if(u.playlists&&u.playlists.length)o.push.apply(o,u.playlists);else if(u.uri)o.push(u);else if(e.playlists.length)for(let l=0;l<e.playlists.length;l++){const d=e.playlists[l];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===a&&o.push(d)}}return o.length?o:n}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const e=this.mainPlaylistLoader_.media(),n=1.5*e.targetDuration*1e3;this.requestOptions_.timeout=Sb(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?0:n,e.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),(t=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(l=>{gK[l](l,t)});const{mediaTypes:e,mainPlaylistLoader:n,tech:r,vhs:i,segmentLoaders:{AUDIO:s,main:o}}=t;["AUDIO","SUBTITLES"].forEach(l=>{e[l].activeGroup=((t,e)=>n=>{const{mainPlaylistLoader:r,mediaTypes:{[t]:{groups:i}}}=e,s=r.media();if(!s)return null;let o=null;s.attributes[t]&&(o=i[s.attributes[t]]);const a=Object.keys(i);if(!o)if("AUDIO"===t&&a.length>1&&Ed(e.main))for(let u=0;u<a.length;u++){const l=i[a[u]];if(qk(l,s)){o=l;break}}else i.main?o=i.main:1===a.length&&(o=i[a[0]]);return typeof n>"u"?o:null!==n&&o&&o.filter(u=>u.id===n.id)[0]||null})(l,t),e[l].activeTrack=yK[l](l,t),e[l].onGroupChanged=((t,e)=>()=>{const{segmentLoaders:{[t]:n,main:r},mediaTypes:{[t]:i}}=e,s=i.activeTrack(),o=i.getActiveGroup(),a=i.activePlaylistLoader,u=i.lastGroup_;if((!o||!u||o.id!==u.id)&&(i.lastGroup_=o,i.lastTrack_=s,$k(n,i),o&&!o.isMainPlaylist)){if(!o.playlistLoader)return void(a&&r.resetEverything());n.resyncLoader(),Vb(o.playlistLoader,i)}})(l,t),e[l].onGroupChanging=((t,e)=>()=>{const{segmentLoaders:{[t]:n},mediaTypes:{[t]:r}}=e;r.lastGroup_=null,n.abort(),n.pause()})(l,t),e[l].onTrackChanged=((t,e)=>()=>{const{mainPlaylistLoader:n,segmentLoaders:{[t]:r,main:i},mediaTypes:{[t]:s}}=e,o=s.activeTrack(),a=s.getActiveGroup(),u=s.activePlaylistLoader,l=s.lastTrack_;if((!l||!o||l.id!==o.id)&&(s.lastGroup_=a,s.lastTrack_=o,$k(r,s),a)){if(a.isMainPlaylist){if(!o||!l||o.id===l.id)return;const d=e.vhs.playlistController_,g=d.selectPlaylist();if(d.media()===g)return;return s.logger_(`track change. Switching main audio from ${l.id} to ${o.id}`),n.pause(),i.resetEverything(),void d.fastQualityChange_(g)}if("AUDIO"===t){if(!a.playlistLoader)return i.setAudio(!0),void i.resetEverything();r.setAudio(!0),i.setAudio(!1)}if(u===a.playlistLoader)return void Vb(a.playlistLoader,s);r.track&&r.track(o),r.resetEverything(),Vb(a.playlistLoader,s)}})(l,t),e[l].getActiveGroup=((t,{mediaTypes:e})=>()=>{const n=e[t].activeTrack();return n?e[t].activeGroup(n):null})(l,t)});const a=e.AUDIO.activeGroup();if(a){const l=(a.filter(g=>g.default)[0]||a[0]).id;e.AUDIO.tracks[l].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),s.setAudio(!0)):o.setAudio(!0)}n.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(l=>e[l].onGroupChanged())}),n.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(l=>e[l].onGroupChanging())});const u=()=>{e.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"})};r.audioTracks().addEventListener("change",u),r.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),i.on("dispose",()=>{r.audioTracks().removeEventListener("change",u),r.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(const l in e.AUDIO.tracks)r.audioTracks().addTrack(e.AUDIO.tracks[l])})({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){let n;if(this.initContentSteeringController_(),this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(n=this.selectInitialPlaylist()),n||(n=this.selectPlaylist()),!n||!this.shouldSwitchToMedia_(n)||(this.initialMedia_=n,this.switchMedia_(this.initialMedia_,"initial"),"vhs-json"!==this.sourceType_||!this.initialMedia_.segments))return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)}),this.mainPlaylistLoader_.on("error",()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const e=this.mainPlaylistLoader_.media(),n=1.5*e.targetDuration*1e3;this.requestOptions_.timeout=Sb(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?0:n,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const e=this.mainPlaylistLoader_.media();"playlist-unchanged"!==e.lastExcludeReason_&&this.stuckAtPlaylistEnd_(e)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,n){const r=e.mediaGroups||{};let i=!0;const s=Object.keys(r.AUDIO);for(const o in r.AUDIO)for(const a in r.AUDIO[o])r.AUDIO[o][a].uri||(i=!1);i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(r.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Us.Playlist.isAes(n)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(r.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const n=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,r=this.tech_.currentTime(),i=this.bufferLowWaterLine(),s=this.bufferHighWaterLine();return function({currentPlaylist:t,buffered:e,currentTime:n,nextPlaylist:r,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:o,bufferBasedABR:a,log:u}){if(!r)return $.log.warn("We received no playlist to switch to. Please check your stream."),!1;const l=`allowing switch ${t&&t.id||"null"} -> ${r.id}`;if(!t)return u(`${l} as current playlist is not set`),!0;if(r.id===t.id)return!1;const d=!!rl(e,n).length;if(!t.endList)return d||"number"!=typeof t.partTargetDuration?(u(`${l} as current playlist is live`),!0):(u(`not ${l} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const g=Tb(e,n),v=a?Rn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Rn.MAX_BUFFER_LOW_WATER_LINE;if(o<v)return u(`${l} as duration < max low water line (${o} < ${v})`),!0;const b=r.attributes.BANDWIDTH,_=t.attributes.BANDWIDTH;if(b<_&&(!a||g<s)){let E=`${l} as next bandwidth < current bandwidth (${b} < ${_})`;return a&&(E+=` and forwardBuffer < bufferHighWaterLine (${g} < ${s})`),u(E),!0}if((!a||b>_)&&g>=i){let E=`${l} as forwardBuffer >= bufferLowWaterLine (${g} >= ${i})`;return a&&(E+=` and next bandwidth > current bandwidth (${b} > ${_})`),u(E),!0}return u(`not ${l} as no switching criteria met`),!1}({buffered:this.tech_.buffered(),currentTime:r,currentPlaylist:n,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const n=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",n=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:10}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const n=this.getCodecsOrExclude_();n&&this.sourceUpdater_.addOrChangeSourceBuffers(n)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){e!==this.mainPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.resetMainLoaderReplaceSegments()):this.logger_("skipping fastQualityChange because new media is same as old")}resetMainLoaderReplaceSegments(){const e=this.tech_.buffered(),n=e.end(e.length-1);this.mainSegmentLoader_.replaceSegmentsUntil=n,this.mainSegmentLoader_.resetLoaderProperties(),this.mainSegmentLoader_.resetLoader()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const n=this.seekable();if(!n.length)return!1;const r=n.end(0);let i=r;if(e.start){const s=e.start.timeOffset;i=s<0?Math.max(r+s,n.start(0)):Math.min(r,s)}this.trigger("firstplay"),this.tech_.setCurrentTime(i)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&"function"==typeof e.then&&e.then(null,n=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const n=this.duration();e[e.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const n=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!n||n.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const r=this.syncController_.getExpiredTime(e,this.duration());if(null===r)return!1;const i=Us.Playlist.playlistEnd(e,r),s=this.tech_.currentTime(),o=this.tech_.buffered();if(!o.length)return i-s<=as;const a=o.end(o.length-1);return a-s<=as&&i-a<=as}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:n={},playlistExclusionDuration:r}){if(e=e||this.mainPlaylistLoader_.media(),r=r||n.playlistExclusionDuration||this.playlistExclusionDuration,!e)return this.error=n,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));e.playlistErrors_++;const i=this.mainPlaylistLoader_.main.playlists,s=i.filter(og),o=1===s.length&&s[0]===e;if(1===i.length&&r!==1/0)return $.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(o);if(o){if(this.main().contentSteering){const _=this.pathwayAttribute_(e),E=1e3*this.contentSteeringController_.steeringManifest.ttl;return this.contentSteeringController_.excludePathway(_),this.excludeThenChangePathway_(),void setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(_)},E)}let b=!1;i.forEach(_=>{if(_===e)return;const E=_.excludeUntil;typeof E<"u"&&E!==1/0&&(b=!0,delete _.excludeUntil)}),b&&($.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let a;a=e.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*r,e.excludeUntil=a,n.reason&&(e.lastExcludeReason_=n.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const u=this.selectPlaylist();if(!u)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(n.internal?this.logger_:$.log.warn)(`${n.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${n.message?" "+n.message:""} Switching to playlist ${u.id}.`),u.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),u.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const g=u.targetDuration/2*1e3||5e3,v="number"==typeof u.lastRequest&&Date.now()-u.lastRequest<=g;return this.switchMedia_(u,"exclude",o||v)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,n){const r=[],i="all"===e;(i||"main"===e)&&r.push(this.mainPlaylistLoader_);const s=[];(i||"audio"===e)&&s.push("AUDIO"),(i||"subtitle"===e)&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(o=>{const a=this.mediaTypes_[o]&&this.mediaTypes_[o].activePlaylistLoader;a&&r.push(a)}),["main","audio","subtitle"].forEach(o=>{const a=this[`${o}SegmentLoader_`];a&&(e===o||"all"===e)&&r.push(a)}),r.forEach(o=>n.forEach(a=>{"function"==typeof o[a]&&o[a]()}))}setCurrentTime(e){const n=rl(this.tech_.buffered(),e);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?n&&n.length?e:(this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.resetEverything(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.resetEverything(),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Us.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let n=this.mainPlaylistLoader_.media();if(!n)return;let r=this.syncController_.getExpiredTime(n,this.duration());if(null===r)return;const i=this.mainPlaylistLoader_.main,s=Us.Playlist.seekable(n,r,Us.Playlist.liveEdgeDelay(i,n));if(0===s.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),r=this.syncController_.getExpiredTime(n,this.duration()),null===r||(e=Us.Playlist.seekable(n,r,Us.Playlist.liveEdgeDelay(i,n)),0===e.length)))return;let o,a;this.seekable_&&this.seekable_.length&&(o=this.seekable_.end(0),a=this.seekable_.start(0)),this.seekable_=e?e.start(0)>s.end(0)||s.start(0)>e.end(0)?s:tr([[e.start(0)>s.start(0)?e.start(0):s.start(0),e.end(0)<s.end(0)?e.end(0):s.end(0)]]):s,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==o||this.seekable_.start(0)!==a)&&(this.logger_(`seekable updated [${BO(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){const i=this.seekable();if(!i.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<i.end(i.length-1))&&this.sourceUpdater_.setDuration(i.end(i.length-1)))}const n=this.tech_.buffered();let r=Us.Playlist.duration(this.mainPlaylistLoader_.media());n.length>0&&(r=Math.max(r,n.end(n.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const n=this.mediaTypes_[e].groups;for(const r in n)n[r].forEach(i=>{i.playlistLoader&&i.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),r=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!n||!r)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},n=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const r=Sd(this.main(),n),i={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(i.video=r.video||e.main.videoCodec||"avc1.4d400d"),e.main.isMuxed&&(i.video+=`,${r.audio||e.main.audioCodec||II}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(i.audio=r.audio||e.main.audioCodec||e.audio.audioCodec||II,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!i.audio&&!i.video)return void this.excludePlaylist({playlistToExclude:n,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const a={};let u;if(["video","audio"].forEach(function(l){if(i.hasOwnProperty(l)&&!((l,d)=>l?Ep(d):f_(d))(e[l].isFmp4,i[l])){const d=e[l].isFmp4?"browser":"muxer";a[d]=a[d]||[],a[d].push(i[l]),"audio"===l&&(u=d)}}),s&&u&&n.attributes.AUDIO){const l=n.attributes.AUDIO;this.main().playlists.forEach(d=>{(d.attributes&&d.attributes.AUDIO)===l&&d!==n&&(d.excludeUntil=1/0)}),this.logger_(`excluding audio group ${l} as ${u} does not support codec(s): "${i.audio}"`)}if(!Object.keys(a).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const l=[];if(["video","audio"].forEach(d=>{const g=(Ji(this.sourceUpdater_.codecs[d]||"")[0]||{}).type,v=(Ji(i[d]||"")[0]||{}).type;g&&v&&g.toLowerCase()!==v.toLowerCase()&&l.push(`"${this.sourceUpdater_.codecs[d]}" -> "${i[d]}"`)}),l.length)return void this.excludePlaylist({playlistToExclude:n,error:{message:`Codec switching not supported: ${l.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return i}{const l=Object.keys(a).reduce((d,g)=>(d&&(d+=", "),d+`${g} does not support codec(s): "${a[g].join(",")}"`),"")+".";this.excludePlaylist({playlistToExclude:n,error:{internal:!0,message:l},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const n=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}excludeUnsupportedVariants_(){const e=this.main().playlists,n=[];Object.keys(e).forEach(r=>{const i=e[r];if(-1!==n.indexOf(i.id))return;n.push(i.id);const s=Sd(this.main,i),o=[];s.audio&&!f_(s.audio)&&!Ep(s.audio)&&o.push(`audio codec ${s.audio}`),s.video&&!f_(s.video)&&!Ep(s.video)&&o.push(`video codec ${s.video}`),s.text&&"stpp.ttml.im1t"===s.text&&o.push(`text codec ${s.text}`),o.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id} for unsupported: ${o.join(", ")}`))})}excludeIncompatibleVariants_(e){const n=[],r=this.main().playlists,i=ug(Ji(e)),s=Dk(i),o=i.video&&Ji(i.video)[0]||null,a=i.audio&&Ji(i.audio)[0]||null;Object.keys(r).forEach(u=>{const l=r[u];if(-1!==n.indexOf(l.id)||l.excludeUntil===1/0)return;n.push(l.id);const d=[],g=Sd(this.mainPlaylistLoader_.main,l),v=Dk(g);if(g.audio||g.video){if(v!==s&&d.push(`codec count "${v}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const b=g.video&&Ji(g.video)[0]||null,_=g.audio&&Ji(g.audio)[0]||null;b&&o&&b.type.toLowerCase()!==o.type.toLowerCase()&&d.push(`video codec "${b.type}" !== "${o.type}"`),_&&a&&_.type.toLowerCase()!==a.type.toLowerCase()&&d.push(`audio codec "${_.type}" !== "${a.type}"`)}d.length&&(l.excludeUntil=1/0,this.logger_(`excluding ${l.id}: ${d.join(" && ")}`))}})}updateAdCues_(e){let n=0;const r=this.seekable();r.length&&(n=r.start(0)),function(t,e,n=0){if(!t.segments)return;let i,r=n;for(let s=0;s<t.segments.length;s++){const o=t.segments[s];if(i||(i=iK(e,r+o.duration/2)),i){if("cueIn"in o){i.endTime=r,i.adEndTime=r,r+=o.duration,i=null;continue}if(r<i.endTime){r+=o.duration;continue}i.endTime+=o.duration}else if("cueOut"in o&&(i=new(O().VTTCue)(r,r+o.duration,o.cueOut),i.adStartTime=r,i.adEndTime=r+parseFloat(o.cueOut),e.addCue(i)),"cueOutCont"in o){const[a,u]=o.cueOutCont.split("/").map(parseFloat);i=new(O().VTTCue)(r,r+o.duration,""),i.adStartTime=r-a,i.adEndTime=i.adStartTime+u,e.addCue(i)}r+=o.duration}}(e,this.cueTagsTrack_,n)}goalBufferLength(){const e=this.tech_.currentTime(),n=Rn.GOAL_BUFFER_LENGTH,r=Rn.GOAL_BUFFER_LENGTH_RATE,i=Math.max(n,Rn.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+e*r,i)}bufferLowWaterLine(){const e=this.tech_.currentTime(),n=Rn.BUFFER_LOW_WATER_LINE,r=Rn.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(n,Rn.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(n,Rn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+e*r,this.bufferBasedABR?s:i)}bufferHighWaterLine(){return Rn.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){Ak(this.inbandTextTracks_,"com.apple.streaming",this.tech_),(({inbandTextTracks:t,dateRanges:e})=>{const n=t.metadataTrack_;if(!n)return;const r=O().WebKitDataCue||O().VTTCue;e.forEach(i=>{for(const s of Object.keys(i)){if(VX.has(s))continue;const o=new r(i.startTime,i.endTime,"");o.id=i.id,o.type="com.apple.quicktime.HLS",o.value={key:UX[s],data:i[s]},("scte35Out"===s||"scte35In"===s)&&(o.value.data=new Uint8Array(o.value.data.match(/[\da-f]{2}/gi)).buffer),n.addCue(o)}i.processDateRange()})})({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,n,r){const i=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();Ak(this.inbandTextTracks_,e,this.tech_),(({inbandTextTracks:t,metadataArray:e,timestampOffset:n,videoDuration:r})=>{if(!e)return;const i=O().WebKitDataCue||O().VTTCue,s=t.metadataTrack_;if(!s||(e.forEach(d=>{const g=d.cueTime+n;"number"!=typeof g||O().isNaN(g)||g<0||!(g<1/0)||!d.frames||!d.frames.length||d.frames.forEach(v=>{const b=new i(g,g,v.value||v.url||v.data||"");b.frame=v,b.value=v,function(t){Object.defineProperties(t.frame,{id:{get:()=>($.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key)},value:{get:()=>($.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data)},privateData:{get:()=>($.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data)}})}(b),s.addCue(b)})}),!s.cues||!s.cues.length))return;const o=s.cues,a=[];for(let d=0;d<o.length;d++)o[d]&&a.push(o[d]);const u=a.reduce((d,g)=>{const v=d[g.startTime]||[];return v.push(g),d[g.startTime]=v,d},{}),l=Object.keys(u).sort((d,g)=>Number(d)-Number(g));l.forEach((d,g)=>{const v=u[d],b=isFinite(r)?r:0,_=Number(l[g+1])||b;v.forEach(E=>{E.endTime=_})})})({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:i,videoDuration:r})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(!e.contentSteering)return;const n=r=>{for(const i of r.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(i));this.contentSteeringController_.assignTagProperties(r.uri,r.contentSteering)};n(e),this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),"dash"===this.sourceType_&&this.mainPlaylistLoader_.on("mediaupdatetimeout",()=>{this.mainPlaylistLoader_.refreshMedia_(this.mainPlaylistLoader_.media().id),this.contentSteeringController_.abort(),this.contentSteeringController_.clearTTLTimeout_(),this.contentSteeringController_.clearAvailablePathways(),n(this.main())}),this.contentSteeringController_.queryBeforeStart||this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;const r=this.main().playlists,i=new Set;let s=!1;Object.keys(r).forEach(o=>{const a=r[o],u=this.pathwayAttribute_(a),l=u&&e!==u;a.excludeUntil===1/0&&"content-steering"===a.lastExcludeReason_&&!l&&(delete a.excludeUntil,delete a.lastExcludeReason_,s=!0);const g=!a.excludeUntil&&a.excludeUntil!==1/0;!i.has(a.id)&&l&&g&&(i.add(a.id),a.excludeUntil=1/0,a.lastExcludeReason_="content-steering",this.logger_(`excluding ${a.id} for ${a.lastExcludeReason_}`))}),"DASH"===this.contentSteeringController_.manifestType_&&Object.keys(this.mediaTypes_).forEach(o=>{const a=this.mediaTypes_[o];if(a.activePlaylistLoader){const u=a.activePlaylistLoader.media_;u&&u.attributes.serviceLocation!==e&&(s=!0)}}),s&&this.changeSegmentPathway_()}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),"DASH"===this.contentSteeringController_.manifestType_&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}}class AK{constructor(e,n,r){const{playlistController_:i}=e,s=i.fastQualityChange_.bind(i);if(n.attributes){const o=n.attributes.RESOLUTION;this.width=o&&o.width,this.height=o&&o.height,this.bandwidth=n.attributes.BANDWIDTH,this.frameRate=n.attributes["FRAME-RATE"]}this.codecs=Sd(i.main(),n),this.playlist=n,this.id=r,this.enabled=((t,e,n)=>r=>{const i=t.main.playlists[e],s=Db(i),o=og(i);return typeof r>"u"?o:(r?delete i.disabled:i.disabled=!0,r!==o&&!s&&(n(),t.trigger(r?"renditionenabled":"renditiondisabled")),r)})(e.playlists,n.id,s)}}const Gk=["seeking","seeked","pause","playing","error"];class MK{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=li("PlaybackWatcher"),this.logger_("initialize");const n=()=>this.monitorCurrentTime_(),r=()=>this.monitorCurrentTime_(),i=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),o=this.playlistController_,a=["main","subtitle","audio"],u={};a.forEach(d=>{u[d]={reset:()=>this.resetSegmentDownloads_(d),updateend:()=>this.checkSegmentDownloads_(d)},o[`${d}SegmentLoader_`].on("appendsdone",u[d].updateend),o[`${d}SegmentLoader_`].on("playlistupdate",u[d].reset),this.tech_.on(["seeked","seeking"],u[d].reset)});const l=d=>{["main","audio"].forEach(g=>{o[`${g}SegmentLoader_`][d]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),l("off"))},this.clearSeekingAppendCheck_=()=>l("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),l("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(Gk,s),this.tech_.on("canplay",r),this.tech_.one("play",n),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",i),this.tech_.off(Gk,s),this.tech_.off("canplay",r),this.tech_.off("play",n),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),a.forEach(d=>{o[`${d}SegmentLoader_`].off("appendsdone",u[d].updateend),o[`${d}SegmentLoader_`].off("playlistupdate",u[d].reset),this.tech_.off(["seeked","seeking"],u[d].reset)}),this.checkCurrentTimeTimeout_&&O().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&O().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=O().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const n=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=n.buffered_()}checkSegmentDownloads_(e){const n=this.playlistController_,r=n[`${e}SegmentLoader_`],i=r.buffered_(),s=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t||t.length!==e.length)return!0;for(let n=0;n<t.length;n++)if(t.start(n)!==e.start(n)||t.end(n)!==e.end(n))return!0;return!1}(this[`${e}Buffered_`],i);this[`${e}Buffered_`]=i,s?this.resetSegmentDownloads_(e):(this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:r.playlist_&&r.playlist_.id,buffered:oa(i)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),"subtitle"!==e&&n.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0})))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),n=this.tech_.buffered();if(this.lastRecordedTime===e&&(!n.length||e+as>=n.end(n.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const n=this.seekable(),r=this.tech_.currentTime();let s;if(this.afterSeekableWindow_(n,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(s=n.end(n.length-1)),this.beforeSeekableWindow_(n,r)){const _=n.start(0);s=_+(_===n.end(0)?0:as)}if(typeof s<"u")return this.logger_(`Trying to seek outside of seekable at time ${r} with seekable range ${BO(n)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const o=this.playlistController_.sourceUpdater_,a=this.tech_.buffered(),u=o.audioBuffer?o.audioBuffered():null,l=o.videoBuffer?o.videoBuffered():null,d=this.media(),g=d.partTargetDuration?d.partTargetDuration:2*(d.targetDuration-vo),v=[u,l];for(let _=0;_<v.length;_++)if(v[_]&&Tb(v[_],r)<g)return!1;const b=sg(a,r);return 0!==b.length&&(s=b.start(0)+as,this.logger_(`Buffered region starts (${b.start(0)})  just beyond seek point (${r}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),n=this.tech_.buffered(),r=rl(n,e);return r.length&&e+3<=r.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${r.start(0)} -> ${r.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const e=this.seekable(),n=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,n)){const a=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${n}. Seeking to live point (seekable end) ${a}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const r=this.tech_.vhs.playlistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:n}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const o=sg(i,n);return o.length>0&&(this.logger_(`Stopped at ${n} and seeking to ${o.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(n),!0)}afterSeekableWindow_(e,n,r,i=!1){if(!e.length)return!1;let s=e.end(e.length-1)+as;return!r.endList&&("number"==typeof r.partTargetDuration||i)&&(s=e.end(e.length-1)+3*r.targetDuration),n>s}beforeSeekableWindow_(e,n){return!!(e.length&&e.start(0)>0&&n<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:n,currentTime:r}){if(!e)return;let i;if(e.length&&n.length){const s=rl(e,r-3),o=rl(e,r),a=rl(n,r);a.length&&!o.length&&s.length&&(i={start:s.end(0),end:a.end(0)})}else sg(e,r).length||(i=this.gapFromVideoUnderflow_(e,r));return!!i&&(this.logger_(`Encountered a gap in video from ${i.start} to ${i.end}. Seeking to current time ${r}`),!0)}skipTheGap_(e){const n=this.tech_.buffered(),r=this.tech_.currentTime(),i=sg(n,r);this.resetTimeUpdate_(),0!==i.length&&r===e&&(this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+vo),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,n){const r=function(t){if(t.length<2)return tr();const e=[];for(let n=1;n<t.length;n++){const r=t.end(n-1),i=t.start(n);e.push([r,i])}return tr(e)}(e);for(let i=0;i<r.length;i++){const s=r.start(i),o=r.end(i);if(n-s<4&&n-s>2)return{start:s,end:o}}return null}}const OK={errorInterval:30,getSource(t){return t(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Wk=function(t,e){let n=0,r=0;const i=Rt(OK,e);t.ready(()=>{t.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){r&&t.currentTime(r)},o=function(d){null!=d&&(r=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(d),t.trigger({type:"usage",name:"vhs-error-reload"}),t.play())},a=function(){if(Date.now()-n<1e3*i.errorInterval)t.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(i.getSource&&"function"==typeof i.getSource)return n=Date.now(),i.getSource.call(t,o);$.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},u=function(){t.off("loadedmetadata",s),t.off("error",a),t.off("dispose",u)};t.on("error",a),t.on("dispose",u),t.reloadSourceOnError=function(d){u(),Wk(t,d)}},ln={PlaylistLoader:sl,Playlist:Mr,utils:GW,STANDARD_PLAYLIST_SELECTOR:xk,INITIAL_PLAYLIST_SELECTOR:function(){const t=this.playlists.main.playlists.filter(Mr.isEnabled);return ol(t,(n,r)=>Fb(n,r)),t.filter(n=>!!Sd(this.playlists.main,n).video)[0]||null},lastBandwidthSelector:xk,movingAverageBandwidthSelector:function(t){let e=-1,n=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const r=this.useDevicePixelRatio&&O().devicePixelRatio||1;return e<0&&(e=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(e=t*this.systemBandwidth+(1-t)*e,n=this.systemBandwidth),wk(this.playlists.main,e,parseInt(cg(this.tech_.el(),"width"),10)*r,parseInt(cg(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:Fb,comparePlaylistResolution:function(t,e){let n,r;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||O().Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||O().Number.MAX_VALUE,n===r&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:n-r},xhr:nk()};Object.keys(Rn).forEach(t=>{Object.defineProperty(ln,t,{get:()=>($.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),Rn[t]),set(e){$.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),"number"!=typeof e||e<0?$.log.warn(`value of Vhs.${t} must be greater than or equal to 0`):Rn[t]=e}})});const Kk="videojs-vhs",Yk=function(t,e){const n=e.media();let r=-1;for(let i=0;i<t.length;i++)if(t[i].id===n.id){r=i;break}t.selectedIndex_=r,t.trigger({selectedIndex:r,type:"change"})};ln.canPlaySource=function(){return $.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Qk=()=>{if(!O().localStorage)return null;const t=O().localStorage.getItem(Kk);if(!t)return null;try{return JSON.parse(t)}catch{return null}},Zk=(t,e)=>{t._requestCallbackSet||(t._requestCallbackSet=new Set),t._requestCallbackSet.add(e)},Jk=(t,e)=>{t._responseCallbackSet||(t._responseCallbackSet=new Set),t._responseCallbackSet.add(e)},eP=(t,e)=>{t._requestCallbackSet&&(t._requestCallbackSet.delete(e),t._requestCallbackSet.size||delete t._requestCallbackSet)},tP=(t,e)=>{t._responseCallbackSet&&(t._responseCallbackSet.delete(e),t._responseCallbackSet.size||delete t._responseCallbackSet)};ln.supportsNativeHls=function(){if(!ue()||!ue().createElement)return!1;const t=ue().createElement("video");return!!$.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(n){return/maybe|probably/i.test(t.canPlayType(n))})}(),ln.supportsNativeDash=!!(ue()&&ue().createElement&&$.getTech("Html5").isSupported())&&/maybe|probably/i.test(ue().createElement("video").canPlayType("application/dash+xml")),ln.supportsTypeNatively=t=>"hls"===t?ln.supportsNativeHls:"dash"===t&&ln.supportsNativeDash,ln.isSupported=function(){return $.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},ln.xhr.onRequest=function(t){Zk(ln.xhr,t)},ln.xhr.onResponse=function(t){Jk(ln.xhr,t)},ln.xhr.offRequest=function(t){eP(ln.xhr,t)},ln.xhr.offResponse=function(t){tP(ln.xhr,t)};const qK=$.getComponent("Component");class nP extends qK{constructor(e,n,r){if(super(n,r.vhs),"number"==typeof r.initialBandwidth&&(this.options_.bandwidth=r.initialBandwidth),this.logger_=li("VhsHandler"),n.options_&&n.options_.playerId){const i=$.getPlayer(n.options_.playerId);this.player_=i}if(this.tech_=n,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(ue(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],i=>{const s=ue().fullscreenElement||ue().webkitFullscreenElement||ue().mozFullScreenElement||ue().msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.calculateTimestampOffsetForEachSegment=this.options_.calculateTimestampOffsetForEachSegment||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=60),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const e=Qk();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Rn.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Rn.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","calculateTimestampOffsetForEachSegment","exactManifestTimings","leastPixelDiffSelector"].forEach(e=>{typeof this.source_[e]<"u"&&(this.options_[e]=this.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(e,n){if(!e)return;this.setOptions_(),this.options_.src=(t=>0===t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(t.substring(t.indexOf(",")+1)):t)(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ln,this.options_.sourceType=MI(n),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.playlistController_=new wK(this.options_);const r=Rt({liveRangeSafeTimeDelta:as},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new MK(r),this.playlistController_.on("error",()=>{const s=$.players[this.tech_.options_.playerId];let o=this.playlistController_.error;"object"!=typeof o||o.code?"string"==typeof o&&(o={message:o,code:3}):o.code=3,s.error(o)});const i=this.options_.bufferBasedABR?ln.movingAverageBandwidthSelector(.55):ln.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):i.bind(this),this.playlistController_.selectInitialPlaylist=ln.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const o=O().navigator.connection||O().navigator.mozConnection||O().navigator.webkitConnection,a=1e7;if(this.options_.useNetworkInformationApi&&o){const u=1e3*o.downlink*1e3;s=u>=a&&s>=a?Math.max(s,u):u}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){let o;return o=this.throughput>0?1/this.throughput:0,Math.floor(1/(1/(this.bandwidth||1)+o))},set(){$.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>oa(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>oa(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&(t=>{if(!O().localStorage)return!1;let e=Qk();e=e?Rt(e,t):t;try{O().localStorage.setItem(Kk,JSON.stringify(e))}catch{return!1}})({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{!function(t){t.representations=()=>{const e=t.playlistController_.main(),n=Ed(e)?t.playlistController_.getAudioTrackPlaylists_():e.playlists;return n?n.filter(r=>!Db(r)).map((r,i)=>new AK(t,r,r.id)):[]}}(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=O().URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),(({player:t,sourceKeySystems:e,audioMedia:n,mainPlaylists:r})=>{if(!t.eme.initializeMediaKeys)return Promise.resolve();const s=((t,e)=>t.reduce((n,r)=>{if(!r.contentProtection)return n;const i=e.reduce((s,o)=>{const a=r.contentProtection[o];return a&&a.pssh&&(s[o]={pssh:a.pssh}),s},{});return Object.keys(i).length&&n.push(i),n},[]))(n?r.concat([n]):r,Object.keys(e)),o=[],a=[];return s.forEach(u=>{a.push(new Promise((l,d)=>{t.tech_.one("keysessioncreated",l)})),o.push(new Promise((l,d)=>{t.eme.initializeMediaKeys({keySystems:u},g=>{g?d(g):l()})}))}),Promise.race([Promise.all(o),Promise.race(a)])})({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(n=>{this.logger_("error while creating EME key session",n),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=(({player:t,sourceKeySystems:e,media:n,audioMedia:r})=>{const i=((t,e,n)=>{if(!t)return t;let r={};e&&e.attributes&&e.attributes.CODECS&&(r=ug(Ji(e.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(r.audio=n.attributes.CODECS);const i=rd(r.video),s=rd(r.audio),o={};for(const a in t)o[a]={},s&&(o[a].audioContentType=s),i&&(o[a].videoContentType=i),e.contentProtection&&e.contentProtection[a]&&e.contentProtection[a].pssh&&(o[a].pssh=e.contentProtection[a].pssh),"string"==typeof t[a]&&(o[a].url=t[a]);return Rt(t,o)})(e,n,r);return!(!i||(t.currentSource().keySystems=i,i&&!t.eme&&($.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))})({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});this.player_.tech_.on("keystatuschange",r=>{if("output-restricted"!==r.status)return;const i=this.playlistController_.main();if(!i||!i.playlists)return;const s=[];i.playlists.forEach(o=>{o&&o.attributes&&o.attributes.RESOLUTION&&o.attributes.RESOLUTION.height>=720&&(!o.excludeUntil||o.excludeUntil<1/0)&&(o.excludeUntil=1/0,s.push(o))}),s.length&&($.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...s),this.playlistController_.mainSegmentLoader_.resetEverything(),this.playlistController_.fastQualityChange_())}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),n?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const e=$.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{!function(t,e){e.representations().forEach(n=>{t.addQualityLevel(n)}),Yk(t,e.playlists)}(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{Yk(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":"3.7.0","mux.js":"7.0.1","mpd-parser":"1.2.2","m3u8-parser":"7.1.0","aes-decrypter":"4.0.1"}}version(){return this.constructor.version()}canChangeType(){return Bk.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&O().URL.revokeObjectURL&&(O().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,n){return(({playlist:t,time:e,callback:n})=>{if(!n)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===e)return n({message:"getProgramTime: playlist and time must be provided"});const r=((t,e)=>{if(!e||!e.segments||0===e.segments.length)return null;let r,n=0;for(let s=0;s<e.segments.length&&(r=e.segments[s],n=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:n+r.duration,!(t<=n));s++);const i=e.segments[e.segments.length-1];if(i.videoTimingInfo&&i.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>n){if(t>n+.25*i.duration)return null;r=i}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:n-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}})(e,t);if(!r)return n({message:"valid programTime was not found"});if("estimate"===r.type)return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart});const i={mediaSeconds:e},s=((t,e)=>{if(!e.dateTimeObject)return null;const s=t-(e.videoTimingInfo.transmuxedPresentationStart+e.videoTimingInfo.transmuxerPrependedSeconds);return new Date(e.dateTimeObject.getTime()+1e3*s)})(e,r.segment);return s&&(i.programDateTime=s.toISOString()),n(null,i)})({playlist:this.playlistController_.media(),time:e,callback:n})}seekToProgramTime(e,n,r=!0,i=2){return ak({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})}setupXhrHooks_(){this.xhr.onRequest=e=>{Zk(this.xhr,e)},this.xhr.onResponse=e=>{Jk(this.xhr,e)},this.xhr.offRequest=e=>{eP(this.xhr,e)},this.xhr.offResponse=e=>{tP(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}}const fg={name:"videojs-http-streaming",VERSION:"3.7.0",canHandleSource(t,e={}){const n=Rt($.options,e);return fg.canPlayType(t.type,n)},handleSource(t,e,n={}){const r=Rt($.options,n);return e.vhs=new nP(t,e,r),e.vhs.xhr=nk(),e.vhs.setupXhrHooks_(),e.vhs.src(t.src,t.type),e.vhs},canPlayType(t,e){const n=MI(t);if(!n)return"";const r=fg.getOverrideNative(e);return!ln.supportsTypeNatively(n)||r?"maybe":""},getOverrideNative(t={}){const{vhs:e={}}=t,n=!($.browser.IS_ANY_SAFARI||$.browser.IS_IOS),{overrideNative:r=n}=e;return r}};Ep("avc1.4d400d,mp4a.40.2")&&$.getTech("Html5").registerSourceHandler(fg,0),$.VhsHandler=nP,$.VhsSourceHandler=fg,$.Vhs=ln,$.use||$.registerComponent("Vhs",ln),$.options.vhs=$.options.vhs||{},(!$.getPlugin||!$.getPlugin("reloadSourceOnError"))&&$.registerPlugin("reloadSourceOnError",function(t){Wk(this,t)});let zK=(()=>{class t{constructor(n,r){this.service=n,this.route=r,this.id=0,this.tituloConExtension="",this.videoUrl=""}ngOnInit(){this.route.params.subscribe(n=>{this.id=n.id,console.log(this.id),this.obtenerVideo(this.id)})}obtenerVideo(n){this.id=n,this.service.obtenerUrlVideo(this.id).subscribe(r=>{this.video=r;const i=this.video.url.split("/");this.tituloConExtension=i[i.length-1],this.videoUrl="http://localhost:8080/videos/"+this.tituloConExtension,console.log(this.videoUrl),this.player=$("my-video",{controls:!0}),this.cambiarVideo(this.videoUrl)})}cambiarVideo(n){this.player.pause(),this.player.src({src:n,type:"video/mp4"}),this.player.load(),this.player.play()}ngOnDestroy(){this.player&&this.player.dispose()}static#e=this.\u0275fac=function(r){return new(r||t)(z(Ou),z(Wo))};static#t=this.\u0275cmp=ir({type:t,selectors:[["app-reproductor"]],decls:5,vars:1,consts:[[1,"container"],["id","my-video","controls","","preload","auto","width","800","type","video/mp4",1,"video-js"]],template:function(r,i){1&r&&(ie(0,"body")(1,"h1"),je(2),fe(),ie(3,"div",0),bn(4,"video",1),fe()()),2&r&&(Le(2),Fo(i.video.titulo))},styles:["body[_ngcontent-%COMP%]{background-color:#232121}.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding-bottom:30px}h1[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#f0f8ff}"]})}return t})(),GK=(()=>{class t{constructor(n){this.http=n}subirFichero(n){return this.http.post("http://localhost:8080/media/upload",n)}static#e=this.\u0275fac=function(r){return new(r||t)(Ne(qf))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const WK=[{path:"",component:jv},{path:"Home",component:jv},{path:"Voley",component:kH},{path:"Futbol",component:RH},{path:"Basquet",component:BH},{path:"Deportes",component:jH},{path:"Reproductor/:id",component:zK},{path:"Contacto",component:$H},{path:"login",component:YH},{path:"registro",component:JH},{path:"Subir",component:(()=>{class t{constructor(n,r,i,s){this.service=n,this.mediaService=r,this.tokenService=i,this.router=s,this.isLogger=!1,this.username="",this.video=new HH(0,"","","","","")}ngOnInit(){this.tokenService.getToken()?(this.isLogger=!0,this.username=this.tokenService.getUserName()):(this.isLogger=!1,this.username="",this.router.navigate(["/login"]))}capturarArchivo(n){const r=n.target.files[0];r&&("video/mp4"===r.type?(this.videoUrl=r,this.procesarVideo(this.videoUrl),console.log(this.videoUrl)):"image/jpeg"===r.type&&(this.videoImg=r,this.procesarImage(this.videoImg),console.log(this.videoImg)))}procesarVideo(n){if(void 0!==n){const i=String(n.name);this.video.url=i,console.log(this.video.url)}}procesarImage(n){if(void 0!==n){const i=String(n.name);this.video.image=i,console.log(this.video.image)}}subir(n){if(this.video.titulo&&this.video.url&&this.video.image&&this.video.categoria&&this.video.subtitulo){const r=new FormData;r.append("file",this.videoUrl),this.mediaService.subirFichero(r).subscribe(s=>{console.log("video subido",s),console.log("video.url: "+this.videoUrl)});const i=new FormData;i.append("file",this.videoImg),this.mediaService.subirFichero(i).subscribe(s=>{console.log("Imagen subida",s),console.log("video.image: "+this.videoImg)}),this.service.agregarVideo(n).subscribe(s=>{alert("Video Subido!"),console.log("Video final:"+n.url," Imagen final:"+n.image)})}else alert("completa todo los campos")}static#e=this.\u0275fac=function(r){return new(r||t)(z(Ou),z(GK),z(a_),z(Zn))};static#t=this.\u0275cmp=ir({type:t,selectors:[["app-subir-video"]],decls:33,vars:3,consts:[[1,"container"],[1,"form-video"],["action","","enctype","multipart/form-data"],["for","titulo"],["id","titulo","type","text","name","titulo","required","",3,"ngModel","ngModelChange"],["for","video"],["type","file","accept","video/*","id","video","name","video","required","",3,"change"],["for","image"],["type","file","accept","image/*","id","image","name","image",3,"change"],["for","categoria"],["id","categoria","type","text","name","categoria","required","",3,"ngModel","ngModelChange"],["value","Futbol"],["value","Voley"],["value","Basquet"],[1,"descripcion"],["for","subtitulo"],["rows","8","cols","50","id","subtitulo","type","text","name","subtitulo","required","",3,"ngModel","ngModelChange"],[1,"boton",3,"click"]],template:function(r,i){1&r&&(ie(0,"body",0)(1,"body",1)(2,"h3"),je(3,"Subir video"),fe(),ie(4,"form",2)(5,"div")(6,"label",3),je(7,"Titulo:"),fe(),ie(8,"input",4),_t("ngModelChange",function(o){return i.video.titulo=o}),fe()(),ie(9,"div")(10,"label",5),je(11,"Video:"),fe(),ie(12,"input",6),_t("change",function(o){return i.capturarArchivo(o)}),fe()(),ie(13,"div")(14,"label",7),je(15,"Imagen:"),fe(),ie(16,"input",8),_t("change",function(o){return i.capturarArchivo(o)}),fe()(),ie(17,"div")(18,"label",9),je(19,"Categoria"),fe(),ie(20,"select",10),_t("ngModelChange",function(o){return i.video.categoria=o}),ie(21,"option",11),je(22,"Futbol"),fe(),ie(23,"option",12),je(24,"Voley"),fe(),ie(25,"option",13),je(26,"Basquet"),fe()()(),ie(27,"div",14)(28,"label",15),je(29,"Descripcion:"),fe(),ie(30,"textarea",16),_t("ngModelChange",function(o){return i.video.subtitulo=o}),fe()(),ie(31,"button",17),_t("click",function(){return i.subir(i.video)}),je(32,"Subir"),fe()()()()),2&r&&(Le(8),Ve("ngModel",i.video.titulo),Le(12),Ve("ngModel",i.video.categoria),Le(10),Ve("ngModel",i.video.subtitulo))},dependencies:[nd,hI,pI,Si,bp,Ns,Qc,Qo,Zi,Ko],styles:[".container[_ngcontent-%COMP%]{display:flex;background-color:#000;justify-content:center;height:75vh;padding:10px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);width:100%;background-image:url(/assets/img/fondoLogin.jpg);background-position:absolute}#titulo[_ngcontent-%COMP%]{width:500px}#url[_ngcontent-%COMP%]{min-width:500px}.form-video[_ngcontent-%COMP%]{position:relative;border-radius:10px;margin:10px;padding:10px;width:50%;min-width:550px;background-color:#eeeeeeb3;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.descripcion[_ngcontent-%COMP%]{display:flex}.boton[_ngcontent-%COMP%]{font-size:18px;border-radius:5px;margin:10px;padding:5px}div[_ngcontent-%COMP%]{margin-bottom:10px}div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{margin-right:10px}.fondo[_ngcontent-%COMP%]{background-image:url(/assets/img/fondoLogin.jpg);background-position:absolute;background-size:cover;top:50%;left:50%;width:100%;height:59vh}"]})}return t})()},{path:"**",component:jv}];let XK=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=mi({type:t});static#n=this.\u0275inj=Qr({imports:[yA.forRoot(WK),yA]})}return t})();const KK=function(){return["home"]},pg=function(){return["/Futbol"]},gg=function(){return["/Voley"]},mg=function(){return["/Basquet"]},YK=function(){return["/home"]},QK=function(){return["/Deportes"]},ZK=function(){return["/Contacto"]},JK=function(){return["/login"]};let eY=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=ir({type:t,selectors:[["app-header"]],decls:44,vars:34,consts:[[1,"logotipo"],[1,"logo",3,"routerLink"],["src","../assets/img/blanco.png","alt","Logo de la pagina"],[1,"deportes-arriba"],["src","../assets/img/futbol.jpeg","alt","Futbol",1,"deporte",3,"routerLink"],[3,"routerLink"],["src","../assets/img/voley-header.jpeg","alt","Voley",1,"deporte",3,"routerLink"],["src","../assets/img/basquet-header.jpg","alt","Basquet",1,"deporte",3,"routerLink"],[1,"header"],[1,"navegacion"],[1,"menu"],["id","sports"],[1,"submenu"]],template:function(r,i){1&r&&(ie(0,"div",0)(1,"a",1),bn(2,"img",2),fe(),ie(3,"ul",3)(4,"li"),bn(5,"img",4),ie(6,"span",5)(7,"h1",5),je(8,"Futbol"),fe()()(),ie(9,"li"),bn(10,"img",6),ie(11,"span",5)(12,"h1",5),je(13,"Voley"),fe()()(),ie(14,"li"),bn(15,"img",7),ie(16,"span",5)(17,"h1",5),je(18,"Basquet"),fe()()()()(),ie(19,"div",8)(20,"nav",9)(21,"ul",10)(22,"li")(23,"a",5),je(24,"Inicio"),fe()(),ie(25,"li",11)(26,"a",5),je(27,"Deportes"),fe(),ie(28,"ul",12)(29,"li")(30,"a",5),je(31,"Futbol"),fe()(),ie(32,"li")(33,"a",5),je(34,"Voley"),fe()(),ie(35,"li")(36,"a",5),je(37,"Basquet"),fe()()()(),ie(38,"li")(39,"a",5),je(40,"Contacto"),fe()(),ie(41,"li")(42,"a",5),je(43,"login"),fe()()()()()),2&r&&(Le(1),Ve("routerLink",On(17,KK)),Le(4),Ve("routerLink",On(18,pg)),Le(1),Ve("routerLink",On(19,pg)),Le(1),Ve("routerLink",On(20,pg)),Le(3),Ve("routerLink",On(21,gg)),Le(1),Ve("routerLink",On(22,gg)),Le(1),Ve("routerLink",On(23,gg)),Le(3),Ve("routerLink",On(24,mg)),Le(1),Ve("routerLink",On(25,mg)),Le(1),Ve("routerLink",On(26,mg)),Le(6),Ve("routerLink",On(27,YK)),Le(3),Ve("routerLink",On(28,QK)),Le(4),Ve("routerLink",On(29,pg)),Le(3),Ve("routerLink",On(30,gg)),Le(3),Ve("routerLink",On(31,mg)),Le(3),Ve("routerLink",On(32,ZK)),Le(3),Ve("routerLink",On(33,JK)))},dependencies:[Yi],styles:["*[_ngcontent-%COMP%]{margin:0%;padding:0%;font-family:Arial,Helvetica,sans-serif;list-style:none;text-decoration:none}.logotipo[_ngcontent-%COMP%]{display:flex;background:rgb(0,0,0);background:linear-gradient(90deg,rgba(0,0,0,1) 0%,rgba(30,34,41,.9607492655265231) 35%,rgba(0,0,0,1) 100%)}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;padding:10px 25px 0;cursor:pointer}.logotipo[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{width:100%;padding-right:10px;display:flex;justify-content:flex-end}.deporte[_ngcontent-%COMP%]{height:140px;clip-path:polygon(25% 0%,100% 0%,75% 100%,0% 100%);cursor:pointer}.logotipo[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-color:#fd6e21b3;top:100%;left:-25%;clip-path:polygon(25% 0%,100% 0%,75% 100%,0% 100%);text-align:center;padding:25% 20%;cursor:pointer}.logotipo[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative;overflow:hidden}.logotipo[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{top:0%;left:0%;transition:.5s;cursor:pointer}.logotipo[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{font-size:30px;text-transform:uppercase;cursor:pointer}.navegacion[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.navegacion[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;padding:20px 50px}.navegacion[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:inline-flex;line-height:20px;transition:all .5s}.header[_ngcontent-%COMP%]{align-items:center;background-color:#fff;padding:0;min-width:600px;border:rgb(195,195,195) 1px solid}.menu[_ngcontent-%COMP%]{display:flex;justify-content:space-around}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{background-color:#dc4d00;transition:1s}@media screen and (max-width: 1080px){.navegacion[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex}.menu[_ngcontent-%COMP%]{position:relative}.submenu[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#fff;z-index:1;top:100%;border:rgb(195,195,195) 1px solid}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{background-color:#dc4d00;transition:1s;width:100%}.submenu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{width:100%}#sports[_ngcontent-%COMP%]:hover   .submenu[_ngcontent-%COMP%]{display:block}.deportes-arriba[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:none}.logotipo[_ngcontent-%COMP%]{height:130px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{justify-content:center}}"]})}return t})(),tY=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=ir({type:t,selectors:[["app-footer"]],decls:14,vars:0,consts:[[1,"pie-pagina"],[1,"grupo-1"],["src","assets/img/Definitivo.png","alt","Logo-a-color",1,"logo-footer"],[1,"social-icons"],["href","https://www.facebook.com","target","_blank"],["src","assets/icons/Logo_de_Facebook.png","alt","Facebook Icon"],["href","https://www.instagram.com","target","_blank"],["src","assets/icons/Logo-Instagram.png","alt","Instagram Icon"],[1,"grupo-2"]],template:function(r,i){1&r&&(ie(0,"footer",0)(1,"div",1),bn(2,"img",2),ie(3,"div",3)(4,"a",4),bn(5,"img",5),fe(),ie(6,"a",6),bn(7,"img",7),fe()()(),ie(8,"div",8)(9,"small"),je(10,"\xa9 2023 "),ie(11,"b"),je(12,"SF Replay Sports"),fe(),je(13,"- Todos los derechos reservados"),fe()()())},styles:[".pie-pagina[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:20px 20px 0;text-align:center;border:0px}.grupo-1[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:0}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:left;display:inline-block;margin:0 10px}.social-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.grupo-2[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px;color:#999;text-align:center}.logo-footer[_ngcontent-%COMP%]{height:150px}"]})}return t})(),nY=(()=>{class t{constructor(){this.title="SF Replay Sports"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=ir({type:t,selectors:[["app-root"]],decls:4,vars:0,template:function(r,i){1&r&&(ie(0,"header"),bn(1,"app-header"),fe(),bn(2,"router-outlet")(3,"app-footer"))},dependencies:[kv,eY,tY]})}return t})(),rY=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=mi({type:t,bootstrap:[nY]});static#n=this.\u0275inj=Qr({providers:[u_],imports:[Tj,XK,IH,Qj]})}return t})();_j().bootstrapModule(rY).catch(t=>console.error(t))},60:(ze,Oe,ve)=>{"use strict";var q=ve(382);ze.exports=function(K,J){return void 0===J&&(J=!1),function(Ee,Se,_e){if(Ee)K(Ee);else if(Se.statusCode>=400&&Se.statusCode<=599){var pe=_e;if(J)if(q.TextDecoder){var ct=function W(ke){return void 0===ke&&(ke=""),ke.toLowerCase().split(";").reduce(function(K,J){var Ee=J.split("="),_e=Ee[1];return"charset"===Ee[0].trim()?_e.trim():K},"utf-8")}(Se.headers&&Se.headers["content-type"]);try{pe=new TextDecoder(ct).decode(_e)}catch{}}else pe=String.fromCharCode.apply(null,new Uint8Array(_e));K({cause:pe})}else K(null,_e)}}},817:(ze,Oe,ve)=>{"use strict";var q=ve(382),me=ve(434),W=ve(794);Se.httpHandler=ve(60);var ke=function($e){var qe={};return $e&&$e.trim().split("\n").forEach(function(Nt){var cn=Nt.indexOf(":"),Et=Nt.slice(0,cn).trim().toLowerCase(),se=Nt.slice(cn+1).trim();typeof qe[Et]>"u"?qe[Et]=se:Array.isArray(qe[Et])?qe[Et].push(se):qe[Et]=[qe[Et],se]}),qe};function Ee(re,$e,qe){var Nt=re;return W($e)?(qe=$e,"string"==typeof re&&(Nt={uri:re})):Nt=me({},$e,{uri:re}),Nt.callback=qe,Nt}function Se(re,$e,qe){return _e($e=Ee(re,$e,qe))}function _e(re){if(typeof re.callback>"u")throw new Error("callback argument missing");var $e=!1,qe=function(he,le,oe){$e||($e=!0,re.callback(he,le,oe))};function cn(){var Y=void 0;if(Y=ye.response?ye.response:ye.responseText||function pe(re){try{if("document"===re.responseType)return re.responseXML;if(""===re.responseType&&(!re.responseXML||"parsererror"!==re.responseXML.documentElement.nodeName))return re.responseXML}catch{}return null}(ye),I)try{Y=JSON.parse(Y)}catch{}return Y}function Et(Y){return clearTimeout(U),Y instanceof Error||(Y=new Error(""+(Y||"Unknown XMLHttpRequest Error"))),Y.statusCode=0,qe(Y,ee)}function se(){if(!Ze){var Y;clearTimeout(U);var he=ee,le=null;return 0!==(Y=re.useXDR&&void 0===ye.status?200:1223===ye.status?204:ye.status)?(he={body:cn(),statusCode:Y,method:mt,headers:{},url:ge,rawRequest:ye},ye.getAllResponseHeaders&&(he.headers=ke(ye.getAllResponseHeaders()))):le=new Error("Internal XMLHttpRequest Error"),qe(le,he,he.body)}}var ye=re.xhr||null;ye||(ye=re.cors||re.useXDR?new Se.XDomainRequest:new Se.XMLHttpRequest);var Pe,Ze,U,ge=ye.url=re.uri||re.url,mt=ye.method=re.method||"GET",ut=re.body||re.data,Ue=ye.headers=re.headers||{},w=!!re.sync,I=!1,ee={body:void 0,headers:{},statusCode:0,method:mt,url:ge,rawRequest:ye};if("json"in re&&!1!==re.json&&(I=!0,Ue.accept||Ue.Accept||(Ue.Accept="application/json"),"GET"!==mt&&"HEAD"!==mt&&(Ue["content-type"]||Ue["Content-Type"]||(Ue["Content-Type"]="application/json"),ut=JSON.stringify(!0===re.json?ut:re.json))),ye.onreadystatechange=function Nt(){4===ye.readyState&&setTimeout(se,0)},ye.onload=se,ye.onerror=Et,ye.onprogress=function(){},ye.onabort=function(){Ze=!0},ye.ontimeout=Et,ye.open(mt,ge,!w,re.username,re.password),w||(ye.withCredentials=!!re.withCredentials),!w&&re.timeout>0&&(U=setTimeout(function(){if(!Ze){Ze=!0,ye.abort("timeout");var Y=new Error("XMLHttpRequest timeout");Y.code="ETIMEDOUT",Et(Y)}},re.timeout)),ye.setRequestHeader)for(Pe in Ue)Ue.hasOwnProperty(Pe)&&ye.setRequestHeader(Pe,Ue[Pe]);else if(re.headers&&!function J(re){for(var $e in re)if(re.hasOwnProperty($e))return!1;return!0}(re.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in re&&(ye.responseType=re.responseType),"beforeSend"in re&&"function"==typeof re.beforeSend&&re.beforeSend(ye),ye.send(ut||null),ye}ze.exports=Se,ze.exports.default=Se,Se.XMLHttpRequest=q.XMLHttpRequest||function ct(){},Se.XDomainRequest="withCredentials"in new Se.XMLHttpRequest?Se.XMLHttpRequest:q.XDomainRequest,function K(re,$e){for(var qe=0;qe<re.length;qe++)$e(re[qe])}(["get","put","post","patch","head","delete"],function(re){Se["delete"===re?"del":re]=function($e,qe,Nt){return(qe=Ee($e,qe,Nt)).method=re.toUpperCase(),_e(qe)}})},451:(ze,Oe)=>{"use strict";function q(K,J){return void 0===J&&(J=Object),J&&"function"==typeof J.freeze?J.freeze(K):K}var W=q({HTML:"text/html",isHTML:function(K){return K===W.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),ke=q({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(K){return K===ke.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Oe.assign=function me(K,J){if(null===K||"object"!=typeof K)throw new TypeError("target is not an object");for(var Ee in J)Object.prototype.hasOwnProperty.call(J,Ee)&&(K[Ee]=J[Ee]);return K},Oe.find=function ve(K,J,Ee){if(void 0===Ee&&(Ee=Array.prototype),K&&"function"==typeof Ee.find)return Ee.find.call(K,J);for(var Se=0;Se<K.length;Se++)if(Object.prototype.hasOwnProperty.call(K,Se)){var _e=K[Se];if(J.call(void 0,_e,Se,K))return _e}},Oe.freeze=q,Oe.MIME_TYPE=W,Oe.NAMESPACE=ke},20:(ze,Oe,ve)=>{var me=ve(451),W=ve(475),ke=ve(562),K=ve(989),J=W.DOMImplementation,Ee=me.NAMESPACE,Se=K.ParseError,_e=K.XMLReader;function pe(se){return se.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function ct(se){this.options=se||{locator:{}}}function $e(){this.cdata=!1}function qe(se,ye){ye.lineNumber=se.lineNumber,ye.columnNumber=se.columnNumber}function Nt(se){if(se)return"\n@"+(se.systemId||"")+"#[line:"+se.lineNumber+",col:"+se.columnNumber+"]"}function cn(se,ye,Pe){return"string"==typeof se?se.substr(ye,Pe):se.length>=ye+Pe||ye?new java.lang.String(se,ye,Pe)+"":se}function Et(se,ye){se.currentElement?se.currentElement.appendChild(ye):se.doc.appendChild(ye)}ct.prototype.parseFromString=function(se,ye){var Pe=this.options,Ze=new _e,ge=Pe.domBuilder||new $e,mt=Pe.errorHandler,ut=Pe.locator,Ue=Pe.xmlns||{},w=/\/x?html?$/.test(ye),I=w?ke.HTML_ENTITIES:ke.XML_ENTITIES;return ut&&ge.setDocumentLocator(ut),Ze.errorHandler=function re(se,ye,Pe){if(!se){if(ye instanceof $e)return ye;se=ye}var Ze={},ge=se instanceof Function;function mt(ut){var Ue=se[ut];!Ue&&ge&&(Ue=2==se.length?function(w){se(ut,w)}:se),Ze[ut]=Ue&&function(w){Ue("[xmldom "+ut+"]\t"+w+Nt(Pe))}||function(){}}return Pe=Pe||{},mt("warning"),mt("error"),mt("fatalError"),Ze}(mt,ge,ut),Ze.domBuilder=Pe.domBuilder||ge,w&&(Ue[""]=Ee.HTML),Ue.xml=Ue.xml||Ee.XML,se&&"string"==typeof se?Ze.parse((Pe.normalizeLineEndings||pe)(se),Ue,I):Ze.errorHandler.error("invalid doc source"),ge.doc},$e.prototype={startDocument:function(){this.doc=(new J).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(se,ye,Pe,Ze){var ge=this.doc,mt=ge.createElementNS(se,Pe||ye),ut=Ze.length;Et(this,mt),this.currentElement=mt,this.locator&&qe(this.locator,mt);for(var Ue=0;Ue<ut;Ue++){se=Ze.getURI(Ue);var w=Ze.getValue(Ue),I=(Pe=Ze.getQName(Ue),ge.createAttributeNS(se,Pe));this.locator&&qe(Ze.getLocator(Ue),I),I.value=I.nodeValue=w,mt.setAttributeNode(I)}},endElement:function(se,ye,Pe){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(se,ye){},endPrefixMapping:function(se){},processingInstruction:function(se,ye){var Pe=this.doc.createProcessingInstruction(se,ye);this.locator&&qe(this.locator,Pe),Et(this,Pe)},ignorableWhitespace:function(se,ye,Pe){},characters:function(se,ye,Pe){if(se=cn.apply(this,arguments)){if(this.cdata)var Ze=this.doc.createCDATASection(se);else Ze=this.doc.createTextNode(se);this.currentElement?this.currentElement.appendChild(Ze):/^\s*$/.test(se)&&this.doc.appendChild(Ze),this.locator&&qe(this.locator,Ze)}},skippedEntity:function(se){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(se){(this.locator=se)&&(se.lineNumber=0)},comment:function(se,ye,Pe){se=cn.apply(this,arguments);var Ze=this.doc.createComment(se);this.locator&&qe(this.locator,Ze),Et(this,Ze)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(se,ye,Pe){var Ze=this.doc.implementation;if(Ze&&Ze.createDocumentType){var ge=Ze.createDocumentType(se,ye,Pe);this.locator&&qe(this.locator,ge),Et(this,ge),this.doc.doctype=ge}},warning:function(se){console.warn("[xmldom warning]\t"+se,Nt(this.locator))},error:function(se){console.error("[xmldom error]\t"+se,Nt(this.locator))},fatalError:function(se){throw new Se(se,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(se){$e.prototype[se]=function(){return null}}),Oe.DOMParser=ct},475:(ze,Oe,ve)=>{var q=ve(451),me=q.find,W=q.NAMESPACE;function ke(T){return""!==T}function J(T,C){return T.hasOwnProperty(C)||(T[C]=!0),T}function Ee(T){if(!T)return[];var C=function K(T){return T?T.split(/[\t\n\f\r ]+/).filter(ke):[]}(T);return Object.keys(C.reduce(J,{}))}function _e(T,C){for(var N in T)Object.prototype.hasOwnProperty.call(T,N)&&(C[N]=T[N])}function pe(T,C){var N=T.prototype;if(!(N instanceof C)){let de=function(){};de.prototype=C.prototype,de=new de,_e(N,de),T.prototype=N=de}N.constructor!=T&&("function"!=typeof T&&console.error("unknown Class:"+T),N.constructor=T)}var ct={},re=ct.ELEMENT_NODE=1,$e=ct.ATTRIBUTE_NODE=2,qe=ct.TEXT_NODE=3,Nt=ct.CDATA_SECTION_NODE=4,cn=ct.ENTITY_REFERENCE_NODE=5,Et=ct.ENTITY_NODE=6,se=ct.PROCESSING_INSTRUCTION_NODE=7,ye=ct.COMMENT_NODE=8,Pe=ct.DOCUMENT_NODE=9,Ze=ct.DOCUMENT_TYPE_NODE=10,ge=ct.DOCUMENT_FRAGMENT_NODE=11,mt=ct.NOTATION_NODE=12,ut={},Ue={},U=(ut.INDEX_SIZE_ERR=(Ue[1]="Index size error",1),ut.DOMSTRING_SIZE_ERR=(Ue[2]="DOMString size error",2),ut.HIERARCHY_REQUEST_ERR=(Ue[3]="Hierarchy request error",3)),oe=(ut.WRONG_DOCUMENT_ERR=(Ue[4]="Wrong document",4),ut.INVALID_CHARACTER_ERR=(Ue[5]="Invalid character",5),ut.NO_DATA_ALLOWED_ERR=(Ue[6]="No data allowed",6),ut.NO_MODIFICATION_ALLOWED_ERR=(Ue[7]="No modification allowed",7),ut.NOT_FOUND_ERR=(Ue[8]="Not found",8)),ce=(ut.NOT_SUPPORTED_ERR=(Ue[9]="Not supported",9),ut.INUSE_ATTRIBUTE_ERR=(Ue[10]="Attribute in use",10));function be(T,C){if(C instanceof Error)var N=C;else N=this,Error.call(this,Ue[T]),this.message=Ue[T],Error.captureStackTrace&&Error.captureStackTrace(this,be);return N.code=T,C&&(this.message=this.message+": "+C),N}function Ce(){}function Dn(T,C){this._node=T,this._refresh=C,Je(this)}function Je(T){var C=T._node._inc||T._node.ownerDocument._inc;if(T._inc!==C){var N=T._refresh(T._node);if(El(T,"length",N.length),!T.$$length||N.length<T.$$length)for(var j=N.length;j in T;j++)Object.prototype.hasOwnProperty.call(T,j)&&delete T[j];_e(N,T),T._inc=C}}function Zt(){}function Fn(T,C){for(var N=T.length;N--;)if(T[N]===C)return N}function nr(T,C,N,j){if(j?C[Fn(C,j)]=N:C[C.length++]=N,T){N.ownerElement=T;var de=T.ownerDocument;de&&(j&&va(de,T,j),function fl(T,C,N){T&&T._inc++,N.namespaceURI===W.XMLNS&&(C._nsMap[N.prefix?N.localName:""]=N.value)}(de,T,N))}}function Ii(T,C,N){var j=Fn(C,N);if(!(j>=0))throw new be(oe,new Error(T.tagName+"@"+N));for(var de=C.length-1;j<de;)C[j]=C[++j];if(C.length=de,T){var Ge=T.ownerDocument;Ge&&(va(Ge,T,N),N.ownerElement=null)}}function ya(){}function bt(){}function Bn(T){return("<"==T?"&lt;":">"==T&&"&gt;")||"&"==T&&"&amp;"||'"'==T&&"&quot;"||"&#"+T.charCodeAt()+";"}function Mi(T,C){if(C(T))return!0;if(T=T.firstChild)do{if(Mi(T,C))return!0}while(T=T.nextSibling)}function dn(){this.ownerDocument=this}function va(T,C,N,j){T&&T._inc++,N.namespaceURI===W.XMLNS&&delete C._nsMap[N.prefix?N.localName:""]}function Oi(T,C,N){if(T&&T._inc){T._inc++;var j=C.childNodes;if(N)j[j.length++]=N;else{for(var de=C.firstChild,Ge=0;de;)j[Ge++]=de,de=de.nextSibling;j.length=Ge,delete j[j.length]}}}function Co(T,C){var N=C.previousSibling,j=C.nextSibling;return N?N.nextSibling=j:T.firstChild=j,j?j.previousSibling=N:T.lastChild=N,C.parentNode=null,C.previousSibling=null,C.nextSibling=null,Oi(T.ownerDocument,T),C}function rr(T){return T&&T.nodeType===bt.DOCUMENT_TYPE_NODE}function kr(T){return T&&T.nodeType===bt.ELEMENT_NODE}function pl(T){return T&&T.nodeType===bt.TEXT_NODE}function Vd(T,C){var N=T.childNodes||[];if(me(N,kr)||rr(C))return!1;var j=me(N,rr);return!(C&&j&&N.indexOf(j)>N.indexOf(C))}function jd(T,C){var N=T.childNodes||[];if(me(N,function j(Ge){return kr(Ge)&&Ge!==C}))return!1;var de=me(N,rr);return!(C&&de&&N.indexOf(de)>N.indexOf(C))}function $d(T,C,N){var j=T.childNodes||[],de=C.childNodes||[];if(C.nodeType===bt.DOCUMENT_FRAGMENT_NODE){var Ge=de.filter(kr);if(Ge.length>1||me(de,pl))throw new be(U,"More than one element or text in fragment");if(1===Ge.length&&!Vd(T,N))throw new be(U,"Element in fragment can not be inserted before doctype")}if(kr(C)&&!Vd(T,N))throw new be(U,"Only one element can be added and only after doctype");if(rr(C)){if(me(j,rr))throw new be(U,"Only one doctype is allowed");var Ft=me(j,kr);if(N&&j.indexOf(Ft)<j.indexOf(N))throw new be(U,"Doctype can only be inserted before an element");if(!N&&Ft)throw new be(U,"Doctype can not be appended since element is present")}}function Hd(T,C,N){var j=T.childNodes||[],de=C.childNodes||[];if(C.nodeType===bt.DOCUMENT_FRAGMENT_NODE){var Ge=de.filter(kr);if(Ge.length>1||me(de,pl))throw new be(U,"More than one element or text in fragment");if(1===Ge.length&&!jd(T,N))throw new be(U,"Element in fragment can not be inserted before doctype")}if(kr(C)&&!jd(T,N))throw new be(U,"Only one element can be added and only after doctype");if(rr(C)){if(me(j,function(At){return rr(At)&&At!==N}))throw new be(U,"Only one doctype is allowed");var Ft=me(j,kr);if(N&&j.indexOf(Ft)<j.indexOf(N))throw new be(U,"Doctype can only be inserted before an element")}}function Eo(T,C,N,j){(function ki(T,C,N){if(!function Lt(T){return T&&(T.nodeType===bt.DOCUMENT_NODE||T.nodeType===bt.DOCUMENT_FRAGMENT_NODE||T.nodeType===bt.ELEMENT_NODE)}(T))throw new be(U,"Unexpected parent node type "+T.nodeType);if(N&&N.parentNode!==T)throw new be(oe,"child not in parent");if(!function Gn(T){return T&&(kr(T)||pl(T)||rr(T)||T.nodeType===bt.DOCUMENT_FRAGMENT_NODE||T.nodeType===bt.COMMENT_NODE||T.nodeType===bt.PROCESSING_INSTRUCTION_NODE)}(C)||rr(C)&&T.nodeType!==bt.DOCUMENT_NODE)throw new be(U,"Unexpected node type "+C.nodeType+" for parent node type "+T.nodeType)})(T,C,N),T.nodeType===bt.DOCUMENT_NODE&&(j||$d)(T,C,N);var de=C.parentNode;if(de&&de.removeChild(C),C.nodeType===ge){var Ge=C.firstChild;if(null==Ge)return C;var Ft=C.lastChild}else Ge=Ft=C;var Jt=N?N.previousSibling:T.lastChild;Ge.previousSibling=Jt,Ft.nextSibling=N,Jt?Jt.nextSibling=Ge:T.firstChild=Ge,null==N?T.lastChild=Ft:N.previousSibling=Ft;do{Ge.parentNode=T}while(Ge!==Ft&&(Ge=Ge.nextSibling));return Oi(T.ownerDocument||T,T),C.nodeType==ge&&(C.firstChild=C.lastChild=null),C}function hs(){this._nsMap={}}function _a(){}function Do(){}function gl(){}function ml(){}function yl(){}function ba(){}function qd(){}function zd(){}function Gd(){}function So(){}function Ta(){}function vl(){}function _l(T,C){var N=[],j=9==this.nodeType&&this.documentElement||this,de=j.prefix,Ge=j.namespaceURI;if(Ge&&null==de&&null==(de=j.lookupPrefix(Ge)))var Ft=[{namespace:Ge,prefix:null}];return fs(this,N,T,C,Ft),N.join("")}function bl(T,C,N){var j=T.prefix||"",de=T.namespaceURI;if(!de||"xml"===j&&de===W.XML||de===W.XMLNS)return!1;for(var Ge=N.length;Ge--;){var Ft=N[Ge];if(Ft.prefix===j)return Ft.namespace!==de}return!0}function Tl(T,C,N){T.push(" ",C,'="',N.replace(/[<>&"\t\n\r]/g,Bn),'"')}function fs(T,C,N,j,de){if(de||(de=[]),j){if(!(T=j(T)))return;if("string"==typeof T)return void C.push(T)}switch(T.nodeType){case re:var Ge=T.attributes,Ft=Ge.length,hn=T.firstChild,Jt=T.tagName,di=Jt;if(!(N=W.isHTML(T.namespaceURI)||N)&&!T.prefix&&T.namespaceURI){for(var At,Wn=0;Wn<Ge.length;Wn++)if("xmlns"===Ge.item(Wn).name){At=Ge.item(Wn).value;break}if(!At)for(var Pn=de.length-1;Pn>=0;Pn--)if(""===(Hs=de[Pn]).prefix&&Hs.namespace===T.namespaceURI){At=Hs.namespace;break}if(At!==T.namespaceURI)for(Pn=de.length-1;Pn>=0;Pn--){var Hs;if((Hs=de[Pn]).namespace===T.namespaceURI){Hs.prefix&&(di=Hs.prefix+":"+Jt);break}}}C.push("<",di);for(var ps=0;ps<Ft;ps++)"xmlns"==(Xr=Ge.item(ps)).prefix?de.push({prefix:Xr.localName,namespace:Xr.value}):"xmlns"==Xr.nodeName&&de.push({prefix:"",namespace:Xr.value});for(ps=0;ps<Ft;ps++){var Xr,hi,qs;bl(Xr=Ge.item(ps),0,de)&&(Tl(C,(hi=Xr.prefix||"")?"xmlns:"+hi:"xmlns",qs=Xr.namespaceURI),de.push({prefix:hi,namespace:qs})),fs(Xr,C,N,j,de)}if(Jt===di&&bl(T,0,de)&&(Tl(C,(hi=T.prefix||"")?"xmlns:"+hi:"xmlns",qs=T.namespaceURI),de.push({prefix:hi,namespace:qs})),hn||N&&!/^(?:meta|link|img|br|hr|input)$/i.test(Jt)){if(C.push(">"),N&&/^script$/i.test(Jt))for(;hn;)hn.data?C.push(hn.data):fs(hn,C,N,j,de.slice()),hn=hn.nextSibling;else for(;hn;)fs(hn,C,N,j,de.slice()),hn=hn.nextSibling;C.push("</",di,">")}else C.push("/>");return;case Pe:case ge:for(hn=T.firstChild;hn;)fs(hn,C,N,j,de.slice()),hn=hn.nextSibling;return;case $e:return Tl(C,T.name,T.value);case qe:return C.push(T.data.replace(/[<&>]/g,Bn));case Nt:return C.push("<![CDATA[",T.data,"]]>");case ye:return C.push("\x3c!--",T.data,"--\x3e");case Ze:var Wd=T.publicId,gs=T.systemId;if(C.push("<!DOCTYPE ",T.name),Wd)C.push(" PUBLIC ",Wd),gs&&"."!=gs&&C.push(" ",gs),C.push(">");else if(gs&&"."!=gs)C.push(" SYSTEM ",gs,">");else{var Dl=T.internalSubset;Dl&&C.push(" [",Dl,"]"),C.push(">")}return;case se:return C.push("<?",T.target," ",T.data,"?>");case cn:return C.push("&",T.nodeName,";");default:C.push("??",T.nodeName)}}function Cl(T,C,N){var j;switch(C.nodeType){case re:(j=C.cloneNode(!1)).ownerDocument=T;case ge:break;case $e:N=!0}if(j||(j=C.cloneNode(!1)),j.ownerDocument=T,j.parentNode=null,N)for(var de=C.firstChild;de;)j.appendChild(Cl(T,de,N)),de=de.nextSibling;return j}function Ca(T,C,N){var j=new C.constructor;for(var de in C)if(Object.prototype.hasOwnProperty.call(C,de)){var Ge=C[de];"object"!=typeof Ge&&Ge!=j[de]&&(j[de]=Ge)}switch(C.childNodes&&(j.childNodes=new Ce),j.ownerDocument=T,j.nodeType){case re:var Ft=C.attributes,Jt=j.attributes=new Zt,di=Ft.length;Jt._ownerElement=j;for(var At=0;At<di;At++)j.setAttributeNode(Ca(T,Ft.item(At),!0));break;case $e:N=!0}if(N)for(var Wn=C.firstChild;Wn;)j.appendChild(Ca(T,Wn,N)),Wn=Wn.nextSibling;return j}function El(T,C,N){T[C]=N}ut.INVALID_STATE_ERR=(Ue[11]="Invalid state",11),ut.SYNTAX_ERR=(Ue[12]="Syntax error",12),ut.INVALID_MODIFICATION_ERR=(Ue[13]="Invalid modification",13),ut.NAMESPACE_ERR=(Ue[14]="Invalid namespace",14),ut.INVALID_ACCESS_ERR=(Ue[15]="Invalid access",15),be.prototype=Error.prototype,_e(ut,be),Ce.prototype={length:0,item:function(T){return T>=0&&T<this.length?this[T]:null},toString:function(T,C){for(var N=[],j=0;j<this.length;j++)fs(this[j],N,T,C);return N.join("")},filter:function(T){return Array.prototype.filter.call(this,T)},indexOf:function(T){return Array.prototype.indexOf.call(this,T)}},Dn.prototype.item=function(T){return Je(this),this[T]||null},pe(Dn,Ce),Zt.prototype={length:0,item:Ce.prototype.item,getNamedItem:function(T){for(var C=this.length;C--;){var N=this[C];if(N.nodeName==T)return N}},setNamedItem:function(T){var C=T.ownerElement;if(C&&C!=this._ownerElement)throw new be(ce);var N=this.getNamedItem(T.nodeName);return nr(this._ownerElement,this,T,N),N},setNamedItemNS:function(T){var N,C=T.ownerElement;if(C&&C!=this._ownerElement)throw new be(ce);return N=this.getNamedItemNS(T.namespaceURI,T.localName),nr(this._ownerElement,this,T,N),N},removeNamedItem:function(T){var C=this.getNamedItem(T);return Ii(this._ownerElement,this,C),C},removeNamedItemNS:function(T,C){var N=this.getNamedItemNS(T,C);return Ii(this._ownerElement,this,N),N},getNamedItemNS:function(T,C){for(var N=this.length;N--;){var j=this[N];if(j.localName==C&&j.namespaceURI==T)return j}return null}},ya.prototype={hasFeature:function(T,C){return!0},createDocument:function(T,C,N){var j=new dn;if(j.implementation=this,j.childNodes=new Ce,j.doctype=N||null,N&&j.appendChild(N),C){var de=j.createElementNS(T,C);j.appendChild(de)}return j},createDocumentType:function(T,C,N){var j=new ba;return j.name=T,j.nodeName=T,j.publicId=C||"",j.systemId=N||"",j}},bt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(T,C){return Eo(this,T,C)},replaceChild:function(T,C){Eo(this,T,C,Hd),C&&this.removeChild(C)},removeChild:function(T){return Co(this,T)},appendChild:function(T){return this.insertBefore(T,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(T){return Ca(this.ownerDocument||this,this,T)},normalize:function(){for(var T=this.firstChild;T;){var C=T.nextSibling;C&&C.nodeType==qe&&T.nodeType==qe?(this.removeChild(C),T.appendData(C.data)):(T.normalize(),T=C)}},isSupported:function(T,C){return this.ownerDocument.implementation.hasFeature(T,C)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(T){for(var C=this;C;){var N=C._nsMap;if(N)for(var j in N)if(Object.prototype.hasOwnProperty.call(N,j)&&N[j]===T)return j;C=C.nodeType==$e?C.ownerDocument:C.parentNode}return null},lookupNamespaceURI:function(T){for(var C=this;C;){var N=C._nsMap;if(N&&Object.prototype.hasOwnProperty.call(N,T))return N[T];C=C.nodeType==$e?C.ownerDocument:C.parentNode}return null},isDefaultNamespace:function(T){return null==this.lookupPrefix(T)}},_e(ct,bt),_e(ct,bt.prototype),dn.prototype={nodeName:"#document",nodeType:Pe,doctype:null,documentElement:null,_inc:1,insertBefore:function(T,C){if(T.nodeType==ge){for(var N=T.firstChild;N;){var j=N.nextSibling;this.insertBefore(N,C),N=j}return T}return Eo(this,T,C),T.ownerDocument=this,null===this.documentElement&&T.nodeType===re&&(this.documentElement=T),T},removeChild:function(T){return this.documentElement==T&&(this.documentElement=null),Co(this,T)},replaceChild:function(T,C){Eo(this,T,C,Hd),T.ownerDocument=this,C&&this.removeChild(C),kr(T)&&(this.documentElement=T)},importNode:function(T,C){return Cl(this,T,C)},getElementById:function(T){var C=null;return Mi(this.documentElement,function(N){if(N.nodeType==re&&N.getAttribute("id")==T)return C=N,!0}),C},getElementsByClassName:function(T){var C=Ee(T);return new Dn(this,function(N){var j=[];return C.length>0&&Mi(N.documentElement,function(de){if(de!==N&&de.nodeType===re){var Ge=de.getAttribute("class");if(Ge){var Ft=T===Ge;if(!Ft){var Jt=Ee(Ge);Ft=C.every(function Se(T){return function(C){return T&&-1!==T.indexOf(C)}}(Jt))}Ft&&j.push(de)}}}),j})},createElement:function(T){var C=new hs;return C.ownerDocument=this,C.nodeName=T,C.tagName=T,C.localName=T,C.childNodes=new Ce,(C.attributes=new Zt)._ownerElement=C,C},createDocumentFragment:function(){var T=new So;return T.ownerDocument=this,T.childNodes=new Ce,T},createTextNode:function(T){var C=new gl;return C.ownerDocument=this,C.appendData(T),C},createComment:function(T){var C=new ml;return C.ownerDocument=this,C.appendData(T),C},createCDATASection:function(T){var C=new yl;return C.ownerDocument=this,C.appendData(T),C},createProcessingInstruction:function(T,C){var N=new Ta;return N.ownerDocument=this,N.tagName=N.nodeName=N.target=T,N.nodeValue=N.data=C,N},createAttribute:function(T){var C=new _a;return C.ownerDocument=this,C.name=T,C.nodeName=T,C.localName=T,C.specified=!0,C},createEntityReference:function(T){var C=new Gd;return C.ownerDocument=this,C.nodeName=T,C},createElementNS:function(T,C){var N=new hs,j=C.split(":"),de=N.attributes=new Zt;return N.childNodes=new Ce,N.ownerDocument=this,N.nodeName=C,N.tagName=C,N.namespaceURI=T,2==j.length?(N.prefix=j[0],N.localName=j[1]):N.localName=C,de._ownerElement=N,N},createAttributeNS:function(T,C){var N=new _a,j=C.split(":");return N.ownerDocument=this,N.nodeName=C,N.name=C,N.namespaceURI=T,N.specified=!0,2==j.length?(N.prefix=j[0],N.localName=j[1]):N.localName=C,N}},pe(dn,bt),dn.prototype.getElementsByTagName=(hs.prototype={nodeType:re,hasAttribute:function(T){return null!=this.getAttributeNode(T)},getAttribute:function(T){var C=this.getAttributeNode(T);return C&&C.value||""},getAttributeNode:function(T){return this.attributes.getNamedItem(T)},setAttribute:function(T,C){var N=this.ownerDocument.createAttribute(T);N.value=N.nodeValue=""+C,this.setAttributeNode(N)},removeAttribute:function(T){var C=this.getAttributeNode(T);C&&this.removeAttributeNode(C)},appendChild:function(T){return T.nodeType===ge?this.insertBefore(T,null):function Hg(T,C){return C.parentNode&&C.parentNode.removeChild(C),C.parentNode=T,C.previousSibling=T.lastChild,C.nextSibling=null,C.previousSibling?C.previousSibling.nextSibling=C:T.firstChild=C,T.lastChild=C,Oi(T.ownerDocument,T,C),C}(this,T)},setAttributeNode:function(T){return this.attributes.setNamedItem(T)},setAttributeNodeNS:function(T){return this.attributes.setNamedItemNS(T)},removeAttributeNode:function(T){return this.attributes.removeNamedItem(T.nodeName)},removeAttributeNS:function(T,C){var N=this.getAttributeNodeNS(T,C);N&&this.removeAttributeNode(N)},hasAttributeNS:function(T,C){return null!=this.getAttributeNodeNS(T,C)},getAttributeNS:function(T,C){var N=this.getAttributeNodeNS(T,C);return N&&N.value||""},setAttributeNS:function(T,C,N){var j=this.ownerDocument.createAttributeNS(T,C);j.value=j.nodeValue=""+N,this.setAttributeNode(j)},getAttributeNodeNS:function(T,C){return this.attributes.getNamedItemNS(T,C)},getElementsByTagName:function(T){return new Dn(this,function(C){var N=[];return Mi(C,function(j){j!==C&&j.nodeType==re&&("*"===T||j.tagName==T)&&N.push(j)}),N})},getElementsByTagNameNS:function(T,C){return new Dn(this,function(N){var j=[];return Mi(N,function(de){de!==N&&de.nodeType===re&&("*"===T||de.namespaceURI===T)&&("*"===C||de.localName==C)&&j.push(de)}),j})}}).getElementsByTagName,dn.prototype.getElementsByTagNameNS=hs.prototype.getElementsByTagNameNS,pe(hs,bt),_a.prototype.nodeType=$e,pe(_a,bt),Do.prototype={data:"",substringData:function(T,C){return this.data.substring(T,T+C)},appendData:function(T){this.nodeValue=this.data=T=this.data+T,this.length=T.length},insertData:function(T,C){this.replaceData(T,0,C)},appendChild:function(T){throw new Error(Ue[U])},deleteData:function(T,C){this.replaceData(T,C,"")},replaceData:function(T,C,N){var j=this.data.substring(0,T),de=this.data.substring(T+C);this.nodeValue=this.data=N=j+N+de,this.length=N.length}},pe(Do,bt),gl.prototype={nodeName:"#text",nodeType:qe,splitText:function(T){var C=this.data,N=C.substring(T);C=C.substring(0,T),this.data=this.nodeValue=C,this.length=C.length;var j=this.ownerDocument.createTextNode(N);return this.parentNode&&this.parentNode.insertBefore(j,this.nextSibling),j}},pe(gl,Do),ml.prototype={nodeName:"#comment",nodeType:ye},pe(ml,Do),yl.prototype={nodeName:"#cdata-section",nodeType:Nt},pe(yl,Do),ba.prototype.nodeType=Ze,pe(ba,bt),qd.prototype.nodeType=mt,pe(qd,bt),zd.prototype.nodeType=Et,pe(zd,bt),Gd.prototype.nodeType=cn,pe(Gd,bt),So.prototype.nodeName="#document-fragment",So.prototype.nodeType=ge,pe(So,bt),Ta.prototype.nodeType=se,pe(Ta,bt),vl.prototype.serializeToString=function(T,C,N){return _l.call(T,C,N)},bt.prototype.toString=_l;try{if(Object.defineProperty){let T=function(C){switch(C.nodeType){case re:case ge:var N=[];for(C=C.firstChild;C;)7!==C.nodeType&&8!==C.nodeType&&N.push(T(C)),C=C.nextSibling;return N.join("");default:return C.nodeValue}};Object.defineProperty(Dn.prototype,"length",{get:function(){return Je(this),this.$$length}}),Object.defineProperty(bt.prototype,"textContent",{get:function(){return T(this)},set:function(C){switch(this.nodeType){case re:case ge:for(;this.firstChild;)this.removeChild(this.firstChild);(C||String(C))&&this.appendChild(this.ownerDocument.createTextNode(C));break;default:this.data=C,this.value=C,this.nodeValue=C}}}),El=function(C,N,j){C["$$"+N]=j}}}catch{}Oe.DocumentType=ba,Oe.DOMException=be,Oe.DOMImplementation=ya,Oe.Element=hs,Oe.Node=bt,Oe.NodeList=Ce,Oe.XMLSerializer=vl},562:(ze,Oe,ve)=>{"use strict";var q=ve(451).freeze;Oe.XML_ENTITIES=q({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),Oe.HTML_ENTITIES=q({Aacute:"\xc1",aacute:"\xe1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",Acy:"\u0410",acy:"\u0430",AElig:"\xc6",aelig:"\xe6",af:"\u2061",Afr:"\u{1d504}",afr:"\u{1d51e}",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",AMP:"&",amp:"&",And:"\u2a53",and:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\xc5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1d538}",aopf:"\u{1d552}",ap:"\u2248",apacir:"\u2a6f",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\xc5",aring:"\xe5",Ascr:"\u{1d49c}",ascr:"\u{1d4b6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\u{1d505}",bfr:"\u{1d51f}",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\u{1d539}",bopf:"\u{1d553}",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250c",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252c",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxUL:"\u255d",boxUl:"\u255c",boxuL:"\u255b",boxul:"\u2518",boxUR:"\u255a",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256c",boxVh:"\u256b",boxvH:"\u256a",boxvh:"\u253c",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255f",boxvR:"\u255e",boxvr:"\u251c",bprime:"\u2035",Breve:"\u02d8",breve:"\u02d8",brvbar:"\xa6",Bscr:"\u212c",bscr:"\u{1d4b7}",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22d2",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\xc7",ccedil:"\xe7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\xb8",Cedilla:"\xb8",cemptyv:"\u29b2",cent:"\xa2",CenterDot:"\xb7",centerdot:"\xb7",Cfr:"\u212d",cfr:"\u{1d520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",cir:"\u25cb",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\xae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",Conint:"\u222f",conint:"\u222e",ContourIntegral:"\u222e",Copf:"\u2102",copf:"\u{1d554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xa9",copy:"\xa9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",Cross:"\u2a2f",cross:"\u2717",Cscr:"\u{1d49e}",cscr:"\u{1d4b8}",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",Cup:"\u22d3",cup:"\u222a",cupbrcap:"\u2a48",CupCap:"\u224d",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\xa4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21a1",dArr:"\u21d3",darr:"\u2193",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21ca",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\xb0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\u{1d507}",dfr:"\u{1d521}",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\xb4",DiacriticalDot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",Diamond:"\u22c4",diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\xa8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\u{1d53b}",dopf:"\u{1d555}",Dot:"\xa8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\xa8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21d3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",DownTeeArrow:"\u21a7",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\u{1d49f}",dscr:"\u{1d4b9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\xc9",eacute:"\xe9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",ecir:"\u2256",Ecirc:"\xca",ecirc:"\xea",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1d508}",efr:"\u{1d522}",eg:"\u2a9a",Egrave:"\xc8",egrave:"\xe8",egs:"\u2a96",egsdot:"\u2a98",el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1d53c}",eopf:"\u{1d556}",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212f",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\u{1d509}",ffr:"\u{1d523}",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\u{1d53d}",fopf:"\u{1d557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1d4bb}",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",geqq:"\u2267",geqslant:"\u2a7e",ges:"\u2a7e",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\u{1d50a}",gfr:"\u{1d524}",Gg:"\u22d9",gg:"\u226b",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2aa5",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gnE:"\u2269",gne:"\u2a88",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\u{1d53e}",gopf:"\u{1d558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\u{1d4a2}",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",Gt:"\u226b",GT:">",gt:">",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\xbd",hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",hArr:"\u21d4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",Hfr:"\u210c",hfr:"\u{1d525}",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",Hopf:"\u210d",hopf:"\u{1d559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210b",hscr:"\u{1d4bd}",hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xcd",iacute:"\xed",ic:"\u2063",Icirc:"\xce",icirc:"\xee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xa1",iff:"\u21d4",Ifr:"\u2111",ifr:"\u{1d526}",Igrave:"\xcc",igrave:"\xec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",in:"\u2208",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",Int:"\u222c",int:"\u222b",intcal:"\u22ba",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\u{1d540}",iopf:"\u{1d55a}",Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\xbf",Iscr:"\u2110",iscr:"\u{1d4be}",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xcf",iuml:"\xef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1d50d}",jfr:"\u{1d527}",jmath:"\u0237",Jopf:"\u{1d541}",jopf:"\u{1d55b}",Jscr:"\u{1d4a5}",jscr:"\u{1d4bf}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\u{1d50e}",kfr:"\u{1d528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\u{1d542}",kopf:"\u{1d55c}",Kscr:"\u{1d4a6}",kscr:"\u{1d4c0}",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",Lang:"\u27ea",lang:"\u27e8",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",Laplacetrf:"\u2112",laquo:"\xab",Larr:"\u219e",lArr:"\u21d0",larr:"\u2190",larrb:"\u21e4",larrbfs:"\u291f",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",lat:"\u2aab",lAtail:"\u291b",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lBarr:"\u290e",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",Leftarrow:"\u21d0",leftarrow:"\u2190",LeftArrowBar:"\u21e4",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrow:"\u2194",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTee:"\u22a3",LeftTeeArrow:"\u21a4",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangle:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",LeftVectorBar:"\u2952",lEg:"\u2a8b",leg:"\u22da",leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",les:"\u2a7d",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\u{1d50f}",lfr:"\u{1d529}",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22d8",ll:"\u226a",llarr:"\u21c7",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lnE:"\u2268",lne:"\u2a87",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftarrow:"\u27f5",LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longleftrightarrow:"\u27f7",longmapsto:"\u27fc",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",longrightarrow:"\u27f6",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\u{1d543}",lopf:"\u{1d55d}",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1d4c1}",Lsh:"\u21b0",lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226a",LT:"<",lt:"<",ltcc:"\u2aa6",ltcir:"\u2a79",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\u{1d510}",mfr:"\u{1d52a}",mho:"\u2127",micro:"\xb5",mid:"\u2223",midast:"*",midcir:"\u2af0",middot:"\xb7",minus:"\u2212",minusb:"\u229f",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\u{1d544}",mopf:"\u{1d55e}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1d4c2}",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266e",natural:"\u266e",naturals:"\u2115",nbsp:"\xa0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21d7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1d511}",nfr:"\u{1d52b}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nhArr:"\u21ce",nharr:"\u21ae",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlArr:"\u21cd",nlarr:"\u219a",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21cd",nleftarrow:"\u219a",nLeftrightarrow:"\u21ce",nleftrightarrow:"\u21ae",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xa0",Nopf:"\u2115",nopf:"\u{1d55f}",Not:"\u2aec",not:"\xac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangle:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangle:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",npre:"\u2aaf\u0338",nprec:"\u2280",npreceq:"\u2aaf\u0338",nrArr:"\u21cf",nrarr:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nRightarrow:"\u21cf",nrightarrow:"\u219b",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\u{1d4a9}",nscr:"\u{1d4c3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\xd1",ntilde:"\xf1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nVDash:"\u22af",nVdash:"\u22ae",nvDash:"\u22ad",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwArr:"\u21d6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xd3",oacute:"\xf3",oast:"\u229b",ocir:"\u229a",Ocirc:"\xd4",ocirc:"\xf4",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29bf",Ofr:"\u{1d512}",ofr:"\u{1d52c}",ogon:"\u02db",Ograve:"\xd2",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\u{1d546}",oopf:"\u{1d560}",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",Or:"\u2a54",or:"\u2228",orarr:"\u21bb",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\u{1d4aa}",oscr:"\u2134",Oslash:"\xd8",oslash:"\xf8",osol:"\u2298",Otilde:"\xd5",otilde:"\xf5",Otimes:"\u2a37",otimes:"\u2297",otimesas:"\u2a36",Ouml:"\xd6",ouml:"\xf6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",par:"\u2225",para:"\xb6",parallel:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\u{1d513}",pfr:"\u{1d52d}",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plus:"+",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\xb1",plusmn:"\xb1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\xb1",Poincareplane:"\u210c",pointint:"\u2a15",Popf:"\u2119",popf:"\u{1d561}",pound:"\xa3",Pr:"\u2abb",pr:"\u227a",prap:"\u2ab7",prcue:"\u227c",prE:"\u2ab3",pre:"\u2aaf",prec:"\u227a",precapprox:"\u2ab7",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",precsim:"\u227e",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportion:"\u2237",Proportional:"\u221d",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\u{1d4ab}",pscr:"\u{1d4c5}",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\u{1d514}",qfr:"\u{1d52e}",qint:"\u2a0c",Qopf:"\u211a",qopf:"\u{1d562}",qprime:"\u2057",Qscr:"\u{1d4ac}",qscr:"\u{1d4c6}",quaternions:"\u210d",quatint:"\u2a16",quest:"?",questeq:"\u225f",QUOT:'"',quot:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",Rang:"\u27eb",rang:"\u27e9",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\xbb",Rarr:"\u21a0",rArr:"\u21d2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",rAtail:"\u291c",ratail:"\u291a",ratio:"\u2236",rationals:"\u211a",RBarr:"\u2910",rBarr:"\u290f",rbarr:"\u290d",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",Re:"\u211c",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",rect:"\u25ad",REG:"\xae",reg:"\xae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",Rfr:"\u211c",rfr:"\u{1d52f}",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrow:"\u2192",Rightarrow:"\u21d2",rightarrow:"\u2192",RightArrowBar:"\u21e5",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangle:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",RightVectorBar:"\u2953",ring:"\u02da",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",Ropf:"\u211d",ropf:"\u{1d563}",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",Rscr:"\u211b",rscr:"\u{1d4c7}",Rsh:"\u21b1",rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",Sc:"\u2abc",sc:"\u227b",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227d",scE:"\u2ab4",sce:"\u2ab0",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdot:"\u22c5",sdotb:"\u22a1",sdote:"\u2a66",searhk:"\u2925",seArr:"\u21d8",searr:"\u2198",searrow:"\u2198",sect:"\xa7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1d516}",sfr:"\u{1d530}",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",Sopf:"\u{1d54a}",sopf:"\u{1d564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25a1",Square:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squf:"\u25aa",srarr:"\u2192",Sscr:"\u{1d4ae}",sscr:"\u{1d4c8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",straightphi:"\u03d5",strns:"\xaf",Sub:"\u22d0",sub:"\u2282",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",Subset:"\u22d0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succ:"\u227b",succapprox:"\u2ab8",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",Sum:"\u2211",sum:"\u2211",sung:"\u266a",Sup:"\u22d1",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",Supset:"\u22d1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swArr:"\u21d9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292a",szlig:"\xdf",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\u{1d517}",tfr:"\u{1d531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\xde",thorn:"\xfe",Tilde:"\u223c",tilde:"\u02dc",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xd7",timesb:"\u22a0",timesbar:"\u2a31",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",top:"\u22a4",topbot:"\u2336",topcir:"\u2af1",Topf:"\u{1d54b}",topf:"\u{1d565}",topfork:"\u2ada",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\u{1d4af}",tscr:"\u{1d4c9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",Uacute:"\xda",uacute:"\xfa",Uarr:"\u219f",uArr:"\u21d1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\xdb",ucirc:"\xfb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\u{1d518}",ufr:"\u{1d532}",Ugrave:"\xd9",ugrave:"\xf9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",Umacr:"\u016a",umacr:"\u016b",uml:"\xa8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1d54c}",uopf:"\u{1d566}",UpArrow:"\u2191",Uparrow:"\u21d1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",UpDownArrow:"\u2195",Updownarrow:"\u21d5",updownarrow:"\u2195",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03d2",upsi:"\u03c5",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTee:"\u22a5",UpTeeArrow:"\u21a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\u{1d4b0}",uscr:"\u{1d4ca}",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\xdc",uuml:"\xfc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",varpropto:"\u221d",vArr:"\u21d5",varr:"\u2195",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",Vbar:"\u2aeb",vBar:"\u2ae8",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22ab",Vdash:"\u22a9",vDash:"\u22a8",vdash:"\u22a2",Vdashl:"\u2ae6",Vee:"\u22c1",vee:"\u2228",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\u{1d519}",vfr:"\u{1d533}",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\u{1d54d}",vopf:"\u{1d567}",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\u{1d4b1}",vscr:"\u{1d4cb}",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",Wedge:"\u22c0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1d51a}",wfr:"\u{1d534}",Wopf:"\u{1d54e}",wopf:"\u{1d568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1d4b2}",wscr:"\u{1d4cc}",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\u{1d51b}",xfr:"\u{1d535}",xhArr:"\u27fa",xharr:"\u27f7",Xi:"\u039e",xi:"\u03be",xlArr:"\u27f8",xlarr:"\u27f5",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\u{1d54f}",xopf:"\u{1d569}",xoplus:"\u2a01",xotime:"\u2a02",xrArr:"\u27f9",xrarr:"\u27f6",Xscr:"\u{1d4b3}",xscr:"\u{1d4cd}",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\xdd",yacute:"\xfd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\xa5",Yfr:"\u{1d51c}",yfr:"\u{1d536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1d550}",yopf:"\u{1d56a}",Yscr:"\u{1d4b4}",yscr:"\u{1d4ce}",YUcy:"\u042e",yucy:"\u044e",Yuml:"\u0178",yuml:"\xff",Zacute:"\u0179",zacute:"\u017a",Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",Zfr:"\u2128",zfr:"\u{1d537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",Zopf:"\u2124",zopf:"\u{1d56b}",Zscr:"\u{1d4b5}",zscr:"\u{1d4cf}",zwj:"\u200d",zwnj:"\u200c"}),Oe.entityMap=Oe.HTML_ENTITIES},862:(ze,Oe,ve)=>{ve(475);Oe.DOMParser=ve(20).DOMParser},989:(ze,Oe,ve)=>{var q=ve(451).NAMESPACE,me=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,W=new RegExp("[\\-\\.0-9"+me.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),ke=new RegExp("^"+me.source+W.source+"*(?::"+me.source+W.source+"*)?$");function $e(w,I){this.message=w,this.locator=I,Error.captureStackTrace&&Error.captureStackTrace(this,$e)}function qe(){}function cn(w,I){return I.lineNumber=w.lineNumber,I.columnNumber=w.columnNumber,I}function Et(w,I,U,ee,Y,he){function le(dt,vt,be){U.attributeNames.hasOwnProperty(dt)&&he.fatalError("Attribute "+dt+" redefined"),U.addValue(dt,vt.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,Y),be)}for(var oe,ce=++I,te=0;;){var ae=w.charAt(ce);switch(ae){case"=":if(1===te)oe=w.slice(I,ce),te=3;else{if(2!==te)throw new Error("attribute equal must after attrName");te=3}break;case"'":case'"':if(3===te||1===te){if(1===te&&(he.warning('attribute value must after "="'),oe=w.slice(I,ce)),!((ce=w.indexOf(ae,I=ce+1))>0))throw new Error("attribute value no end '"+ae+"' match");le(oe,ne=w.slice(I,ce),I-1),te=5}else{if(4!=te)throw new Error('attribute value must after "="');le(oe,ne=w.slice(I,ce),I),he.warning('attribute "'+oe+'" missed start quot('+ae+")!!"),I=ce+1,te=5}break;case"/":switch(te){case 0:U.setTagName(w.slice(I,ce));case 5:case 6:case 7:te=7,U.closed=!0;case 4:case 1:break;case 2:U.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return he.error("unexpected end of input"),0==te&&U.setTagName(w.slice(I,ce)),ce;case">":switch(te){case 0:U.setTagName(w.slice(I,ce));case 5:case 6:case 7:break;case 4:case 1:"/"===(ne=w.slice(I,ce)).slice(-1)&&(U.closed=!0,ne=ne.slice(0,-1));case 2:2===te&&(ne=oe),4==te?(he.warning('attribute "'+ne+'" missed quot(")!'),le(oe,ne,I)):((!q.isHTML(ee[""])||!ne.match(/^(?:disabled|checked|selected)$/i))&&he.warning('attribute "'+ne+'" missed value!! "'+ne+'" instead!!'),le(ne,ne,I));break;case 3:throw new Error("attribute value missed!!")}return ce;case"\x80":ae=" ";default:if(ae<=" ")switch(te){case 0:U.setTagName(w.slice(I,ce)),te=6;break;case 1:oe=w.slice(I,ce),te=2;break;case 4:var ne=w.slice(I,ce);he.warning('attribute "'+ne+'" missed quot(")!!'),le(oe,ne,I);case 5:te=6}else switch(te){case 2:(!q.isHTML(ee[""])||!oe.match(/^(?:disabled|checked|selected)$/i))&&he.warning('attribute "'+oe+'" missed value!! "'+oe+'" instead2!!'),le(oe,oe,I),I=ce,te=1;break;case 5:he.warning('attribute space is required"'+oe+'"!!');case 6:te=1,I=ce;break;case 3:te=4,I=ce;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}ce++}}function se(w,I,U){for(var ee=w.tagName,Y=null,ae=w.length;ae--;){var he=w[ae],le=he.qName,oe=he.value;if((xe=le.indexOf(":"))>0)var ne=he.prefix=le.slice(0,xe),ce=le.slice(xe+1),te="xmlns"===ne&&ce;else ce=le,ne=null,te="xmlns"===le&&"";he.localName=ce,!1!==te&&(null==Y&&(Y={},Ze(U,U={})),U[te]=Y[te]=oe,he.uri=q.XMLNS,I.startPrefixMapping(te,oe))}for(ae=w.length;ae--;)(ne=(he=w[ae]).prefix)&&("xml"===ne&&(he.uri=q.XML),"xmlns"!==ne&&(he.uri=U[ne||""]));var xe;(xe=ee.indexOf(":"))>0?(ne=w.prefix=ee.slice(0,xe),ce=w.localName=ee.slice(xe+1)):(ne=null,ce=w.localName=ee);var dt=w.uri=U[ne||""];if(I.startElement(dt,ce,ee,w),!w.closed)return w.currentNSMap=U,w.localNSMap=Y,!0;if(I.endElement(dt,ce,ee),Y)for(ne in Y)Object.prototype.hasOwnProperty.call(Y,ne)&&I.endPrefixMapping(ne)}function ye(w,I,U,ee,Y){if(/^(?:script|textarea)$/i.test(U)){var he=w.indexOf("</"+U+">",I),le=w.substring(I+1,he);if(/[&<]/.test(le))return/^script$/i.test(U)?(Y.characters(le,0,le.length),he):(le=le.replace(/&#?\w+;/g,ee),Y.characters(le,0,le.length),he)}return I+1}function Pe(w,I,U,ee){var Y=ee[U];return null==Y&&((Y=w.lastIndexOf("</"+U+">"))<I&&(Y=w.lastIndexOf("</"+U)),ee[U]=Y),Y<I}function Ze(w,I){for(var U in w)Object.prototype.hasOwnProperty.call(w,U)&&(I[U]=w[U])}function ge(w,I,U,ee){if("-"===w.charAt(I+2))return"-"===w.charAt(I+3)?(he=w.indexOf("--\x3e",I+4))>I?(U.comment(w,I+4,he-I-4),he+3):(ee.error("Unclosed comment"),-1):-1;if("CDATA["==w.substr(I+3,6)){var he=w.indexOf("]]>",I+9);return U.startCDATA(),U.characters(w,I+9,he-I-9),U.endCDATA(),he+3}var le=function Ue(w,I){var U,ee=[],Y=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Y.lastIndex=I,Y.exec(w);U=Y.exec(w);)if(ee.push(U),U[1])return ee}(w,I),oe=le.length;if(oe>1&&/!doctype/i.test(le[0][0])){var ne=le[1][0],ce=!1,te=!1;oe>3&&(/^public$/i.test(le[2][0])?(ce=le[3][0],te=oe>4&&le[4][0]):/^system$/i.test(le[2][0])&&(te=le[3][0]));var ae=le[oe-1];return U.startDTD(ne,ce,te),U.endDTD(),ae.index+ae[0].length}return-1}function mt(w,I,U){var ee=w.indexOf("?>",I);if(ee){var Y=w.substring(I,ee).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return Y?(U.processingInstruction(Y[1],Y[2]),ee+2):-1}return-1}function ut(){this.attributeNames={}}($e.prototype=new Error).name=$e.name,qe.prototype={parse:function(w,I,U){var ee=this.domBuilder;ee.startDocument(),Ze(I,I={}),function Nt(w,I,U,ee,Y){function le(Lt){var Gn=Lt.slice(1,-1);return Object.hasOwnProperty.call(U,Gn)?U[Gn]:"#"===Gn.charAt(0)?function he(Lt){return Lt>65535?(Lt-=65536,String.fromCharCode(55296+(Lt>>10),56320+(1023&Lt))):String.fromCharCode(Lt)}(parseInt(Gn.substr(1).replace("x","0x"))):(Y.error("entity not found:"+Lt),Lt)}function oe(Lt){if(Lt>be){var Gn=w.substring(be,Lt).replace(/&#?\w+;/g,le);xe&&ne(be),ee.characters(Gn,0,Lt-be),be=Lt}}function ne(Lt,Gn){for(;Lt>=te&&(Gn=ae.exec(w));)te=(ce=Gn.index)+Gn[0].length,xe.lineNumber++;xe.columnNumber=Lt-ce+1}for(var ce=0,te=0,ae=/.*(?:\r\n?|\n)|.*$/g,xe=ee.locator,dt=[{currentNSMap:I}],vt={},be=0;;){try{var Ce=w.indexOf("<",be);if(Ce<0){if(!w.substr(be).match(/^\s*$/)){var Dn=ee.doc,Je=Dn.createTextNode(w.substr(be));Dn.appendChild(Je),ee.currentElement=Je}return}switch(Ce>be&&oe(Ce),w.charAt(Ce+1)){case"/":var dn=w.indexOf(">",Ce+3),Zt=w.substring(Ce+2,dn).replace(/[ \t\n\r]+$/g,""),Fn=dt.pop();dn<0?(Zt=w.substring(Ce+2).replace(/[\s<].*/,""),Y.error("end tag name: "+Zt+" is not complete:"+Fn.tagName),dn=Ce+1+Zt.length):Zt.match(/\s</)&&(Zt=Zt.replace(/[\s<].*/,""),Y.error("end tag name: "+Zt+" maybe not complete"),dn=Ce+1+Zt.length);var nr=Fn.localNSMap,Ii=Fn.tagName==Zt;if(Ii||Fn.tagName&&Fn.tagName.toLowerCase()==Zt.toLowerCase()){if(ee.endElement(Fn.uri,Fn.localName,Zt),nr)for(var bt in nr)Object.prototype.hasOwnProperty.call(nr,bt)&&ee.endPrefixMapping(bt);Ii||Y.fatalError("end tag name: "+Zt+" is not match the current start tagName:"+Fn.tagName)}else dt.push(Fn);dn++;break;case"?":xe&&ne(Ce),dn=mt(w,Ce,ee);break;case"!":xe&&ne(Ce),dn=ge(w,Ce,ee,Y);break;default:xe&&ne(Ce);var Bn=new ut,Mi=dt[dt.length-1].currentNSMap,fl=(dn=Et(w,Ce,Bn,Mi,le,Y),Bn.length);if(!Bn.closed&&Pe(w,dn,Bn.tagName,vt)&&(Bn.closed=!0,U.nbsp||Y.warning("unclosed xml attribute")),xe&&fl){for(var va=cn(xe,{}),Oi=0;Oi<fl;Oi++){var Co=Bn[Oi];ne(Co.offset),Co.locator=cn(xe,{})}ee.locator=va,se(Bn,ee,Mi)&&dt.push(Bn),ee.locator=xe}else se(Bn,ee,Mi)&&dt.push(Bn);q.isHTML(Bn.uri)&&!Bn.closed?dn=ye(w,dn,Bn.tagName,le,ee):dn++}}catch(Lt){if(Lt instanceof $e)throw Lt;Y.error("element parse error: "+Lt),dn=-1}dn>be?be=dn:oe(Math.max(Ce,be)+1)}}(w,I,U,ee,this.errorHandler),ee.endDocument()}},ut.prototype={setTagName:function(w){if(!ke.test(w))throw new Error("invalid tagName:"+w);this.tagName=w},addValue:function(w,I,U){if(!ke.test(w))throw new Error("invalid attribute:"+w);this.attributeNames[w]=this.length,this[this.length++]={qName:w,value:I,offset:U}},length:0,getLocalName:function(w){return this[w].localName},getLocator:function(w){return this[w].locator},getQName:function(w){return this[w].qName},getURI:function(w){return this[w].uri},getValue:function(w){return this[w].value}},Oe.XMLReader=qe,Oe.ParseError=$e},598:(ze,Oe,ve)=>{var W,q=typeof global<"u"?global:typeof window<"u"?window:{},me=ve(893);typeof document<"u"?W=document:(W=q["__GLOBAL_DOCUMENT_CACHE@4"])||(W=q["__GLOBAL_DOCUMENT_CACHE@4"]=me),ze.exports=W},382:ze=>{var Oe;Oe=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ze.exports=Oe},794:ze=>{ze.exports=function ve(q){if(!q)return!1;var me=Oe.call(q);return"[object Function]"===me||"function"==typeof q&&"[object RegExp]"!==me||typeof window<"u"&&(q===window.setTimeout||q===window.alert||q===window.confirm||q===window.prompt)};var Oe=Object.prototype.toString},317:(ze,Oe)=>{function ve(J){if(J&&"object"==typeof J){var Ee=J.which||J.keyCode||J.charCode;Ee&&(J=Ee)}if("number"==typeof J)return ke[J];var _e,Se=String(J);return(_e=q[Se.toLowerCase()])?_e:(_e=me[Se.toLowerCase()])||(1===Se.length?Se.charCodeAt(0):void 0)}ve.isEventKey=function(Ee,Se){if(Ee&&"object"==typeof Ee){var _e=Ee.which||Ee.keyCode||Ee.charCode;if(null==_e)return!1;if("string"==typeof Se){var pe;if(pe=q[Se.toLowerCase()])return pe===_e;if(pe=me[Se.toLowerCase()])return pe===_e}else if("number"==typeof Se)return Se===_e;return!1}};var q=(Oe=ze.exports=ve).code=Oe.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},me=Oe.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(W=97;W<123;W++)q[String.fromCharCode(W)]=W-32;for(var W=48;W<58;W++)q[W-48]=W;for(W=1;W<13;W++)q["f"+W]=W+111;for(W=0;W<10;W++)q["numpad "+W]=W+96;var ke=Oe.names=Oe.title={};for(W in q)ke[q[W]]=W;for(var K in me)q[K]=me[K]},35:(ze,Oe,ve)=>{var q=ve(301).getUint64;ze.exports=function(W){var ke=new DataView(W.buffer,W.byteOffset,W.byteLength),K={version:W[0],flags:new Uint8Array(W.subarray(1,4)),references:[],referenceId:ke.getUint32(4),timescale:ke.getUint32(8)},J=12;0===K.version?(K.earliestPresentationTime=ke.getUint32(J),K.firstOffset=ke.getUint32(J+4),J+=8):(K.earliestPresentationTime=q(W.subarray(J)),K.firstOffset=q(W.subarray(J+8)),J+=16);var Ee=ke.getUint16(J+=2);for(J+=2;Ee>0;J+=12,Ee--)K.references.push({referenceType:(128&W[J])>>>7,referencedSize:2147483647&ke.getUint32(J),subsegmentDuration:ke.getUint32(J+4),startsWithSap:!!(128&W[J+8]),sapType:(112&W[J+8])>>>4,sapDeltaTime:268435455&ke.getUint32(J+8)});return K}},825:ze=>{var ve,q,me,W,ke,K,J;ke=function(Ee,Se){return ve(W(Ee,Se))},K=function(Ee,Se){return q(me(Ee),Se)},J=function(Ee,Se,_e){return me(_e?Ee:Ee-Se)},ze.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:ve=function(Ee){return 9e4*Ee},secondsToAudioTs:q=function(Ee,Se){return Ee*Se},videoTsToSeconds:me=function(Ee){return Ee/9e4},audioTsToSeconds:W=function(Ee,Se){return Ee/Se},audioTsToVideoTs:ke,videoTsToAudioTs:K,metadataTsToSeconds:J}},301:ze=>{var Oe=Math.pow(2,32);ze.exports={getUint64:function(q){var W,me=new DataView(q.buffer,q.byteOffset,q.byteLength);return me.getBigUint64?(W=me.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(W):W:me.getUint32(0)*Oe+me.getUint32(4)},MAX_UINT32:Oe}},135:ze=>{ze.exports=function Oe(ve,q){var me,W=null;try{me=JSON.parse(ve,q)}catch(ke){W=ke}return[W,me]}},367:function(ze){var ve,q,me,W,ke;ve=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,q=/^(?=([^\/?#]*))\1([^]*)$/,me=/(?:\/|^)\.(?=\/)/g,W=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,ze.exports=ke={buildAbsoluteURL:function(K,J,Ee){if(Ee=Ee||{},K=K.trim(),!(J=J.trim())){if(!Ee.alwaysNormalize)return K;var Se=ke.parseURL(K);if(!Se)throw new Error("Error trying to parse base URL.");return Se.path=ke.normalizePath(Se.path),ke.buildURLFromParts(Se)}var _e=ke.parseURL(J);if(!_e)throw new Error("Error trying to parse relative URL.");if(_e.scheme)return Ee.alwaysNormalize?(_e.path=ke.normalizePath(_e.path),ke.buildURLFromParts(_e)):J;var pe=ke.parseURL(K);if(!pe)throw new Error("Error trying to parse base URL.");if(!pe.netLoc&&pe.path&&"/"!==pe.path[0]){var ct=q.exec(pe.path);pe.netLoc=ct[1],pe.path=ct[2]}pe.netLoc&&!pe.path&&(pe.path="/");var re={scheme:pe.scheme,netLoc:_e.netLoc,path:null,params:_e.params,query:_e.query,fragment:_e.fragment};if(!_e.netLoc&&(re.netLoc=pe.netLoc,"/"!==_e.path[0]))if(_e.path){var $e=pe.path,qe=$e.substring(0,$e.lastIndexOf("/")+1)+_e.path;re.path=ke.normalizePath(qe)}else re.path=pe.path,_e.params||(re.params=pe.params,_e.query||(re.query=pe.query));return null===re.path&&(re.path=Ee.alwaysNormalize?ke.normalizePath(_e.path):_e.path),ke.buildURLFromParts(re)},parseURL:function(K){var J=ve.exec(K);return J?{scheme:J[1]||"",netLoc:J[2]||"",path:J[3]||"",params:J[4]||"",query:J[5]||"",fragment:J[6]||""}:null},normalizePath:function(K){for(K=K.split("").reverse().join("").replace(me,"");K.length!==(K=K.replace(W,"")).length;);return K.split("").reverse().join("")},buildURLFromParts:function(K){return K.scheme+K.netLoc+K.path+K.params+K.query+K.fragment}}},506:(ze,Oe,ve)=>{var q=ve(382),me=ze.exports={WebVTT:ve(149),VTTCue:ve(472),VTTRegion:ve(880)};q.vttjs=me,q.WebVTT=me.WebVTT;var W=me.VTTCue,ke=me.VTTRegion,K=q.VTTCue,J=q.VTTRegion;me.shim=function(){q.VTTCue=W,q.VTTRegion=ke},me.restore=function(){q.VTTCue=K,q.VTTRegion=J},q.VTTCue||me.shim()},149:(ze,Oe,ve)=>{var q=ve(598),me=Object.create||function(){function w(){}return function(I){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return w.prototype=I,new w}}();function W(w,I){this.name="ParsingError",this.code=w.code,this.message=I||w.message}function ke(w){function I(ee,Y,he,le){return 3600*(0|ee)+60*(0|Y)+(0|he)+(0|le)/1e3}var U=w.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return U?U[3]?I(U[1],U[2],U[3].replace(":",""),U[4]):U[1]>59?I(U[1],U[2],0,U[4]):I(0,U[1],U[2],U[4]):null}function K(){this.values=me(null)}function J(w,I,U,ee){var Y=ee?w.split(ee):[w];for(var he in Y)if("string"==typeof Y[he]){var le=Y[he].split(U);2===le.length&&I(le[0].trim(),le[1].trim())}}function Ee(w,I,U){var ee=w;function Y(){var oe=ke(w);if(null===oe)throw new W(W.Errors.BadTimeStamp,"Malformed timestamp: "+ee);return w=w.replace(/^[^\sa-zA-Z-]+/,""),oe}function le(){w=w.replace(/^\s+/,"")}if(le(),I.startTime=Y(),le(),"--\x3e"!==w.substr(0,3))throw new W(W.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+ee);w=w.substr(3),le(),I.endTime=Y(),le(),function he(oe,ne){var ce=new K;J(oe,function(te,ae){switch(te){case"region":for(var xe=U.length-1;xe>=0;xe--)if(U[xe].id===ae){ce.set(te,U[xe].region);break}break;case"vertical":ce.alt(te,ae,["rl","lr"]);break;case"line":var dt=ae.split(","),vt=dt[0];ce.integer(te,vt),ce.percent(te,vt)&&ce.set("snapToLines",!1),ce.alt(te,vt,["auto"]),2===dt.length&&ce.alt("lineAlign",dt[1],["start","center","end"]);break;case"position":dt=ae.split(","),ce.percent(te,dt[0]),2===dt.length&&ce.alt("positionAlign",dt[1],["start","center","end"]);break;case"size":ce.percent(te,ae);break;case"align":ce.alt(te,ae,["start","center","end","left","right"])}},/:/,/\s/),ne.region=ce.get("region",null),ne.vertical=ce.get("vertical","");try{ne.line=ce.get("line","auto")}catch{}ne.lineAlign=ce.get("lineAlign","start"),ne.snapToLines=ce.get("snapToLines",!0),ne.size=ce.get("size",100);try{ne.align=ce.get("align","center")}catch{ne.align=ce.get("align","middle")}try{ne.position=ce.get("position","auto")}catch{ne.position=ce.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},ne.align)}ne.positionAlign=ce.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},ne.align)}(w,I)}(W.prototype=me(Error.prototype)).constructor=W,W.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},K.prototype={set:function(w,I){!this.get(w)&&""!==I&&(this.values[w]=I)},get:function(w,I,U){return U?this.has(w)?this.values[w]:I[U]:this.has(w)?this.values[w]:I},has:function(w){return w in this.values},alt:function(w,I,U){for(var ee=0;ee<U.length;++ee)if(I===U[ee]){this.set(w,I);break}},integer:function(w,I){/^-?\d+$/.test(I)&&this.set(w,parseInt(I,10))},percent:function(w,I){return!!(I.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(I=parseFloat(I),I>=0&&I<=100))&&(this.set(w,I),!0)}};var Se=q.createElement&&q.createElement("textarea"),_e={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},pe={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},ct={v:"title",lang:"lang"},re={rt:"ruby"};function $e(w,I){function U(){if(!I)return null;var be=I.match(/^([^<]*)(<[^>]*>?)?/);return function vt(Ce){return I=I.substr(Ce.length),Ce}(be[1]?be[1]:be[2])}function ee(vt){return Se.innerHTML=vt,vt=Se.textContent,Se.textContent="",vt}function he(vt,be){var Ce=_e[vt];if(!Ce)return null;var Dn=w.document.createElement(Ce),Je=ct[vt];return Je&&be&&(Dn[Je]=be.trim()),Dn}for(var ne,le=w.document.createElement("div"),oe=le,ce=[];null!==(ne=U());)if("<"!==ne[0])oe.appendChild(w.document.createTextNode(ee(ne)));else{if("/"===ne[1]){ce.length&&ce[ce.length-1]===ne.substr(2).replace(">","")&&(ce.pop(),oe=oe.parentNode);continue}var ae,te=ke(ne.substr(1,ne.length-2));if(te){ae=w.document.createProcessingInstruction("timestamp",te),oe.appendChild(ae);continue}var xe=ne.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!xe||!(ae=he(xe[1],xe[3]))||re[(be=ae).localName]&&re[be.localName]!==oe.localName)continue;if(xe[2]){var dt=xe[2].split(".");dt.forEach(function(vt){var be=/^bg_/.test(vt),Ce=be?vt.slice(3):vt;pe.hasOwnProperty(Ce)&&(ae.style[be?"background-color":"color"]=pe[Ce])}),ae.className=dt.join(" ")}ce.push(xe[1]),oe.appendChild(ae),oe=ae}var be;return le}var qe=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Nt(w){for(var I=0;I<qe.length;I++){var U=qe[I];if(w>=U[0]&&w<=U[1])return!0}return!1}function cn(w){var I=[],U="";if(!w||!w.childNodes)return"ltr";function Y(oe,ne){for(var ce=ne.childNodes.length-1;ce>=0;ce--)oe.push(ne.childNodes[ce])}function he(oe){if(!oe||!oe.length)return null;var ne=oe.pop(),ce=ne.textContent||ne.innerText;if(ce){var te=ce.match(/^.*(\n|\r)/);return te?(oe.length=0,te[0]):ce}return"ruby"===ne.tagName?he(oe):ne.childNodes?(Y(oe,ne),he(oe)):void 0}for(Y(I,w);U=he(I);)for(var le=0;le<U.length;le++)if(Nt(U.charCodeAt(le)))return"rtl";return"ltr"}function se(){}function ye(w,I,U){se.call(this),this.cue=I,this.cueDiv=$e(w,I.text);var ee={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===I.vertical?"horizontal-tb":"lr"===I.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(ee,this.cueDiv),this.div=w.document.createElement("div"),ee={direction:cn(this.cueDiv),writingMode:""===I.vertical?"horizontal-tb":"lr"===I.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===I.align?"center":I.align,font:U.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(ee),this.div.appendChild(this.cueDiv);var Y=0;switch(I.positionAlign){case"start":case"line-left":Y=I.position;break;case"center":Y=I.position-I.size/2;break;case"end":case"line-right":Y=I.position-I.size}this.applyStyles(""===I.vertical?{left:this.formatStyle(Y,"%"),width:this.formatStyle(I.size,"%")}:{top:this.formatStyle(Y,"%"),height:this.formatStyle(I.size,"%")}),this.move=function(he){this.applyStyles({top:this.formatStyle(he.top,"px"),bottom:this.formatStyle(he.bottom,"px"),left:this.formatStyle(he.left,"px"),right:this.formatStyle(he.right,"px"),height:this.formatStyle(he.height,"px"),width:this.formatStyle(he.width,"px")})}}function Pe(w){var I,U,ee,Y;if(w.div){U=w.div.offsetHeight,ee=w.div.offsetWidth,Y=w.div.offsetTop;var he=(he=w.div.childNodes)&&(he=he[0])&&he.getClientRects&&he.getClientRects();w=w.div.getBoundingClientRect(),I=he?Math.max(he[0]&&he[0].height||0,w.height/he.length):0}this.left=w.left,this.right=w.right,this.top=w.top||Y,this.height=w.height||U,this.bottom=w.bottom||Y+(w.height||U),this.width=w.width||ee,this.lineHeight=void 0!==I?I:w.lineHeight}function Ze(w,I,U,ee){var he=new Pe(I),le=I.cue,oe=function Et(w){if("number"==typeof w.line&&(w.snapToLines||w.line>=0&&w.line<=100))return w.line;if(!w.track||!w.track.textTrackList||!w.track.textTrackList.mediaElement)return-1;for(var I=w.track,U=I.textTrackList,ee=0,Y=0;Y<U.length&&U[Y]!==I;Y++)"showing"===U[Y].mode&&ee++;return-1*++ee}(le),ne=[];if(le.snapToLines){var ce;switch(le.vertical){case"":ne=["+y","-y"],ce="height";break;case"rl":ne=["+x","-x"],ce="width";break;case"lr":ne=["-x","+x"],ce="width"}var te=he.lineHeight,ae=te*Math.round(oe),xe=U[ce]+te,dt=ne[0];Math.abs(ae)>xe&&(ae=ae<0?-1:1,ae*=Math.ceil(xe/te)*te),oe<0&&(ae+=""===le.vertical?U.height:U.width,ne=ne.reverse()),he.move(dt,ae)}else{var vt=he.lineHeight/U.height*100;switch(le.lineAlign){case"center":oe-=vt/2;break;case"end":oe-=vt}switch(le.vertical){case"":I.applyStyles({top:I.formatStyle(oe,"%")});break;case"rl":I.applyStyles({left:I.formatStyle(oe,"%")});break;case"lr":I.applyStyles({right:I.formatStyle(oe,"%")})}ne=["+y","-x","+x","-y"],he=new Pe(I)}var be=function Y(Ce,Dn){for(var Je,Zt=new Pe(Ce),Fn=1,nr=0;nr<Dn.length;nr++){for(;Ce.overlapsOppositeAxis(U,Dn[nr])||Ce.within(U)&&Ce.overlapsAny(ee);)Ce.move(Dn[nr]);if(Ce.within(U))return Ce;var Ii=Ce.intersectPercentage(U);Fn>Ii&&(Je=new Pe(Ce),Fn=Ii),Ce=new Pe(Zt)}return Je||Zt}(he,ne);I.move(be.toCSSCompatValues(U))}function ge(){}se.prototype.applyStyles=function(w,I){for(var U in I=I||this.div,w)w.hasOwnProperty(U)&&(I.style[U]=w[U])},se.prototype.formatStyle=function(w,I){return 0===w?0:w+I},(ye.prototype=me(se.prototype)).constructor=ye,Pe.prototype.move=function(w,I){switch(I=void 0!==I?I:this.lineHeight,w){case"+x":this.left+=I,this.right+=I;break;case"-x":this.left-=I,this.right-=I;break;case"+y":this.top+=I,this.bottom+=I;break;case"-y":this.top-=I,this.bottom-=I}},Pe.prototype.overlaps=function(w){return this.left<w.right&&this.right>w.left&&this.top<w.bottom&&this.bottom>w.top},Pe.prototype.overlapsAny=function(w){for(var I=0;I<w.length;I++)if(this.overlaps(w[I]))return!0;return!1},Pe.prototype.within=function(w){return this.top>=w.top&&this.bottom<=w.bottom&&this.left>=w.left&&this.right<=w.right},Pe.prototype.overlapsOppositeAxis=function(w,I){switch(I){case"+x":return this.left<w.left;case"-x":return this.right>w.right;case"+y":return this.top<w.top;case"-y":return this.bottom>w.bottom}},Pe.prototype.intersectPercentage=function(w){return Math.max(0,Math.min(this.right,w.right)-Math.max(this.left,w.left))*Math.max(0,Math.min(this.bottom,w.bottom)-Math.max(this.top,w.top))/(this.height*this.width)},Pe.prototype.toCSSCompatValues=function(w){return{top:this.top-w.top,bottom:w.bottom-this.bottom,left:this.left-w.left,right:w.right-this.right,height:this.height,width:this.width}},Pe.getSimpleBoxPosition=function(w){var I=w.div?w.div.offsetHeight:w.tagName?w.offsetHeight:0,U=w.div?w.div.offsetWidth:w.tagName?w.offsetWidth:0,ee=w.div?w.div.offsetTop:w.tagName?w.offsetTop:0;return{left:(w=w.div?w.div.getBoundingClientRect():w.tagName?w.getBoundingClientRect():w).left,right:w.right,top:w.top||ee,height:w.height||I,bottom:w.bottom||ee+(w.height||I),width:w.width||U}},ge.StringDecoder=function(){return{decode:function(w){if(!w)return"";if("string"!=typeof w)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(w))}}},ge.convertCueToDOMTree=function(w,I){return w&&I?$e(w,I):null},ge.processCues=function(w,I,U){if(!w||!I||!U)return null;for(;U.firstChild;)U.removeChild(U.firstChild);var ee=w.document.createElement("div");if(ee.style.position="absolute",ee.style.left="0",ee.style.right="0",ee.style.top="0",ee.style.bottom="0",ee.style.margin="1.5%",U.appendChild(ee),function Y(te){for(var ae=0;ae<te.length;ae++)if(te[ae].hasBeenReset||!te[ae].displayState)return!0;return!1}(I)){var le=[],oe=Pe.getSimpleBoxPosition(ee),ce={font:Math.round(.05*oe.height*100)/100+"px sans-serif"};!function(){for(var te,ae,xe=0;xe<I.length;xe++)te=new ye(w,ae=I[xe],ce),ee.appendChild(te.div),Ze(0,te,oe,le),ae.displayState=te.div,le.push(Pe.getSimpleBoxPosition(te))}()}else for(var he=0;he<I.length;he++)ee.appendChild(I[he].displayState)},(ge.Parser=function(w,I,U){U||(U=I,I={}),I||(I={}),this.window=w,this.vttjs=I,this.state="INITIAL",this.buffer="",this.decoder=U||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(w){if(!(w instanceof W))throw w;this.onparsingerror&&this.onparsingerror(w)},parse:function(w){var te,I=this;function U(){for(var te=I.buffer,ae=0;ae<te.length&&"\r"!==te[ae]&&"\n"!==te[ae];)++ae;var xe=te.substr(0,ae);return"\r"===te[ae]&&++ae,"\n"===te[ae]&&++ae,I.buffer=te.substr(ae),xe}w&&(I.buffer+=I.decoder.decode(w,{stream:!0}));try{var le;if("INITIAL"===I.state){if(!/\r\n|\n/.test(I.buffer))return this;var oe=(le=U()).match(/^WEBVTT([ \t].*)?$/);if(!oe||!oe[0])throw new W(W.Errors.BadSignature);I.state="HEADER"}for(var ne=!1;I.buffer;){if(!/\r\n|\n/.test(I.buffer))return this;switch(ne?ne=!1:le=U(),I.state){case"HEADER":/:/.test(le)?(te=le).match(/X-TIMESTAMP-MAP/)?J(te,function(ae,xe){"X-TIMESTAMP-MAP"===ae&&function Y(te){var ae=new K;J(te,function(xe,dt){switch(xe){case"MPEGT":ae.integer(xe+"S",dt);break;case"LOCA":ae.set(xe+"L",ke(dt))}},/[^\d]:/,/,/),I.ontimestampmap&&I.ontimestampmap({MPEGTS:ae.get("MPEGTS"),LOCAL:ae.get("LOCAL")})}(xe)},/=/):J(te,function(ae,xe){"Region"===ae&&function ee(te){var ae=new K;if(J(te,function(dt,vt){switch(dt){case"id":ae.set(dt,vt);break;case"width":ae.percent(dt,vt);break;case"lines":ae.integer(dt,vt);break;case"regionanchor":case"viewportanchor":var be=vt.split(",");if(2!==be.length)break;var Ce=new K;if(Ce.percent("x",be[0]),Ce.percent("y",be[1]),!Ce.has("x")||!Ce.has("y"))break;ae.set(dt+"X",Ce.get("x")),ae.set(dt+"Y",Ce.get("y"));break;case"scroll":ae.alt(dt,vt,["up"])}},/=/,/\s/),ae.has("id")){var xe=new(I.vttjs.VTTRegion||I.window.VTTRegion);xe.width=ae.get("width",100),xe.lines=ae.get("lines",3),xe.regionAnchorX=ae.get("regionanchorX",0),xe.regionAnchorY=ae.get("regionanchorY",100),xe.viewportAnchorX=ae.get("viewportanchorX",0),xe.viewportAnchorY=ae.get("viewportanchorY",100),xe.scroll=ae.get("scroll",""),I.onregion&&I.onregion(xe),I.regionList.push({id:ae.get("id"),region:xe})}}(xe)},/:/):le||(I.state="ID");continue;case"NOTE":le||(I.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(le)){I.state="NOTE";break}if(!le)continue;I.cue=new(I.vttjs.VTTCue||I.window.VTTCue)(0,0,"");try{I.cue.align="center"}catch{I.cue.align="middle"}if(I.state="CUE",-1===le.indexOf("--\x3e")){I.cue.id=le;continue}case"CUE":try{Ee(le,I.cue,I.regionList)}catch(te){I.reportOrThrowError(te),I.cue=null,I.state="BADCUE";continue}I.state="CUETEXT";continue;case"CUETEXT":var ce=-1!==le.indexOf("--\x3e");if(!le||ce&&(ne=!0)){I.oncue&&I.oncue(I.cue),I.cue=null,I.state="ID";continue}I.cue.text&&(I.cue.text+="\n"),I.cue.text+=le.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":le||(I.state="ID");continue}}}catch(te){I.reportOrThrowError(te),"CUETEXT"===I.state&&I.cue&&I.oncue&&I.oncue(I.cue),I.cue=null,I.state="INITIAL"===I.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var w=this;try{if(w.buffer+=w.decoder.decode(),(w.cue||"HEADER"===w.state)&&(w.buffer+="\n\n",w.parse()),"INITIAL"===w.state)throw new W(W.Errors.BadSignature)}catch(I){w.reportOrThrowError(I)}return w.onflush&&w.onflush(),this}},ze.exports=ge},472:ze=>{var ve={"":1,lr:1,rl:1},q={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function W(K){return"string"==typeof K&&!!q[K.toLowerCase()]&&K.toLowerCase()}function ke(K,J,Ee){this.hasBeenReset=!1;var Se="",_e=!1,pe=K,ct=J,re=Ee,$e=null,qe="",Nt=!0,cn="auto",Et="start",se="auto",ye="auto",Pe=100,Ze="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return Se},set:function(ge){Se=""+ge}},pauseOnExit:{enumerable:!0,get:function(){return _e},set:function(ge){_e=!!ge}},startTime:{enumerable:!0,get:function(){return pe},set:function(ge){if("number"!=typeof ge)throw new TypeError("Start time must be set to a number.");pe=ge,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return ct},set:function(ge){if("number"!=typeof ge)throw new TypeError("End time must be set to a number.");ct=ge,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return re},set:function(ge){re=""+ge,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return $e},set:function(ge){$e=ge,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return qe},set:function(ge){var mt=function me(K){return"string"==typeof K&&!!ve[K.toLowerCase()]&&K.toLowerCase()}(ge);if(!1===mt)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");qe=mt,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return Nt},set:function(ge){Nt=!!ge,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return cn},set:function(ge){if("number"!=typeof ge&&"auto"!==ge)throw new SyntaxError("Line: an invalid number or illegal string was specified.");cn=ge,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return Et},set:function(ge){var mt=W(ge);mt?(Et=mt,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return se},set:function(ge){if(ge<0||ge>100)throw new Error("Position must be between 0 and 100.");se=ge,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return ye},set:function(ge){var mt=W(ge);mt?(ye=mt,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return Pe},set:function(ge){if(ge<0||ge>100)throw new Error("Size must be between 0 and 100.");Pe=ge,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Ze},set:function(ge){var mt=W(ge);if(!mt)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Ze=mt,this.hasBeenReset=!0}}}),this.displayState=void 0}ke.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},ze.exports=ke},880:ze=>{var Oe={"":!0,up:!0};function q(W){return"number"==typeof W&&W>=0&&W<=100}ze.exports=function me(){var W=100,ke=3,K=0,J=100,Ee=0,Se=100,_e="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return W},set:function(pe){if(!q(pe))throw new Error("Width must be between 0 and 100.");W=pe}},lines:{enumerable:!0,get:function(){return ke},set:function(pe){if("number"!=typeof pe)throw new TypeError("Lines must be set to a number.");ke=pe}},regionAnchorY:{enumerable:!0,get:function(){return J},set:function(pe){if(!q(pe))throw new Error("RegionAnchorX must be between 0 and 100.");J=pe}},regionAnchorX:{enumerable:!0,get:function(){return K},set:function(pe){if(!q(pe))throw new Error("RegionAnchorY must be between 0 and 100.");K=pe}},viewportAnchorY:{enumerable:!0,get:function(){return Se},set:function(pe){if(!q(pe))throw new Error("ViewportAnchorY must be between 0 and 100.");Se=pe}},viewportAnchorX:{enumerable:!0,get:function(){return Ee},set:function(pe){if(!q(pe))throw new Error("ViewportAnchorX must be between 0 and 100.");Ee=pe}},scroll:{enumerable:!0,get:function(){return _e},set:function(pe){var ct=function ve(W){return"string"==typeof W&&!!Oe[W.toLowerCase()]&&W.toLowerCase()}(pe);!1===ct?console.warn("Scroll: an invalid or illegal string was specified."):_e=ct}}})}},893:()=>{},434:ze=>{function Oe(){return ze.exports=Oe=Object.assign?Object.assign.bind():function(ve){for(var q=1;q<arguments.length;q++){var me=arguments[q];for(var W in me)Object.prototype.hasOwnProperty.call(me,W)&&(ve[W]=me[W])}return ve},ze.exports.__esModule=!0,ze.exports.default=ze.exports,Oe.apply(this,arguments)}ze.exports=Oe,ze.exports.__esModule=!0,ze.exports.default=ze.exports}},ze=>{ze(ze.s=166)}]);